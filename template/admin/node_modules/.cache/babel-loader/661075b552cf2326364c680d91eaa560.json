{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/components/couponList/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/components/couponList/index.vue","mtime":1689324015140},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/babel.config.js","mtime":1689324015052},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/.babelrc","mtime":1689324015050},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvVm9sdW1lcy9tYWMvd2Vid29yay8yMDIzL2RhdGkvdGVtcGxhdGUvYWRtaW4vbm9kZV9tb2R1bGVzL0B2dWUvYmFiZWwtcHJlc2V0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHJlbGVhc2VkTGlzdEFwaSB9IGZyb20gJ0AvYXBpL21hcmtldGluZyc7CmltcG9ydCB7IGZvcm1hdERhdGUgYXMgX2Zvcm1hdERhdGUgfSBmcm9tICdAL3V0aWxzL3ZhbGlkYXRlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdpbmRleCcsCiAgZmlsdGVyczogewogICAgZm9ybWF0RGF0ZTogZnVuY3Rpb24gZm9ybWF0RGF0ZSh0aW1lKSB7CiAgICAgIGlmICh0aW1lICE9PSAwKSB7CiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lICogMTAwMCk7CiAgICAgICAgcmV0dXJuIF9mb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tJyk7CiAgICAgIH0KICAgIH0KICB9LAogIHByb3BzOiB7CiAgICBjb3Vwb25pZHM6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0sCiAgICB1cGRhdGVJZHM6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0sCiAgICB1cGRhdGVOYW1lOiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9LAogICAgbHVja0RyYXc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjdXJyZW50aWQ6IDAsCiAgICAgIHByb2R1Y3RSb3c6IHt9LAogICAgICBpc1RlbXBsYXRlOiBmYWxzZSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRhYmxlRnJvbTogewogICAgICAgIHJlY2VpdmVfdHlwZTogMywKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiAxMAogICAgICB9LAogICAgICB0b3RhbDogMCwKICAgICAgaWRzOiBbXSwKICAgICAgdGV4dHM6IFtdLAogICAgICBjb2x1bW5zOiBbewogICAgICAgIHRpdGxlOiAnSUQnLAogICAgICAgIGtleTogJ2lkJywKICAgICAgICB3aWR0aDogNjAKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5LyY5oOg5Yi45ZCN56ewJywKICAgICAgICBrZXk6ICd0aXRsZScsCiAgICAgICAgbWluV2lkdGg6IDE1MAogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICfkvJjmg6DliLjnsbvlnosnLAogICAgICAgIHNsb3Q6ICd0eXBlJywKICAgICAgICBtaW5XaWR0aDogODAKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn6Z2i5YC8JywKICAgICAgICBrZXk6ICdjb3Vwb25fcHJpY2UnLAogICAgICAgIG1pbldpZHRoOiAxMDAKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5pyA5L2O5raI6LS56aKdJywKICAgICAgICBrZXk6ICd1c2VfbWluX3ByaWNlJywKICAgICAgICBtaW5XaWR0aDogMTAwCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogJ+WPkeW4g+aVsOmHjycsCiAgICAgICAgc2xvdDogJ2NvdW50JywKICAgICAgICBtaW5XaWR0aDogMTIwCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogJ+acieaViOacn+mZkCcsCiAgICAgICAgc2xvdDogJ3N0YXJ0X3RpbWUnLAogICAgICAgIG1pbldpZHRoOiAxMjAKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn54q25oCBJywKICAgICAgICBzbG90OiAnc3RhdHVzJywKICAgICAgICBtaW5XaWR0aDogODAKICAgICAgfV0sCiAgICAgIGNvdXBvbkxpc3Q6IFtdLAogICAgICBzZWxlY3RlZElkczogbmV3IFNldCgpLAogICAgICBzZWxlY3RlZE5hbWVzOiBuZXcgU2V0KCkKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgd2F0Y2g6IHsKICAgIHVwZGF0ZUlkczogZnVuY3Rpb24gdXBkYXRlSWRzKG5ld1ZhbCkgewogICAgICB0aGlzLnNlbGVjdGVkSWRzID0gbmV3IFNldChuZXdWYWwpOwogICAgfSwKICAgIHVwZGF0ZU5hbWU6IGZ1bmN0aW9uIHVwZGF0ZU5hbWUobmV3VmFsKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWROYW1lcyA9IG5ldyBTZXQobmV3VmFsKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgdmFyIHJhZGlvID0gewogICAgICB3aWR0aDogNjAsCiAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7CiAgICAgICAgdmFyIGlkID0gcGFyYW1zLnJvdy5pZDsKICAgICAgICB2YXIgZmxhZyA9IGZhbHNlOwogICAgICAgIGlmIChfdGhpcy5jdXJyZW50aWQgPT09IGlkKSB7CiAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmxhZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICB2YXIgc2VsZiA9IF90aGlzOwogICAgICAgIHJldHVybiBoKCdkaXYnLCBbaCgnUmFkaW8nLCB7CiAgICAgICAgICBwcm9wczogewogICAgICAgICAgICB2YWx1ZTogZmxhZwogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICdvbi1jaGFuZ2UnOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHsKICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRpZCA9IGlkOwogICAgICAgICAgICAgIF90aGlzLnByb2R1Y3RSb3cgPSBwYXJhbXMucm93OwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSldKTsKICAgICAgfQogICAgfTsKICAgIHZhciBjaGVja2JveCA9IHsKICAgICAgdHlwZTogJ3NlbGVjdGlvbicsCiAgICAgIHdpZHRoOiA2MCwKICAgICAgYWxpZ246ICdjZW50ZXInCiAgICB9OwogICAgaWYgKHRoaXMubHVja0RyYXcpIHsKICAgICAgdGhpcy5jb2x1bW5zLnVuc2hpZnQocmFkaW8pOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5jb2x1bW5zLnVuc2hpZnQoY2hlY2tib3gpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy/lr7nosaHmlbDnu4Tljrvph43vvJsKICAgIHVuaXF1ZTogZnVuY3Rpb24gdW5pcXVlKGFycikgewogICAgICB2YXIgcmVzID0gbmV3IE1hcCgpOwogICAgICByZXR1cm4gYXJyLmZpbHRlcihmdW5jdGlvbiAoYXJyKSB7CiAgICAgICAgcmV0dXJuICFyZXMuaGFzKGFyci5pZCkgJiYgcmVzLnNldChhcnIuaWQsIDEpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3RBbGw6IGZ1bmN0aW9uIGhhbmRsZVNlbGVjdEFsbChzZWxlY3Rpb24pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIC8vIOWPlua2iOWFqOmAiSDmlbDnu4TkuLrnqboKICAgICAgaWYgKHNlbGVjdGlvbi5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyBjeSDoi6Xlj5bmtojlhajpgInvvIzliKDpmaTkv53lrZjlnKhzZWxlY3RlZElkc+mHjOWSjOW9k+WJjXRhYmxl5pWw5o2u55qEaWTkuIDoh7TnmoTmlbDmja7vvIzovr7liLDvvIzlvZPliY3pobXlj5bmtojlhajpgInnmoTmlYjmnpwKICAgICAgICAvLyDlvZPliY3pobXnmoR0YWJsZeaVsOaNrgogICAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgICB2YXIgZGF0YSA9IHRoYXQuJHJlZnMudGFibGUuZGF0YTsKICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGlmICh0aGF0LnNlbGVjdGVkSWRzLmhhcyhpdGVtLmlkKSkgewogICAgICAgICAgICB0aGF0LnNlbGVjdGVkSWRzLmRlbGV0ZShpdGVtLmlkKTsKICAgICAgICAgICAgdmFyIG5hbWVMaXN0ID0gdGhhdC51bmlxdWUoQXJyYXkuZnJvbSh0aGF0LnNlbGVjdGVkTmFtZXMpKTsKICAgICAgICAgICAgdGhhdC51bmlxdWUoQXJyYXkuZnJvbSh0aGF0LnNlbGVjdGVkTmFtZXMpKS5mb3JFYWNoKGZ1bmN0aW9uIChqLCBpbmRleCkgewogICAgICAgICAgICAgIGlmIChqLmlkID09PSBpdGVtLmlkKSB7CiAgICAgICAgICAgICAgICBuYW1lTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoYXQuc2VsZWN0ZWROYW1lcyA9IG5ldyBTZXQobmFtZUxpc3QpOwogICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGVkTmFtZXMuY2xlYXIoKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzZWxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgX3RoaXMyLnNlbGVjdGVkSWRzLmFkZChpdGVtLmlkKTsKICAgICAgICAgIF90aGlzMi5zZWxlY3RlZE5hbWVzLmFkZCh7CiAgICAgICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIC8v56Gu5L+dZG9t5Yqg6L295a6M5q+VCiAgICAgICAgX3RoaXMyLnNldENoZWNrZWQoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gIOmAieS4reafkOS4gOihjAogICAgaGFuZGxlU2VsZWN0Um93OiBmdW5jdGlvbiBoYW5kbGVTZWxlY3RSb3coc2VsZWN0aW9uLCByb3cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHRoaXMuc2VsZWN0ZWRJZHMuYWRkKHJvdy5pZCk7CiAgICAgIHRoaXMuc2VsZWN0ZWROYW1lcy5hZGQoewogICAgICAgIGlkOiByb3cuaWQsCiAgICAgICAgdGl0bGU6IHJvdy50aXRsZQogICAgICB9KTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIC8v56Gu5L+dZG9t5Yqg6L295a6M5q+VCiAgICAgICAgX3RoaXMzLnNldENoZWNrZWQoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gIOWPlua2iOafkOS4gOihjAogICAgaGFuZGxlQ2FuY2VsUm93OiBmdW5jdGlvbiBoYW5kbGVDYW5jZWxSb3coc2VsZWN0aW9uLCByb3cpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5zZWxlY3RlZElkcy5kZWxldGUocm93LmlkKTsKICAgICAgdmFyIG5hbWVMaXN0ID0gQXJyYXkuZnJvbSh0aGF0LnNlbGVjdGVkTmFtZXMpOwogICAgICBBcnJheS5mcm9tKHRoYXQuc2VsZWN0ZWROYW1lcykuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpZiAoaXRlbS5pZCA9PT0gcm93LmlkKSB7CiAgICAgICAgICBuYW1lTGlzdC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoYXQuc2VsZWN0ZWROYW1lcyA9IG5ldyBTZXQobmFtZUxpc3QpOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgLy/noa7kv51kb23liqDovb3lrozmr5UKICAgICAgICBfdGhpczQuc2V0Q2hlY2tlZCgpOwogICAgICB9KTsKICAgIH0sCiAgICBzZXRDaGVja2VkOiBmdW5jdGlvbiBzZXRDaGVja2VkKCkgewogICAgICB0aGlzLmlkcyA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLnNlbGVjdGVkSWRzKTsKICAgICAgdGhpcy50ZXh0cyA9IF90b0NvbnN1bWFibGVBcnJheSh0aGlzLnNlbGVjdGVkTmFtZXMpOwogICAgICAvLyDmib7liLDnu5HlrprnmoR0YWJsZeeahHJlZuWvueW6lOeahGRvbe+8jOaJvuWIsHRhYmxl55qEb2JqRGF0YeWvueixoe+8jG9iakRhdGHkv53lrZjnmoTmmK/lvZPliY3pobXnmoTmlbDmja4KICAgICAgdmFyIG9iakRhdGEgPSB0aGlzLiRyZWZzLnRhYmxlLm9iakRhdGE7CiAgICAgIGZvciAodmFyIGluZGV4IGluIG9iakRhdGEpIHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZElkcy5oYXMob2JqRGF0YVtpbmRleF0uaWQpKSB7CiAgICAgICAgICAvLyBjeSDlvIrnq68g5q+P5qyh5YiH5o2ic2VsZWN06YO95Lya6Kem5Y+RdGFibGXnmoRvbi1zZWxlY3Tkuovku7YKICAgICAgICAgIC8vIHRoaXMuJHJlZnMucHVyY2hhc2VUYWJsZS50b2dnbGVTZWxlY3QoaW5kZXgpIC8vIOWcqOS/neWtmOmAieS4reeahGlkc+eahHNldOWQiOmbhumHjOaJvuS4juW9k+WJjemhteaVsOaNrmlk5LiA5qC355qE6KGM77yM5L2/55SodG9nZ2xlU2VsZWN077yIaW5kZXjvvInvvIzlsIbov5nkuIDooYzpgInkuK0KICAgICAgICAgIC8vIGN5IOaUuei/mwogICAgICAgICAgb2JqRGF0YVtpbmRleF0uX2lzQ2hlY2tlZCA9IHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIHRoaXMuaXNUZW1wbGF0ZSA9IGZhbHNlOwogICAgICBpZiAodGhpcy5sdWNrRHJhdykgewogICAgICAgIHRoaXMuY3VycmVudGlkID0gMDsKICAgICAgfQogICAgfSwKICAgIHRhYmxlTGlzdDogZnVuY3Rpb24gdGFibGVMaXN0KCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgcmVsZWFzZWRMaXN0QXBpKHRoaXMudGFibGVGcm9tKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgIF90aGlzNS5jb3Vwb25MaXN0ID0gZGF0YS5saXN0OwogICAgICAgIF90aGlzNS4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgLy/noa7kv51kb23liqDovb3lrozmr5UKICAgICAgICAgIF90aGlzNS5zZXRDaGVja2VkKCk7CiAgICAgICAgfSk7CiAgICAgICAgX3RoaXM1LnRvdGFsID0gZGF0YS5jb3VudDsKICAgICAgICBfdGhpczUubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBvazogZnVuY3Rpb24gb2soKSB7CiAgICAgIGlmICh0aGlzLmx1Y2tEcmF3KSB7CiAgICAgICAgdGhpcy4kZW1pdCgnZ2V0Q291cG9uSWQnLCB0aGlzLnByb2R1Y3RSb3cpOwogICAgICAgIHRoaXMuY3VycmVudGlkID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRlbWl0KCduYW1lSWQnLCB0aGlzLmlkcywgdGhpcy50ZXh0cyk7CiAgICAgIH0KICAgIH0sCiAgICByZWNlaXZlUGFnZUNoYW5nZTogZnVuY3Rpb24gcmVjZWl2ZVBhZ2VDaGFuZ2UoaW5kZXgpIHsKICAgICAgdGhpcy50YWJsZUZyb20ucGFnZSA9IGluZGV4OwogICAgICB0aGlzLnRhYmxlTGlzdCgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["releasedListApi","formatDate","name","filters","time","date","Date","props","couponids","type","Array","updateIds","updateName","luckDraw","Boolean","default","data","currentid","productRow","isTemplate","loading","tableFrom","receive_type","page","limit","total","ids","texts","columns","title","key","width","minWidth","slot","couponList","selectedIds","Set","selectedNames","mounted","watch","newVal","created","_this","radio","align","render","h","params","id","row","flag","self","value","on","onChange","checkbox","unshift","methods","unique","arr","res","Map","filter","has","set","handleSelectAll","selection","_this2","length","that","$refs","table","forEach","item","delete","nameList","from","j","index","splice","add","$nextTick","setChecked","handleSelectRow","_this3","handleCancelRow","_this4","_toConsumableArray","objData","_isChecked","cancel","tableList","_this5","then","list","count","ok","$emit","receivePageChange"],"sources":["src/components/couponList/index.vue"],"sourcesContent":["<template>\n  <div>\n    <Modal v-model=\"isTemplate\" title=\"优惠券列表\" width=\"60%\" @on-ok=\"ok\" @on-cancel=\"cancel\">\n      <Table\n        :columns=\"columns\"\n        :data=\"couponList\"\n        ref=\"table\"\n        class=\"mt25\"\n        :loading=\"loading\"\n        highlight-row\n        @on-select=\"handleSelectRow\"\n        @on-select-cancel=\"handleCancelRow\"\n        @on-select-all=\"handleSelectAll\"\n        @on-select-all-cancel=\"handleSelectAll\"\n        no-userFrom-text=\"暂无数据\"\n        no-filtered-userFrom-text=\"暂无筛选结果\"\n      >\n        <template slot-scope=\"{ row, index }\" slot=\"count\">\n          <span v-if=\"row.is_permanent\">不限量</span>\n          <div v-else>\n            <span class=\"fa\">发布：{{ row.total_count }}</span>\n            <span class=\"sheng\">剩余：{{ row.remain_count }}</span>\n          </div>\n        </template>\n        <template slot-scope=\"{ row, index }\" slot=\"start_time\">\n          <div v-if=\"row.start_time\">{{ row.start_time | formatDate }} - {{ row.end_time | formatDate }}</div>\n          <span v-else>不限时</span>\n        </template>\n        <template slot-scope=\"{ row }\" slot=\"type\">\n          <span v-if=\"row.type === 1\">品类券</span>\n          <span v-else-if=\"row.type === 2\">商品券</span>\n          <span v-else-if=\"row.type === 3\">会员券</span>\n          <span v-else>通用券</span>\n        </template>\n        <template slot-scope=\"{ row, index }\" slot=\"status\">\n          <Tag color=\"blue\" v-show=\"row.status === 1\">正常</Tag>\n          <Tag color=\"gold\" v-show=\"row.status === 0\">未开启</Tag>\n          <Tag color=\"red\" v-show=\"row.status === -1\">已失效</Tag>\n        </template>\n      </Table>\n      <div class=\"acea-row row-right page\">\n        <Page :total=\"total\" show-elevator show-total @on-change=\"receivePageChange\" :page-size=\"tableFrom.limit\" />\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { releasedListApi } from '@/api/marketing';\nimport { formatDate } from '@/utils/validate';\n\nexport default {\n  name: 'index',\n  filters: {\n    formatDate(time) {\n      if (time !== 0) {\n        let date = new Date(time * 1000);\n        return formatDate(date, 'yyyy-MM-dd hh:mm');\n      }\n    },\n  },\n  props: {\n    couponids: {\n      type: Array,\n    },\n    updateIds: {\n      type: Array,\n    },\n    updateName: {\n      type: Array,\n    },\n    luckDraw: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      currentid: 0,\n      productRow: {},\n      isTemplate: false,\n      loading: false,\n      tableFrom: {\n        receive_type: 3,\n        page: 1,\n        limit: 10,\n      },\n      total: 0,\n      ids: [],\n      texts: [],\n      columns: [\n        {\n          title: 'ID',\n          key: 'id',\n          width: 60,\n        },\n        {\n          title: '优惠券名称',\n          key: 'title',\n          minWidth: 150,\n        },\n        {\n          title: '优惠券类型',\n          slot: 'type',\n          minWidth: 80,\n        },\n        {\n          title: '面值',\n          key: 'coupon_price',\n          minWidth: 100,\n        },\n        {\n          title: '最低消费额',\n          key: 'use_min_price',\n          minWidth: 100,\n        },\n        {\n          title: '发布数量',\n          slot: 'count',\n          minWidth: 120,\n        },\n        {\n          title: '有效期限',\n          slot: 'start_time',\n          minWidth: 120,\n        },\n        {\n          title: '状态',\n          slot: 'status',\n          minWidth: 80,\n        },\n      ],\n      couponList: [],\n      selectedIds: new Set(),\n      selectedNames: new Set(),\n    };\n  },\n  mounted() {},\n  watch: {\n    updateIds: function (newVal) {\n      this.selectedIds = new Set(newVal);\n    },\n    updateName: function (newVal) {\n      this.selectedNames = new Set(newVal);\n    },\n  },\n  created() {\n    let radio = {\n      width: 60,\n      align: 'center',\n      render: (h, params) => {\n        let id = params.row.id;\n        let flag = false;\n        if (this.currentid === id) {\n          flag = true;\n        } else {\n          flag = false;\n        }\n        let self = this;\n        return h('div', [\n          h('Radio', {\n            props: {\n              value: flag,\n            },\n            on: {\n              'on-change': () => {\n                self.currentid = id;\n                this.productRow = params.row;\n              },\n            },\n          }),\n        ]);\n      },\n    };\n\n    let checkbox = {\n      type: 'selection',\n      width: 60,\n      align: 'center',\n    };\n    if (this.luckDraw) {\n      this.columns.unshift(radio);\n    } else {\n      this.columns.unshift(checkbox);\n    }\n  },\n  methods: {\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n    },\n    handleSelectAll(selection) {\n      // 取消全选 数组为空\n      if (selection.length === 0) {\n        // cy 若取消全选，删除保存在selectedIds里和当前table数据的id一致的数据，达到，当前页取消全选的效果\n        // 当前页的table数据\n        let that = this;\n        let data = that.$refs.table.data;\n        data.forEach((item) => {\n          if (that.selectedIds.has(item.id)) {\n            that.selectedIds.delete(item.id);\n            let nameList = that.unique(Array.from(that.selectedNames));\n            that.unique(Array.from(that.selectedNames)).forEach((j, index) => {\n              if (j.id === item.id) {\n                nameList.splice(index, 1);\n              }\n            });\n            that.selectedNames = new Set(nameList);\n            // this.selectedNames.clear();\n          }\n        });\n      } else {\n        selection.forEach((item) => {\n          this.selectedIds.add(item.id);\n          this.selectedNames.add({ id: item.id, title: item.title });\n        });\n      }\n      this.$nextTick(() => {\n        //确保dom加载完毕\n        this.setChecked();\n      });\n    },\n\n    //  选中某一行\n    handleSelectRow(selection, row) {\n      this.selectedIds.add(row.id);\n      this.selectedNames.add({ id: row.id, title: row.title });\n      this.$nextTick(() => {\n        //确保dom加载完毕\n        this.setChecked();\n      });\n    },\n    //  取消某一行\n    handleCancelRow(selection, row) {\n      let that = this;\n      that.selectedIds.delete(row.id);\n      let nameList = Array.from(that.selectedNames);\n      Array.from(that.selectedNames).forEach((item, index) => {\n        if (item.id === row.id) {\n          nameList.splice(index, 1);\n        }\n      });\n      that.selectedNames = new Set(nameList);\n      this.$nextTick(() => {\n        //确保dom加载完毕\n        this.setChecked();\n      });\n    },\n    setChecked() {\n      this.ids = [...this.selectedIds];\n      this.texts = [...this.selectedNames];\n      // 找到绑定的table的ref对应的dom，找到table的objData对象，objData保存的是当前页的数据\n      let objData = this.$refs.table.objData;\n      for (let index in objData) {\n        if (this.selectedIds.has(objData[index].id)) {\n          // cy 弊端 每次切换select都会触发table的on-select事件\n          // this.$refs.purchaseTable.toggleSelect(index) // 在保存选中的ids的set合集里找与当前页数据id一样的行，使用toggleSelect（index），将这一行选中\n          // cy 改进\n          objData[index]._isChecked = true;\n        }\n      }\n    },\n    cancel() {\n      this.isTemplate = false;\n      if (this.luckDraw) {\n        this.currentid = 0;\n      }\n    },\n    tableList() {\n      this.loading = true;\n      releasedListApi(this.tableFrom).then((res) => {\n        let data = res.data;\n        this.couponList = data.list;\n        this.$nextTick(() => {\n          //确保dom加载完毕\n          this.setChecked();\n        });\n        this.total = data.count;\n        this.loading = false;\n      });\n    },\n    ok() {\n      if (this.luckDraw) {\n        this.$emit('getCouponId', this.productRow);\n        this.currentid = 0;\n      } else {\n        this.$emit('nameId', this.ids, this.texts);\n      }\n    },\n    receivePageChange(index) {\n      this.tableFrom.page = index;\n      this.tableList();\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"],"mappings":"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"}]}