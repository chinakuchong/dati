{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/kefu/mobile/goods/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/kefu/mobile/goods/list.vue","mtime":1689324015212},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/babel.config.js","mtime":1689324015052},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/.babelrc","mtime":1689324015050},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFNvY2tldCB9IGZyb20gJ0AvbGlicy9zb2NrZXQnOwppbXBvcnQgeyBwcm9kdWN0Q2FydCwgcHJvZHVjdEhvdCwgcHJvZHVjdFZpc2l0IH0gZnJvbSAnQC9hcGkva2VmdS5qcyc7CmltcG9ydCB7IHNlcnZpY2VJbmZvIH0gZnJvbSAnQC9hcGkva2VmdV9tb2JpbGUnOwppbXBvcnQgZW1wdHkgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9lbXB0eSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJvZHVjdF9pbmZvJywKICBjb21wb25lbnRzOiB7CiAgICBlbXB0eTogZW1wdHkKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcHM6IHsKICAgICAgICBiYXI6IHsKICAgICAgICAgIGJhY2tncm91bmQ6ICcjMzkzMjMyJywKICAgICAgICAgIG9wYWNpdHk6ICcuNScsCiAgICAgICAgICBzaXplOiAnMnB4JwogICAgICAgIH0KICAgICAgfSwKICAgICAgc2VhcmNoVHh0OiAnJywKICAgICAgdGFiQ3VyOiAwLAogICAgICB0YWJMaXN0OiBbewogICAgICAgIGtleTogMCwKICAgICAgICB0aXRsZTogJ+i0reS5sCcsCiAgICAgICAgYXBpOiAncHJvZHVjdENhcnQnCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDEsCiAgICAgICAgdGl0bGU6ICfotrPov7knLAogICAgICAgIGFwaTogJ3Byb2R1Y3RIb3QnCiAgICAgIH0sIHsKICAgICAgICBrZXk6IDIsCiAgICAgICAgdGl0bGU6ICfng63plIAnLAogICAgICAgIGFwaTogJ3Byb2R1Y3RWaXNpdCcKICAgICAgfV0sCiAgICAgIHRvVWlkOiAnJywKICAgICAgbGlzdDogW10KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdGFiQ3VyOiBmdW5jdGlvbiB0YWJDdXIoblZhbCwgb1ZhbCkgewogICAgICB0aGlzLmxpc3QgPSBbXTsKICAgICAgaWYgKG5WYWwgPT0gMCkgcmV0dXJuIHRoaXMuZ2V0QnV5TGlzdCgpOwogICAgICBpZiAoblZhbCA9PSAxKSByZXR1cm4gdGhpcy5nZXRWaXNpdCgpOwogICAgICBpZiAoblZhbCA9PSAyKSByZXR1cm4gdGhpcy5nZXRQcm9kdWN0SG90KCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgc2VydmljZUluZm8oKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgd2luZG93LmRvY3VtZW50LnRpdGxlID0gIiIuY29uY2F0KHJlcy5kYXRhLnNpdGVfbmFtZSwgIiAtIFx1NTU0Nlx1NTRDMVx1NTIxN1x1ODg2OCIpOwogICAgfSk7CiAgICB0aGlzLnRvVWlkID0gdGhpcy4kcm91dGUucXVlcnkudG9VaWQ7CiAgICB0aGlzLmdldEJ1eUxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOi0reS5sOiusOW9lQogICAgZ2V0QnV5TGlzdDogZnVuY3Rpb24gZ2V0QnV5TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgcHJvZHVjdENhcnQodGhpcy50b1VpZCwgewogICAgICAgIHN0b3JlX25hbWU6IHRoaXMuc2VhcmNoVHh0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLmxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g54Ot6ZSA5ZWG5ZOBCiAgICBnZXRQcm9kdWN0SG90OiBmdW5jdGlvbiBnZXRQcm9kdWN0SG90KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgcHJvZHVjdEhvdCh0aGlzLnRvVWlkLCB7CiAgICAgICAgc3RvcmVfbmFtZTogdGhpcy5zZWFyY2hUeHQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgX3RoaXMyLmxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6Laz6L+5CiAgICBnZXRWaXNpdDogZnVuY3Rpb24gZ2V0VmlzaXQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBwcm9kdWN0VmlzaXQodGhpcy50b1VpZCwgewogICAgICAgIHN0b3JlX25hbWU6IHRoaXMuc2VhcmNoVHh0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMy5saXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaOqOmAgQogICAgYmluZ0dvb2RzOiBmdW5jdGlvbiBiaW5nR29vZHMoaXRlbSkgewogICAgICB2YXIgb2JqID0gewogICAgICAgIHR5cGU6ICdjaGF0JywKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBtc246IGl0ZW0uaWQsCiAgICAgICAgICB0eXBlOiA1LAogICAgICAgICAgdG9fdWlkOiB0aGlzLnRvVWlkCiAgICAgICAgfQogICAgICB9OwogICAgICBTb2NrZXQudGhlbihmdW5jdGlvbiAod3MpIHsKICAgICAgICB3cy5zZW5kKG9iaik7CiAgICAgIH0pOwogICAgICAvLyB0aGlzLmJ1cy4kZW1pdCgnc2VsZWN0R29vZHMnLGl0ZW0pCiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICB9LAogICAgLy8g6aG26YOo6YCJ6aG55Y2h5YiH5o2iCiAgICBiaW5kVGFiOiBmdW5jdGlvbiBiaW5kVGFiKGl0ZW0pIHsKICAgICAgdGhpcy50YWJDdXIgPSBpdGVtLmtleTsKICAgIH0sCiAgICAvLyDmkJzntKIKICAgIGJpbmRTZWFyY2g6IGZ1bmN0aW9uIGJpbmRTZWFyY2goKSB7CiAgICAgIGlmICh0aGlzLnRhYkN1ciA9PSAwKSByZXR1cm4gdGhpcy5nZXRCdXlMaXN0KCk7CiAgICAgIGlmICh0aGlzLnRhYkN1ciA9PSAxKSByZXR1cm4gdGhpcy5nZXRWaXNpdCgpOwogICAgICBpZiAodGhpcy50YWJDdXIgPT0gMikgcmV0dXJuIHRoaXMuZ2V0UHJvZHVjdEhvdCgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["Socket","productCart","productHot","productVisit","serviceInfo","empty","name","components","data","ops","bar","background","opacity","size","searchTxt","tabCur","tabList","key","title","api","toUid","list","watch","nVal","oVal","getBuyList","getVisit","getProductHot","created","then","res","window","document","concat","site_name","$route","query","methods","_this","store_name","_this2","_this3","bingGoods","item","obj","type","msn","id","to_uid","ws","send","$router","go","bindTab","bindSearch"],"sources":["src/pages/kefu/mobile/goods/list.vue"],"sourcesContent":["<template>\n  <div class=\"product_info\">\n    <div class=\"head\">\n      <div class=\"tab-box\">\n        <div\n          class=\"tab-item\"\n          :class=\"{ on: index == tabCur }\"\n          v-for=\"(item, index) in tabList\"\n          :key=\"index\"\n          @click=\"bindTab(item)\"\n        >\n          {{ item.title }}\n        </div>\n      </div>\n      <div class=\"search-box\">\n        <Input\n          type=\"text\"\n          placeholder=\"搜索商品名称/ID\"\n          v-model=\"searchTxt\"\n          style=\"border-radius: 0.39rem; background: #f5f6f9\"\n          :search=\"true\"\n          @on-search=\"bindSearch\"\n        />\n      </div>\n    </div>\n    <div class=\"scroll-box\" v-if=\"list.length > 0\">\n      <vue-scroll :ops=\"ops\">\n        <div class=\"goods-item\" v-for=\"(item, index) in list\" :key=\"index\">\n          <img :src=\"item.image\" mode=\"\" />\n          <div class=\"info\">\n            <div class=\"title line2 mb15\">{{ item.store_name }}</div>\n            <div class=\"num\">\n              <span class=\"mr15\">库存 {{ item.stock }}</span>\n              <span>销量 {{ item.sales }}</span>\n            </div>\n          </div>\n          <div class=\"right\">\n            <div class=\"price\">￥{{ item.price }}</div>\n            <div class=\"btn\" @click=\"bingGoods(item)\">推送</div>\n          </div>\n        </div>\n        <div class=\"slot-load\" slot=\"load-deactive\"></div>\n        <div class=\"slot-load\" slot=\"load-active\">下滑加载更多</div>\n      </vue-scroll>\n    </div>\n    <empty v-else msg=\"暂无商品信息\"></empty>\n  </div>\n</template>\n\n<script>\nimport { Socket } from '@/libs/socket';\nimport { productCart, productHot, productVisit } from '@/api/kefu.js';\nimport { serviceInfo } from '@/api/kefu_mobile';\nimport empty from '../../components/empty';\nexport default {\n  name: 'product_info',\n  components: {\n    empty,\n  },\n  data() {\n    return {\n      ops: {\n        bar: {\n          background: '#393232',\n          opacity: '.5',\n          size: '2px',\n        },\n      },\n      searchTxt: '',\n      tabCur: 0,\n      tabList: [\n        {\n          key: 0,\n          title: '购买',\n          api: 'productCart',\n        },\n        {\n          key: 1,\n          title: '足迹',\n          api: 'productHot',\n        },\n        {\n          key: 2,\n          title: '热销',\n          api: 'productVisit',\n        },\n      ],\n      toUid: '',\n      list: [],\n    };\n  },\n  watch: {\n    tabCur(nVal, oVal) {\n      this.list = [];\n      if (nVal == 0) return this.getBuyList();\n      if (nVal == 1) return this.getVisit();\n      if (nVal == 2) return this.getProductHot();\n    },\n  },\n  created() {\n    serviceInfo().then((res) => {\n      window.document.title = `${res.data.site_name} - 商品列表`;\n    });\n    this.toUid = this.$route.query.toUid;\n    this.getBuyList();\n  },\n  methods: {\n    // 购买记录\n    getBuyList() {\n      productCart(this.toUid, {\n        store_name: this.searchTxt,\n      }).then((res) => {\n        this.list = res.data;\n      });\n    },\n    // 热销商品\n    getProductHot() {\n      productHot(this.toUid, {\n        store_name: this.searchTxt,\n      }).then((res) => {\n        this.list = res.data;\n      });\n    },\n    // 足迹\n    getVisit() {\n      productVisit(this.toUid, {\n        store_name: this.searchTxt,\n      }).then((res) => {\n        this.list = res.data;\n      });\n    },\n    // 推送\n    bingGoods(item) {\n      let obj = {\n        type: 'chat',\n        data: {\n          msn: item.id,\n          type: 5,\n          to_uid: this.toUid,\n        },\n      };\n      Socket.then((ws) => {\n        ws.send(obj);\n      });\n      // this.bus.$emit('selectGoods',item)\n      this.$router.go(-1);\n    },\n    // 顶部选项卡切换\n    bindTab(item) {\n      this.tabCur = item.key;\n    },\n    // 搜索\n    bindSearch() {\n      if (this.tabCur == 0) return this.getBuyList();\n      if (this.tabCur == 1) return this.getVisit();\n      if (this.tabCur == 2) return this.getProductHot();\n    },\n  },\n};\n</script>\n<style>\npage {\n  height: 100%;\n}\n</style>\n<style lang=\"stylus\" scoped>\n.product_info{\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n    .head{\n        background: #fff;\n        .tab-box{\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            height: .8rem;\n            padding: 0 1.46rem;\n            .tab-item{\n                height: .8rem;\n                line-height: .8rem;\n                padding: 0 .15rem;\n                font-size: .28rem;\n                color: #282828;\n                &.on{\n                    border-bottom: 1px solid #3875EA;\n                }\n            }\n        }\n        .search-box{\n            display: flex;\n            align-items: center;\n            height: 1.28rem;\n            padding: 0 .3rem;\n            input{\n                display: block;\n                width: 100%;\n                height: .68rem;\n                padding-left: .7rem;\n                background: #F5F6F9;\n                border-radius: .39rem;\n                box-sizing: border-box;\n                /*background-image: url(\"../static/search.png\");*/\n            }\n        }\n    }\n    .scroll-box{\n        flex: 1;\n        overflow: hidden;\n        .goods-item{\n            display: flex;\n            padding: .3rem;\n            margin-top: .15rem;\n            background-color: #fff;\n            img{\n                width: 1.7rem;\n                height: 1.7rem;\n                border-radius: 0.06rem;\n            }\n            .info{\n                width: 3.26rem;\n                margin-left: .22rem;\n                .title{\n                    font-size: .28rem;\n                    color: #282828;\n                }\n                .num{\n                    margin-top: .1rem;\n                    font-size: .24rem;\n                    color: #9F9F9F;\n                }\n            }\n            .right{\n                flex: 1;\n                display: flex;\n                flex-direction: column;\n                justify-content: space-between;\n                margin-left: .36rem;\n                .price{\n                    color: #F74C31;\n                }\n                .btn{\n                    width: 100%;\n                    height: .6rem;\n                    line-height: .6rem;\n                    text-align: center;\n                    color: #fff;\n                    background: #3875EA;\n                    border-radius: 0.06rem;\n                }\n            }\n        }\n    }\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,SAAAA,MAAA;AACA,SAAAC,WAAA,EAAAC,UAAA,EAAAC,YAAA;AACA,SAAAC,WAAA;AACA,OAAAC,KAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAF,KAAA,EAAAA;EACA;EACAG,IAAA,WAAAA,KAAA;IACA;MACAC,GAAA;QACAC,GAAA;UACAC,UAAA;UACAC,OAAA;UACAC,IAAA;QACA;MACA;MACAC,SAAA;MACAC,MAAA;MACAC,OAAA,GACA;QACAC,GAAA;QACAC,KAAA;QACAC,GAAA;MACA,GACA;QACAF,GAAA;QACAC,KAAA;QACAC,GAAA;MACA,GACA;QACAF,GAAA;QACAC,KAAA;QACAC,GAAA;MACA,EACA;MACAC,KAAA;MACAC,IAAA;IACA;EACA;EACAC,KAAA;IACAP,MAAA,WAAAA,OAAAQ,IAAA,EAAAC,IAAA;MACA,KAAAH,IAAA;MACA,IAAAE,IAAA,mBAAAE,UAAA;MACA,IAAAF,IAAA,mBAAAG,QAAA;MACA,IAAAH,IAAA,mBAAAI,aAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACAxB,WAAA,GAAAyB,IAAA,WAAAC,GAAA;MACAC,MAAA,CAAAC,QAAA,CAAAd,KAAA,MAAAe,MAAA,CAAAH,GAAA,CAAAtB,IAAA,CAAA0B,SAAA;IACA;IACA,KAAAd,KAAA,QAAAe,MAAA,CAAAC,KAAA,CAAAhB,KAAA;IACA,KAAAK,UAAA;EACA;EACAY,OAAA;IACA;IACAZ,UAAA,WAAAA,WAAA;MAAA,IAAAa,KAAA;MACArC,WAAA,MAAAmB,KAAA;QACAmB,UAAA,OAAAzB;MACA,GAAAe,IAAA,WAAAC,GAAA;QACAQ,KAAA,CAAAjB,IAAA,GAAAS,GAAA,CAAAtB,IAAA;MACA;IACA;IACA;IACAmB,aAAA,WAAAA,cAAA;MAAA,IAAAa,MAAA;MACAtC,UAAA,MAAAkB,KAAA;QACAmB,UAAA,OAAAzB;MACA,GAAAe,IAAA,WAAAC,GAAA;QACAU,MAAA,CAAAnB,IAAA,GAAAS,GAAA,CAAAtB,IAAA;MACA;IACA;IACA;IACAkB,QAAA,WAAAA,SAAA;MAAA,IAAAe,MAAA;MACAtC,YAAA,MAAAiB,KAAA;QACAmB,UAAA,OAAAzB;MACA,GAAAe,IAAA,WAAAC,GAAA;QACAW,MAAA,CAAApB,IAAA,GAAAS,GAAA,CAAAtB,IAAA;MACA;IACA;IACA;IACAkC,SAAA,WAAAA,UAAAC,IAAA;MACA,IAAAC,GAAA;QACAC,IAAA;QACArC,IAAA;UACAsC,GAAA,EAAAH,IAAA,CAAAI,EAAA;UACAF,IAAA;UACAG,MAAA,OAAA5B;QACA;MACA;MACApB,MAAA,CAAA6B,IAAA,WAAAoB,EAAA;QACAA,EAAA,CAAAC,IAAA,CAAAN,GAAA;MACA;MACA;MACA,KAAAO,OAAA,CAAAC,EAAA;IACA;IACA;IACAC,OAAA,WAAAA,QAAAV,IAAA;MACA,KAAA5B,MAAA,GAAA4B,IAAA,CAAA1B,GAAA;IACA;IACA;IACAqC,UAAA,WAAAA,WAAA;MACA,SAAAvC,MAAA,mBAAAU,UAAA;MACA,SAAAV,MAAA,mBAAAW,QAAA;MACA,SAAAX,MAAA,mBAAAY,aAAA;IACA;EACA;AACA"}]}