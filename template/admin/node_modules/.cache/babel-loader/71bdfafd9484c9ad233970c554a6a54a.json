{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/components/userLabel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/components/userLabel.vue","mtime":1689324015173},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/babel.config.js","mtime":1689324015052},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/.babelrc","mtime":1689324015050},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFVzZXJMYWJlbCwgcHV0VXNlckxhYmVsIH0gZnJvbSAnQC9hcGkvdXNlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAndXNlckxhYmVsJywKICBwcm9wczogewogICAgdWlkOiB7CiAgICAgIHR5cGU6IFN0cmluZyB8IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIG9ubHlfZ2V0OiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgc2VsZWN0RGF0YUxhYmVsOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICBbXTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxhYmVsTGlzdDogW10sCiAgICAgIGFjdGl2ZUlkczogW10sCiAgICAgIHVuTGFiZXJpZHM6IFtdCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHVpZDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG5WYWwsIG9WYWwpIHsKICAgICAgICBpZiAoblZhbCAhPSBvVmFsKSB7CiAgICAgICAgICB0aGlzLmdldExpc3QoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIGdldFVzZXJMYWJlbCh0aGlzLnVpZCB8fCAwKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAoX3RoaXMuc2VsZWN0RGF0YUxhYmVsICYmIF90aGlzLnNlbGVjdERhdGFMYWJlbC5sZW5ndGgpIHsKICAgICAgICAgIF90aGlzLnNlbGVjdERhdGFMYWJlbC5tYXAoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICAgIHJlcy5kYXRhLm1hcChmdW5jdGlvbiAocmUpIHsKICAgICAgICAgICAgICByZS5sYWJlbC5tYXAoZnVuY3Rpb24gKGxhYmVsKSB7CiAgICAgICAgICAgICAgICBpZiAobGFiZWwuaWQgPT09IGVsLmlkKSB7CiAgICAgICAgICAgICAgICAgIGxhYmVsLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmVzLmRhdGEubWFwKGZ1bmN0aW9uIChlbCkgewogICAgICAgICAgZWwubGFiZWwubWFwKGZ1bmN0aW9uIChsYWJlbCkgewogICAgICAgICAgICBpZiAobGFiZWwuZGlzYWJsZWQpIHsKICAgICAgICAgICAgICBfdGhpcy5hY3RpdmVJZHMucHVzaChsYWJlbC5pZCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIF90aGlzLmxhYmVsTGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBzZWxlY3RMYWJlbDogZnVuY3Rpb24gc2VsZWN0TGFiZWwobGFiZWwpIHsKICAgICAgaWYgKGxhYmVsLmRpc2FibGVkKSB7CiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5hY3RpdmVJZHMuaW5kZXhPZihsYWJlbC5pZCk7CiAgICAgICAgdGhpcy5hY3RpdmVJZHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICBsYWJlbC5kaXNhYmxlZCA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWN0aXZlSWRzLnB1c2gobGFiZWwuaWQpOwogICAgICAgIGxhYmVsLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8vIOehruWumgogICAgc3ViQnRuOiBmdW5jdGlvbiBzdWJCdG4oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgdW5MYWJlcmlkcyA9IFtdOwogICAgICBpZiAodGhpcy5vbmx5X2dldCkgewogICAgICAgIHRoaXMubGFiZWxMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgaXRlbS5sYWJlbC5tYXAoZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgaWYgKGkuZGlzYWJsZWQgPT0gdHJ1ZSkgewogICAgICAgICAgICAgIHVuTGFiZXJpZHMucHVzaCh7CiAgICAgICAgICAgICAgICBpZDogaS5pZCwKICAgICAgICAgICAgICAgIGxhYmVsX25hbWU6IGkubGFiZWxfbmFtZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRlbWl0KCdhY3RpdmVEYXRhJywgdW5MYWJlcmlkcyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubGFiZWxMaXN0Lm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW0ubGFiZWwubWFwKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgICBpZiAoaS5kaXNhYmxlZCA9PSBmYWxzZSkgewogICAgICAgICAgICB1bkxhYmVyaWRzLnB1c2goaS5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB0aGlzLnVuTGFiZXJpZHMgPSB1bkxhYmVyaWRzOwogICAgICBwdXRVc2VyTGFiZWwodGhpcy51aWQsIHsKICAgICAgICBsYWJlbF9pZHM6IHRoaXMuYWN0aXZlSWRzLAogICAgICAgIHVuX2xhYmVsX2lkczogdGhpcy51bkxhYmVyaWRzCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi4kZW1pdCgnb25jZUdldExpc3QnKTsKICAgICAgICBfdGhpczIuYWN0aXZlSWRzID0gW107CiAgICAgICAgX3RoaXMyLnVuTGFiZXJpZHMgPSBbXTsKICAgICAgICBfdGhpczIuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICBfdGhpczIuJGVtaXQoJ2Nsb3NlJyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMi4kTWVzc2FnZS5lcnJvcihlcnJvci5tc2cpOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWw6IGZ1bmN0aW9uIGNhbmNlbCgpIHsKICAgICAgdGhpcy5hY3RpdmVJZHMgPSBbXTsKICAgICAgdGhpcy51bkxhYmVyaWRzID0gW107CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["getUserLabel","putUserLabel","name","props","uid","type","String","Number","default","only_get","selectDataLabel","Array","_default","data","labelList","activeIds","unLaberids","watch","handler","nVal","oVal","getList","deep","mounted","methods","_this","then","res","length","map","el","re","label","id","disabled","push","selectLabel","index","indexOf","splice","subBtn","_this2","item","i","label_name","$emit","label_ids","un_label_ids","$Message","success","msg","catch","error","cancel"],"sources":["src/components/userLabel.vue"],"sourcesContent":["<template>\n  <div class=\"label-wrapper\">\n    <div v-if=\"!labelList[0]\" class=\"nonefont\">暂无标签</div>\n    <div v-else class=\"label-box\" v-for=\"(item, index) in labelList\" :key=\"index\">\n      <div class=\"title\">{{ item.name }}</div>\n      <div class=\"list\">\n        <div\n          class=\"label-item\"\n          :class=\"{ on: label.disabled }\"\n          v-for=\"(label, j) in item.label\"\n          :key=\"j\"\n          @click=\"selectLabel(label)\"\n        >\n          {{ label.label_name }}\n        </div>\n      </div>\n    </div>\n\n    <div class=\"footer\">\n      <Button type=\"primary\" class=\"btns\" @click=\"subBtn\">确定</Button>\n      <Button type=\"primary\" class=\"btns\" ghost @click=\"cancel\">取消</Button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getUserLabel, putUserLabel } from '@/api/user';\nexport default {\n  name: 'userLabel',\n  props: {\n    uid: {\n      type: String | Number,\n      default: 0,\n    },\n    only_get: {\n      default: false,\n    },\n    selectDataLabel: {\n      type: Array,\n      default: () => {\n        [];\n      },\n    },\n  },\n  data() {\n    return {\n      labelList: [],\n      activeIds: [],\n      unLaberids: [],\n    };\n  },\n  watch: {\n    uid: {\n      handler(nVal, oVal) {\n        if (nVal != oVal) {\n          this.getList();\n        }\n      },\n      deep: true,\n    },\n  },\n  mounted() {\n    this.getList();\n  },\n  methods: {\n    getList() {\n      getUserLabel(this.uid || 0).then((res) => {\n        if (this.selectDataLabel && this.selectDataLabel.length) {\n          this.selectDataLabel.map((el) => {\n            res.data.map((re) => {\n              re.label.map((label) => {\n                if (label.id === el.id) {\n                  label.disabled = true;\n                }\n              });\n            });\n          });\n        }\n        res.data.map((el) => {\n          el.label.map((label) => {\n            if (label.disabled) {\n              this.activeIds.push(label.id);\n            }\n          });\n        });\n        this.labelList = res.data;\n      });\n    },\n    selectLabel(label) {\n      if (label.disabled) {\n        let index = this.activeIds.indexOf(label.id);\n        this.activeIds.splice(index, 1);\n        label.disabled = false;\n      } else {\n        this.activeIds.push(label.id);\n        label.disabled = true;\n      }\n    },\n    // 确定\n    subBtn() {\n      let unLaberids = [];\n      if (this.only_get) {\n        this.labelList.map((item) => {\n          item.label.map((i) => {\n            if (i.disabled == true) {\n              unLaberids.push({ id: i.id, label_name: i.label_name });\n            }\n          });\n        });\n        this.$emit('activeData', unLaberids);\n        return;\n      }\n      this.labelList.map((item) => {\n        item.label.map((i) => {\n          if (i.disabled == false) {\n            unLaberids.push(i.id);\n          }\n        });\n      });\n      this.unLaberids = unLaberids;\n      putUserLabel(this.uid, {\n        label_ids: this.activeIds,\n        un_label_ids: this.unLaberids,\n      })\n        .then((res) => {\n          this.$emit('onceGetList');\n          this.activeIds = [];\n          this.unLaberids = [];\n          this.$Message.success(res.msg);\n          this.$emit('close');\n        })\n        .catch((error) => {\n          this.$Message.error(error.msg);\n        });\n    },\n    cancel() {\n      this.activeIds = [];\n      this.unLaberids = [];\n      this.$emit('close');\n    },\n  },\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.label-wrapper {\n  .list {\n    display: flex;\n    flex-wrap: wrap;\n\n    .label-item {\n      margin: 10px 8px 10px 0;\n      padding: 3px 8px;\n      background: #EEEEEE;\n      color: #333333;\n      border-radius: 2px;\n      cursor: pointer;\n      font-size: 12px;\n\n      &.on {\n        color: #fff;\n        background: #1890FF;\n      }\n    }\n  }\n\n  .footer {\n    display: flex;\n    justify-content: flex-end;\n    margin-top: 40px;\n\n    button {\n      margin-left: 10px;\n    }\n  }\n}\n\n.btn {\n  width: 60px;\n  height: 24px;\n}\n\n.title {\n  font-size: 13px;\n}\n\n.nonefont {\n  text-align: center;\n  padding-top: 20px;\n}\n</style>\n"],"mappings":"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"}]}