{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js!/Volumes/mac/webwork/2023/dati/template/admin/src/libs/request.js","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/libs/request.js","mtime":1689324015190},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/babel.config.js","mtime":1689324015052},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/.babelrc","mtime":1689324015050},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwovLyArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vIHwgQ1JNRUIgWyBDUk1FQui1i+iDveW8gOWPkeiAhe+8jOWKqeWKm+S8geS4muWPkeWxlSBdCi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLy8gfCBDb3B5cmlnaHQgKGMpIDIwMTZ+MjAyMyBodHRwczovL3d3dy5jcm1lYi5jb20gQWxsIHJpZ2h0cyByZXNlcnZlZC4KLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyB8IExpY2Vuc2VkIENSTUVC5bm25LiN5piv6Ieq55Sx6L2v5Lu277yM5pyq57uP6K645Y+v5LiN6IO95Y675o6JQ1JNRULnm7jlhbPniYjmnYMKLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQovLyB8IEF1dGhvcjogQ1JNRUIgVGVhbSA8YWRtaW5AY3JtZWIuY29tPgovLyArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnaXZpZXcnOwppbXBvcnQgeyBnZXRDb29raWVzLCByZW1vdmVDb29raWVzIH0gZnJvbSAnQC9saWJzL3V0aWwnOwppbXBvcnQgU2V0dGluZyBmcm9tICdAL3NldHRpbmcnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IFNldHRpbmcuYXBpQmFzZVVSTCwKICB0aW1lb3V0OiAxMDAwMCAvLyDor7fmsYLotoXml7bml7bpl7QKfSk7CgpheGlvcy5kZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOyAvLyDmkLrluKZjb29raWUKCi8vIOivt+axguaLpuaIquWZqApzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgaWYgKGNvbmZpZy5rZWZ1KSB7CiAgICB2YXIgYmFzZVVybCA9IFNldHRpbmcuYXBpQmFzZVVSTC5yZXBsYWNlKC9hZG1pbmFwaS8sICdrZWZ1YXBpJyk7CiAgICBjb25maWcuYmFzZVVSTCA9IGJhc2VVcmw7CiAgfSBlbHNlIHsKICAgIGNvbmZpZy5iYXNlVVJMID0gU2V0dGluZy5hcGlCYXNlVVJMOwogIH0KICBpZiAoY29uZmlnLmZpbGUpIHsKICAgIGNvbmZpZy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdtdWx0aXBhcnQvZm9ybS1kYXRhJzsKICB9CiAgdmFyIHRva2VuID0gZ2V0Q29va2llcygndG9rZW4nKTsKICB2YXIga2VmdVRva2VuID0gZ2V0Q29va2llcygna2VmdV90b2tlbicpOwogIGlmICh0b2tlbiB8fCBrZWZ1VG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpLXphdGlvbiddID0gY29uZmlnLmtlZnUgPyAnQmVhcmVyICcgKyBrZWZ1VG9rZW4gOiAnQmVhcmVyICcgKyB0b2tlbjsKICB9CiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gZG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwoKLy8gcmVzcG9uc2UgaW50ZXJjZXB0b3IKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciBvYmogPSB7fTsKICBpZiAoISFyZXNwb25zZS5kYXRhKSB7CiAgICBpZiAodHlwZW9mIHJlc3BvbnNlLmRhdGEgPT0gJ3N0cmluZycpIHsKICAgICAgb2JqID0gSlNPTi5wYXJzZShyZXNwb25zZS5kYXRhKTsKICAgIH0gZWxzZSB7CiAgICAgIG9iaiA9IHJlc3BvbnNlLmRhdGE7CiAgICB9CiAgfQogIHZhciBzdGF0dXMgPSByZXNwb25zZS5kYXRhID8gb2JqLnN0YXR1cyA6IDA7CiAgLy8gbGV0IHN0YXR1cyA9IHJlc3BvbnNlLmRhdGEgPyByZXNwb25zZS5kYXRhLnN0YXR1cyA6IDA7CiAgdmFyIGNvZGUgPSBzdGF0dXM7CiAgc3dpdGNoIChjb2RlKSB7CiAgICBjYXNlIDIwMDoKICAgICAgcmV0dXJuIG9iajsKICAgIGNhc2UgMTEwMDAyOgogICAgY2FzZSAxMTAwMDM6CiAgICBjYXNlIDExMDAwNDoKICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICAgIHJlbW92ZUNvb2tpZXMoJ3Rva2VuJyk7CiAgICAgIHJlbW92ZUNvb2tpZXMoJ2V4cGlyZXNfdGltZScpOwogICAgICByZW1vdmVDb29raWVzKCd1dWlkJyk7CiAgICAgIHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBuYW1lOiAnbG9naW4nCiAgICAgIH0pOwogICAgICBicmVhazsKICAgIGNhc2UgMTEwMDA1OgogICAgY2FzZSAxMTAwMDY6CiAgICBjYXNlIDExMDAwNzoKICAgICAgcmVtb3ZlQ29va2llcygna2VmdUluZm8nKTsKICAgICAgcmVtb3ZlQ29va2llcygna2VmdV90b2tlbicpOwogICAgICByZW1vdmVDb29raWVzKCdrZWZ1X2V4cGlyZXNfdGltZScpOwogICAgICByZW1vdmVDb29raWVzKCdrZWZ1X3V1aWQnKTsKICAgICAgcm91dGVyLnJlcGxhY2UoewogICAgICAgIHBhdGg6ICcva2VmdScKICAgICAgfSk7CiAgICAgIGJyZWFrOwogICAgY2FzZSAxMTAwMDg6CiAgICAgIHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBuYW1lOiAnc3lzdGVtX29wZW5kaXJfbG9naW4nCiAgICAgIH0pOwogICAgICBicmVhazsKICAgIGRlZmF1bHQ6CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChvYmogfHwgewogICAgICAgIG1zZzogJ+acquefpemUmeivrycKICAgICAgfSk7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBNZXNzYWdlLmVycm9yKGVycm9yLm1zZyk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHNlcnZpY2U7"},{"version":3,"names":["axios","Message","getCookies","removeCookies","Setting","router","service","create","baseURL","apiBaseURL","timeout","defaults","withCredentials","interceptors","request","use","config","kefu","baseUrl","replace","file","headers","token","kefuToken","error","Promise","reject","response","obj","data","JSON","parse","status","code","localStorage","clear","name","path","msg"],"sources":["/Volumes/mac/webwork/2023/dati/template/admin/src/libs/request.js"],"sourcesContent":["// +---------------------------------------------------------------------\n// | CRMEB [ CRMEB赋能开发者，助力企业发展 ]\n// +---------------------------------------------------------------------\n// | Copyright (c) 2016~2023 https://www.crmeb.com All rights reserved.\n// +---------------------------------------------------------------------\n// | Licensed CRMEB并不是自由软件，未经许可不能去掉CRMEB相关版权\n// +---------------------------------------------------------------------\n// | Author: CRMEB Team <admin@crmeb.com>\n// +---------------------------------------------------------------------\n\nimport axios from 'axios';\nimport { Message } from 'iview';\nimport { getCookies, removeCookies } from '@/libs/util';\nimport Setting from '@/setting';\nimport router from '@/router';\nconst service = axios.create({\n  baseURL: Setting.apiBaseURL,\n  timeout: 10000, // 请求超时时间\n});\n\naxios.defaults.withCredentials = true; // 携带cookie\n\n// 请求拦截器\nservice.interceptors.request.use(\n  (config) => {\n    if (config.kefu) {\n      let baseUrl = Setting.apiBaseURL.replace(/adminapi/, 'kefuapi');\n      config.baseURL = baseUrl;\n    } else {\n      config.baseURL = Setting.apiBaseURL;\n    }\n    if (config.file) {\n      config.headers['Content-Type'] = 'multipart/form-data';\n    }\n    const token = getCookies('token');\n    const kefuToken = getCookies('kefu_token');\n    if (token || kefuToken) {\n      config.headers['Authori-zation'] = config.kefu ? 'Bearer ' + kefuToken : 'Bearer ' + token;\n    }\n    return config;\n  },\n  (error) => {\n    // do something with request error\n    return Promise.reject(error);\n  },\n);\n\n// response interceptor\nservice.interceptors.response.use(\n  (response) => {\n    let obj = {};\n    if (!!response.data) {\n      if (typeof response.data == 'string') {\n        obj = JSON.parse(response.data);\n      } else {\n        obj = response.data;\n      }\n    }\n    let status = response.data ? obj.status : 0;\n    // let status = response.data ? response.data.status : 0;\n    const code = status;\n    switch (code) {\n      case 200:\n        return obj;\n      case 110002:\n      case 110003:\n      case 110004:\n        localStorage.clear();\n        removeCookies('token');\n        removeCookies('expires_time');\n        removeCookies('uuid');\n        router.replace({ name: 'login' });\n        break;\n      case 110005:\n      case 110006:\n      case 110007:\n        removeCookies('kefuInfo');\n        removeCookies('kefu_token');\n        removeCookies('kefu_expires_time');\n        removeCookies('kefu_uuid');\n        router.replace({ path: '/kefu' });\n        break;\n      case 110008:\n        router.replace({ name: 'system_opendir_login' });\n        break;\n      default:\n        return Promise.reject(obj || { msg: '未知错误' });\n    }\n  },\n  (error) => {\n    Message.error(error.msg);\n    return Promise.reject(error);\n  },\n);\n\nexport default service;\n"],"mappings":"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"}]}