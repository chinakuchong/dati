{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/lottery/addGoods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/lottery/addGoods.vue","mtime":1689324015223},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/babel.config.js","mtime":1689324015052},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/.babelrc","mtime":1689324015050},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKaW1wb3J0IGNvdXBvbkxpc3QgZnJvbSAnQC9jb21wb25lbnRzL2NvdXBvbkxpc3QnOwppbXBvcnQgdXBsb2FkUGljdHVyZXMgZnJvbSAnQC9jb21wb25lbnRzL3VwbG9hZFBpY3R1cmVzJzsKaW1wb3J0IGdvb2RzTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvZ29vZHNMaXN0L2luZGV4JzsKaW1wb3J0IGZyZWlnaHRUZW1wbGF0ZSBmcm9tICdAL2NvbXBvbmVudHMvZnJlaWdodFRlbXBsYXRlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIHVwbG9hZFBpY3R1cmVzOiB1cGxvYWRQaWN0dXJlcywKICAgIGdvb2RzTGlzdDogZ29vZHNMaXN0LAogICAgZnJlaWdodFRlbXBsYXRlOiBmcmVpZ2h0VGVtcGxhdGUsCiAgICBjb3Vwb25MaXN0OiBjb3Vwb25MaXN0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kYWxQaWM6IGZhbHNlLAogICAgICBtb2RhbHM6IGZhbHNlLAogICAgICBpc0Nob2ljZTogJ+WNlemAiScsCiAgICAgIHVwZGF0ZUlkczogW10sCiAgICAgIHVwZGF0ZU5hbWU6IFtdLAogICAgICBnb29kc0RhdGE6IHsKICAgICAgICBwaWM6ICcnLAogICAgICAgIHByb2R1Y3RfaWQ6ICcnLAogICAgICAgIGltZzogJycsCiAgICAgICAgY292ZXJJbWc6ICcnCiAgICAgIH0sCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIHR5cGU6IDUsCiAgICAgICAgLy/nsbvlnosgMe+8muacquS4reWlljLvvJrnp6/liIYgIDM65L2Z6aKdICA077ya57qi5YyFIDU65LyY5oOg5Yi4IDbvvJrnq5nlhoXllYblk4EKICAgICAgICBuYW1lOiAnJywKICAgICAgICAvL+a0u+WKqOWQjeensAogICAgICAgIG51bTogMCwKICAgICAgICAvL+WlluWTgeaVsOmHjwogICAgICAgIGltYWdlOiAnJywKICAgICAgICAvL+WlluWTgeWbvueJhwogICAgICAgIGNoYW5jZTogMSwKICAgICAgICAvL+S4reWlluadg+mHjQogICAgICAgIHByb2R1Y3RfaWQ6IDAsCiAgICAgICAgLy/llYblk4FpZAogICAgICAgIGNvdXBvbl9pZDogMCwKICAgICAgICAvL+S8mOaDoOWIuGlkCiAgICAgICAgdG90YWw6IDAsCiAgICAgICAgLy/lpZblk4HmlbDph48KICAgICAgICBwcm9tcHQ6ICcnLAogICAgICAgIC8v5o+Q56S66K+tCiAgICAgICAgZ29vZHNfaW1hZ2U6ICcnLAogICAgICAgIC8v6Ieq55So5ZWG5ZOB5Zu+CiAgICAgICAgY291cG9uX3RpdGxlOiAnJyAvL+S8mOaDoOWIuOWQjeensAogICAgICB9LAoKICAgICAgcnVsZVZhbGlkYXRlOiB7CiAgICAgICAgbmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+WVhuWTgeWQjeensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBnb29kc19pbWFnZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+a3u+WKoOWVhuWTgScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBudW06IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemHkemineaVsOmHjycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBjaGFuY2U6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeadg+mHjScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBpbWFnZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqeWlluWTgeWbvueJhycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBwcm9tcHQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmj5DnpLror60nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgY291cG9uTmFtZTogW10KICAgIH07CiAgfSwKICBwcm9wczogewogICAgZWRpdERhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZWRpdERhdGE6IGZ1bmN0aW9uIGVkaXREYXRhKGRhdGEpIHt9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5lZGl0RGF0YSk7CiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgX3RoaXMuZm9ybVZhbGlkYXRlW2l0ZW1dID0gX3RoaXMuZWRpdERhdGFbaXRlbV07CiAgICAgIGlmIChpdGVtID09PSAnY291cG9uX3RpdGxlJyAmJiBfdGhpcy5lZGl0RGF0YVtpdGVtXSkgewogICAgICAgIF90aGlzLmNvdXBvbk5hbWUucHVzaCh7CiAgICAgICAgICB0aXRsZTogX3RoaXMuZWRpdERhdGFbaXRlbV0sCiAgICAgICAgICBpZDogX3RoaXMuZWRpdERhdGEuY291cG9uX2lkCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6YCJ5oup5ZWG5ZOBCiAgICBjaGFuZ2VHb29kczogZnVuY3Rpb24gY2hhbmdlR29vZHMoKSB7CiAgICAgIHRoaXMubW9kYWxzID0gdHJ1ZTsKICAgICAgdGhpcy4kcmVmcy5nb29kc2xpc3QuZm9ybVZhbGlkYXRlLmlzX3ByZXNhbGUgPSAwOwogICAgICB0aGlzLiRyZWZzLmdvb2RzbGlzdC5mb3JtVmFsaWRhdGUuaXNfdmlydHVhbCA9IDA7CiAgICAgIHRoaXMuJHJlZnMuZ29vZHNsaXN0LmdldExpc3QoKTsKICAgICAgdGhpcy4kcmVmcy5nb29kc2xpc3QuZ29vZHNDYXRlZ29yeSgpOwogICAgfSwKICAgIGdldENvdXBvbklkOiBmdW5jdGlvbiBnZXRDb3Vwb25JZChlKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNvdXBvbl9pZCA9IGUuaWQ7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNvdXBvbl90aXRsZSA9IGUuY291cG9uX3RpdGxlOwogICAgICB2YXIgY291cG9uTmFtZSA9IFtdOwogICAgICBjb3Vwb25OYW1lLnB1c2goZSk7CiAgICAgIHRoaXMuY291cG9uTmFtZSA9IGNvdXBvbk5hbWU7CiAgICB9LAogICAgaGFuZGxlU3VibWl0OiBmdW5jdGlvbiBoYW5kbGVTdWJtaXQobmFtZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzMi4kZW1pdCgnYWRkR29vZHNEYXRhJywgX3RoaXMyLmZvcm1WYWxpZGF0ZSk7CiAgICAgICAgICBfdGhpczIuJE1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5oiQ5YqfJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzMi4kTWVzc2FnZS53YXJuaW5nKCfor7flrozlloTmlbDmja4nKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPluWNleW8oOWbvueJh+S/oeaBrwogICAgZ2V0UGljOiBmdW5jdGlvbiBnZXRQaWMocGMpIHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2UgPSBwYy5hdHRfZGlyOwogICAgICB0aGlzLm1vZGFsUGljID0gZmFsc2U7CiAgICB9LAogICAgLy8g54K55Ye75ZWG5ZOB5Zu+CiAgICBtb2RhbFBpY1RhcDogZnVuY3Rpb24gbW9kYWxQaWNUYXAoKSB7CiAgICAgIHRoaXMubW9kYWxQaWMgPSB0cnVlOwogICAgfSwKICAgIGNhbmNlbDogZnVuY3Rpb24gY2FuY2VsKCkgewogICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOmAieaLqeeahOWVhuWTgQogICAgZ2V0UHJvZHVjdElkOiBmdW5jdGlvbiBnZXRQcm9kdWN0SWQocHJvZHVjdExpc3QpIHsKICAgICAgLy8gaWYgKHByb2R1Y3RMaXN0Lmxlbmd0aCA+IDEpIHsKICAgICAgLy8gICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoIuacgOWkmua3u+WKoOS4gOS4quWVhuWTgSIpOwogICAgICAvLyAgIHJldHVybjsKICAgICAgLy8gfQogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5wcm9kdWN0X2lkID0gcHJvZHVjdExpc3QuaWQ7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmdvb2RzX2ltYWdlID0gcHJvZHVjdExpc3QuaW1hZ2U7CiAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICAgIC8vIHByb2R1Y3RMaXN0LmZvckVhY2goKHZhbHVlKSA9PiB7CiAgICAgIC8vICAgdGhpcy5mb3JtVmFsaWRhdGUucHJvZHVjdF9pZCA9IHZhbHVlLnByb2R1Y3RfaWQ7CiAgICAgIC8vICAgdGhpcy5mb3JtVmFsaWRhdGUuZ29vZHNfaW1hZ2UgPSB2YWx1ZS5pbWFnZTsKICAgICAgLy8gfSk7CiAgICB9LAogICAgcmVtb3ZlR29vZHM6IGZ1bmN0aW9uIHJlbW92ZUdvb2RzKCkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5wcm9kdWN0X2lkID0gJyc7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmdvb2RzX2ltYWdlID0gJyc7CiAgICB9LAogICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlID0gJyc7CiAgICB9LAogICAgLy8g5re75Yqg5LyY5oOg5Yi4CiAgICBhZGRDb3Vwb246IGZ1bmN0aW9uIGFkZENvdXBvbigpIHsKICAgICAgdGhpcy4kcmVmcy5jb3Vwb25UZW1wbGF0ZXMuaXNUZW1wbGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuY291cG9uVGVtcGxhdGVzLnRhYmxlTGlzdCgpOwogICAgfSwKICAgIGhhbmRsZUNsb3NlOiBmdW5jdGlvbiBoYW5kbGVDbG9zZShuYW1lKSB7CiAgICAgIHRoaXMuY291cG9uTmFtZS5zcGxpY2UoMCwgMSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNvdXBvbl9pZCA9IDA7CiAgICB9LAogICAgLy/lr7nosaHmlbDnu4Tljrvph43vvJsKICAgIHVuaXF1ZTogZnVuY3Rpb24gdW5pcXVlKGFycikgewogICAgICB2YXIgcmVzID0gbmV3IE1hcCgpOwogICAgICByZXR1cm4gYXJyLmZpbHRlcihmdW5jdGlvbiAoYXJyKSB7CiAgICAgICAgcmV0dXJuICFyZXMuaGFzKGFyci5pZCkgJiYgcmVzLnNldChhcnIuaWQsIDEpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["couponList","uploadPictures","goodsList","freightTemplate","components","data","modalPic","modals","isChoice","updateIds","updateName","goodsData","pic","product_id","img","coverImg","formValidate","type","name","num","image","chance","coupon_id","total","prompt","goods_image","coupon_title","ruleValidate","required","message","trigger","couponName","props","editData","Object","default","_default","watch","mounted","_this","keys","forEach","item","push","title","id","methods","changeGoods","$refs","goodslist","is_presale","is_virtual","getList","goodsCategory","getCouponId","e","handleSubmit","_this2","validate","valid","$emit","$Message","success","warning","getPic","pc","att_dir","modalPicTap","cancel","getProductId","productList","removeGoods","remove","addCoupon","couponTemplates","isTemplate","tableList","handleClose","splice","unique","arr","res","Map","filter","has","set"],"sources":["src/pages/marketing/lottery/addGoods.vue"],"sourcesContent":["<template>\n  <div>\n    <Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-width=\"90\">\n      <FormItem label=\"奖品\" prop=\"type\">\n        <RadioGroup v-model=\"formValidate.type\">\n          <Radio :label=\"1\">未中奖</Radio>\n          <Radio :label=\"5\">优惠券</Radio>\n          <Radio :label=\"2\">积分</Radio>\n          <Radio :label=\"6\">商品</Radio>\n          <Radio :label=\"4\">红包</Radio>\n          <Radio :label=\"3\">余额</Radio>\n        </RadioGroup>\n      </FormItem>\n      <FormItem label=\"赠送优惠券：\" v-if=\"formValidate.type == 5\">\n        <div v-if=\"couponName.length\" class=\"mb20\">\n          <Tag closable v-for=\"(item, index) in couponName\" :key=\"index\" @on-close=\"handleClose(item)\">{{\n            item.title\n          }}</Tag>\n        </div>\n        <Button type=\"primary\" @click=\"addCoupon\" v-if=\"!couponName.length\">添加优惠券</Button>\n      </FormItem>\n      <FormItem\n        :label=\"[3, 4].includes(formValidate.type) ? '金额信息' : '积分数量'\"\n        prop=\"num\"\n        v-if=\"[2, 3, 4].includes(formValidate.type)\"\n      >\n        <InputNumber\n          v-model=\"formValidate.num\"\n          placeholder=\"请输入金额数量\"\n          :max=\"formValidate.type == 4 ? 999 : 99999\"\n          :min=\"1\"\n          style=\"width: 300px\"\n        ></InputNumber>\n        <div class=\"ml100 grey\">\n          {{\n            formValidate.type == 3\n              ? '用户领取余额后会自动到账余额账户'\n              : formValidate.type == 4\n              ? '用户领取红包后会自动到账微信零钱，添加此奖品需开通微信支付,并且账户中金额不能小于1元'\n              : ''\n          }}\n        </div>\n      </FormItem>\n      <FormItem v-if=\"formValidate.type == 6\" label=\"商品\" prop=\"goods_image\">\n        <template v-if=\"formValidate.goods_image\">\n          <div class=\"upload-list\">\n            <img :src=\"formValidate.goods_image\" />\n            <Icon type=\"ios-close-circle\" size=\"16\" @click=\"removeGoods()\" />\n          </div>\n        </template>\n        <div v-else class=\"upLoad pictrueTab acea-row row-center-wrapper\">\n          <Icon type=\"ios-camera-outline\" size=\"26\" @click=\"changeGoods\" />\n        </div>\n      </FormItem>\n      <FormItem label=\"奖品名称\" prop=\"name\">\n        <Input v-model=\"formValidate.name\" :maxlength=\"10\" placeholder=\"请输入奖品名称\" style=\"width: 300px\"></Input>\n      </FormItem>\n      <FormItem label=\"奖品图片\" prop=\"image\">\n        <template v-if=\"formValidate.image\">\n          <div class=\"upload-list\">\n            <img :src=\"formValidate.image\" />\n            <Icon type=\"ios-close-circle\" size=\"16\" @click=\"remove()\" />\n          </div>\n        </template>\n        <div v-else class=\"upLoad pictrueTab acea-row row-center-wrapper\">\n          <Icon type=\"ios-camera-outline\" size=\"26\" @click=\"modalPic = true\" />\n        </div>\n        <!-- <div class=\"info\">选择商品</div> -->\n      </FormItem>\n      <FormItem label=\"奖品数量\" prop=\"total\">\n        <InputNumber\n          v-model=\"formValidate.total\"\n          placeholder=\"请输入奖品数量\"\n          :max=\"99999\"\n          :min=\"0\"\n          :precision=\"0\"\n          style=\"width: 300px\"\n        ></InputNumber>\n      </FormItem>\n      <FormItem label=\"奖品权重\" prop=\"chance\">\n        <InputNumber\n          v-model=\"formValidate.chance\"\n          placeholder=\"请输入奖品权重\"\n          :max=\"100\"\n          :min=\"1\"\n          :precision=\"0\"\n          style=\"width: 300px\"\n        ></InputNumber>\n      </FormItem>\n      <FormItem label=\"提示语\" prop=\"prompt\">\n        <Input v-model=\"formValidate.prompt\" :maxlength=\"15\" placeholder=\"请输入提示语\" style=\"width: 300px\"></Input>\n      </FormItem>\n      <FormItem>\n        <Button type=\"primary\" @click=\"handleSubmit('formValidate')\">提交</Button>\n      </FormItem>\n    </Form>\n    <!-- 上传图片-->\n    <Modal\n      v-model=\"modalPic\"\n      width=\"950px\"\n      scrollable\n      footer-hide\n      closable\n      title=\"上传图片\"\n      :mask-closable=\"false\"\n      :z-index=\"1\"\n    >\n      <uploadPictures :isChoice=\"isChoice\" @getPic=\"getPic\" v-if=\"modalPic\"></uploadPictures>\n    </Modal>\n    <Modal\n      v-model=\"modals\"\n      title=\"商品列表\"\n      footerHide\n      class=\"paymentFooter\"\n      scrollable\n      width=\"900\"\n      @on-cancel=\"cancel\"\n    >\n      <goods-list ref=\"goodslist\" @getProductId=\"getProductId\"></goods-list>\n    </Modal>\n    <coupon-list ref=\"couponTemplates\" :luckDraw=\"true\" @getCouponId=\"getCouponId\"></coupon-list>\n    <!--<coupon-list-->\n    <!--ref=\"couponTemplates\"-->\n    <!--@nameId=\"nameId\"-->\n    <!--:updateIds=\"updateIds\"-->\n    <!--:updateName=\"updateName\"-->\n    <!--&gt;</coupon-list>-->\n  </div>\n</template>\n\n<script>\nimport couponList from '@/components/couponList';\nimport uploadPictures from '@/components/uploadPictures';\nimport goodsList from '@/components/goodsList/index';\nimport freightTemplate from '@/components/freightTemplate';\nexport default {\n  components: { uploadPictures, goodsList, freightTemplate, couponList },\n  data() {\n    return {\n      modalPic: false,\n      modals: false,\n      isChoice: '单选',\n      updateIds: [],\n      updateName: [],\n      goodsData: {\n        pic: '',\n        product_id: '',\n        img: '',\n        coverImg: '',\n      },\n      formValidate: {\n        type: 5, //类型 1：未中奖2：积分  3:余额  4：红包 5:优惠券 6：站内商品\n        name: '', //活动名称\n        num: 0, //奖品数量\n        image: '', //奖品图片\n        chance: 1, //中奖权重\n        product_id: 0, //商品id\n        coupon_id: 0, //优惠券id\n        total: 0, //奖品数量\n        prompt: '', //提示语\n        goods_image: '', //自用商品图\n        coupon_title: '', //优惠券名称\n      },\n      ruleValidate: {\n        name: [\n          {\n            required: true,\n            message: '商品名称',\n            trigger: 'blur',\n          },\n        ],\n        goods_image: [\n          {\n            required: true,\n            message: '请添加商品',\n            trigger: 'blur',\n          },\n        ],\n        num: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入金额数量',\n            trigger: 'blur',\n          },\n        ],\n        chance: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入商品权重',\n            trigger: 'blur',\n          },\n        ],\n        image: [\n          {\n            required: true,\n            message: '请选择奖品图片',\n            trigger: 'blur',\n          },\n        ],\n        prompt: [\n          {\n            required: true,\n            message: '请输入提示语',\n            trigger: 'blur',\n          },\n        ],\n      },\n      couponName: [],\n    };\n  },\n  props: {\n    editData: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  watch: {\n    editData(data) {},\n  },\n  mounted() {\n    let keys = Object.keys(this.editData);\n    keys.forEach((item) => {\n      this.formValidate[item] = this.editData[item];\n      if (item === 'coupon_title' && this.editData[item]) {\n        this.couponName.push({\n          title: this.editData[item],\n          id: this.editData.coupon_id,\n        });\n      }\n    });\n  },\n  methods: {\n    // 选择商品\n    changeGoods() {\n      this.modals = true;\n      this.$refs.goodslist.formValidate.is_presale = 0;\n      this.$refs.goodslist.formValidate.is_virtual = 0;\n      this.$refs.goodslist.getList();\n      this.$refs.goodslist.goodsCategory();\n    },\n    getCouponId(e) {\n      this.formValidate.coupon_id = e.id;\n      this.formValidate.coupon_title = e.coupon_title;\n      let couponName = [];\n      couponName.push(e);\n      this.couponName = couponName;\n    },\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.$emit('addGoodsData', this.formValidate);\n          this.$Message.success('添加成功');\n        } else {\n          this.$Message.warning('请完善数据');\n        }\n      });\n    },\n    // 获取单张图片信息\n    getPic(pc) {\n      this.formValidate.image = pc.att_dir;\n      this.modalPic = false;\n    },\n    // 点击商品图\n    modalPicTap() {\n      this.modalPic = true;\n    },\n    cancel() {\n      this.modals = false;\n    },\n    // 选择的商品\n    getProductId(productList) {\n      // if (productList.length > 1) {\n      //   this.$Message.warning(\"最多添加一个商品\");\n      //   return;\n      // }\n      this.formValidate.product_id = productList.id;\n      this.formValidate.goods_image = productList.image;\n      this.modals = false;\n      // productList.forEach((value) => {\n      //   this.formValidate.product_id = value.product_id;\n      //   this.formValidate.goods_image = value.image;\n      // });\n    },\n    removeGoods() {\n      this.formValidate.product_id = '';\n      this.formValidate.goods_image = '';\n    },\n    remove() {\n      this.formValidate.image = '';\n    },\n    // 添加优惠券\n    addCoupon() {\n      this.$refs.couponTemplates.isTemplate = true;\n      this.$refs.couponTemplates.tableList();\n    },\n    handleClose(name) {\n      this.couponName.splice(0, 1);\n      this.formValidate.coupon_id = 0;\n    },\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.pictrueBox {\n  display: inline-block;\n}\n\n.pictrue {\n  width: 60px;\n  height: 60px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  margin-right: 15px;\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n\n  .btndel {\n    position: absolute;\n    z-index: 1;\n    width: 20px !important;\n    height: 20px !important;\n    left: 46px;\n    top: -4px;\n  }\n}\n\n.upload-list {\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n  position: relative;\n}\n\n.upload-list img {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n\n.upLoad {\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n}\n\n.ivu-icon-ios-close-circle {\n  position: absolute;\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n}\n\n.grey {\n  color: #999;\n}\n</style>\n"],"mappings":"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"}]}