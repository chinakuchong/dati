{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/order/orderList/handle/orderSend.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/order/orderList/handle/orderSend.vue","mtime":1689324015243},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0RXhwcmVzc0RhdGEsCiAgcHV0RGVsaXZlcnksCiAgc3BsaXREZWxpdmVyeSwKICBvcmRlckV4cHJlc3NUZW1wLAogIG9yZGVyRGVsaXZlcnlMaXN0LAogIG9yZGVyU2hlZXRJbmZvLAogIHNwbGl0Q2FydEluZm8sCn0gZnJvbSAnQC9hcGkvb3JkZXInOwppbXBvcnQgcHJpbnRKUyBmcm9tICdwcmludC1qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnb3JkZXJTZW5kJywKICBwcm9wczogewogICAgb3JkZXJJZDogTnVtYmVyLAogICAgc3RhdHVzOiBOdW1iZXIsCiAgICAvLyB0b3RhbF9udW06IE51bWJlciwKICAgIHBheV90eXBlOiBTdHJpbmcsCiAgICB2aXJ0dWFsX3R5cGU6IE51bWJlciwKICB9LAogIHdhdGNoOiB7CiAgICBvcmRlcklkKHZhbCkgewogICAgICBpZiAodGhpcy52aXJ0dWFsX3R5cGUgPT0gMykgdGhpcy5mb3JtSXRlbS50eXBlID0gJzMnOwogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcmRlclN0YXR1czogMCwKICAgICAgdG90YWxfbnVtOiAwLAogICAgICBzcGxpdFN3aXRjaDogdHJ1ZSwKICAgICAgZm9ybUl0ZW06IHsKICAgICAgICB0eXBlOiAnMScsCiAgICAgICAgZXhwcmVzc19yZWNvcmRfdHlwZTogJzEnLAogICAgICAgIGRlbGl2ZXJ5X25hbWU6ICcnLAogICAgICAgIGRlbGl2ZXJ5X2lkOiAnJywKICAgICAgICBleHByZXNzX3RlbXBfaWQ6ICcnLAogICAgICAgIHRvX25hbWU6ICcnLAogICAgICAgIHRvX3RlbDogJycsCiAgICAgICAgdG9fYWRkcjogJycsCiAgICAgICAgc2hfZGVsaXZlcnk6ICcnLAogICAgICAgIGZpY3RpdGlvdXNfY29udGVudDogJycsCiAgICAgIH0sCiAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgIGV4cHJlc3M6IFtdLAogICAgICBleHByZXNzVGVtcDogW10sCiAgICAgIGRlbGl2ZXJ5TGlzdDogW10sCiAgICAgIHRlbXA6IHt9LAogICAgICBleHBvcnRfb3BlbjogZmFsc2UsCiAgICAgIG1hbnlGb3JtVmFsaWRhdGU6IFtdLAogICAgICBoZWFkZXI6IFsKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAnc2VsZWN0aW9uJywKICAgICAgICAgIHdpZHRoOiA2MCwKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5ZWG5ZOB5L+h5oGvJywKICAgICAgICAgIHNsb3Q6ICdpbWFnZScsCiAgICAgICAgICB3aWR0aDogMjAwLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfop4TmoLwnLAogICAgICAgICAgc2xvdDogJ3ZhbHVlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxMjAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S7t+agvCcsCiAgICAgICAgICBzbG90OiAncHJpY2UnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDEyMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5oC75pWwJywKICAgICAgICAgIGtleTogJ2NhcnRfbnVtJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxMjAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+W+heWPkeaVsOmHjycsCiAgICAgICAgICBrZXk6ICdzdXJwbHVzX251bScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogMTgwLAogICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7CiAgICAgICAgICAgIHJldHVybiBoKCdkaXYnLCBbCiAgICAgICAgICAgICAgaCgnSW5wdXROdW1iZXInLCB7CiAgICAgICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgICAgICBtaW46IDEsCiAgICAgICAgICAgICAgICAgIG1heDogcGFyYW1zLnJvdy5zdXJwbHVzX251bSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IHBhcmFtcy5yb3cubnVtIHx8IHBhcmFtcy5yb3cuc3VycGx1c19udW0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgJ29uLWNoYW5nZSc6IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLy8gcGFyYW1zLnJvdy5zdXJwbHVzX251bSA9IGUgfHwgMTsKICAgICAgICAgICAgICAgICAgICBwYXJhbXMucm93Lm51bSA9IGUgfHwgMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGVbcGFyYW1zLmluZGV4XSA9IHBhcmFtcy5yb3c7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhLmZvckVhY2goKHYsIGluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodi5jYXJ0X2lkID09PSBwYXJhbXMucm93LmNhcnRfaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3REYXRhLnNwbGljZShpbmRleCwgMSwgcGFyYW1zLnJvdyk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICBdKTsKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgc2VsZWN0RGF0YTogW10sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2VsZWN0T25lKGRhdGEpIHsKICAgICAgdGhpcy5zZWxlY3REYXRhID0gZGF0YTsKICAgIH0sCiAgICBjaGFuZ2VNb2RhbChzdGF0dXMpIHsKICAgICAgaWYgKCFzdGF0dXMpIHsKICAgICAgICB0aGlzLmNhbmNlbCgpOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlU3BsaXRTdGF0dXMoc3RhdHVzKSB7CiAgICAgIC8vIHRoaXMuc3BsaXRTd2l0Y2ggPSBzdGF0dXM7CiAgICAgIGlmIChzdGF0dXMpIHsKICAgICAgICBzcGxpdENhcnRJbmZvKHRoaXMub3JkZXJJZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGUgPSBbXTsKICAgICAgICAgIE9iamVjdC5rZXlzKHJlcy5kYXRhKS5mb3JFYWNoKChrZXkpID0+IHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnB1c2gocmVzLmRhdGFba2V5XSk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGNoYW5nZVJhZGlvKG8pIHsKICAgICAgdGhpcy4kcmVmcy5mb3JtSXRlbS5yZXNldEZpZWxkcygpOwogICAgICBzd2l0Y2ggKG8pIHsKICAgICAgICBjYXNlICcxJzoKICAgICAgICAgIHRoaXMuZm9ybUl0ZW0uZGVsaXZlcnlfbmFtZSA9ICcnOwogICAgICAgICAgdGhpcy5mb3JtSXRlbS5kZWxpdmVyeV9pZCA9ICcnOwogICAgICAgICAgdGhpcy5mb3JtSXRlbS5leHByZXNzX3RlbXBfaWQgPSAnJzsKICAgICAgICAgIHRoaXMuZm9ybUl0ZW0uZXhwcmVzc19yZWNvcmRfdHlwZSA9ICcxJzsKICAgICAgICAgIHRoaXMuZXhwcmVzc1RlbXAgPSBbXTsKICAgICAgICAgIHRoaXMuZ2V0TGlzdCgxKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJzInOgogICAgICAgICAgdGhpcy5mb3JtSXRlbS5zaF9kZWxpdmVyeSA9ICcnOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnMyc6CiAgICAgICAgICB0aGlzLmZvcm1JdGVtLmZpY3RpdGlvdXNfY29udGVudCA9ICcnOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIC8vIHRoaXMuZm9ybUl0ZW0gPSB7CiAgICAgICAgICAvLyAgICAgdHlwZTogJzMnLAogICAgICAgICAgLy8gICAgIGV4cHJlc3NfcmVjb3JkX3R5cGU6ICcxJywKICAgICAgICAgIC8vICAgICBkZWxpdmVyeV9uYW1lOiAnJywKICAgICAgICAgIC8vICAgICBkZWxpdmVyeV9pZDogJycsCiAgICAgICAgICAvLyAgICAgZXhwcmVzc190ZW1wX2lkOiAnJywKICAgICAgICAgIC8vICAgICB0b19uYW1lOiAnJywKICAgICAgICAgIC8vICAgICB0b190ZWw6ICcnLAogICAgICAgICAgLy8gICAgIHRvX2FkZHI6ICcnLAogICAgICAgICAgLy8gICAgIHNoX2RlbGl2ZXJ5OiAnJwogICAgICAgICAgLy8gfTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlRXhwcmVzcyhqKSB7CiAgICAgIHN3aXRjaCAoaikgewogICAgICAgIGNhc2UgJzInOgogICAgICAgICAgdGhpcy5mb3JtSXRlbS5kZWxpdmVyeV9uYW1lID0gJyc7CiAgICAgICAgICB0aGlzLmZvcm1JdGVtLmV4cHJlc3NfdGVtcF9pZCA9ICcnOwogICAgICAgICAgdGhpcy5leHByZXNzVGVtcCA9IFtdOwogICAgICAgICAgdGhpcy5nZXRMaXN0KDIpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnMSc6CiAgICAgICAgICB0aGlzLmZvcm1JdGVtLmRlbGl2ZXJ5X25hbWUgPSAnJzsKICAgICAgICAgIHRoaXMuZm9ybUl0ZW0uZGVsaXZlcnlfaWQgPSAnJzsKICAgICAgICAgIHRoaXMuZ2V0TGlzdCgxKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIHJlc2V0KCkgewogICAgICB0aGlzLmZvcm1JdGVtID0gewogICAgICAgIHR5cGU6ICcxJywKICAgICAgICBleHByZXNzX3JlY29yZF90eXBlOiAnMScsCiAgICAgICAgZGVsaXZlcnlfbmFtZTogJycsCiAgICAgICAgZGVsaXZlcnlfaWQ6ICcnLAogICAgICAgIGV4cHJlc3NfdGVtcF9pZDogJycsCiAgICAgICAgZXhwcmVzc1RlbXA6IFtdLAogICAgICAgIHRvX25hbWU6ICcnLAogICAgICAgIHRvX3RlbDogJycsCiAgICAgICAgdG9fYWRkcjogJycsCiAgICAgICAgc2hfZGVsaXZlcnk6ICcnLAogICAgICAgIGZpY3RpdGlvdXNfY29udGVudDogJycsCiAgICAgIH07CiAgICB9LAogICAgLy8g54mp5rWB5YWs5Y+45YiX6KGoCiAgICBnZXRMaXN0KHR5cGUpIHsKICAgICAgbGV0IHN0YXR1cyA9IHR5cGUgPT09IDIgPyAxIDogJyc7CiAgICAgIGdldEV4cHJlc3NEYXRhKHN0YXR1cykKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmV4cHJlc3MgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMuZ2V0U2hlZXRJbmZvKCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIHByaW50SW1nKHVybCkgewogICAgICBwcmludEpTKHsKICAgICAgICBwcmludGFibGU6IHVybCwKICAgICAgICB0eXBlOiAnaW1hZ2UnLAogICAgICAgIGRvY3VtZW50VGl0bGU6ICflv6vpgJLkv6Hmga8nLAogICAgICAgIHN0eWxlOiBgaW1newogICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICBoZWlnaHQ6IDQ3NnB4OwogICAgICAgIH1gLAogICAgICB9KTsKICAgIH0sCgogICAgLy8g5o+Q5LqkCiAgICBwdXRTZW5kKG5hbWUpIHsKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgaWQ6IHRoaXMub3JkZXJJZCwKICAgICAgICBkYXRhczogdGhpcy5mb3JtSXRlbSwKICAgICAgfTsKICAgICAgaWYgKHRoaXMuZm9ybUl0ZW0udHlwZSA9PT0gJzEnICYmIHRoaXMuZm9ybUl0ZW0uZXhwcmVzc19yZWNvcmRfdHlwZSA9PT0gJzInKSB7CiAgICAgICAgaWYgKHRoaXMuZm9ybUl0ZW0uZGVsaXZlcnlfbmFtZSA9PT0gJycpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCflv6vpgJLlhazlj7jkuI3og73kuLrnqbonKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybUl0ZW0uZXhwcmVzc190ZW1wX2lkID09PSAnJykgewogICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+eUteWtkOmdouWNleS4jeiDveS4uuepuicpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5mb3JtSXRlbS50b19uYW1lID09PSAnJykgewogICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+WvhOS7tuS6uuWnk+WQjeS4jeiDveS4uuepuicpOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5mb3JtSXRlbS50b190ZWwgPT09ICcnKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign5a+E5Lu25Lq655S16K+d5LiN6IO95Li656m6Jyk7CiAgICAgICAgfSBlbHNlIGlmICghL14xKDN8NHw1fDd8OHw5fDYpXGR7OX0kL2kudGVzdCh0aGlzLmZvcm1JdGVtLnRvX3RlbCkpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfor7fovpPlhaXmraPnoa7nmoTmiYvmnLrlj7fnoIEnKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybUl0ZW0udG9fYWRkciA9PT0gJycpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCflr4Tku7bkurrlnLDlnYDkuI3og73kuLrnqbonKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZm9ybUl0ZW0udHlwZSA9PT0gJzEnICYmIHRoaXMuZm9ybUl0ZW0uZXhwcmVzc19yZWNvcmRfdHlwZSA9PT0gJzEnKSB7CiAgICAgICAgaWYgKHRoaXMuZm9ybUl0ZW0uZGVsaXZlcnlfbmFtZSA9PT0gJycpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCflv6vpgJLlhazlj7jkuI3og73kuLrnqbonKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZm9ybUl0ZW0uZGVsaXZlcnlfaWQgPT09ICcnKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign5b+r6YCS5Y2V5Y+35LiN6IO95Li656m6Jyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1JdGVtLnR5cGUgPT09ICcyJykgewogICAgICAgIGlmICh0aGlzLmZvcm1JdGVtLnNoX2RlbGl2ZXJ5ID09PSAnJykgewogICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+mAgei0p+S6uuS4jeiDveS4uuepuicpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5zcGxpdFN3aXRjaCkgewogICAgICAgIGRhdGEuZGF0YXMuY2FydF9pZHMgPSBbXTsKICAgICAgICB0aGlzLnNlbGVjdERhdGEuZm9yRWFjaCgodikgPT4gewogICAgICAgICAgZGF0YS5kYXRhcy5jYXJ0X2lkcy5wdXNoKHsKICAgICAgICAgICAgY2FydF9pZDogdi5jYXJ0X2lkLAogICAgICAgICAgICBjYXJ0X251bTogdi5udW0gfHwgdi5zdXJwbHVzX251bSwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHNwbGl0RGVsaXZlcnkoZGF0YSkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5tb2RhbHMgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICB0aGlzLiRlbWl0KCdzdWJtaXRGYWlsJyk7CiAgICAgICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgICAgICAgdGhpcy5zcGxpdFN3aXRjaCA9IGZhbHNlOwogICAgICAgICAgICBpZiAocmVzLmRhdGEubGFiZWwpIHRoaXMucHJpbnRJbWcocmVzLmRhdGEubGFiZWwpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwdXREZWxpdmVyeShkYXRhKQogICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICAgIHRoaXMuc3BsaXRTd2l0Y2ggPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kZW1pdCgnc3VibWl0RmFpbCcpOwogICAgICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5sYWJlbCkgdGhpcy5wcmludEltZyhyZXMuZGF0YS5sYWJlbCk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY2FuY2VsKG5hbWUpIHsKICAgICAgdGhpcy5tb2RhbHMgPSBmYWxzZTsKICAgICAgdGhpcy5vcmRlclN0YXR1cyA9IDA7CiAgICAgIHRoaXMuc3BsaXRTd2l0Y2ggPSBmYWxzZTsKICAgICAgdGhpcy5zZWxlY3REYXRhID0gW107CiAgICAgIHRoaXMuZm9ybUl0ZW0udHlwZSA9ICcxJzsKICAgICAgdGhpcy4kZW1pdCgnY2xlYXJJZCcpOwogICAgICB0aGlzLnJlc2V0KCk7CiAgICAgIC8vIHRoaXMuJHJlZnNbbmFtZV0ucmVzZXRGaWVsZHMoKTsKICAgICAgLy8gdGhpcy5mb3JtSXRlbS50eXBlID0gJzEnOwogICAgfSwKICAgIC8vIOeUteWtkOmdouWNleWIl+ihqAogICAgZXhwcmVzc0NoYW5nZSh2YWx1ZSkgewogICAgICBsZXQgZXhwcmVzc0l0ZW0gPSB0aGlzLmV4cHJlc3MuZmluZCgoaXRlbSkgPT4gewogICAgICAgIHJldHVybiBpdGVtLnZhbHVlID09PSB2YWx1ZTsKICAgICAgfSk7CiAgICAgIGlmIChleHByZXNzSXRlbSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuZm9ybUl0ZW0uZGVsaXZlcnlfY29kZSA9IGV4cHJlc3NJdGVtLmNvZGU7CiAgICAgIGlmICh0aGlzLmZvcm1JdGVtLmV4cHJlc3NfcmVjb3JkX3R5cGUgPT09ICcyJykgewogICAgICAgIHRoaXMuZXhwcmVzc1RlbXAgPSBbXTsKICAgICAgICB0aGlzLmZvcm1JdGVtLmV4cHJlc3NfdGVtcF9pZCA9ICcnOwogICAgICAgIG9yZGVyRXhwcmVzc1RlbXAoewogICAgICAgICAgY29tOiB0aGlzLmZvcm1JdGVtLmRlbGl2ZXJ5X2NvZGUsCiAgICAgICAgfSkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5leHByZXNzVGVtcCA9IHJlcy5kYXRhOwogICAgICAgICAgICBpZiAoIXJlcy5kYXRhLmxlbmd0aCkgewogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+ivt+mFjee9ruS9oOaJgOmAieW/q+mAkuWFrOWPuOeahOeUteWtkOmdouWNlScpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihlcnIubXNnKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZ2V0Q2FydEluZm8oZGF0YSwgb3JkZXJpZCkgewogICAgICB0aGlzLiRzZXQodGhpcywgJ29yZGVyU3RhdHVzJywgZGF0YSk7CiAgICAgIHRoaXMuJHNldCh0aGlzLCAnc3BsaXRTd2l0Y2gnLCBkYXRhID09PSA4IHx8IGRhdGEgPT09IDExID8gdHJ1ZSA6IGZhbHNlKTsKICAgICAgc3BsaXRDYXJ0SW5mbyh0aGlzLm9yZGVySWQpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZSA9IFtdOwogICAgICAgIE9iamVjdC5rZXlzKHJlcy5kYXRhKS5mb3JFYWNoKChrZXkpID0+IHsKICAgICAgICAgIHRoaXMubWFueUZvcm1WYWxpZGF0ZS5wdXNoKHJlcy5kYXRhW2tleV0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBnZXREZWxpdmVyeUxpc3QoKSB7CiAgICAgIG9yZGVyRGVsaXZlcnlMaXN0KCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmRlbGl2ZXJ5TGlzdCA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihlcnIubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBnZXRTaGVldEluZm8oKSB7CiAgICAgIG9yZGVyU2hlZXRJbmZvKCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhKSB7CiAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGtleSkpIHsKICAgICAgICAgICAgICB0aGlzLmZvcm1JdGVtW2tleV0gPSBkYXRhW2tleV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZXhwb3J0X29wZW4gPSBkYXRhLmV4cG9ydF9vcGVuID09PSB1bmRlZmluZWQgPyB0cnVlIDogZGF0YS5leHBvcnRfb3BlbjsKICAgICAgICAgIGlmICghdGhpcy5leHBvcnRfb3BlbikgewogICAgICAgICAgICB0aGlzLmZvcm1JdGVtLmV4cHJlc3NfcmVjb3JkX3R5cGUgPSAnMSc7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmZvcm1JdGVtLnRvX2FkZHIgPSBkYXRhLnRvX2FkZDsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVyci5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIHNoRGVsaXZlcnlDaGFuZ2UodmFsdWUpIHsKICAgICAgaWYgKCF2YWx1ZSkgcmV0dXJuOwogICAgICBsZXQgZGVsaXZlcnlJdGVtID0gdGhpcy5kZWxpdmVyeUxpc3QuZmluZCgoaXRlbSkgPT4gewogICAgICAgIHJldHVybiBpdGVtLmlkID09PSB2YWx1ZTsKICAgICAgfSk7CiAgICAgIHRoaXMuZm9ybUl0ZW0uc2hfZGVsaXZlcnlfbmFtZSA9IGRlbGl2ZXJ5SXRlbS53eF9uYW1lOwogICAgICB0aGlzLmZvcm1JdGVtLnNoX2RlbGl2ZXJ5X2lkID0gZGVsaXZlcnlJdGVtLnBob25lOwogICAgICB0aGlzLmZvcm1JdGVtLnNoX2RlbGl2ZXJ5X3VpZCA9IGRlbGl2ZXJ5SXRlbS51aWQ7CiAgICB9LAogICAgZXhwcmVzc1RlbXBDaGFuZ2UodGVtcElkKSB7CiAgICAgIHRoaXMudGVtcCA9IHRoaXMuZXhwcmVzc1RlbXAuZmluZCgoaXRlbSkgPT4gewogICAgICAgIHJldHVybiB0ZW1wSWQgPT09IGl0ZW0udGVtcF9pZDsKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLnRlbXAgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMudGVtcCA9IHt9OwogICAgICB9CiAgICB9LAogICAgLy8gaW5pdGVkICh2aWV3ZXIpIHsKICAgIC8vICAgICB0aGlzLiR2aWV3ZXIgPSB2aWV3ZXI7CiAgICAvLyB9LAogICAgcHJldmlldygpIHsKICAgICAgdGhpcy4kcmVmcy52aWV3ZXIuJHZpZXdlci5zaG93KCk7CiAgICAgIC8vIHRoaXMuJHZpZXdlci5zaG93KCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["orderSend.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"orderSend.vue","sourceRoot":"src/pages/order/orderList/handle","sourcesContent":["<template>\n  <Modal\n    v-model=\"modals\"\n    scrollable\n    title=\"订单发送货\"\n    class=\"order_box\"\n    :closable=\"false\"\n    width=\"1000\"\n    @on-visible-change=\"changeModal\"\n  >\n    <Form v-if=\"modals\" ref=\"formItem\" :model=\"formItem\" :label-width=\"100\" @submit.native.prevent>\n      <FormItem label=\"选择类型：\">\n        <RadioGroup v-model=\"formItem.type\" @on-change=\"changeRadio\">\n          <Radio label=\"1\" v-if=\"virtual_type !== 3\">发货</Radio>\n          <Radio label=\"2\" v-if=\"virtual_type !== 3\">送货</Radio>\n          <Radio label=\"3\">无需配送</Radio>\n        </RadioGroup>\n      </FormItem>\n      <FormItem v-if=\"formItem.type == 1\" v-show=\"export_open\" label=\"发货类型：\">\n        <RadioGroup v-model=\"formItem.express_record_type\" @on-change=\"changeExpress\">\n          <Radio label=\"1\">手动填写</Radio>\n          <Radio label=\"2\">电子面单打印</Radio>\n        </RadioGroup>\n      </FormItem>\n      <div>\n        <FormItem label=\"快递公司：\" v-if=\"formItem.type == 1\">\n          <Select\n            v-model=\"formItem.delivery_name\"\n            filterable\n            placeholder=\"请选择快递公司\"\n            style=\"width: 80%\"\n            @on-change=\"expressChange\"\n          >\n            <Option v-for=\"(item, i) in express\" :value=\"item.value\" :key=\"item.value\">{{ item.value }}</Option>\n          </Select>\n        </FormItem>\n        <FormItem v-if=\"formItem.express_record_type === '1' && formItem.type == 1\" label=\"快递单号：\">\n          <Input v-model=\"formItem.delivery_id\" placeholder=\"请输入快递单号\" style=\"width: 80%\"></Input>\n          <div class=\"trips\" v-if=\"formItem.delivery_name == '顺丰速运'\">\n            <p>顺丰请输入单号 :收件人或寄件人手机号后四位，</p>\n            <p>例如：SF000000000000:3941</p>\n          </div>\n        </FormItem>\n        <template v-if=\"formItem.express_record_type === '2' && formItem.type == 1\">\n          <FormItem label=\"电子面单：\" class=\"express_temp_id\">\n            <Select\n              v-model=\"formItem.express_temp_id\"\n              placeholder=\"请选择电子面单\"\n              style=\"width: 80%\"\n              @on-change=\"expressTempChange\"\n            >\n              <Option v-for=\"(item, i) in expressTemp\" :value=\"item.temp_id\" :key=\"i\">{{ item.title }}</Option>\n            </Select>\n            <Button v-if=\"formItem.express_temp_id\" type=\"text\" @click=\"preview\">预览</Button>\n          </FormItem>\n          <FormItem label=\"寄件人姓名：\">\n            <Input v-model=\"formItem.to_name\" placeholder=\"请输入寄件人姓名\" style=\"width: 80%\"></Input>\n          </FormItem>\n          <FormItem label=\"寄件人电话：\">\n            <Input v-model=\"formItem.to_tel\" placeholder=\"请输入寄件人电话\" style=\"width: 80%\"></Input>\n          </FormItem>\n          <FormItem label=\"寄件人地址：\">\n            <Input v-model=\"formItem.to_addr\" placeholder=\"请输入寄件人地址\" style=\"width: 80%\"></Input>\n          </FormItem>\n        </template>\n      </div>\n      <div v-show=\"formItem.type === '2'\">\n        <FormItem label=\"送货人：\">\n          <Select\n            v-model=\"formItem.sh_delivery\"\n            placeholder=\"请选择送货人\"\n            style=\"width: 80%\"\n            @on-change=\"shDeliveryChange\"\n          >\n            <Option v-for=\"(item, i) in deliveryList\" :value=\"item.id\" :key=\"i\"\n              >{{ item.wx_name }}（{{ item.phone }}）</Option\n            >\n          </Select>\n        </FormItem>\n      </div>\n      <div v-show=\"formItem.type === '3'\">\n        <FormItem label=\"备注：\">\n          <Input\n            v-model=\"formItem.fictitious_content\"\n            type=\"textarea\"\n            :autosize=\"{ minRows: 2, maxRows: 5 }\"\n            placeholder=\"备注\"\n            style=\"width: 80%\"\n          ></Input>\n        </FormItem>\n      </div>\n      <div v-if=\"total_num > 1\">\n        <FormItem label=\"分单发货：\">\n          <i-switch\n            size=\"large\"\n            v-model=\"splitSwitch\"\n            :disabled=\"orderStatus === 8 || orderStatus === 11\"\n            @on-change=\"changeSplitStatus\"\n          >\n            <span slot=\"open\">开启</span>\n            <span slot=\"close\">关闭</span>\n          </i-switch>\n          <div class=\"trips\">\n            <p>可选择表格中的商品单独发货，发货后会生成新的订单且不能撤回，请谨慎操作！</p>\n          </div>\n          <i-table\n            v-if=\"splitSwitch && manyFormValidate.length\"\n            :data=\"manyFormValidate\"\n            @on-selection-change=\"selectOne\"\n            :columns=\"header\"\n          >\n            <template slot-scope=\"{ row, index }\" slot=\"image\">\n              <div class=\"product-data\">\n                <img class=\"image\" :src=\"row.cart_info.productInfo.image\" />\n                <div class=\"line2\">\n                  {{ row.cart_info.productInfo.store_name }}\n                </div>\n              </div>\n            </template>\n            <template slot-scope=\"{ row, index }\" slot=\"value\">\n              <div class=\"product-data\">\n                <div>{{ row.cart_info.productInfo.attrInfo.suk }}</div>\n              </div>\n            </template>\n            <template slot-scope=\"{ row, index }\" slot=\"price\">\n              <div class=\"product-data\">\n                <div>{{ row.cart_info.truePrice }}</div>\n              </div>\n            </template>\n          </i-table>\n        </FormItem>\n      </div>\n    </Form>\n    <div slot=\"footer\">\n      <Button @click=\"cancel\">取消</Button>\n      <Button type=\"primary\" @click=\"putSend\">提交</Button>\n    </div>\n    <!-- <viewer @inited=\"inited\">\n            <img :src=\"temp.pic\" style=\"display:none\" />\n        </viewer> -->\n    <div ref=\"viewer\" v-viewer v-show=\"temp\">\n      <img :src=\"temp.pic\" style=\"display: none\" />\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport {\n  getExpressData,\n  putDelivery,\n  splitDelivery,\n  orderExpressTemp,\n  orderDeliveryList,\n  orderSheetInfo,\n  splitCartInfo,\n} from '@/api/order';\nimport printJS from 'print-js';\nexport default {\n  name: 'orderSend',\n  props: {\n    orderId: Number,\n    status: Number,\n    // total_num: Number,\n    pay_type: String,\n    virtual_type: Number,\n  },\n  watch: {\n    orderId(val) {\n      if (this.virtual_type == 3) this.formItem.type = '3';\n    },\n  },\n  data() {\n    return {\n      orderStatus: 0,\n      total_num: 0,\n      splitSwitch: true,\n      formItem: {\n        type: '1',\n        express_record_type: '1',\n        delivery_name: '',\n        delivery_id: '',\n        express_temp_id: '',\n        to_name: '',\n        to_tel: '',\n        to_addr: '',\n        sh_delivery: '',\n        fictitious_content: '',\n      },\n      modals: false,\n      express: [],\n      expressTemp: [],\n      deliveryList: [],\n      temp: {},\n      export_open: false,\n      manyFormValidate: [],\n      header: [\n        {\n          type: 'selection',\n          width: 60,\n          align: 'center',\n        },\n        {\n          title: '商品信息',\n          slot: 'image',\n          width: 200,\n          align: 'center',\n        },\n        {\n          title: '规格',\n          slot: 'value',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '价格',\n          slot: 'price',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '总数',\n          key: 'cart_num',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '待发数量',\n          key: 'surplus_num',\n          align: 'center',\n          width: 180,\n          render: (h, params) => {\n            return h('div', [\n              h('InputNumber', {\n                props: {\n                  min: 1,\n                  max: params.row.surplus_num,\n                  value: params.row.num || params.row.surplus_num,\n                },\n                on: {\n                  'on-change': (e) => {\n                    // params.row.surplus_num = e || 1;\n                    params.row.num = e || 1;\n                    this.manyFormValidate[params.index] = params.row;\n                    this.selectData.forEach((v, index) => {\n                      if (v.cart_id === params.row.cart_id) {\n                        this.selectData.splice(index, 1, params.row);\n                      }\n                    });\n                  },\n                },\n              }),\n            ]);\n          },\n        },\n      ],\n      selectData: [],\n    };\n  },\n  methods: {\n    selectOne(data) {\n      this.selectData = data;\n    },\n    changeModal(status) {\n      if (!status) {\n        this.cancel();\n      }\n    },\n    changeSplitStatus(status) {\n      // this.splitSwitch = status;\n      if (status) {\n        splitCartInfo(this.orderId).then((res) => {\n          this.manyFormValidate = [];\n          Object.keys(res.data).forEach((key) => {\n            this.manyFormValidate.push(res.data[key]);\n          });\n        });\n      }\n    },\n    changeRadio(o) {\n      this.$refs.formItem.resetFields();\n      switch (o) {\n        case '1':\n          this.formItem.delivery_name = '';\n          this.formItem.delivery_id = '';\n          this.formItem.express_temp_id = '';\n          this.formItem.express_record_type = '1';\n          this.expressTemp = [];\n          this.getList(1);\n          break;\n        case '2':\n          this.formItem.sh_delivery = '';\n          break;\n        case '3':\n          this.formItem.fictitious_content = '';\n          break;\n        default:\n          // this.formItem = {\n          //     type: '3',\n          //     express_record_type: '1',\n          //     delivery_name: '',\n          //     delivery_id: '',\n          //     express_temp_id: '',\n          //     to_name: '',\n          //     to_tel: '',\n          //     to_addr: '',\n          //     sh_delivery: ''\n          // };\n          break;\n      }\n    },\n    changeExpress(j) {\n      switch (j) {\n        case '2':\n          this.formItem.delivery_name = '';\n          this.formItem.express_temp_id = '';\n          this.expressTemp = [];\n          this.getList(2);\n          break;\n        case '1':\n          this.formItem.delivery_name = '';\n          this.formItem.delivery_id = '';\n          this.getList(1);\n          break;\n        default:\n          break;\n      }\n    },\n    reset() {\n      this.formItem = {\n        type: '1',\n        express_record_type: '1',\n        delivery_name: '',\n        delivery_id: '',\n        express_temp_id: '',\n        expressTemp: [],\n        to_name: '',\n        to_tel: '',\n        to_addr: '',\n        sh_delivery: '',\n        fictitious_content: '',\n      };\n    },\n    // 物流公司列表\n    getList(type) {\n      let status = type === 2 ? 1 : '';\n      getExpressData(status)\n        .then(async (res) => {\n          this.express = res.data;\n          this.getSheetInfo();\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    printImg(url) {\n      printJS({\n        printable: url,\n        type: 'image',\n        documentTitle: '快递信息',\n        style: `img{\n          width: 100%;\n          height: 476px;\n        }`,\n      });\n    },\n\n    // 提交\n    putSend(name) {\n      let data = {\n        id: this.orderId,\n        datas: this.formItem,\n      };\n      if (this.formItem.type === '1' && this.formItem.express_record_type === '2') {\n        if (this.formItem.delivery_name === '') {\n          return this.$Message.error('快递公司不能为空');\n        } else if (this.formItem.express_temp_id === '') {\n          return this.$Message.error('电子面单不能为空');\n        } else if (this.formItem.to_name === '') {\n          return this.$Message.error('寄件人姓名不能为空');\n        } else if (this.formItem.to_tel === '') {\n          return this.$Message.error('寄件人电话不能为空');\n        } else if (!/^1(3|4|5|7|8|9|6)\\d{9}$/i.test(this.formItem.to_tel)) {\n          return this.$Message.error('请输入正确的手机号码');\n        } else if (this.formItem.to_addr === '') {\n          return this.$Message.error('寄件人地址不能为空');\n        }\n      }\n      if (this.formItem.type === '1' && this.formItem.express_record_type === '1') {\n        if (this.formItem.delivery_name === '') {\n          return this.$Message.error('快递公司不能为空');\n        } else if (this.formItem.delivery_id === '') {\n          return this.$Message.error('快递单号不能为空');\n        }\n      }\n      if (this.formItem.type === '2') {\n        if (this.formItem.sh_delivery === '') {\n          return this.$Message.error('送货人不能为空');\n        }\n      }\n      if (this.splitSwitch) {\n        data.datas.cart_ids = [];\n        this.selectData.forEach((v) => {\n          data.datas.cart_ids.push({\n            cart_id: v.cart_id,\n            cart_num: v.num || v.surplus_num,\n          });\n        });\n        splitDelivery(data)\n          .then((res) => {\n            this.modals = false;\n            this.$Message.success(res.msg);\n            this.$emit('submitFail');\n            this.reset();\n            this.splitSwitch = false;\n            if (res.data.label) this.printImg(res.data.label);\n          })\n          .catch((res) => {\n            this.$Message.error(res.msg);\n          });\n      } else {\n        putDelivery(data)\n          .then(async (res) => {\n            this.modals = false;\n            this.$Message.success(res.msg);\n            this.splitSwitch = false;\n            this.$emit('submitFail');\n            this.reset();\n            if (res.data.label) this.printImg(res.data.label);\n          })\n          .catch((res) => {\n            this.$Message.error(res.msg);\n          });\n      }\n    },\n    cancel(name) {\n      this.modals = false;\n      this.orderStatus = 0;\n      this.splitSwitch = false;\n      this.selectData = [];\n      this.formItem.type = '1';\n      this.$emit('clearId');\n      this.reset();\n      // this.$refs[name].resetFields();\n      // this.formItem.type = '1';\n    },\n    // 电子面单列表\n    expressChange(value) {\n      let expressItem = this.express.find((item) => {\n        return item.value === value;\n      });\n      if (expressItem === undefined) {\n        return;\n      }\n      this.formItem.delivery_code = expressItem.code;\n      if (this.formItem.express_record_type === '2') {\n        this.expressTemp = [];\n        this.formItem.express_temp_id = '';\n        orderExpressTemp({\n          com: this.formItem.delivery_code,\n        })\n          .then((res) => {\n            this.expressTemp = res.data;\n            if (!res.data.length) {\n              this.$Message.error('请配置你所选快递公司的电子面单');\n            }\n          })\n          .catch((err) => {\n            this.$Message.error(err.msg);\n          });\n      }\n    },\n    getCartInfo(data, orderid) {\n      this.$set(this, 'orderStatus', data);\n      this.$set(this, 'splitSwitch', data === 8 || data === 11 ? true : false);\n      splitCartInfo(this.orderId).then((res) => {\n        this.manyFormValidate = [];\n        Object.keys(res.data).forEach((key) => {\n          this.manyFormValidate.push(res.data[key]);\n        });\n      });\n    },\n    getDeliveryList() {\n      orderDeliveryList()\n        .then((res) => {\n          this.deliveryList = res.data.list;\n        })\n        .catch((err) => {\n          this.$Message.error(err.msg);\n        });\n    },\n    getSheetInfo() {\n      orderSheetInfo()\n        .then((res) => {\n          const data = res.data;\n          for (const key in data) {\n            if (data.hasOwnProperty(key)) {\n              this.formItem[key] = data[key];\n            }\n          }\n          this.export_open = data.export_open === undefined ? true : data.export_open;\n          if (!this.export_open) {\n            this.formItem.express_record_type = '1';\n          }\n          this.formItem.to_addr = data.to_add;\n        })\n        .catch((err) => {\n          this.$Message.error(err.msg);\n        });\n    },\n    shDeliveryChange(value) {\n      if (!value) return;\n      let deliveryItem = this.deliveryList.find((item) => {\n        return item.id === value;\n      });\n      this.formItem.sh_delivery_name = deliveryItem.wx_name;\n      this.formItem.sh_delivery_id = deliveryItem.phone;\n      this.formItem.sh_delivery_uid = deliveryItem.uid;\n    },\n    expressTempChange(tempId) {\n      this.temp = this.expressTemp.find((item) => {\n        return tempId === item.temp_id;\n      });\n      if (this.temp === undefined) {\n        this.temp = {};\n      }\n    },\n    // inited (viewer) {\n    //     this.$viewer = viewer;\n    // },\n    preview() {\n      this.$refs.viewer.$viewer.show();\n      // this.$viewer.show();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.express_temp_id {\n  position: relative;\n}\n\n.express_temp_id button {\n  position: absolute;\n  top: 50%;\n  right: 110px;\n  padding: 0;\n  border: none;\n  background: none;\n  transform: translateY(-50%);\n  color: #57a3f3;\n}\n\n.ivu-btn-text:focus {\n  box-shadow: none;\n}\n.trips {\n  color: #ccc;\n}\n.product-data {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.product-data .image {\n  width: 50px !important;\n  height: 50px !important;\n}\n.line2 {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n</style>\n"]}]}