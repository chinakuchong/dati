{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/product/productAdd/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/product/productAdd/index.vue","mtime":1689324015246},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1c2VyTGFiZWwgZnJvbSAnQC9jb21wb25lbnRzL2xhYmVsTGlzdCc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB2dWVkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJzsKaW1wb3J0IHVwbG9hZFBpY3R1cmVzIGZyb20gJ0AvY29tcG9uZW50cy91cGxvYWRQaWN0dXJlcyc7CmltcG9ydCBmcmVpZ2h0VGVtcGxhdGUgZnJvbSAnQC9jb21wb25lbnRzL2ZyZWlnaHRUZW1wbGF0ZSc7CmltcG9ydCBjb3Vwb25MaXN0IGZyb20gJ0AvY29tcG9uZW50cy9jb3Vwb25MaXN0JzsKaW1wb3J0IGFkZEF0dHIgZnJvbSAnLi4vcHJvZHVjdEF0dHIvYWRkQXR0cic7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAnQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCc7CmltcG9ydCB0YW9CYW8gZnJvbSAnLi90YW9CYW8nOwppbXBvcnQgV2FuZ0VkaXRvciBmcm9tICdAL2NvbXBvbmVudHMvd2FuZ0VkaXRvci9pbmRleC52dWUnOwppbXBvcnQgeyB1c2VyTGFiZWxBZGRBcGkgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsKICBwcm9kdWN0SW5mb0FwaSwKICBjYXNjYWRlckxpc3RBcGksCiAgcHJvZHVjdEFkZEFwaSwKICBnZW5lcmF0ZUF0dHJBcGksCiAgcHJvZHVjdEdldFJ1bGVBcGksCiAgcHJvZHVjdEdldFRlbXBsYXRlQXBpLAogIHByb2R1Y3RHZXRUZW1wS2V5c0FwaSwKICBjaGVja0FjdGl2aXR5QXBpLAogIHByb2R1Y3RDYWNoZSwKICBjYWNoZURlbGV0ZSwKICB1cGxvYWRUeXBlLAogIGltcG9ydENhcmQsCiAgcHJvZHVjdENyZWF0ZUFwaSwKfSBmcm9tICdAL2FwaS9wcm9kdWN0JzsKaW1wb3J0IFNldHRpbmcgZnJvbSAnQC9zZXR0aW5nJzsKaW1wb3J0IHsgZ2V0Q29va2llcyB9IGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IHsgdXBsb2FkQnlQaWVjZXMgfSBmcm9tICdAL3V0aWxzL3VwbG9hZCc7IC8v5byV5YWldXBsb2FkQnlQaWVjZXPmlrnms5UKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJvZHVjdF9wcm9kdWN0QWRkJywKICBjb21wb25lbnRzOiB7CiAgICAvLyBWdWVVZWRpdG9yV3JhcCwKICAgIHVwbG9hZFBpY3R1cmVzLAogICAgZnJlaWdodFRlbXBsYXRlLAogICAgYWRkQXR0ciwKICAgIGNvdXBvbkxpc3QsCiAgICB0YW9CYW8sCiAgICBkcmFnZ2FibGU6IHZ1ZWRyYWdnYWJsZSwKICAgIGdvb2RzTGlzdCwKICAgIFdhbmdFZGl0b3IsCiAgICB1c2VyTGFiZWwsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGFiZWxTaG93OiBmYWxzZSwKICAgICAgZGF0YUxhYmVsOiBbXSwKICAgICAgaGVhZFRhYjogWwogICAgICAgIHsgdGl0OiAn5Z+656GA5L+h5oGvJywgbmFtZTogJzEnIH0sCiAgICAgICAgeyB0aXQ6ICfop4TmoLzlupPlrZgnLCBuYW1lOiAnMicgfSwKICAgICAgICB7IHRpdDogJ+WVhuWTgeivpuaDhScsIG5hbWU6ICczJyB9LAogICAgICAgIHsgdGl0OiAn54mp5rWB6K6+572uJywgbmFtZTogJzQnIH0sCiAgICAgICAgeyB0aXQ6ICfokKXplIDorr7nva4nLCBuYW1lOiAnNScgfSwKICAgICAgICB7IHRpdDogJ+WFtuS7luiuvue9ricsIG5hbWU6ICc2JyB9LAogICAgICBdLAogICAgICB2aXJ0dWFsOiBbCiAgICAgICAgeyB0aXQ6ICfmma7pgJrllYblk4EnLCBpZDogMCwgdGl0MjogJ+eJqea1geWPkei0pycgfSwKICAgICAgICB7IHRpdDogJ+WNoeWvhi/nvZHnm5gnLCBpZDogMSwgdGl0MjogJ+iHquWKqOWPkei0pycgfSwKICAgICAgICB7IHRpdDogJ+S8mOaDoOWIuCcsIGlkOiAyLCB0aXQyOiAn6Ieq5Yqo5Y+R6LSnJyB9LAogICAgICAgIHsgdGl0OiAn6Jma5ouf5ZWG5ZOBJywgaWQ6IDMsIHRpdDI6ICfomZrmi5/lj5HotKcnIH0sCiAgICAgIF0sCiAgICAgIHNlbGV0VmlkZW86IDAsIC8v6YCJ5oup6KeG6aKR57G75Z6LCiAgICAgIGN1c3RvbUJ0bjogZmFsc2UsIC8v6Ieq5a6a5LmJ55WZ6KiA5byA5YWzCiAgICAgIGNvbnRlbnQ6ICcnLAogICAgICBjb250ZW50czogJycsCiAgICAgIGZpbGVVcmw6IFNldHRpbmcuYXBpQmFzZVVSTCArICcvZmlsZS91cGxvYWQnLAogICAgICBmaWxlVXJsMjogU2V0dGluZy5hcGlCYXNlVVJMICsgJy9maWxlL3ZpZGVvX3VwbG9hZCcsCiAgICAgIGNhcmRVcmw6IFNldHRpbmcuYXBpQmFzZVVSTCArICcvZmlsZS91cGxvYWQvMScsCiAgICAgIHVwbG9hZF90eXBlOiAnJywgLy/op4bpopHkuIrkvKDnsbvlnosgMSDmnKzlnLDkuIrkvKAgMiAzIDQgT1NT5LiK5LygCiAgICAgIHVwbG9hZERhdGE6IHt9LCAvLyDkuIrkvKDlj4LmlbAKICAgICAgaGVhZGVyOiB7fSwKCiAgICAgIHR5cGU6IDAsCiAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgIGdvb2RzX21vZGFsczogZmFsc2UsCiAgICAgIHNwaW5TaG93OiBmYWxzZSwKICAgICAgb3BlblN1YmltaXQ6IGZhbHNlLAogICAgICB2aXJ0dWFsRGF0YTogJycsCiAgICAgIHZpcnR1YWxMaXN0OiBbCiAgICAgICAgewogICAgICAgICAga2V5OiAnJywKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICB9LAogICAgICBdLAogICAgICBncmlkMjogewogICAgICAgIHhsOiAxMCwKICAgICAgICBsZzogMTIsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIGdyaWQzOiB7CiAgICAgICAgeGw6IDE4LAogICAgICAgIGxnOiAxOCwKICAgICAgICBtZDogMjAsCiAgICAgICAgc206IDI0LAogICAgICAgIHhzOiAyNCwKICAgICAgfSwKICAgICAgLy8g5om56YeP6K6+572u6KGo5qC8ZGF0YQogICAgICBvbmVGb3JtQmF0Y2g6IFsKICAgICAgICB7CiAgICAgICAgICBwaWM6ICcnLAogICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgb3RfcHJpY2U6IDAsCiAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgIHdlaWdodDogMCwKICAgICAgICAgIHZvbHVtZTogMCwKICAgICAgICB9LAogICAgICBdLAogICAgICAvLyDop4TmoLzmlbDmja4KICAgICAgZm9ybUR5bmFtaWM6IHsKICAgICAgICBhdHRyc05hbWU6ICcnLAogICAgICAgIGF0dHJzVmFsOiAnJywKICAgICAgfSwKICAgICAgZGlza190eXBlOiAxLCAvL+WNoeWvhuexu+WeiwogICAgICB0YWJJbmRleDogMCwKICAgICAgdGFiTmFtZTogJycsCiAgICAgIGZvcm1EeW5hbWljTmFtZURhdGE6IFtdLAogICAgICBpc0J0bjogZmFsc2UsCiAgICAgIGNvbHVtbnMyOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICflm77niYcnLAogICAgICAgICAgc2xvdDogJ3BpYycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogODAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WUruS7tycsCiAgICAgICAgICBzbG90OiAncHJpY2UnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmiJDmnKzku7cnLAogICAgICAgICAgc2xvdDogJ2Nvc3QnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfljp/ku7cnLAogICAgICAgICAgc2xvdDogJ290X3ByaWNlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5bqT5a2YJywKICAgICAgICAgIHNsb3Q6ICdzdG9jaycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WVhuWTgee8luWPtycsCiAgICAgICAgICBzbG90OiAnYmFyX2NvZGUnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDEyMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn6YeN6YeP77yIS0fvvIknLAogICAgICAgICAgc2xvdDogJ3dlaWdodCcsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S9k+enryhtwrMpJywKICAgICAgICAgIHNsb3Q6ICd2b2x1bWUnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmk43kvZwnLAogICAgICAgICAgc2xvdDogJ2FjdGlvbicsCiAgICAgICAgICBmaXhlZDogJ3JpZ2h0JywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxNDAsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY29sdW1uczM6IFsKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WbvueJhycsCiAgICAgICAgICBzbG90OiAncGljJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA4MCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5ZSu5Lu3JywKICAgICAgICAgIHNsb3Q6ICdwcmljZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+aIkOacrOS7tycsCiAgICAgICAgICBzbG90OiAnY29zdCcsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WOn+S7tycsCiAgICAgICAgICBzbG90OiAnb3RfcHJpY2UnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICflupPlrZgnLAogICAgICAgICAgc2xvdDogJ3N0b2NrJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiA5NSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5ZWG5ZOB57yW5Y+3JywKICAgICAgICAgIHNsb3Q6ICdiYXJfY29kZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogMTIwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfomZrmi5/llYblk4EnLAogICAgICAgICAgc2xvdDogJ2ZpY3RpdGlvdXMnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDk1LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmk43kvZwnLAogICAgICAgICAgc2xvdDogJ2FjdGlvbicsCiAgICAgICAgICBmaXhlZDogJ3JpZ2h0JywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxNDAsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY29sdW1uczogW10sCiAgICAgIGNvbHVtbnNJbnN0YWxsOiBbXSwKICAgICAgY29sdW1uc0luc3RhbDI6IFtdLAogICAgICBncmlkUGljOiB7CiAgICAgICAgeGw6IDYsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAxMiwKICAgICAgICB4czogMTIsCiAgICAgIH0sCiAgICAgIGdyaWRCdG46IHsKICAgICAgICB4bDogNCwKICAgICAgICBsZzogOCwKICAgICAgICBtZDogOCwKICAgICAgICBzbTogOCwKICAgICAgICB4czogOCwKICAgICAgfSwKICAgICAgLy/oh6rlrprkuYnnlZnoqIDkuIvmi4npgInmi6kKICAgICAgQ3VzdG9tTGlzdDogWwogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAndGV4dCcsCiAgICAgICAgICBsYWJlbDogJ+aWh+acrOahhicsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ251bWJlcicsCiAgICAgICAgICBsYWJlbDogJ+aVsOWtlycsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ2VtYWlsJywKICAgICAgICAgIGxhYmVsOiAn6YKu5Lu2JywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnZGF0YScsCiAgICAgICAgICBsYWJlbDogJ+aXpeacnycsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ3RpbWUnLAogICAgICAgICAgbGFiZWw6ICfml7bpl7QnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICdpZCcsCiAgICAgICAgICBsYWJlbDogJ+i6q+S7veivgScsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogJ3Bob25lJywKICAgICAgICAgIGxhYmVsOiAn5omL5py65Y+3JywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAnaW1nJywKICAgICAgICAgIGxhYmVsOiAn5Zu+54mHJywKICAgICAgICB9LAogICAgICBdLAogICAgICBjdXN0b21lc3M6IHsKICAgICAgICBjb250ZW50OiBbXSwKICAgICAgfSwgLy/oh6rlrprkuYnnlZnoqIDlhoXlrrkKCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIGRpc2tfaW5mbzogJycsIC8v5Y2h5a+G57G75Z6LCiAgICAgICAgbG9naXN0aWNzOiBbJzEnXSwgLy/pgInmi6nnianmtYHmlrnlvI8KICAgICAgICBmcmVpZ2h0OiAyLCAvL+i/kOi0ueiuvue9rgogICAgICAgIHBvc3RhZ2U6IDAsIC8v6K6+572u6L+Q6LS56YeR6aKdCiAgICAgICAgcmVjb21tZW5kOiBbXSwgLy/llYblk4HmjqjojZAKICAgICAgICBwcmVzYWxlX2RheTogMSwgLy/pooTllK7lj5HotKfml7bpl7Qt57uT5p2fCiAgICAgICAgcHJlc2FsZTogZmFsc2UsIC8v6aKE5ZSu5ZWG5ZOB5byA5YWzCiAgICAgICAgaXNfbGltaXQ6IGZhbHNlLAogICAgICAgIGxpbWl0X3R5cGU6IDAsCiAgICAgICAgbGltaXRfbnVtOiAwLAogICAgICAgIHZpZGVvX29wZW46IGZhbHNlLCAvL+inhumikeaMiemSruaYr+WQpuaYvuekugogICAgICAgIHZpcF9wcm9kdWN0OiBmYWxzZSwgLy/ku5jotLnkvJrlkZjkuJPlsZ7lvIDlhbMKICAgICAgICBjdXN0b21fZm9ybTogW10sIC8v6Ieq5a6a5LmJ55WZ6KiACiAgICAgICAgc3RvcmVfbmFtZTogJycsCiAgICAgICAgY2F0ZV9pZDogW10sCiAgICAgICAgbGFiZWxfaWQ6IFtdLAogICAgICAgIGtleXdvcmQ6ICcnLAogICAgICAgIHVuaXRfbmFtZTogJycsCiAgICAgICAgc3RvcmVfaW5mbzogJycsCiAgICAgICAgaW1hZ2U6ICcnLAogICAgICAgIHJlY29tbWVuZF9pbWFnZTogJycsCiAgICAgICAgc2xpZGVyX2ltYWdlOiBbXSwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgZmljdGk6IDAsCiAgICAgICAgZ2l2ZV9pbnRlZ3JhbDogMCwKICAgICAgICBzb3J0OiAwLAogICAgICAgIGlzX3Nob3c6IDEsCiAgICAgICAgaXNfaG90OiAwLAogICAgICAgIGlzX2JlbmVmaXQ6IDAsCiAgICAgICAgaXNfYmVzdDogMCwKICAgICAgICBpc19uZXc6IDAsCiAgICAgICAgaXNfZ29vZDogMCwKICAgICAgICBpc19wb3N0YWdlOiAwLAogICAgICAgIGlzX3N1YjogW10sCiAgICAgICAgcmVjb21tZW5kX2xpc3Q6IFtdLAogICAgICAgIHZpcnR1YWxfdHlwZTogMCwKICAgICAgICAvLyBpc19zdWI6IDAsCiAgICAgICAgaWQ6IDAsCiAgICAgICAgc3BlY190eXBlOiAwLAogICAgICAgIGlzX3ZpcnR1YWw6IDAsCiAgICAgICAgdmlkZW9fbGluazogJycsCiAgICAgICAgLy8gcG9zdGFnZTogMCwKICAgICAgICB0ZW1wX2lkOiAnJywKICAgICAgICBhdHRyczogW10sCiAgICAgICAgaXRlbXM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcGljOiAnJywKICAgICAgICAgICAgcHJpY2U6IDAsCiAgICAgICAgICAgIGNvc3Q6IDAsCiAgICAgICAgICAgIG90X3ByaWNlOiAwLAogICAgICAgICAgICBzdG9jazogMCwKICAgICAgICAgICAgYmFyX2NvZGU6ICcnLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIGFjdGl2aXR5OiBbJ+m7mOiupCcsICfnp5LmnYAnLCAn56CN5Lu3JywgJ+aLvOWboiddLAogICAgICAgIGNvdXBvbk5hbWU6IFtdLAogICAgICAgIGhlYWRlcjogW10sCiAgICAgICAgc2VsZWN0UnVsZTogJycsCiAgICAgICAgY291cG9uX2lkczogW10sCiAgICAgICAgY29tbWFuZF93b3JkOiAnJywKICAgICAgfSwKICAgICAgcnVsZUxpc3Q6IFtdLAogICAgICB0ZW1wbGF0ZUxpc3Q6IFtdLAogICAgICBjcmVhdGVCbnQ6IHRydWUsCiAgICAgIHNob3dJcHV0OiBmYWxzZSwKICAgICAgbWFueUZvcm1WYWxpZGF0ZTogW10sCiAgICAgIC8vIOWNleinhOagvOihqOagvGRhdGEKICAgICAgb25lRm9ybVZhbGlkYXRlOiBbCiAgICAgICAgewogICAgICAgICAgcGljOiAnJywKICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgY29zdDogMCwKICAgICAgICAgIG90X3ByaWNlOiAwLAogICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICB3ZWlnaHQ6IDAsCiAgICAgICAgICB2b2x1bWU6IDAsCiAgICAgICAgICBicm9rZXJhZ2U6IDAsCiAgICAgICAgICBicm9rZXJhZ2VfdHdvOiAwLAogICAgICAgICAgdmlwX3ByaWNlOiAwLAogICAgICAgICAgdmlydHVhbF9saXN0OiBbXSwKICAgICAgICAgIGNvdXBvbl9pZDogMCwKICAgICAgICB9LAogICAgICBdLAogICAgICBpbWFnZXM6IFtdLAogICAgICBpbWFnZXNUYWJsZTogJycsCiAgICAgIGN1cnJlbnRUYWI6ICcxJywKICAgICAgaXNDaG9pY2U6ICcnLAogICAgICBncmlkOiB7CiAgICAgICAgeGw6IDgsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBtb2RhbFBpYzogZmFsc2UsCiAgICAgIGFkZFZpcnR1YWxNb2RlbDogZmFsc2UsCiAgICAgIHRlbXBsYXRlOiBmYWxzZSwKICAgICAgdXBsb2FkTGlzdDogW10sCiAgICAgIHRyZWVTZWxlY3Q6IFtdLAogICAgICBwaWNUaXQ6ICcnLAogICAgICB0YWJsZUluZGV4OiAwLAogICAgICBydWxlVmFsaWRhdGU6IHsKICAgICAgICBzdG9yZV9uYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWVhuWTgeWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBjYXRlX2lkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5ZWG5ZOB5YiG57G7JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgICAgIG1pbjogJzEnLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHVuaXRfbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXljZXkvY0nLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgLy8gaW1hZ2U6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+35LiK5Lyg5ZWG5ZOB5Zu+IiwgdHJpZ2dlcjogImNoYW5nZSIgfV0sCiAgICAgICAgc2xpZGVyX2ltYWdlOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+35LiK5Lyg5ZWG5ZOB6L2u5pKt5Zu+JywKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgc3BlY190eXBlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeWVhuWTgeinhOagvCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLAogICAgICAgIGlzX3ZpcnR1YWw6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5ZWG5ZOB57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sCiAgICAgICAgc2VsZWN0UnVsZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nllYblk4Hop4TmoLzlsZ7mgKcnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwKICAgICAgICB0ZW1wX2lkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup6L+Q6LS55qih5p2/JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHByZXNhbGVfdGltZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqea0u+WKqOaXtumXtCcsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIGxvZ2lzdGljczogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgbWluOiAxLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup54mp5rWB5pa55byPJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAnYXJyYXknLAogICAgICAgICAgICBtYXg6IDIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nnianmtYHmlrnlvI8nLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBnaXZlX2ludGVncmFsOiBbeyB0eXBlOiAnaW50ZWdlcicsIG1lc3NhZ2U6ICfor7fovpPlhaXmlbTmlbAnIH1dLAogICAgICB9LAogICAgICBtYW55QnJva2VyYWdlOiAwLAogICAgICBtYW55QnJva2VyYWdlVHdvOiAwLAogICAgICBtYW55VmlwUHJpY2U6IDAsCiAgICAgIHVwbG9hZDogewogICAgICAgIHZpZGVvSW5nOiBmYWxzZSwgLy8g5piv5ZCm5pi+56S66L+b5bqm5p2h77ybCiAgICAgIH0sCiAgICAgIHZpZGVvSW5nOiBmYWxzZSwgLy8g5piv5ZCm5pi+56S66L+b5bqm5p2h77ybCiAgICAgIHByb2dyZXNzOiAwLCAvLyDov5vluqbmnaHpu5jorqQwCiAgICAgIHN0b2NrOiAwLAogICAgICBkaXNrX2luZm86ICcnLAogICAgICB2aWRlb0xpbms6ICcnLAogICAgICBhdHRyczogW10sCiAgICAgIGFjdGl2aXR5OiB7IOm7mOiupDogJ3JlZCcsIOenkuadgDogJ2JsdWUnLCDnoI3ku7c6ICdncmVlbicsIOaLvOWbojogJ3llbGxvdycgfSwKICAgICAgY291cG9uTmFtZTogW10sCiAgICAgIHVwZGF0ZUlkczogW10sCiAgICAgIHVwZGF0ZU5hbWU6IFtdLAogICAgICBjb3Vwb25JZHM6ICcnLAogICAgICBjb3Vwb25OYW1lczogW10sCiAgICAgIHJha2VCYWNrOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkuIDnuqfov5TkvaMnLAogICAgICAgICAgc2xvdDogJ2Jyb2tlcmFnZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S6jOe6p+i/lOS9oycsCiAgICAgICAgICBzbG90OiAnYnJva2VyYWdlX3R3bycsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgbWVtYmVyOiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkvJrlkZjku7cnLAogICAgICAgICAgc2xvdDogJ3ZpcF9wcmljZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICB3aWR0aDogOTUsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgY29sdW1uc0luc3RhbE06IFtdLAogICAgICBtb3ZlSW5kZXg6ICcnLAogICAgICAvLyBhYTogW10sCiAgICAgIC8vIG9wZW5TdWJpbWl0OiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgnbWVkaWEnLCBbJ2lzTW9iaWxlJ10pLAogICAgbGFiZWxXaWR0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB1bmRlZmluZWQgOiAxMjA7CiAgICB9LAogICAgbGFiZWxQb3NpdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyAndG9wJyA6ICdyaWdodCc7CiAgICB9LAogICAgbGFiZWxCb3R0b20oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdW5kZWZpbmVkIDogMTU7CiAgICB9LAogIH0sCiAgYmVmb3JlUm91dGVVcGRhdGUodG8sIGZyb20sIG5leHQpIHsKICAgIHRoaXMuYnVzLiRlbWl0KCdvblRhZ3NWaWV3UmVmcmVzaFJvdXRlclZpZXcnLCB0aGlzLiRyb3V0ZS5wYXRoKTsKICAgIG5leHQoKTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmNvbHVtbnMgPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDgpOwogICAgdGhpcy5nZXRUb2tlbigpOwoKICAgIC8vIHRoaXMuY29sdW1uc0luc3RhbGwgPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLmNvbHVtbnNJbnN0YWxsKTsKICAgIC8vIHRoaXMuY29sdW1uc0luc3RhOCA9IHRoaXMuY29sdW1uczIuc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMuY29sdW1uc0luc3RhOCk7CiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gJzAnICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICB0aGlzLmdldEluZm8oKTsKICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkID09PSAnMCcpIHsKICAgICAgcHJvZHVjdENhY2hlKCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLmluZm87CiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YSkpIHsKICAgICAgICAgICAgbGV0IGNhdGVfaWQgPSBkYXRhLmNhdGVfaWQubWFwKE51bWJlcik7CiAgICAgICAgICAgIGxldCBsYWJlbF9pZCA9IGRhdGEubGFiZWxfaWQubWFwKE51bWJlcik7CiAgICAgICAgICAgIHRoaXMuYXR0cnMgPSBkYXRhLml0ZW1zIHx8IFtdOwogICAgICAgICAgICBsZXQgaWRzID0gW107CiAgICAgICAgICAgIC8vIGxldCBuYW1lcyA9IFtdOwogICAgICAgICAgICBpZiAoZGF0YS5jb3Vwb25zKSB7CiAgICAgICAgICAgICAgZGF0YS5jb3Vwb25zLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgICAgaWRzLnB1c2goaXRlbS5pZCk7CiAgICAgICAgICAgICAgICAvLyBuYW1lcy5wdXNoKGl0ZW0udGl0bGUpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuY291cG9uTmFtZSA9IGRhdGEuY291cG9uczsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSBkYXRhOwogICAgICAgICAgICAvLyB0aGlzLmNvdXBvbk5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgICAgICAgIC8vIHRoYXQuY291cG9uTmFtZSA9IG5hbWVzOwogICAgICAgICAgICB0aGlzLmRhdGFMYWJlbCA9IGRhdGEubGFiZWxfaWQ7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNvdXBvbl9pZHMgPSBpZHM7CiAgICAgICAgICAgIHRoaXMudXBkYXRlSWRzID0gaWRzOwogICAgICAgICAgICB0aGlzLnVwZGF0ZU5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNhdGVfaWQgPSBjYXRlX2lkOwogICAgICAgICAgICAvLyB0aGlzLmZvcm1WYWxpZGF0ZS5sYWJlbF9pZCA9IGxhYmVsX2lkOwogICAgICAgICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZSA9IGRhdGEuYXR0cnM7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmxvZ2lzdGljcyA9IGRhdGEubG9naXN0aWNzIHx8IFsnMSddOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5oZWFkZXIgPSBbXTsKICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZSgwKTsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gZGF0YS5hdHRyczsKICAgICAgICAgICAgdGhpcy5zcGVjX3R5cGUgPSBkYXRhLnNwZWNfdHlwZTsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfdmlydHVhbCA9IGRhdGEuaXNfdmlydHVhbDsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuY3VzdG9tX2Zvcm0gPSBkYXRhLmN1c3RvbV9mb3JtIHx8IFtdOwogICAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuY3VzdG9tX2Zvcm0ubGVuZ3RoICE9IDApIHsKICAgICAgICAgICAgICB0aGlzLmN1c3RvbUJ0biA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy52aXJ0dWFsYnRuKGRhdGEudmlydHVhbF90eXBlLCAxKTsKICAgICAgICAgICAgaWYgKGRhdGEuc3BlY190eXBlID09PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gW107CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVCbnQgPSB0cnVlOwogICAgICAgICAgICAgIHRoaXMub25lRm9ybVZhbGlkYXRlID0gWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBwaWM6IGRhdGEuaW1hZ2UsCiAgICAgICAgICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAwLAogICAgICAgICAgICAgICAgICB2b2x1bWU6IDAsCiAgICAgICAgICAgICAgICAgIGJyb2tlcmFnZTogMCwKICAgICAgICAgICAgICAgICAgYnJva2VyYWdlX3R3bzogMCwKICAgICAgICAgICAgICAgICAgdmlwX3ByaWNlOiAwLAogICAgICAgICAgICAgICAgICB2aXJ0dWFsX2xpc3Q6IFtdLAogICAgICAgICAgICAgICAgICBjb3Vwb25faWQ6IDAsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIF07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgfSk7CiAgICB9CiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkudHlwZSkgewogICAgICB0aGlzLm1vZGFscyA9IHRydWU7CiAgICAgIHRoaXMudHlwZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGU7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnR5cGUgPSAwOwogICAgfQogICAgdGhpcy5nb29kc0NhdGVnb3J5KCk7CiAgICB0aGlzLnByb2R1Y3RHZXRSdWxlKCk7CiAgICB0aGlzLnByb2R1Y3RHZXRUZW1wbGF0ZSgpOwogICAgLy8gdGhpcy51c2VyTGFiZWwoKTsKICAgIHRoaXMudXBsb2FkVHlwZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5YiG54mH5LiK5LygCiAgICB2aWRlb1NhdmVUb1VybChmaWxlKSB7CiAgICAgIHVwbG9hZEJ5UGllY2VzKHsKICAgICAgICBmaWxlOiBmaWxlLCAvLyDop4bpopHlrp7kvZMKICAgICAgICBwaWVjZVNpemU6IDMsIC8vIOWIhueJh+Wkp+WwjwogICAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS52aWRlb19saW5rID0gZGF0YS5maWxlX3BhdGg7CiAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMTAwOwogICAgICAgIH0sCiAgICAgICAgZXJyb3I6IChlKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGUubXNnKTsKICAgICAgICB9LAogICAgICAgIHVwbG9hZGluZzogKGNodW5rLCBhbGxDaHVuaykgPT4gewogICAgICAgICAgdGhpcy52aWRlb0luZyA9IHRydWU7CiAgICAgICAgICBsZXQgc3QgPSBNYXRoLmZsb29yKChjaHVuayAvIGFsbENodW5rKSAqIDEwMCk7CiAgICAgICAgICB0aGlzLnByb2dyZXNzID0gc3Q7CiAgICAgICAgfSwKICAgICAgfSk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICAvLyDnsbvlnovpgInmi6kv5aGr5YWl5YaF5a655Yik5patCiAgICB2aXJ0dWFsYnRuKGluZGV4LCB0eXBlKSB7CiAgICAgIGlmICh0eXBlICE9IDEpIHsKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc19zdWIgPSBbXTsKICAgICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgaWYgKGlkKSB7CiAgICAgICAgICBjaGVja0FjdGl2aXR5QXBpKGlkKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7fSkKICAgICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPSB0aGlzLnNwZWNfdHlwZTsKICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9PSAxKSB7CiAgICAgICAgICAgIHRoaXMuZ2VuZXJhdGUoMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICAgIHN3aXRjaCAoaW5kZXgpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUgPSAwOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfdmlydHVhbCA9IDA7CiAgICAgICAgICB0aGlzLmhlYWRUYWIgPSBbCiAgICAgICAgICAgIHsgdGl0OiAn5Z+656GA5L+h5oGvJywgbmFtZTogJzEnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn6KeE5qC85bqT5a2YJywgbmFtZTogJzInIH0sCiAgICAgICAgICAgIHsgdGl0OiAn5ZWG5ZOB6K+m5oOFJywgbmFtZTogJzMnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn54mp5rWB6K6+572uJywgbmFtZTogJzQnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn6JCl6ZSA6K6+572uJywgbmFtZTogJzUnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn5YW25LuW6K6+572uJywgbmFtZTogJzYnIH0sCiAgICAgICAgICBdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlID0gMTsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnBvc3RhZ2UgPSAwOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfdmlydHVhbCA9IDE7CiAgICAgICAgICB0aGlzLmhlYWRUYWIgPSBbCiAgICAgICAgICAgIHsgdGl0OiAn5Z+656GA5L+h5oGvJywgbmFtZTogJzEnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn6KeE5qC85bqT5a2YJywgbmFtZTogJzInIH0sCiAgICAgICAgICAgIHsgdGl0OiAn5ZWG5ZOB6K+m5oOFJywgbmFtZTogJzMnIH0sCiAgICAgICAgICAgIC8vIHsgdGl0OiAi54mp5rWB6K6+572uIiwgbmFtZTogIjQiIH0sCiAgICAgICAgICAgIHsgdGl0OiAn6JCl6ZSA6K6+572uJywgbmFtZTogJzQnIH0sCiAgICAgICAgICAgIHsgdGl0OiAn5YW25LuW6K6+572uJywgbmFtZTogJzUnIH0sCiAgICAgICAgICBdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlID0gMjsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlzX3ZpcnR1YWwgPSAxOwogICAgICAgICAgdGhpcy5oZWFkVGFiID0gWwogICAgICAgICAgICB7IHRpdDogJ+WfuuehgOS/oeaBrycsIG5hbWU6ICcxJyB9LAogICAgICAgICAgICB7IHRpdDogJ+inhOagvOW6k+WtmCcsIG5hbWU6ICcyJyB9LAogICAgICAgICAgICB7IHRpdDogJ+WVhuWTgeivpuaDhScsIG5hbWU6ICczJyB9LAogICAgICAgICAgICAvLyB7IHRpdDogIueJqea1geiuvue9riIsIG5hbWU6ICI0IiB9LAogICAgICAgICAgICB7IHRpdDogJ+iQpemUgOiuvue9ricsIG5hbWU6ICc0JyB9LAogICAgICAgICAgICB7IHRpdDogJ+WFtuS7luiuvue9ricsIG5hbWU6ICc1JyB9LAogICAgICAgICAgXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgMzoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnZpcnR1YWxfdHlwZSA9IDM7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc192aXJ0dWFsID0gMTsKICAgICAgICAgIHRoaXMuaGVhZFRhYiA9IFsKICAgICAgICAgICAgeyB0aXQ6ICfln7rnoYDkv6Hmga8nLCBuYW1lOiAnMScgfSwKICAgICAgICAgICAgeyB0aXQ6ICfop4TmoLzlupPlrZgnLCBuYW1lOiAnMicgfSwKICAgICAgICAgICAgeyB0aXQ6ICfllYblk4Hor6bmg4UnLCBuYW1lOiAnMycgfSwKICAgICAgICAgICAgLy8geyB0aXQ6ICLnianmtYHorr7nva4iLCBuYW1lOiAiNCIgfSwKICAgICAgICAgICAgeyB0aXQ6ICfokKXplIDorr7nva4nLCBuYW1lOiAnNCcgfSwKICAgICAgICAgICAgeyB0aXQ6ICflhbbku5borr7nva4nLCBuYW1lOiAnNScgfSwKICAgICAgICAgIF07CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIC8vIOaWsOWinuWIhuexuwogICAgYWRkQ2F0ZSgpIHsKICAgICAgdGhpcy4kbW9kYWxGb3JtKHByb2R1Y3RDcmVhdGVBcGkoKSkudGhlbigoKSA9PiB0aGlzLmdvb2RzQ2F0ZWdvcnkoKSk7CiAgICB9LAogICAgLy8g54mp5rWB5pa55byP6YCJ5oupCiAgICBsb2dpc3RpY3NCdG4oZSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5sb2dpc3RpY3MgPSBlOwogICAgfSwKICAgIC8vIOaWsOWinuagh+etvgogICAgYWRkTGFiZWwoKSB7CiAgICAgIHRoaXMuJG1vZGFsRm9ybSh1c2VyTGFiZWxBZGRBcGkoMCkpLnRoZW4oKCkgPT4gdGhpcy51c2VyTGFiZWwoKSk7CiAgICB9LAogICAgLy8g6Ieq5a6a5LmJ55WZ6KiAIOW8gOWQr+WFs+mXrQogICAgY3VzdG9tTWVzc0J0bihlKSB7CiAgICAgIGlmICghZSkgewogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtID0gW107CiAgICAgIH0KICAgIH0sCiAgICAvLyDoh6rlrprkuYnnlZnoqIAg5paw5aKe6KGo5Y2VCiAgICBhZGRjdXN0b20oKSB7CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5jdXN0b21fZm9ybS5sZW5ndGggPiA5KSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfmnIDlpJrmt7vliqAxMOadoScpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmN1c3RvbV9mb3JtLnB1c2goewogICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgbGFiZWw6ICd0ZXh0JywKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICAgIHN0YXR1czogZmFsc2UsCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliKDpmaQKICAgIGRlbGN1c3RvbShpbmRleCkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jdXN0b21fZm9ybS5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIC8vIOmihOWUruWFt+S9k+aXpeacnwogICAgb25jaGFuZ2VUaW1lKGUpIHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucHJlc2FsZV90aW1lID0gZTsKICAgIH0sCiAgICAvLyDllYblk4Hor6bmg4UKICAgIGdldEVkaXRvckNvbnRlbnQoZGF0YSkgewogICAgICB0aGlzLmNvbnRlbnQgPSBkYXRhOwogICAgfSwKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiB0aGlzLiRyb3V0ZVByb1N0ciArICcvcHJvZHVjdC9wcm9kdWN0X2xpc3QnIH0pOwogICAgfSwKICAgIC8vIOS4iuS8oOWktOmDqHRva2VuCiAgICBnZXRUb2tlbigpIHsKICAgICAgdGhpcy5oZWFkZXJbJ0F1dGhvcmktemF0aW9uJ10gPSAnQmVhcmVyICcgKyBnZXRDb29raWVzKCd0b2tlbicpOwogICAgfSwKICAgIC8vIOWvvOWFpeWNoeWvhgogICAgdXBGaWxlKHJlcykgewogICAgICBpbXBvcnRDYXJkKHsgZmlsZTogcmVzLmRhdGEuc3JjIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudmlydHVhbExpc3QgPSB0aGlzLnZpcnR1YWxMaXN0LmNvbmNhdChyZXMuZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8v6I635Y+W6KeG6aKR5LiK5Lyg57G75Z6LCiAgICB1cGxvYWRUeXBlKCkgewogICAgICB1cGxvYWRUeXBlKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy51cGxvYWRfdHlwZSA9IHJlcy5kYXRhLnVwbG9hZF90eXBlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliJ3lp4vljJbmlbDmja7lsZXnpLoKICAgIGluZm9EYXRhKGRhdGEpIHsKICAgICAgbGV0IGNhdGVfaWQgPSBkYXRhLmNhdGVfaWQubWFwKE51bWJlcik7CiAgICAgIGxldCBsYWJlbF9pZCA9IGRhdGEubGFiZWxfaWQubWFwKE51bWJlcik7CiAgICAgIHRoaXMuYXR0cnMgPSBkYXRhLml0ZW1zIHx8IFtdOwogICAgICBsZXQgaWRzID0gW107CiAgICAgIGRhdGEuY291cG9ucy5tYXAoKGl0ZW0pID0+IHsKICAgICAgICBpZHMucHVzaChpdGVtLmlkKTsKICAgICAgfSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gZGF0YTsKICAgICAgdGhpcy5zZWxldFZpZGVvID0gZGF0YS5zZWxldFZpZGVvOwogICAgICB0aGlzLmNvbnRlbnRzID0gZGF0YS5kZXNjcmlwdGlvbjsKICAgICAgdGhpcy5jb3Vwb25OYW1lID0gZGF0YS5jb3Vwb25zOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jb3Vwb25faWRzID0gaWRzOwogICAgICB0aGlzLnVwZGF0ZUlkcyA9IGlkczsKICAgICAgdGhpcy5kYXRhTGFiZWwgPSBkYXRhLmxhYmVsX2lkOwogICAgICB0aGlzLnVwZGF0ZU5hbWUgPSBkYXRhLmNvdXBvbnM7CiAgICAgIHRoaXMudmlydHVhbGJ0bihkYXRhLnZpcnR1YWxfdHlwZSwgMSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmxvZ2lzdGljcyA9IGRhdGEubG9naXN0aWNzIHx8IFsnMSddOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jdXN0b21fZm9ybSA9IGRhdGEuY3VzdG9tX2Zvcm0gfHwgW107CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5jdXN0b21fZm9ybS5sZW5ndGggIT0gMCkgewogICAgICAgIHRoaXMuY3VzdG9tQnRuID0gdHJ1ZTsKICAgICAgfQogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5jYXRlX2lkID0gY2F0ZV9pZDsKICAgICAgaWYgKGRhdGEuYXR0cikgewogICAgICAgIHRoaXMub25lRm9ybVZhbGlkYXRlID0gW2RhdGEuYXR0cl07CiAgICAgIH0KICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaGVhZGVyID0gW107CiAgICAgIHRoaXMuZ2VuZXJhdGUoMCk7CiAgICAgIC8vIHRoaXMubWFueUZvcm1WYWxpZGF0ZSA9IGRhdGEuYXR0cnM7CiAgICAgIHRoaXMuJHNldCh0aGlzLCAnbWFueUZvcm1WYWxpZGF0ZScsIGRhdGEuYXR0cnMpOwogICAgICB0aGlzLnNwZWNfdHlwZSA9IGRhdGEuc3BlY190eXBlOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc192aXJ0dWFsID0gZGF0YS5pc192aXJ0dWFsOwogICAgICBpZiAoZGF0YS5zcGVjX3R5cGUgPT09IDApIHsKICAgICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGUgPSBbXTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNyZWF0ZUJudCA9IHRydWU7CiAgICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGUgPSBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHBpYzogJycsCiAgICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgICBjb3N0OiAwLAogICAgICAgICAgICBvdF9wcmljZTogMCwKICAgICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICAgIGJhcl9jb2RlOiAnJywKICAgICAgICAgICAgd2VpZ2h0OiAwLAogICAgICAgICAgICB2b2x1bWU6IDAsCiAgICAgICAgICAgIGJyb2tlcmFnZTogMCwKICAgICAgICAgICAgYnJva2VyYWdlX3R3bzogMCwKICAgICAgICAgICAgdmlwX3ByaWNlOiAwLAogICAgICAgICAgICB2aXJ0dWFsX2xpc3Q6IFtdLAogICAgICAgICAgICBjb3Vwb25faWQ6IDAsCiAgICAgICAgICB9LAogICAgICAgIF07CiAgICAgIH0KICAgIH0sCiAgICAvL+WFs+mXrea3mOWuneW8ueeql+W5tueUn+aIkOaVsOaNru+8mwogICAgb25DbG9zZShkYXRhKSB7CiAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICAgIHRoaXMuaW5mb0RhdGEoZGF0YSk7CiAgICB9LAoKICAgIGNoZWNrTW92ZShldnQpIHsKICAgICAgdGhpcy5tb3ZlSW5kZXggPSBldnQuZHJhZ2dlZENvbnRleHQuaW5kZXg7CiAgICB9LAogICAgZW5kKCkgewogICAgICB0aGlzLm1vdmVJbmRleCA9ICcnOwogICAgICB0aGlzLmdlbmVyYXRlKDEpOwogICAgfSwKICAgIC8vIOWNleeLrOiuvue9ruS8muWRmOiuvue9rgogICAgY2hlY2tBbGxHcm91cENoYW5nZShkYXRhKSB7CiAgICAgIHRoaXMuY2hlY2tBbGxHcm91cChkYXRhKTsKICAgIH0sCiAgICBjaGVja0FsbEdyb3VwKGRhdGEpIHsKICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9PT0gMCkgewogICAgICAgIGlmIChkYXRhLmluZGV4T2YoMCkgPiAtMSkgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsbCA9IHRoaXMuY29sdW1uczIuc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMubWVtYmVyKTsKICAgICAgICB9IGVsc2UgaWYgKGRhdGEuaW5kZXhPZigxKSA+IC0xKSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxsID0gdGhpcy5jb2x1bW5zMi5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5yYWtlQmFjayk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbGwgPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDQpOwogICAgICAgIH0KICAgICAgICBpZiAoZGF0YS5sZW5ndGggPT09IDIpIHsKICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbGwgPSB0aGlzLmNvbHVtbnMyLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLnJha2VCYWNrKS5jb25jYXQodGhpcy5tZW1iZXIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZGF0YS5pbmRleE9mKDApID4gLTEpIHsKICAgICAgICAgIHRoaXMuY29sdW1uc0luc3RhbDIgPSB0aGlzLmNvbHVtbnNJbnN0YWxNLnNsaWNlKDAsIDQpLmNvbmNhdCh0aGlzLm1lbWJlcik7CiAgICAgICAgfSBlbHNlIGlmIChkYXRhLmluZGV4T2YoMSkgPiAtMSkgewogICAgICAgICAgdGhpcy5jb2x1bW5zSW5zdGFsMiA9IHRoaXMuY29sdW1uc0luc3RhbE0uc2xpY2UoMCwgNCkuY29uY2F0KHRoaXMucmFrZUJhY2spOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWwyID0gdGhpcy5jb2x1bW5zSW5zdGFsTS5zbGljZSgwLCA0KTsKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWwyID0gdGhpcy5jb2x1bW5zSW5zdGFsTS5zbGljZSgwLCA0KS5jb25jYXQodGhpcy5yYWtlQmFjaykuY29uY2F0KHRoaXMubWVtYmVyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDkvJjmg6DliLgKICAgIGFkZENvdXBvbigpIHsKICAgICAgdGhpcy4kcmVmcy5jb3Vwb25UZW1wbGF0ZXMuaXNUZW1wbGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuY291cG9uVGVtcGxhdGVzLnRhYmxlTGlzdCgpOwogICAgfSwKICAgIC8vIOinhOagvOS4reS8mOaDoOWIuOafpeeciwogICAgc2VlKGRhdGEsIG5hbWUsIGluZGV4KSB7CiAgICAgIHRoaXMudGFiTmFtZSA9IG5hbWU7CiAgICAgIHRoaXMudGFiSW5kZXggPSBpbmRleDsKCiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUgPT09IDEpIHsKICAgICAgICBpZiAoZGF0YS5kaXNrX2luZm8gIT0gJycpIHsKICAgICAgICAgIHRoaXMuZGlza190eXBlID0gMTsKICAgICAgICAgIHRoaXMuZGlza19pbmZvID0gZGF0YS5kaXNrX2luZm87CiAgICAgICAgICB0aGlzLnN0b2NrID0gZGF0YS5zdG9jazsKICAgICAgICB9IGVsc2UgaWYgKGRhdGEudmlydHVhbF9saXN0Lmxlbmd0aCkgewogICAgICAgICAgdGhpcy5kaXNrX3R5cGUgPSAyOwogICAgICAgICAgdGhpcy52aXJ0dWFsTGlzdCA9IGRhdGEudmlydHVhbF9saXN0OwogICAgICAgIH0KICAgICAgICB0aGlzLmFkZFZpcnR1YWxNb2RlbCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcmVmcy5nb29kc0NvdXBvbi5pc1RlbXBsYXRlID0gdHJ1ZTsKICAgICAgICB0aGlzLiRyZWZzLmdvb2RzQ291cG9uLnRhYmxlTGlzdCgzKTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOS8mOaDoOWIuAogICAgYWRkR29vZHNDb3Vwb24oaW5kZXgsIG5hbWUpIHsKICAgICAgdGhpcy50YWJJbmRleCA9IGluZGV4OwogICAgICB0aGlzLnRhYk5hbWUgPSBuYW1lOwogICAgICB0aGlzLiRyZWZzLmdvb2RzQ291cG9uLmlzVGVtcGxhdGUgPSB0cnVlOwogICAgICB0aGlzLiRyZWZzLmdvb2RzQ291cG9uLnRhYmxlTGlzdCgzKTsKICAgIH0sCiAgICBhZGRWaXJ0dWFsKGluZGV4LCBuYW1lKSB7CiAgICAgIHRoaXMudGFiSW5kZXggPSBpbmRleDsKICAgICAgdGhpcy50YWJOYW1lID0gbmFtZTsKICAgICAgdGhpcy5hZGRWaXJ0dWFsTW9kZWwgPSB0cnVlOwogICAgfSwKICAgIC8vIOaPkOS6pOWNoeWvhuS/oeaBrwogICAgdXBWaXJ0dWFsKCkgewogICAgICBpZiAodGhpcy5kaXNrX3R5cGUgPT0gMikgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52aXJ0dWFsTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMudmlydHVhbExpc3RbaV07CiAgICAgICAgICBpZiAoIWVsZW1lbnQudmFsdWUpIHsKICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcign6K+36L6T5YWl5omA5pyJ5Y2h5a+GJyk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ3ZpcnR1YWxfbGlzdCcsIHRoaXMudmlydHVhbExpc3QpOwogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICdzdG9jaycsIHRoaXMudmlydHVhbExpc3QubGVuZ3RoKTsKICAgICAgICB0aGlzLnZpcnR1YWxMaXN0ID0gWwogICAgICAgICAgewogICAgICAgICAgICBrZXk6ICcnLAogICAgICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgICB9LAogICAgICAgIF07CiAgICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ2Rpc2tfaW5mbycsICcnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXRoaXMuZGlza19pbmZvLmxlbmd0aCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeWNoeWvhuS/oeaBrycpOwogICAgICAgIH0KICAgICAgICBpZiAoIXRoaXMuc3RvY2spIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfor7floavlhpnlupPlrZjmlbDph48nKTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ3N0b2NrJywgTnVtYmVyKHRoaXMuc3RvY2spKTsKICAgICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnc3RvY2snLCBOdW1iZXIodGhpcy5zdG9jaykpOwogICAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICdkaXNrX2luZm8nLCB0aGlzLmRpc2tfaW5mbyk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XSwgJ3ZpcnR1YWxfbGlzdCcsIFtdKTsKICAgICAgfQogICAgICB0aGlzLmFkZFZpcnR1YWxNb2RlbCA9IGZhbHNlOwogICAgICB0aGlzLmNsb3NlVmlydHVhbCgpOwogICAgfSwKICAgIC8vICDliJ3lp4vljJbljaHlr4bmlbDmja7kv6Hmga8KICAgIGNsb3NlVmlydHVhbCgpIHsKICAgICAgdGhpcy5hZGRWaXJ0dWFsTW9kZWwgPSBmYWxzZTsKICAgICAgdGhpcy52aXJ0dWFsTGlzdCA9IFsKICAgICAgICB7CiAgICAgICAgICBrZXk6ICcnLAogICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgIH0sCiAgICAgIF07CiAgICAgIHRoaXMuZGlza19pbmZvID0gJyc7CiAgICAgIHRoaXMuc3RvY2sgPSAwOwogICAgfSwKICAgIC8v5a+56LGh5pWw57uE5Y676YeN77ybCiAgICB1bmlxdWUoYXJyKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBNYXAoKTsKICAgICAgcmV0dXJuIGFyci5maWx0ZXIoKGFycikgPT4gIXJlcy5oYXMoYXJyLmlkKSAmJiByZXMuc2V0KGFyci5pZCwgMSkpOwogICAgfSwKICAgIC8vIOiOt+WPluS8mOaDoOWIuGlk5pWw5o2uCiAgICBuYW1lSWQoaWQsIG5hbWVzKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmNvdXBvbl9pZHMgPSBpZDsKICAgICAgdGhpcy5jb3Vwb25OYW1lID0gdGhpcy51bmlxdWUobmFtZXMpOwogICAgfSwKICAgIC8vIOiOt+WPluS8mOaDoOWIuOS/oeaBrwogICAgZ29vZHNDb3Vwb25JZChkYXRhKSB7CiAgICAgIC8vIHRoaXNbdGhpcy50YWJOYW1lXVt0aGlzLnRhYkluZGV4XS5jb3Vwb25faWQgPSBkYXRhLmlkOwogICAgICAvLyB0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0uY291cG9uX25hbWUgPSBkYXRhLnRpdGxlOwogICAgICB0aGlzLiRzZXQodGhpc1t0aGlzLnRhYk5hbWVdW3RoaXMudGFiSW5kZXhdLCAnY291cG9uX2lkJywgZGF0YS5pZCk7CiAgICAgIHRoaXMuJHNldCh0aGlzW3RoaXMudGFiTmFtZV1bdGhpcy50YWJJbmRleF0sICdjb3Vwb25fbmFtZScsIGRhdGEudGl0bGUpOwogICAgICB0aGlzLiRyZWZzLmdvb2RzQ291cG9uLmlzVGVtcGxhdGUgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVDbG9zZShuYW1lKSB7CiAgICAgIGxldCBpbmRleCA9IHRoaXMuY291cG9uTmFtZS5pbmRleE9mKG5hbWUpOwogICAgICB0aGlzLmNvdXBvbk5hbWUuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgbGV0IGNvdXBvbklkcyA9IHRoaXMuZm9ybVZhbGlkYXRlLmNvdXBvbl9pZHM7CiAgICAgIGNvdXBvbklkcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnVwZGF0ZUlkcyA9IGNvdXBvbklkczsKICAgICAgdGhpcy51cGRhdGVOYW1lID0gdGhpcy5jb3Vwb25OYW1lOwogICAgfSwKICAgIC8vIOi/kOi0ueaooeadvwogICAgZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5wcm9kdWN0R2V0VGVtcGxhdGUoKTsKICAgIH0sCiAgICAvLyDmt7vliqDov5DotLnmqKHmnb8KICAgIGFkZFRlbXAoKSB7CiAgICAgIHRoaXMuJHJlZnMudGVtcGxhdGVzLmlzVGVtcGxhdGUgPSB0cnVlOwogICAgfSwKICAgIC8vIOWIoOmZpOinhumike+8mwogICAgZGVsVmlkZW8oKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC4kc2V0KHRoYXQuZm9ybVZhbGlkYXRlLCAndmlkZW9fbGluaycsICcnKTsKICAgICAgdGhhdC4kc2V0KHRoYXQsICdwcm9ncmVzcycsIDApOwogICAgICB0aGF0LnZpZGVvSW5nID0gZmFsc2U7CiAgICAgIHRoYXQudXBsb2FkLnZpZGVvSW5nID0gZmFsc2U7CiAgICB9LAogICAgemhfdXBsb2FkRmlsZSgpIHsKICAgICAgaWYgKHRoaXMuc2VsZXRWaWRlbyA9PSAxKSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9IHRoaXMudmlkZW9MaW5rOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMucmVmaWQuY2xpY2soKTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOinhumikQogICAgemhfdXBsb2FkRmlsZV9jaGFuZ2UoZXZmaWxlKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgbGV0IHN1ZmZpeCA9IGV2ZmlsZS50YXJnZXQuZmlsZXNbMF0ubmFtZS5zdWJzdHIoZXZmaWxlLnRhcmdldC5maWxlc1swXS5uYW1lLmluZGV4T2YoJy4nKSk7CiAgICAgIGlmIChzdWZmaXguaW5kZXhPZignLm1wNCcpID09PSAtMSkgewogICAgICAgIHJldHVybiB0aGF0LiRNZXNzYWdlLmVycm9yKCflj6rog73kuIrkvKBNUDTmlofku7YnKTsKICAgICAgfQogICAgICBwcm9kdWN0R2V0VGVtcEtleXNBcGkoKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoYXQuJHZpZGVvQ2xvdWQKICAgICAgICAgICAgLnZpZGVvVXBsb2FkKHsKICAgICAgICAgICAgICB0eXBlOiByZXMuZGF0YS50eXBlLAogICAgICAgICAgICAgIGV2ZmlsZTogZXZmaWxlLAogICAgICAgICAgICAgIHJlczogcmVzLAogICAgICAgICAgICAgIHVwbG9hZGluZyhzdGF0dXMsIHByb2dyZXNzKSB7CiAgICAgICAgICAgICAgICB0aGF0LnVwbG9hZC52aWRlb0luZyA9IHN0YXR1czsKICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICAgICAgICB0aGF0LnByb2dyZXNzID0gMTAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGF0LmZvcm1WYWxpZGF0ZS52aWRlb19saW5rID0gcmVzLnVybDsKICAgICAgICAgICAgICB0aGF0LiRNZXNzYWdlLnN1Y2Nlc3MoJ+inhumikeS4iuS8oOaIkOWKnycpOwogICAgICAgICAgICAgIHRoYXQudXBsb2FkLnZpZGVvSW5nID0gZmFsc2U7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhhdC4kTWVzc2FnZS5lcnJvcihyZXMpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGF0LiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOS4iuS4gOmhte+8mwogICAgdXBUYWIoKSB7CiAgICAgIHRoaXMuY3VycmVudFRhYiA9IChOdW1iZXIodGhpcy5jdXJyZW50VGFiKSAtIDEpLnRvU3RyaW5nKCk7CiAgICB9LAogICAgLy8g5LiL5LiA6aG177ybCiAgICBkb3duVGFiKCkgewogICAgICB0aGlzLmN1cnJlbnRUYWIgPSAoTnVtYmVyKHRoaXMuY3VycmVudFRhYikgKyAxKS50b1N0cmluZygpOwogICAgfSwKICAgIC8vIOWxnuaAp+W8ueeql+Wbnuiwg+WHveaVsO+8mwogICAgdXNlclNlYXJjaHMoKSB7CiAgICAgIHRoaXMucHJvZHVjdEdldFJ1bGUoKTsKICAgIH0sCiAgICAvLyDmt7vliqDop4TliJnvvJsKICAgIGFkZFJ1bGUoKSB7CiAgICAgIHRoaXMuJHJlZnMuYWRkYXR0ci5tb2RhbCA9IHRydWU7CiAgICB9LAogICAgLy8g5om56YeP6K6+572u5YiG5L2j77ybCiAgICBicm9rZXJhZ2VTZXRVcCgpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBpZiAodGhhdC5mb3JtVmFsaWRhdGUuaXNfc3ViLmluZGV4T2YoMSkgPiAtMSkgewogICAgICAgIGlmICh0aGF0Lm1hbnlCcm9rZXJhZ2UgPD0gMCB8fCB0aGF0Lm1hbnlCcm9rZXJhZ2VUd28gPD0gMCkgewogICAgICAgICAgcmV0dXJuIHRoYXQuJE1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmei/lOS9o+mHkemineWQjui/m+ihjOaJuemHj+a3u+WKoCcpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGF0LmZvcm1WYWxpZGF0ZS5pc19zdWIuaW5kZXhPZigwKSA+IC0xKSB7CiAgICAgICAgaWYgKHRoYXQubWFueVZpcFByaWNlIDw9IDApIHsKICAgICAgICAgIHJldHVybiB0aGF0LiRNZXNzYWdlLmVycm9yKCfor7floavlhpnkvJrlkZjku7flkI7ov5vooYzmibnph4/mt7vliqAnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmlzX3N1Yi5sZW5ndGggPT09IDIpIHsKICAgICAgICBpZiAodGhhdC5tYW55QnJva2VyYWdlIDw9IDAgfHwgdGhhdC5tYW55QnJva2VyYWdlVHdvIDw9IDAgfHwgdGhhdC5tYW55VmlwUHJpY2UgPD0gMCkgewogICAgICAgICAgcmV0dXJuIHRoYXQuJE1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeWujOmHkemineWQjui/m+ihjOaJuemHj+a3u+WKoCcpOwogICAgICAgIH0KICAgICAgfQogICAgICBmb3IgKGxldCB2YWwgb2YgdGhhdC5tYW55Rm9ybVZhbGlkYXRlKSB7CiAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ2Jyb2tlcmFnZScsIHRoYXQubWFueUJyb2tlcmFnZSk7CiAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ2Jyb2tlcmFnZV90d28nLCB0aGF0Lm1hbnlCcm9rZXJhZ2VUd28pOwogICAgICAgIHRoaXMuJHNldCh2YWwsICd2aXBfcHJpY2UnLCB0aGF0Lm1hbnlWaXBQcmljZSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmibnph4/orr7nva7kvJrlkZjku7cKICAgIHZpcFByaWNlU2V0VXAoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoYXQubWFueVZpcFByaWNlIDw9IDApIHsKICAgICAgICByZXR1cm4gdGhhdC4kTWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5Lya5ZGY5Lu35Zyo6L+b6KGM5om56YeP5re75YqgJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yIChsZXQgdmFsIG9mIHRoYXQubWFueUZvcm1WYWxpZGF0ZSkgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ3ZpcF9wcmljZScsIHRoYXQubWFueVZpcFByaWNlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDmlrDlop7ljaHlr4YKICAgIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy52aXJ0dWFsTGlzdC5wdXNoKHsKICAgICAgICBrZXk6ICcnLAogICAgICAgIHZhbHVlOiAnJywKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yid5aeL5YyW5Y2h5a+G5L+h5oGvCiAgICBpbml0VmlydHVhbERhdGEoc3RhdHVzKSB7CiAgICAgIGlmICghc3RhdHVzKSB7CiAgICAgICAgdGhpcy52aXJ0dWFsTGlzdCA9IFsKICAgICAgICAgIHsKICAgICAgICAgICAga2V5OiAnJywKICAgICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgICAgfSwKICAgICAgICBdOwogICAgICB9CiAgICB9LAogICAgcmVtb3ZlVmlydHVhbChpbmRleCkgewogICAgICB0aGlzLnZpcnR1YWxMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICB9LAogICAgLy8g5riF56m65om56YeP6KeE5qC85L+h5oGvCiAgICBiYXRjaERlbCgpIHsKICAgICAgdGhpcy5vbmVGb3JtQmF0Y2ggPSBbCiAgICAgICAgewogICAgICAgICAgcGljOiAnJywKICAgICAgICAgIHByaWNlOiAwLAogICAgICAgICAgY29zdDogMCwKICAgICAgICAgIG90X3ByaWNlOiAwLAogICAgICAgICAgc3RvY2s6IDAsCiAgICAgICAgICBiYXJfY29kZTogJycsCiAgICAgICAgICB3ZWlnaHQ6IDAsCiAgICAgICAgICB2b2x1bWU6IDAsCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICBjb25maXJtKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuY3JlYXRlQm50ID0gdHJ1ZTsKICAgICAgaWYgKHRoYXQuZm9ybVZhbGlkYXRlLnNlbGVjdFJ1bGUudHJpbSgpLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoYXQuJE1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeWxnuaApycpOwogICAgICB9CiAgICAgIHRoYXQucnVsZUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpZiAoaXRlbS5ydWxlX25hbWUgPT09IHRoYXQuZm9ybVZhbGlkYXRlLnNlbGVjdFJ1bGUpIHsKICAgICAgICAgIHRoYXQuYXR0cnMgPSBpdGVtLnJ1bGVfdmFsdWU7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDojrflj5bllYblk4HlsZ7mgKfmqKHmnb/vvJsKICAgIHByb2R1Y3RHZXRSdWxlKCkgewogICAgICBwcm9kdWN0R2V0UnVsZUFwaSgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMucnVsZUxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6I635Y+W6L+Q6LS55qih5p2/77ybCiAgICBwcm9kdWN0R2V0VGVtcGxhdGUoKSB7CiAgICAgIHByb2R1Y3RHZXRUZW1wbGF0ZUFwaSgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMudGVtcGxhdGVMaXN0ID0gcmVzLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOihqOagvOS4reeahOWxnuaApwogICAgZGVsQXR0clRhYmxlKGluZGV4KSB7CiAgICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgaWYgKGlkKSB7CiAgICAgICAgY2hlY2tBY3Rpdml0eUFwaShpZCkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmibnph4/mt7vliqAKICAgIGJhdGNoQWRkKCkgewogICAgICBmb3IgKGxldCB2YWwgb2YgdGhpcy5tYW55Rm9ybVZhbGlkYXRlKSB7CiAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYykgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ3BpYycsIHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYyk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS5wcmljZSA+IDApIHsKICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdwcmljZScsIHRoaXMub25lRm9ybUJhdGNoWzBdLnByaWNlKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLmNvc3QgPiAwKSB7CiAgICAgICAgICB0aGlzLiRzZXQodmFsLCAnY29zdCcsIHRoaXMub25lRm9ybUJhdGNoWzBdLmNvc3QpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ub3RfcHJpY2UgPiAwKSB7CiAgICAgICAgICB0aGlzLiRzZXQodmFsLCAnb3RfcHJpY2UnLCB0aGlzLm9uZUZvcm1CYXRjaFswXS5vdF9wcmljZSk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS5zdG9jayA+IDApIHsKICAgICAgICAgIHRoaXMuJHNldCh2YWwsICdzdG9jaycsIHRoaXMub25lRm9ybUJhdGNoWzBdLnN0b2NrKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMub25lRm9ybUJhdGNoWzBdLmJhcl9jb2RlICE9PSAnJykgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ2Jhcl9jb2RlJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0uYmFyX2NvZGUpOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5vbmVGb3JtQmF0Y2hbMF0ud2VpZ2h0ID4gMCkgewogICAgICAgICAgdGhpcy4kc2V0KHZhbCwgJ3dlaWdodCcsIHRoaXMub25lRm9ybUJhdGNoWzBdLndlaWdodCk7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLm9uZUZvcm1CYXRjaFswXS52b2x1bWUgPiAwKSB7CiAgICAgICAgICB0aGlzLiRzZXQodmFsLCAndm9sdW1lJywgdGhpcy5vbmVGb3JtQmF0Y2hbMF0udm9sdW1lKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDmjInpkq4KICAgIGFkZEJ0bigpIHsKICAgICAgdGhpcy5jbGVhckF0dHIoKTsKICAgICAgdGhpcy5jcmVhdGVCbnQgPSBmYWxzZTsKICAgICAgdGhpcy5zaG93SXB1dCA9IHRydWU7CiAgICB9LAogICAgLy8g56uL5Y2z55Sf5oiQCiAgICBnZW5lcmF0ZSh0eXBlKSB7CiAgICAgIGdlbmVyYXRlQXR0ckFwaSgKICAgICAgICB7CiAgICAgICAgICBhdHRyczogdGhpcy5hdHRycywKICAgICAgICAgIGlzX3ZpcnR1YWw6IFsxLCAyXS5pbmNsdWRlcyh0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUpID8gMSA6IDAsCiAgICAgICAgICB2aXJ0dWFsX3R5cGU6IHRoaXMuZm9ybVZhbGlkYXRlLnZpcnR1YWxfdHlwZSwKICAgICAgICB9LAogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlkLAogICAgICAgIHR5cGUsCiAgICAgICkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBsZXQgaW5mbyA9IHJlcy5kYXRhLmluZm8sCiAgICAgICAgICAgIGhlYWRlcjEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGluZm8uaGVhZGVyKSk7CiAgICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkICE9PSAnMCcgJiYgKHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGUgIT0gLTEgfHwgdHlwZSkpIHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlID0gaW5mby52YWx1ZTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBoZWFkZXIgPSBpbmZvLmhlYWRlcjsKICAgICAgICAgIGlmIChbMSwgMl0uaW5jbHVkZXModGhpcy5mb3JtVmFsaWRhdGUudmlydHVhbF90eXBlKSkgewogICAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxNID0gaGVhZGVyOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5oZWFkZXIgPSBoZWFkZXI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5oZWFkZXIgPSBoZWFkZXIxOwogICAgICAgICAgICB0aGlzLmNvbHVtbnNJbnN0YWxNID0gaW5mby5oZWFkZXI7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmNoZWNrQWxsR3JvdXAodGhpcy5mb3JtVmFsaWRhdGUuaXNfc3ViKTsKICAgICAgICAgIGlmICghdGhpcy4kcm91dGUucGFyYW1zLmlkICYmIHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9PT0gMSkgewogICAgICAgICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGUubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgaXRlbS5waWMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMub25lRm9ybUJhdGNoWzBdLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgICAgIGlmICghaXRlbS5waWMpIHsKICAgICAgICAgICAgICAgIGl0ZW0ucGljID0gdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5vbmVGb3JtQmF0Y2hbMF0ucGljID0gdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2U7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDlj5bmtogKICAgIG9mZkF0dHJOYW1lKCkgewogICAgICB0aGlzLnNob3dJcHV0ID0gZmFsc2U7CiAgICAgIHRoaXMuY3JlYXRlQm50ID0gdHJ1ZTsKICAgIH0sCiAgICBjbGVhckF0dHIoKSB7CiAgICAgIHRoaXMuZm9ybUR5bmFtaWMuYXR0cnNOYW1lID0gJyc7CiAgICAgIHRoaXMuZm9ybUR5bmFtaWMuYXR0cnNWYWwgPSAnJzsKICAgIH0sCiAgICAvLyDliKDpmaTop4TmoLwKICAgIGhhbmRsZVJlbW92ZVJvbGUoaW5kZXgpIHsKICAgICAgdGhpcy5hdHRycy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGUuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDliKDpmaTlsZ7mgKcKICAgIGhhbmRsZVJlbW92ZTIoaXRlbSwgaW5kZXgpIHsKICAgICAgaXRlbS5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIC8vIOa3u+WKoOinhOWImeWQjeensAogICAgY3JlYXRlQXR0ck5hbWUoKSB7CiAgICAgIGlmICh0aGlzLmZvcm1EeW5hbWljLmF0dHJzTmFtZSAmJiB0aGlzLmZvcm1EeW5hbWljLmF0dHJzVmFsKSB7CiAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICB2YWx1ZTogdGhpcy5mb3JtRHluYW1pYy5hdHRyc05hbWUsCiAgICAgICAgICBkZXRhaWw6IFt0aGlzLmZvcm1EeW5hbWljLmF0dHJzVmFsXSwKICAgICAgICB9OwogICAgICAgIHRoaXMuYXR0cnMucHVzaChkYXRhKTsKICAgICAgICB2YXIgaGFzaCA9IHt9OwogICAgICAgIHRoaXMuYXR0cnMgPSB0aGlzLmF0dHJzLnJlZHVjZShmdW5jdGlvbiAoaXRlbSwgbmV4dCkgewogICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi8KICAgICAgICAgIGhhc2hbbmV4dC52YWx1ZV0gPyAnJyA6IChoYXNoW25leHQudmFsdWVdID0gdHJ1ZSAmJiBpdGVtLnB1c2gobmV4dCkpOwogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSwgW10pOwogICAgICAgIHRoaXMuY2xlYXJBdHRyKCk7CiAgICAgICAgdGhpcy5zaG93SXB1dCA9IGZhbHNlOwogICAgICAgIHRoaXMuY3JlYXRlQm50ID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+a3u+WKoOWujOaVtOeahOinhOagvO+8gScpOwogICAgICB9CiAgICB9LAogICAgLy8g5re75Yqg5bGe5oCnCiAgICBjcmVhdGVBdHRyKG51bSwgaWR4KSB7CiAgICAgIGlmIChudW0pIHsKICAgICAgICB0aGlzLmF0dHJzW2lkeF0uZGV0YWlsLnB1c2gobnVtKTsKICAgICAgICB2YXIgaGFzaCA9IHt9OwogICAgICAgIHRoaXMuYXR0cnNbaWR4XS5kZXRhaWwgPSB0aGlzLmF0dHJzW2lkeF0uZGV0YWlsLnJlZHVjZShmdW5jdGlvbiAoaXRlbSwgbmV4dCkgewogICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgKi8KICAgICAgICAgIGhhc2hbbmV4dF0gPyAnJyA6IChoYXNoW25leHRdID0gdHJ1ZSAmJiBpdGVtLnB1c2gobmV4dCkpOwogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSwgW10pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35re75Yqg5bGe5oCnJyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDllYblk4HliIbnsbvvvJsKICAgIGdvb2RzQ2F0ZWdvcnkoKSB7CiAgICAgIGNhc2NhZGVyTGlzdEFwaSgxKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMudHJlZVNlbGVjdCA9IHJlcy5kYXRhOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy/op4bop4bkuIrkvKDnsbvlnosKICAgIGNoYW5nZVZpZGVvKGUpIHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudmlkZW9fbGluayA9ICcnOwogICAgICB0aGlzLnZpZGVvTGluayA9ICcnOwogICAgfSwKICAgIC8vIOaUueWPmOinhOagvAogICAgY2hhbmdlU3BlYygpIHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfc3ViID0gW107CiAgICAgIGxldCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgaWYgKGlkKSB7CiAgICAgICAgY2hlY2tBY3Rpdml0eUFwaShpZCkKICAgICAgICAgIC50aGVuKChyZXMpID0+IHt9KQogICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID0gdGhpcy5zcGVjX3R5cGU7CiAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOivpuaDhQogICAgZ2V0SW5mbygpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICB0aGF0LnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgcHJvZHVjdEluZm9BcGkodGhhdC4kcm91dGUucGFyYW1zLmlkKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEucHJvZHVjdEluZm87CiAgICAgICAgICB0aGlzLmluZm9EYXRhKGRhdGEpOwogICAgICAgICAgdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8gdGFi5YiH5o2iCiAgICBvbmhhbmdlVGFiKG5hbWUpIHsKICAgICAgdGhpcy5jdXJyZW50VGFiID0gbmFtZTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmUoaSkgewogICAgICB0aGlzLmltYWdlcy5zcGxpY2UoaSwgMSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZS5zcGxpY2UoaSwgMSk7CiAgICAgIHRoaXMub25lRm9ybVZhbGlkYXRlWzBdLnBpYyA9IHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZVswXTsKICAgIH0sCiAgICAvLyDlhbPpl63lm77niYfkuIrkvKDmqKHmgIHmoYYKICAgIGNoYW5nZUNhbmNlbChtc2cpIHsKICAgICAgdGhpcy5tb2RhbFBpYyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOeCueWHu+WVhuWTgeWbvgogICAgbW9kYWxQaWNUYXAodGl0LCBwaWNUaXQsIGluZGV4KSB7CiAgICAgIHRoaXMubW9kYWxQaWMgPSB0cnVlOwogICAgICB0aGlzLmlzQ2hvaWNlID0gdGl0ID09PSAnZGFuJyA/ICfljZXpgIknIDogJ+WkmumAiSc7CiAgICAgIHRoaXMucGljVGl0ID0gcGljVGl0OwogICAgICB0aGlzLnRhYmxlSW5kZXggPSBpbmRleDsKICAgIH0sCiAgICAvLyDojrflj5bljZXlvKDlm77niYfkv6Hmga8KICAgIGdldFBpYyhwYykgewogICAgICBzd2l0Y2ggKHRoaXMucGljVGl0KSB7CiAgICAgICAgY2FzZSAnZGFuRnJvbSc6CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZSA9IHBjLmF0dF9kaXI7CiAgICAgICAgICBpZiAoIXRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuc3BlY190eXBlID09PSAwKSB7CiAgICAgICAgICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGVbMF0ucGljID0gcGMuYXR0X2RpcjsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLm1hbnlGb3JtVmFsaWRhdGUubWFwKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICBpdGVtLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgdGhpcy5vbmVGb3JtQmF0Y2hbMF0ucGljID0gcGMuYXR0X2RpcjsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZGFuVGFibGUnOgogICAgICAgICAgdGhpcy5vbmVGb3JtVmFsaWRhdGVbdGhpcy50YWJsZUluZGV4XS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnZHVvcGknOgogICAgICAgICAgdGhpcy5vbmVGb3JtQmF0Y2hbdGhpcy50YWJsZUluZGV4XS5waWMgPSBwYy5hdHRfZGlyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncmVjb21tZW5kX2ltYWdlJzoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnJlY29tbWVuZF9pbWFnZSA9IHBjLmF0dF9kaXI7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhpcy5tYW55Rm9ybVZhbGlkYXRlW3RoaXMudGFibGVJbmRleF0ucGljID0gcGMuYXR0X2RpcjsKICAgICAgfQogICAgICB0aGlzLm1vZGFsUGljID0gZmFsc2U7CiAgICB9LAogICAgLy8g6I635Y+W5aSa5byg5Zu+5L+h5oGvCiAgICBnZXRQaWNEKHBjKSB7CiAgICAgIHRoaXMuaW1hZ2VzID0gcGM7CiAgICAgIHRoaXMuaW1hZ2VzLm1hcCgoaXRlbSkgPT4gewogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZS5wdXNoKGl0ZW0uYXR0X2Rpcik7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlID0gdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLnNwbGljZSgwLCAxMCk7CiAgICAgIH0pOwogICAgICB0aGlzLm9uZUZvcm1WYWxpZGF0ZVswXS5waWMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2VbMF07CiAgICAgIHRoaXMubW9kYWxQaWMgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDmj5DkuqQKICAgIGhhbmRsZVN1Ym1pdChuYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS50eXBlID0gdGhpcy50eXBlOwogICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLnNwZWNfdHlwZSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5hdHRycyA9IHRoaXMub25lRm9ybVZhbGlkYXRlOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5oZWFkZXIgPSBbXTsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXRlbXMgPSBbXTsKICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaXNfY29weSA9IDA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pdGVtcyA9IHRoaXMuYXR0cnM7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmF0dHJzID0gdGhpcy5tYW55Rm9ybVZhbGlkYXRlOwogICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pc19jb3B5ID0gMTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS5zcGVjX3R5cGUgPT09IDEgJiYgdGhpcy5tYW55Rm9ybVZhbGlkYXRlLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t6K+354K55Ye755Sf5oiQ5aSa6KeE5qC8Jyk7CiAgICAgICAgICAgIC8vIHJldHVybiB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+eCueWHu+eUn+aIkOinhOagvO+8gScpOwogICAgICAgICAgfQogICAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmZvcm1WYWxpZGF0ZS5hdHRyczsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBpZiAoaXRlbVtpXS5zdG9jayA+IDEwMDAwMDApIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign6KeE5qC85bqT5a2YLeW6k+WtmOi2heWHuuezu+e7n+iMg+WbtCgxMDAwMDAwKScpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuaXNfc3ViWzBdID09PSAxKSB7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmIChpdGVtW2ldLmJyb2tlcmFnZSA9PT0gbnVsbCB8fCBpdGVtW2ldLmJyb2tlcmFnZV90d28gPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfokKXplIDorr7nva4tIOS4gOS6jOe6p+i/lOS9o+S4jeiDveS4uuepuicpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW1baV0udmlwX3ByaWNlID09PSBudWxsKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign6JCl6ZSA6K6+572uLeS8muWRmOS7t+S4jeiDveS4uuepuicpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmlzX3N1Yi5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW1baV0uYnJva2VyYWdlID09PSBudWxsIHx8IGl0ZW1baV0uYnJva2VyYWdlX3R3byA9PT0gbnVsbCB8fCBpdGVtW2ldLnZpcF9wcmljZSA9PT0gbnVsbCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+iQpemUgOiuvue9ri0g5LiA5LqM57qn6L+U5L2j5ZKM5Lya5ZGY5Lu35LiN6IO95Li656m6Jyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuZnJlaWdodCA9PSAzICYmICF0aGlzLmZvcm1WYWxpZGF0ZS50ZW1wX2lkKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+WVhuWTgeS/oeaBry3ov5DotLnmqKHmnb/kuI3og73kuLrnqbonKTsKICAgICAgICAgIH0KICAgICAgICAgIGxldCBhY3RpdmVJZHMgPSBbXTsKICAgICAgICAgIHRoaXMuZGF0YUxhYmVsLmZvckVhY2goKGl0ZW0pID0+IHsKICAgICAgICAgICAgYWN0aXZlSWRzLnB1c2goaXRlbS5pZCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmxhYmVsX2lkID0gYWN0aXZlSWRzOwogICAgICAgICAgdGhpcy5vcGVuU3ViaW1pdCA9IHRydWU7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kZXNjcmlwdGlvbiA9IHRoaXMuZm9ybWF0UmljaFRleHQodGhpcy5jb250ZW50KTsKICAgICAgICAgIHByb2R1Y3RBZGRBcGkodGhpcy5mb3JtVmFsaWRhdGUpCiAgICAgICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgPT09ICcwJykgewogICAgICAgICAgICAgICAgY2FjaGVEZWxldGUoKS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6IHRoaXMuJHJvdXRlUHJvU3RyICsgJy9wcm9kdWN0L3Byb2R1Y3RfbGlzdCcgfSk7CiAgICAgICAgICAgICAgfSwgNTAwKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KChlKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLm9wZW5TdWJpbWl0ID0gZmFsc2U7CiAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGUuc3RvcmVfbmFtZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t5ZWG5ZOB5ZCN56ew5LiN6IO95Li656m6Jyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS5jYXRlX2lkLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t5ZWG5ZOB5YiG57G75LiN6IO95Li656m6Jyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS51bml0X25hbWUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLeWVhuWTgeWNleS9jeS4jeiDveS4uuepuicpOwogICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5mb3JtVmFsaWRhdGUuc2xpZGVyX2ltYWdlLmxlbmd0aCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfllYblk4Hkv6Hmga8t5ZWG5ZOB6L2u5pKt5Zu+5LiN6IO95Li656m6Jyk7CiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmZvcm1WYWxpZGF0ZS5sb2dpc3RpY3MubGVuZ3RoICYmICF0aGlzLmZvcm1WYWxpZGF0ZS52aXJ0dWFsX3R5cGUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn54mp5rWB6K6+572uLeiHs+WwkemAieaLqeS4gOenjeeJqea1geaWueW8jycpOwogICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5mb3JtVmFsaWRhdGUudGVtcF9pZCAmJiB0aGlzLmZvcm1WYWxpZGF0ZS5mcmVpZ2h0ID09IDMpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn5ZWG5ZOB5L+h5oGvLei/kOi0ueaooeadv+S4jeiDveS4uuepuicpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlVGVtcGxhdGUobXNnKSB7CiAgICAgIHRoaXMudGVtcGxhdGUgPSBtc2c7CiAgICB9LAogICAgLy8g6KGo5Y2V6aqM6K+BCiAgICB2YWxpZGF0ZShwcm9wLCBzdGF0dXMsIGVycm9yKSB7CiAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIC8vIOenu+WKqAogICAgaGFuZGxlRHJhZ1N0YXJ0KGUsIGl0ZW0pIHsKICAgICAgdGhpcy5kcmFnZ2luZyA9IGl0ZW07CiAgICB9LAogICAgaGFuZGxlRHJhZ0VuZChlLCBpdGVtKSB7CiAgICAgIHRoaXMuZHJhZ2dpbmcgPSBudWxsOwogICAgfSwKICAgIGhhbmRsZURyYWdPdmVyKGUpIHsKICAgICAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9ICdtb3ZlJzsKICAgIH0sCiAgICBoYW5kbGVEcmFnRW50ZXIoZSwgaXRlbSkgewogICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnOwogICAgICBpZiAoaXRlbSA9PT0gdGhpcy5kcmFnZ2luZykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBuZXdJdGVtcyA9IFsuLi50aGlzLmZvcm1WYWxpZGF0ZS5zbGlkZXJfaW1hZ2VdOwogICAgICBjb25zdCBzcmMgPSBuZXdJdGVtcy5pbmRleE9mKHRoaXMuZHJhZ2dpbmcpOwogICAgICBjb25zdCBkc3QgPSBuZXdJdGVtcy5pbmRleE9mKGl0ZW0pOwogICAgICBuZXdJdGVtcy5zcGxpY2UoZHN0LCAwLCAuLi5uZXdJdGVtcy5zcGxpY2Uoc3JjLCAxKSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNsaWRlcl9pbWFnZSA9IG5ld0l0ZW1zOwogICAgfSwKICAgIC8vIOi/h+a7pOivpuaDheWGheWuuQogICAgZm9ybWF0UmljaFRleHQoaHRtbCkgewogICAgICBsZXQgbmV3Q29udGVudCA9IGh0bWwucmVwbGFjZSgvPGltZ1tePl0qPi9naSwgZnVuY3Rpb24gKG1hdGNoLCBjYXB0dXJlKSB7CiAgICAgICAgbWF0Y2ggPSBtYXRjaC5yZXBsYWNlKC9zdHlsZT0iW14iXSsiL2dpLCAnJykucmVwbGFjZSgvc3R5bGU9J1teJ10rJy9naSwgJycpOwogICAgICAgIG1hdGNoID0gbWF0Y2gucmVwbGFjZSgvd2lkdGg9IlteIl0rIi9naSwgJycpLnJlcGxhY2UoL3dpZHRoPSdbXiddKycvZ2ksICcnKTsKICAgICAgICBtYXRjaCA9IG1hdGNoLnJlcGxhY2UoL2hlaWdodD0iW14iXSsiL2dpLCAnJykucmVwbGFjZSgvaGVpZ2h0PSdbXiddKycvZ2ksICcnKTsKICAgICAgICByZXR1cm4gbWF0Y2g7CiAgICAgIH0pOwogICAgICBuZXdDb250ZW50ID0gbmV3Q29udGVudC5yZXBsYWNlKC9zdHlsZT0iW14iXSsiL2dpLCBmdW5jdGlvbiAobWF0Y2gsIGNhcHR1cmUpIHsKICAgICAgICBtYXRjaCA9IG1hdGNoLnJlcGxhY2UoL3dpZHRoOlteO10rOy9naSwgJ21heC13aWR0aDoxMDAlOycpLnJlcGxhY2UoL3dpZHRoOlteO10rOy9naSwgJ21heC13aWR0aDoxMDAlOycpOwogICAgICAgIHJldHVybiBtYXRjaDsKICAgICAgfSk7CiAgICAgIG5ld0NvbnRlbnQgPSBuZXdDb250ZW50LnJlcGxhY2UoLzxicltePl0qXC8+L2dpLCAnJyk7CiAgICAgIG5ld0NvbnRlbnQgPSBuZXdDb250ZW50LnJlcGxhY2UoCiAgICAgICAgL1w8aW1nL2dpLAogICAgICAgICc8aW1nIHN0eWxlPSJtYXgtd2lkdGg6MTAwJTtoZWlnaHQ6YXV0bztkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjA7IicsCiAgICAgICk7CiAgICAgIHJldHVybiBuZXdDb250ZW50OwogICAgfSwKICAgIC8vIOWVhuWTgWlkCiAgICBnZXRQcm9kdWN0SWQocm93KSB7CiAgICAgIHRoaXMuZ29vZHNfbW9kYWxzID0gZmFsc2U7CiAgICAgIGxldCBhcnIgPSB0aGlzLmZvcm1WYWxpZGF0ZS5yZWNvbW1lbmRfbGlzdC5jb25jYXQocm93KTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucmVjb21tZW5kX2xpc3QgPSB0aGlzLnVuaXF1ZXMoYXJyKTsKICAgIH0sCiAgICAvLyDpgInmi6nmjqjojZDllYblk4EKICAgIGNoYW5nZUdvb2RzKCkgewogICAgICB0aGlzLmdvb2RzX21vZGFscyA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMuZ29vZHNsaXN0LmdldExpc3QoKTsKICAgICAgdGhpcy4kcmVmcy5nb29kc2xpc3QuZ29vZHNDYXRlZ29yeSgpOwogICAgfSwKICAgIC8vIOmAieaLqeeUqOaIt+agh+etvgogICAgYWN0aXZlRGF0YShkYXRhTGFiZWwpIHsKICAgICAgdGhpcy5sYWJlbFNob3cgPSBmYWxzZTsKICAgICAgdGhpcy5kYXRhTGFiZWwgPSBkYXRhTGFiZWw7CiAgICB9LAogICAgLy8g5qCH562+5by556qX5YWz6ZetCiAgICBsYWJlbENsb3NlKCkgewogICAgICB0aGlzLmxhYmVsU2hvdyA9IGZhbHNlOwogICAgfSwKICAgIC8vIOWIoOmZpOeUqOaIt+agh+etvgogICAgY2xvc2VMYWJlbChsYWJlbCkgewogICAgICBsZXQgaW5kZXggPSB0aGlzLmRhdGFMYWJlbC5pbmRleE9mKHRoaXMuZGF0YUxhYmVsLmZpbHRlcigoZCkgPT4gZC5pZCA9PSBsYWJlbC5pZClbMF0pOwogICAgICB0aGlzLmRhdGFMYWJlbC5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKICAgIC8vIOaJk+W8gOmAieaLqeeUqOaIt+agh+etvgogICAgb3BlbkxhYmVsKHJvdykgewogICAgICB0aGlzLmxhYmVsU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuJHJlZnMudXNlckxhYmVsLnVzZXJMYWJlbChKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGF0YUxhYmVsKSkpOwogICAgfSwKICAgIHVuaXF1ZXMoc29uZ3MpIHsKICAgICAgbGV0IHJlc3VsdCA9IHt9OwogICAgICBsZXQgZmluYWxSZXN1bHQgPSBbXTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb25ncy5sZW5ndGg7IGkrKykgewogICAgICAgIHJlc3VsdFtzb25nc1tpXS5wcm9kdWN0X2lkXSA9IHNvbmdzW2ldOwogICAgICB9CiAgICAgIGZvciAobGV0IGl0ZW0gaW4gcmVzdWx0KSB7CiAgICAgICAgZmluYWxSZXN1bHQucHVzaChyZXN1bHRbaXRlbV0pOwogICAgICB9CiAgICAgIHJldHVybiBmaW5hbFJlc3VsdDsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmVSZWNvbW1lbmQoaSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5yZWNvbW1lbmRfbGlzdC5zcGxpY2UoaSwgMSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/product/productAdd","sourcesContent":["<template>\n  <div class=\"\" id=\"shopp-manager\">\n    <div class=\"i-layout-page-header header-title\">\n      <div class=\"fl_header\">\n        <router-link :to=\"{ path: $routeProStr + '/product/product_list' }\"\n          ><Button icon=\"ios-arrow-back\" size=\"small\" type=\"text\">返回</Button></router-link\n        >\n        <Divider type=\"vertical\" />\n        <span\n          class=\"ivu-page-header-title mr20\"\n          style=\"padding: 0\"\n          v-text=\"$route.params.id ? '编辑商品' : '添加商品'\"\n        ></span>\n      </div>\n    </div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <Tabs v-model=\"currentTab\" @on-click=\"onhangeTab\">\n        <TabPane v-for=\"(item, index) in headTab\" :key=\"index\" :label=\"item.tit\" :name=\"item.name\"></TabPane>\n      </Tabs>\n      <Form\n        class=\"formValidate mt20\"\n        ref=\"formValidate\"\n        :rules=\"ruleValidate\"\n        :model=\"formValidate\"\n        :label-width=\"labelWidth\"\n        :label-position=\"labelPosition\"\n        @submit.native.prevent\n      >\n        <!-- 基础信息-->\n        <Row :gutter=\"24\" type=\"flex\" v-show=\"currentTab === '1'\">\n          <Col span=\"24\">\n            <FormItem label=\"商品类型：\" props=\"is_virtual\">\n              <div\n                class=\"virtual\"\n                :class=\"formValidate.virtual_type == item.id ? 'virtual_boder' : 'virtual_boder2'\"\n                v-for=\"(item, index) in virtual\"\n                :key=\"index\"\n                @click=\"virtualbtn(item.id, 2)\"\n              >\n                <div class=\"virtual_top\">{{ item.tit }}</div>\n                <div class=\"virtual_bottom\">({{ item.tit2 }})</div>\n                <div v-if=\"formValidate.virtual_type == item.id\" class=\"virtual_san\"></div>\n                <div v-if=\"formValidate.virtual_type == item.id\" class=\"virtual_dui\">✓</div>\n              </div>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"商品分类：\" prop=\"cate_id\">\n              <!-- {{ formValidate.cate_id }}\n              <Select v-model=\"formValidate.cate_id\" placeholder=\"请选择商品分类\" multiple class=\"perW30\">\n                <Option v-for=\"item in treeSelect\" :disabled=\"item.pid === 0\" :value=\"item.id\" :key=\"item.id\">{{\n                  item.html + item.cate_name\n                }}</Option>\n              </Select>\n              {{ formValidate.cate_id }} -->\n              <el-cascader\n                class=\"perW30\"\n                v-model=\"formValidate.cate_id\"\n                size=\"small\"\n                :options=\"treeSelect\"\n                :props=\"{ multiple: true, emitPath: false }\"\n                clearable\n              ></el-cascader>\n              <span class=\"addfont\" @click=\"addCate\">新增分类</span>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"商品名称：\" prop=\"store_name\">\n              <Input class=\"perW30\" v-model.trim=\"formValidate.store_name\" placeholder=\"请输入商品名称\" />\n            </FormItem>\n          </Col>\n\n          <Col span=\"24\">\n            <FormItem label=\"单位：\" prop=\"unit_name\">\n              <Input class=\"perW30\" v-model=\"formValidate.unit_name\" placeholder=\"请输入单位\" />\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"商品轮播图：\" prop=\"slider_image\">\n              <div class=\"acea-row\">\n                <div\n                  class=\"pictrue\"\n                  v-for=\"(item, index) in formValidate.slider_image\"\n                  :key=\"index\"\n                  draggable=\"true\"\n                  @dragstart=\"handleDragStart($event, item)\"\n                  @dragover.prevent=\"handleDragOver($event, item)\"\n                  @dragenter=\"handleDragEnter($event, item)\"\n                  @dragend=\"handleDragEnd($event, item)\"\n                >\n                  <img v-lazy=\"item\" />\n                  <Button shape=\"circle\" icon=\"md-close\" @click.native=\"handleRemove(index)\" class=\"btndel\"></Button>\n                </div>\n                <div\n                  v-if=\"formValidate.slider_image.length < 10\"\n                  class=\"upLoad acea-row row-center-wrapper\"\n                  @click=\"modalPicTap('duo')\"\n                >\n                  <Icon type=\"ios-camera-outline\" size=\"26\" />\n                </div>\n                <Input v-model=\"formValidate.slider_image[0]\" style=\"display: none\"></Input>\n              </div>\n\n              <div class=\"titTip\">建议尺寸：800*800，可拖拽改变图片顺序，默认首张图为主图，最多上传10张</div>\n\n              <!-- <div class=\"tips\">(最多10张<br />750*750)</div> -->\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"添加视频：\">\n              <i-switch v-model=\"formValidate.video_open\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </i-switch>\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-if=\"formValidate.video_open\">\n            <FormItem label=\"视频类型：\">\n              <RadioGroup v-model=\"seletVideo\" @on-change=\"changeVideo\">\n                <Radio :label=\"0\" class=\"radio\">本地视频</Radio>\n                <Radio :label=\"1\">视频链接</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-if=\"formValidate.video_open\" id=\"selectvideo\">\n            <FormItem label=\"\" prop=\"video_link\">\n              <Input\n                v-if=\"seletVideo == 1 && !formValidate.video_link\"\n                class=\"perW30\"\n                v-model=\"videoLink\"\n                placeholder=\"请输入视频链接\"\n              />\n              <input type=\"file\" ref=\"refid\" @change=\"zh_uploadFile_change\" style=\"display: none\" />\n              <div\n                v-if=\"seletVideo == 0 && (upload_type !== '1' || videoLink) && !formValidate.video_link\"\n                class=\"ml10 videbox\"\n                @click=\"zh_uploadFile\"\n              >\n                +\n              </div>\n              <Button\n                v-if=\"seletVideo == 1 && (upload_type !== '1' || videoLink) && !formValidate.video_link\"\n                type=\"primary\"\n                icon=\"ios-cloud-upload-outline\"\n                class=\"ml10\"\n                @click=\"zh_uploadFile\"\n                >确认添加</Button\n              >\n              <Upload\n                v-if=\"upload_type === '1' && !videoLink\"\n                :show-upload-list=\"false\"\n                :action=\"fileUrl2\"\n                :before-upload=\"videoSaveToUrl\"\n                :data=\"uploadData\"\n                :headers=\"header\"\n                :multiple=\"true\"\n                style=\"display: inline-block\"\n              >\n                <div v-if=\"seletVideo === 0 && !formValidate.video_link\" class=\"videbox\">+</div>\n              </Upload>\n              <div class=\"iview-video-style\" v-if=\"formValidate.video_link\">\n                <video\n                  style=\"width: 100%; height: 100% !important; border-radius: 10px\"\n                  :src=\"formValidate.video_link\"\n                  controls=\"controls\"\n                >\n                  您的浏览器不支持 video 标签。\n                </video>\n                <div class=\"mark\"></div>\n                <Icon type=\"ios-trash-outline\" class=\"iconv\" @click=\"delVideo\" />\n              </div>\n              <Progress class=\"progress\" :percent=\"progress\" :stroke-width=\"5\" v-if=\"upload.videoIng || videoIng\" />\n              <div class=\"titTip\">建议时长：9～30秒，视频宽高比16:9</div>\n            </FormItem>\n          </Col>\n          <Col v-bind=\"grid\">\n            <FormItem label=\"商品状态：\">\n              <RadioGroup v-model=\"formValidate.is_show\">\n                <Radio :label=\"1\" class=\"radio\">上架</Radio>\n                <Radio :label=\"0\">下架</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col>\n\n          <!-- <Col span=\"24\">\n                        <FormItem label=\"商品标签：\" prop=\"label_id\">\n                            <Select v-model=\"formValidate.label_id\" multiple v-width=\"'50%'\">\n                                <Option v-for=\"item in dataLabel\" :value=\"item.id\" :key=\"item.id\">{{ item.label_name }}</Option>\n                            </Select>\n                        </FormItem>\n                    </Col> -->\n        </Row>\n        <!-- 规格库存-->\n        <Row :gutter=\"24\" type=\"flex\" v-show=\"currentTab === '2'\">\n          <Col span=\"24\">\n            <FormItem label=\"商品规格：\" props=\"spec_type\">\n              <RadioGroup v-model=\"formValidate.spec_type\" @on-change=\"changeSpec\">\n                <Radio :label=\"0\" class=\"radio\">单规格</Radio>\n                <Radio :label=\"1\">多规格</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col>\n          <!-- 多规格添加-->\n          <Col span=\"24\" v-if=\"formValidate.spec_type === 1\" class=\"noForm\">\n            <Col span=\"24\">\n              <FormItem label=\"选择规格：\" prop=\"\">\n                <div class=\"acea-row row-middle\">\n                  <Select v-model=\"formValidate.selectRule\" class=\"perW30\">\n                    <Option v-for=\"(item, index) in ruleList\" :value=\"item.rule_name\" :key=\"index\">{{\n                      item.rule_name\n                    }}</Option>\n                  </Select>\n                  <Button type=\"primary\" class=\"mr20\" @click=\"confirm\">确认</Button>\n                  <Button @click=\"addRule\">添加规格模板</Button>\n                </div>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem v-if=\"attrs.length !== 0\">\n                <draggable\n                  class=\"dragArea list-group\"\n                  :list=\"attrs\"\n                  group=\"peoples\"\n                  handle=\".move-icon\"\n                  :move=\"checkMove\"\n                  @end=\"end\"\n                >\n                  <div v-for=\"(item, index) in attrs\" :key=\"index\" class=\"acea-row row-middle mb10\">\n                    <div class=\"move-icon\">\n                      <span class=\"iconfont icondrag2\"></span>\n                    </div>\n                    <div style=\"width: 90%\" :class=\"moveIndex === index ? 'borderStyle' : ''\">\n                      <div class=\"acea-row row-middle\">\n                        <span class=\"mr5\">{{ item.value }}</span\n                        ><Icon type=\"ios-close-circle\" size=\"14\" class=\"curs\" @click=\"handleRemoveRole(index)\" />\n                      </div>\n                      <div class=\"rulesBox\">\n                        <draggable :list=\"item.detail\" handle=\".drag\">\n                          <Tag\n                            type=\"dot\"\n                            closable\n                            color=\"primary\"\n                            v-for=\"(j, indexn) in item.detail\"\n                            :key=\"indexn\"\n                            :name=\"j\"\n                            class=\"mr20 drag\"\n                            @on-close=\"handleRemove2(item.detail, indexn)\"\n                            >{{ j }}</Tag\n                          >\n                        </draggable>\n                        <Input\n                          search\n                          enter-button=\"添加\"\n                          placeholder=\"请输入属性名称\"\n                          v-model=\"item.detail.attrsVal\"\n                          @on-search=\"createAttr(item.detail.attrsVal, index)\"\n                          style=\"width: 150px\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </draggable>\n                <!-- <div  v-for=\"(item, index) in attrs\" :key=\"index\">\n                                    <div class=\"acea-row row-middle\"><span class=\"mr5\">{{item.value}}</span><Icon type=\"ios-close-circle\" size=\"14\" class=\"curs\" @click=\"handleRemoveRole(index)\"/></div>\n                                    <div class=\"rulesBox\">\n                                        <Tag type=\"dot\" closable color=\"primary\" v-for=\"(j, indexn) in item.detail\" :key=\"indexn\" :name=\"j\" class=\"mr20\" @on-close=\"handleRemove2(item.detail,indexn)\">{{j}}</Tag>\n                                        <Input search enter-button=\"添加\" placeholder=\"请输入属性名称\" v-model=\"item.detail.attrsVal\" @on-search=\"createAttr(item.detail.attrsVal,index)\" style=\"width: 150px\"/>\n                                    </div>\n                                </div> -->\n              </FormItem>\n            </Col>\n            <Col span=\"24\" v-if=\"createBnt\">\n              <FormItem>\n                <Button type=\"primary\" icon=\"md-add\" @click=\"addBtn\" class=\"mr15\">添加新规格</Button>\n                <Button type=\"success\" @click=\"generate(1)\">立即生成</Button>\n              </FormItem>\n            </Col>\n            <Col span=\"24\" v-if=\"showIput\">\n              <Col :xl=\"6\" :lg=\"9\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                <FormItem label=\"规格：\">\n                  <Input placeholder=\"请输入规格\" v-model=\"formDynamic.attrsName\" />\n                </FormItem>\n              </Col>\n              <Col :xl=\"6\" :lg=\"9\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                <FormItem label=\"规格值：\">\n                  <Input v-model=\"formDynamic.attrsVal\" placeholder=\"请输入规格值\" />\n                </FormItem>\n              </Col>\n              <Col :xl=\"6\" :lg=\"5\" :md=\"10\" :sm=\"24\" :xs=\"24\">\n                <FormItem>\n                  <Button type=\"primary\" class=\"mr15\" @click=\"createAttrName\">确定</Button>\n                  <Button @click=\"offAttrName\">取消</Button>\n                </FormItem>\n              </Col>\n            </Col>\n            <!-- 多规格设置-->\n            <Col\n              :xl=\"24\"\n              :lg=\"24\"\n              :md=\"24\"\n              :sm=\"24\"\n              :xs=\"24\"\n              v-if=\"manyFormValidate.length && formValidate.header.length !== 0 && attrs.length !== 0\"\n            >\n              <!-- 批量设置-->\n\n              <Col span=\"24\" v-if=\"[0, 3].includes(formValidate.virtual_type)\">\n                <FormItem label=\"批量设置：\" class=\"labeltop\">\n                  <Table :data=\"oneFormBatch\" :columns=\"formValidate.is_virtual ? columns3 : columns2\" border>\n                    <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                      <div class=\"acea-row row-middle row-center-wrapper\" @click=\"modalPicTap('dan', 'duopi', index)\">\n                        <div class=\"pictrue pictrueTab\" v-if=\"oneFormBatch[0].pic\">\n                          <img v-lazy=\"oneFormBatch[0].pic\" />\n                        </div>\n                        <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                          <Icon type=\"ios-camera-outline\" size=\"21\" class=\"iconfont\" />\n                        </div>\n                      </div>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"price\">\n                      <InputNumber\n                        v-model=\"oneFormBatch[0].price\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"cost\">\n                      <InputNumber\n                        v-model=\"oneFormBatch[0].cost\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"ot_price\">\n                      <InputNumber v-model=\"oneFormBatch[0].ot_price\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"stock\">\n                      <InputNumber\n                        v-model=\"oneFormBatch[0].stock\"\n                        :disabled=\"formValidate.virtual_type == 1\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"fictitious\">\n                      <Button\n                        v-if=\"!row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"addGoodsCoupon(index, 'oneFormBatch')\"\n                        >添加优惠券</Button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"see(row, 'manyFormValidate', index)\"\n                        >{{ row.coupon_name }}</span\n                      >\n                      <Button\n                        v-else-if=\"!row.virtual_list.length && formValidate.virtual_type == 1\"\n                        @click=\"addVirtual(index, 'oneFormBatch')\"\n                        >添加卡密</Button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"row.virtual_list.length && formValidate.virtual_type == 1\"\n                        @click=\"see(row, 'oneFormBatch', index)\"\n                        >已设置</span\n                      >\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"bar_code\">\n                      <Input v-model=\"oneFormBatch[0].bar_code\"></Input>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"weight\">\n                      <InputNumber\n                        v-model=\"oneFormBatch[0].weight\"\n                        :step=\"0.1\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"volume\">\n                      <InputNumber\n                        v-model=\"oneFormBatch[0].volume\"\n                        :step=\"0.1\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"action\">\n                      <a @click=\"batchAdd\">批量添加</a>\n                      <Divider type=\"vertical\" />\n                      <a @click=\"batchDel\">清空</a>\n                    </template>\n                  </Table>\n                </FormItem>\n              </Col>\n              <!-- 多规格表格-->\n              <Col span=\"24\">\n                <FormItem label=\"商品属性：\" class=\"labeltop\">\n                  <Table :data=\"manyFormValidate\" :columns=\"formValidate.header\" border>\n                    <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                      <div\n                        class=\"acea-row row-middle row-center-wrapper\"\n                        @click=\"modalPicTap('dan', 'duoTable', index)\"\n                      >\n                        <div class=\"pictrue pictrueTab\" v-if=\"manyFormValidate[index].pic\">\n                          <img v-lazy=\"manyFormValidate[index].pic\" />\n                        </div>\n                        <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                          <Icon type=\"ios-camera-outline\" size=\"21\" class=\"iconfont\" />\n                        </div>\n                      </div>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"price\">\n                      <InputNumber\n                        v-model=\"manyFormValidate[index].price\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"cost\">\n                      <InputNumber\n                        v-model=\"manyFormValidate[index].cost\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"ot_price\">\n                      <InputNumber\n                        v-model=\"manyFormValidate[index].ot_price\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"stock\">\n                      <InputNumber\n                        v-model=\"manyFormValidate[index].stock\"\n                        :disabled=\"formValidate.virtual_type == 1\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        :precision=\"0\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"bar_code\">\n                      <Input v-model=\"manyFormValidate[index].bar_code\"></Input>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"weight\">\n                      <InputNumber\n                        v-model=\"manyFormValidate[index].weight\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"volume\">\n                      <InputNumber\n                        v-model=\"manyFormValidate[index].volume\"\n                        :min=\"0\"\n                        :max=\"99999999\"\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"fictitious\">\n                      <Button\n                        v-if=\"!row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"addGoodsCoupon(index, 'manyFormValidate')\"\n                        >添加优惠券</Button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"row.coupon_id && formValidate.virtual_type == 2\"\n                        @click=\"see(row, 'manyFormValidate', index)\"\n                        >{{ row.coupon_name }}</span\n                      >\n                      <Button\n                        v-else-if=\"!row.virtual_list && !row.stock && formValidate.virtual_type == 1\"\n                        @click=\"addVirtual(index, 'manyFormValidate')\"\n                        >添加卡密</Button\n                      >\n                      <span\n                        class=\"see\"\n                        v-else-if=\"(row.virtual_list.length || row.stock) && formValidate.virtual_type == 1\"\n                        @click=\"see(row, 'manyFormValidate', index)\"\n                        >已设置</span\n                      >\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"action\">\n                      <a @click=\"delAttrTable(index)\">删除</a>\n                    </template>\n                  </Table>\n                </FormItem>\n              </Col>\n            </Col>\n          </Col>\n          <!-- 单规格表格-->\n          <div v-if=\"formValidate.spec_type === 0\">\n            <Col span=\"24\">\n              <FormItem label=\"图片：\">\n                <div class=\"pictrueBox\" @click=\"modalPicTap('dan', 'danTable', 0)\">\n                  <div class=\"pictrue\" v-if=\"oneFormValidate[0].pic\">\n                    <img v-lazy=\"oneFormValidate[0].pic\" />\n                    <Input v-model=\"oneFormValidate[0].pic\" style=\"display: none\"></Input>\n                  </div>\n                  <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                    <Input v-model=\"oneFormValidate[0].pic\" style=\"display: none\"></Input>\n                    <Icon type=\"ios-camera-outline\" size=\"26\" />\n                  </div>\n                </div>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"售价：\">\n                <InputNumber\n                  v-model=\"oneFormValidate[0].price\"\n                  :min=\"0\"\n                  :precision=\"2\"\n                  :max=\"99999999\"\n                  class=\"perW20\"\n                  :active-change=\"false\"\n                ></InputNumber>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"成本价：\">\n                <InputNumber\n                  v-model=\"oneFormValidate[0].cost\"\n                  :min=\"0\"\n                  :max=\"99999999\"\n                  :precision=\"2\"\n                  :active-change=\"false\"\n                  class=\"perW20\"\n                ></InputNumber>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"原价：\">\n                <InputNumber\n                  v-model=\"oneFormValidate[0].ot_price\"\n                  :min=\"0\"\n                  :max=\"99999999\"\n                  :precision=\"2\"\n                  :active-change=\"false\"\n                  class=\"perW20\"\n                ></InputNumber>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"库存：\">\n                <InputNumber\n                  v-model=\"oneFormValidate[0].stock\"\n                  :min=\"0\"\n                  :max=\"99999999\"\n                  :disabled=\"formValidate.virtual_type == 1\"\n                  :precision=\"0\"\n                  class=\"perW20\"\n                ></InputNumber>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"商品编号：\">\n                <Input v-model.trim=\"oneFormValidate[0].bar_code\" class=\"perW20\"></Input>\n              </FormItem>\n            </Col>\n            <Col span=\"24\" v-if=\"formValidate.virtual_type == 0\">\n              <FormItem label=\"重量（KG）：\">\n                <InputNumber v-model=\"oneFormValidate[0].weight\" :min=\"0\" :max=\"99999999\" class=\"perW20\"></InputNumber>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"体积(m³)：\" v-if=\"formValidate.virtual_type == 0\">\n                <InputNumber v-model=\"oneFormValidate[0].volume\" :min=\"0\" :max=\"99999999\" class=\"perW20\"></InputNumber>\n              </FormItem>\n            </Col>\n\n            <Col span=\"24\">\n              <FormItem label=\"虚拟商品：\" v-if=\"formValidate.virtual_type == 1 || formValidate.virtual_type == 2\">\n                <Button\n                  v-if=\"!oneFormValidate[0].coupon_id && formValidate.virtual_type == 2\"\n                  @click=\"addGoodsCoupon(0, 'oneFormValidate')\"\n                  >添加优惠券</Button\n                >\n                <span\n                  class=\"see\"\n                  v-else-if=\"oneFormValidate[0].coupon_id && formValidate.virtual_type == 2\"\n                  @click=\"see(oneFormValidate[0], 'oneFormValidate', 0)\"\n                  >{{ oneFormValidate[0].coupon_name }}</span\n                >\n                <Button\n                  v-if=\"\n                    !oneFormValidate[0].virtual_list.length &&\n                    !oneFormValidate[0].stock &&\n                    formValidate.virtual_type == 1\n                  \"\n                  @click=\"addVirtual(0, 'oneFormValidate')\"\n                  >添加卡密</Button\n                >\n                <span\n                  class=\"see\"\n                  v-else-if=\"\n                    (oneFormValidate[0].virtual_list.length || oneFormValidate[0].stock > 0) &&\n                    formValidate.virtual_type == 1\n                  \"\n                  @click=\"see(oneFormValidate[0], 'oneFormValidate', 0)\"\n                  >已设置</span\n                >\n              </FormItem>\n            </Col>\n          </div>\n        </Row>\n        <!-- 商品详情-->\n        <Row v-show=\"currentTab === '3'\">\n          <Col span=\"16\">\n            <FormItem label=\"商品详情：\">\n              <WangEditor style=\"width: 100%\" :content=\"contents\" @editorContent=\"getEditorContent\"></WangEditor>\n            </FormItem>\n          </Col>\n          <Col span=\"6\" style=\"width: 33%\">\n            <div class=\"ifam\">\n              <div class=\"content\" v-html=\"content\"></div>\n            </div>\n          </Col>\n        </Row>\n\n        <!-- 物流设置-->\n        <Row v-show=\"headTab.length === 6 ? currentTab === '4' : false\">\n          <Col span=\"24\">\n            <FormItem label=\"物流方式：\" prop=\"logistics\">\n              <CheckboxGroup v-model=\"formValidate.logistics\" @on-change=\"logisticsBtn\">\n                <Checkbox label=\"1\">快递</Checkbox>\n\n                <Checkbox label=\"2\">到店核销</Checkbox>\n              </CheckboxGroup>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"运费设置：\">\n              <RadioGroup v-model=\"formValidate.freight\">\n                <!-- <Radio :label=\"1\">包邮</Radio> -->\n                <Radio :label=\"2\">固定邮费</Radio>\n                <Radio :label=\"3\">运费模板</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-if=\"formValidate.freight != 3 && formValidate.freight != 1\">\n            <FormItem label=\"\" :prop=\"formValidate.freight != 1 ? 'freight' : ''\">\n              <div class=\"acea-row\">\n                <InputNumber :min=\"0\" v-model=\"formValidate.postage\" placeholder=\"请输入金额\" class=\"perW30 maxW\" />\n              </div>\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-if=\"formValidate.freight == 3\">\n            <FormItem label=\"\" prop=\"temp_id\">\n              <div class=\"acea-row\">\n                <Select v-model=\"formValidate.temp_id\" clearable placeholder=\"请选择运费模板\" class=\"perW30 maxW\">\n                  <Option v-for=\"(item, index) in templateList\" :value=\"item.id\" :key=\"index\">{{ item.name }}</Option>\n                </Select>\n                <span class=\"addfont\" @click=\"addTemp\">新增运费模板</span>\n              </div>\n            </FormItem>\n          </Col>\n        </Row>\n        <!-- 营销设置-->\n        <Row :gutter=\"24\" type=\"flex\" v-show=\"headTab.length === 6 ? currentTab === '5' : currentTab === '4'\">\n          <Col span=\"24\">\n            <FormItem label=\"已售数量：\">\n              <InputNumber :min=\"0\" :max=\"999999\" v-model=\"formValidate.ficti\" placeholder=\"请输入虚拟销量\" />\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"排序：\">\n              <InputNumber :min=\"0\" :max=\"999999\" v-model=\"formValidate.sort\" placeholder=\"请输入排序\" />\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <div class=\"line\"></div>\n          </Col>\n\n          <Col span=\"24\">\n            <FormItem label=\"购买送积分：\" prop=\"give_integral\">\n              <InputNumber v-model=\"formValidate.give_integral\" :min=\"0\" :max=\"999999\" placeholder=\"请输入积分\" />\n            </FormItem>\n          </Col>\n          <Col v-bind=\"grid3\">\n            <FormItem label=\"购买送优惠券：\">\n              <div v-if=\"couponName.length\" class=\"mb20\">\n                <Tag closable v-for=\"(item, index) in couponName\" :key=\"index\" @on-close=\"handleClose(item)\">{{\n                  item.title\n                }}</Tag>\n              </div>\n              <Button type=\"primary\" @click=\"addCoupon\">添加优惠券</Button>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"关联用户标签：\" prop=\"label_id\">\n              <div style=\"display: flex\">\n                <div class=\"labelInput acea-row row-between-wrapper\" @click=\"openLabel\">\n                  <div style=\"width: 90%\">\n                    <div v-if=\"dataLabel.length\">\n                      <Tag closable v-for=\"(item, index) in dataLabel\" @on-close=\"closeLabel(item)\" :key=\"index\">{{\n                        item.label_name\n                      }}</Tag>\n                    </div>\n                    <span class=\"span\" v-else>选择用户关联标签</span>\n                  </div>\n                  <div class=\"iconfont iconxiayi\"></div>\n                </div>\n                <span class=\"addfont\" @click=\"addLabel\">新增标签</span>\n              </div>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <div class=\"line\"></div>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"付费会员专属：\">\n              <i-switch v-model=\"formValidate.vip_product\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </i-switch>\n              <div class=\"titTip\">开启后仅付费会员可以看见并购买此商品</div>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"单独设置：\">\n              <CheckboxGroup v-model=\"formValidate.is_sub\" @on-change=\"checkAllGroupChange\">\n                <Checkbox :label=\"1\">佣金设置（数字即返佣金额）</Checkbox>\n                <Checkbox :label=\"0\">付费会员价</Checkbox>\n              </CheckboxGroup>\n              <!-- <RadioGroup v-model=\"formValidate.is_sub\">\n                                <Radio :label=\"1\" class=\"radio\">佣金设置</Radio>\n                                <Radio :label=\"0\">会员价</Radio>\n                            </RadioGroup> -->\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-if=\"formValidate.is_sub.length\">\n            <!--单规格返佣-->\n            <FormItem label=\"商品属性：\" v-if=\"formValidate.spec_type === 0\">\n              <Table :data=\"oneFormValidate\" :columns=\"columnsInstall\" border>\n                <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                  <div class=\"pictrue pictrueTab\">\n                    <img v-lazy=\"oneFormValidate[0].pic\" />\n                  </div>\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"price\">{{ oneFormValidate[0].price }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"cost\">{{ oneFormValidate[0].cost }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"ot_price\">{{ oneFormValidate[0].ot_price }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"stock\">{{ oneFormValidate[0].stock }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"bar_code\">{{ oneFormValidate[0].bar_code }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"weight\">{{ oneFormValidate[0].weight }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"fictitious\">\n                  <Button\n                    v-if=\"!row.coupon_id && formValidate.virtual_type == 2\"\n                    @click=\"addGoodsCoupon(index, 'oneFormValidate')\"\n                    >添加优惠券</Button\n                  >\n                  <span\n                    class=\"see\"\n                    v-else-if=\"row.coupon_id && formValidate.virtual_type == 2\"\n                    @click=\"see(row, 'manyFormValidate', index)\"\n                    >{{ row.coupon_name }}</span\n                  >\n                  <Button\n                    v-else-if=\"!row.virtual_list.length && !row.stock && formValidate.virtual_type == 1\"\n                    @click=\"addVirtual(index, 'oneFormValidate')\"\n                    >添加卡密</Button\n                  >\n                  <span\n                    class=\"see\"\n                    v-else-if=\"(row.virtual_list.length || row.stock) && formValidate.virtual_type == 1\"\n                    @click=\"see(row, 'oneFormValidate', index)\"\n                    >已设置</span\n                  >\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"volume\">{{ oneFormValidate[0].volume }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"brokerage\">\n                  <InputNumber\n                    v-model=\"oneFormValidate[0].brokerage\"\n                    :min=\"0\"\n                    :max=\"999999\"\n                    class=\"priceBox\"\n                  ></InputNumber>\n                </template>\n                <template slot-scope=\"{ row }\" slot=\"brokerage_two\">\n                  <InputNumber\n                    v-model=\"oneFormValidate[0].brokerage_two\"\n                    :min=\"0\"\n                    :max=\"999999\"\n                    class=\"priceBox\"\n                  ></InputNumber>\n                </template>\n                <template slot-scope=\"{ row }\" slot=\"vip_price\">\n                  <InputNumber\n                    v-model=\"oneFormValidate[0].vip_price\"\n                    :min=\"0\"\n                    :max=\"999999\"\n                    class=\"priceBox\"\n                  ></InputNumber>\n                </template>\n              </Table>\n              <!-- <Table v-else :data=\"oneFormValidate\" :columns=\"columnsInsta8\" border>\n                                <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                                    <div class=\"pictrue pictrueTab\"><img v-lazy=\"oneFormValidate[0].pic\"></div>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"price\">{{oneFormValidate[0].price}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"cost\">{{oneFormValidate[0].cost}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"ot_price\">{{oneFormValidate[0].ot_price}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"vip_price\">\n                                    <InputNumber  v-model=\"oneFormValidate[0].vip_price\" :min=\"0\" :precision=\"0\" class=\"priceBox\"></InputNumber>\n                                </template>\n                            </Table> -->\n            </FormItem>\n            <!--多规格返佣-->\n            <FormItem label=\"批量设置：\" v-if=\"formValidate.spec_type === 1\">\n              <span v-if=\"formValidate.is_sub.indexOf(1) > -1\">\n                一级返佣：<InputNumber\n                  placeholder=\"请输入一级返佣\"\n                  :min=\"0\"\n                  :max=\"9999999\"\n                  class=\"columnsBox perW30\"\n                  v-model=\"manyBrokerage\"\n                ></InputNumber>\n                二级返佣：<InputNumber\n                  placeholder=\"请输入二级返佣\"\n                  :min=\"0\"\n                  :max=\"99999999\"\n                  class=\"columnsBox perW30\"\n                  v-model=\"manyBrokerageTwo\"\n                ></InputNumber>\n              </span>\n              <span v-if=\"formValidate.is_sub.indexOf(0) > -1\">\n                会员价：<InputNumber\n                  placeholder=\"请输入会员价\"\n                  :min=\"0\"\n                  :max=\"99999999\"\n                  class=\"columnsBox perW30\"\n                  v-model=\"manyVipPrice\"\n                ></InputNumber>\n              </span>\n              <Button type=\"primary\" @click=\"brokerageSetUp\">批量设置</Button>\n              <!-- <template v-if=\"formValidate.is_sub\">\n                                <InputNumber v-width=\"'20%'\" placeholder=\"请输入一级返佣\" :min=\"0\" class=\"columnsBox\" v-model=\"manyBrokerage\"></InputNumber>\n                                <InputNumber v-width=\"'20%'\" placeholder=\"请输入二级返佣\" :min=\"0\" class=\"columnsBox\" v-model=\"manyBrokerageTwo\"></InputNumber>\n                                <Button type=\"primary\" @click=\"brokerageSetUp\">批量设置</Button>\n                            </template>\n                            <template v-else>\n                                <InputNumber v-width=\"'20%'\" placeholder=\"请输入会员价\" :min=\"0\" class=\"columnsBox\" v-model=\"manyVipPrice\"></InputNumber>\n                                <Button type=\"primary\" @click=\"vipPriceSetUp\">批量设置</Button>\n                            </template> -->\n            </FormItem>\n            <FormItem label=\"商品属性：\" v-if=\"formValidate.spec_type === 1 && manyFormValidate.length\">\n              <Table v-if=\"formValidate.is_sub\" :data=\"manyFormValidate\" :columns=\"columnsInstal2\" border>\n                <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                  <div class=\"pictrue pictrueTab\">\n                    <img v-lazy=\"manyFormValidate[index].pic\" />\n                  </div>\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"price\">{{ manyFormValidate[index].price }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"cost\">{{ manyFormValidate[index].cost }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"ot_price\">{{ manyFormValidate[index].ot_price }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"stock\">{{ manyFormValidate[index].stock }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"bar_code\">{{ manyFormValidate[index].bar_code }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"weight\">{{ manyFormValidate[index].weight }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"fictitious\">\n                  <Button\n                    v-if=\"!row.coupon_id && formValidate.virtual_type == 2\"\n                    @click=\"addGoodsCoupon(index, 'manyFormValidate')\"\n                    >添加优惠券</Button\n                  >\n                  <span\n                    class=\"see\"\n                    v-else-if=\"row.coupon_id && formValidate.virtual_type == 2\"\n                    @click=\"see(row, 'manyFormValidate', index)\"\n                    >{{ row.coupon_name }}</span\n                  >\n                  <Button\n                    v-else-if=\"!row.virtual_list.length && !row.stock && formValidate.virtual_type == 1\"\n                    @click=\"addVirtual(index, 'manyFormValidate')\"\n                    >添加卡密</Button\n                  >\n                  <span\n                    class=\"see\"\n                    v-else-if=\"(row.virtual_list.length || row.stock) && formValidate.virtual_type == 1\"\n                    @click=\"see(row, 'manyFormValidate', index)\"\n                    >已设置</span\n                  >\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"volume\">{{ manyFormValidate[index].volume }}</template>\n                <template slot-scope=\"{ row, index }\" slot=\"brokerage\">\n                  <InputNumber\n                    v-model=\"manyFormValidate[index].brokerage\"\n                    :min=\"0\"\n                    :max=\"99999999\"\n                    class=\"priceBox\"\n                  ></InputNumber>\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"brokerage_two\">\n                  <InputNumber\n                    v-model=\"manyFormValidate[index].brokerage_two\"\n                    :min=\"0\"\n                    :max=\"99999999\"\n                    class=\"priceBox\"\n                  ></InputNumber>\n                </template>\n                <template slot-scope=\"{ row, index }\" slot=\"vip_price\">\n                  <InputNumber\n                    v-model=\"manyFormValidate[index].vip_price\"\n                    :min=\"0\"\n                    :max=\"99999999\"\n                    class=\"priceBox\"\n                  ></InputNumber>\n                </template>\n              </Table>\n              <!-- <Table v-else :data=\"manyFormValidate\" :columns=\"columnsInsta9\" border>\n                                <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                                    <div class=\"pictrue pictrueTab\"><img v-lazy=\"manyFormValidate[index].pic\"></div>\n                                </template>\n                                <template slot-scope=\"{ row, index }\" slot=\"price\">{{manyFormValidate[index].price}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"cost\">{{manyFormValidate[index].cost}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"ot_price\">{{manyFormValidate[index].ot_price}}</template>\n                                <template slot-scope=\"{ row, index }\" slot=\"vip_price\">\n                                    <InputNumber  v-model=\"manyFormValidate[index].vip_price\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                                </template>\n                            </Table> -->\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <div class=\"line\"></div>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"是否限购：\">\n              <i-switch v-model=\"formValidate.is_limit\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </i-switch>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"限购类型：\" v-if=\"formValidate.is_limit\">\n              <RadioGroup v-model=\"formValidate.limit_type\">\n                <Radio :label=\"1\">单次限购</Radio>\n                <Radio :label=\"2\">永久限购</Radio>\n              </RadioGroup>\n              <div class=\"titTip\">单次限购是限制每次下单最多购买的数量，永久限购是限制一个用户总共可以购买的数量</div>\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-if=\"formValidate.is_limit\">\n            <FormItem label=\"限购数量：\" prop=\"limit_num\">\n              <div class=\"acea-row row-middle\">\n                <span class=\"mr10\"></span>\n                <InputNumber placeholder=\"请输入限购数量\" :precision=\"0\" :min=\"1\" v-model=\"formValidate.limit_num\" />\n                <span class=\"ml10\"> 件 </span>\n              </div>\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-if=\"formValidate.virtual_type == 0 || formValidate.virtual_type == 3\">\n            <FormItem label=\"预售商品：\">\n              <i-switch v-model=\"formValidate.presale\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </i-switch>\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-if=\"formValidate.presale\">\n            <FormItem label=\"预售活动时间：\" prop=\"presale_time\">\n              <div class=\"acea-row row-middle\">\n                <DatePicker\n                  :editable=\"false\"\n                  type=\"datetimerange\"\n                  format=\"yyyy-MM-dd HH:mm\"\n                  placeholder=\"请选择活动时间\"\n                  @on-change=\"onchangeTime\"\n                  :value=\"formValidate.presale_time\"\n                  v-model=\"formValidate.presale_time\"\n                ></DatePicker>\n              </div>\n              <div class=\"titTip\">设置活动开启结束时间，用户可以在设置时间内发起参与预售</div>\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-if=\"formValidate.presale\">\n            <FormItem label=\"发货时间：\" prop=\"presale_day\">\n              <div class=\"acea-row row-middle\">\n                <span class=\"mr10\">预售活动结束后</span>\n                <InputNumber placeholder=\"请输入发货时间\" :precision=\"0\" :min=\"1\" v-model=\"formValidate.presale_day\" />\n                <span class=\"ml10\"> 天之内 </span>\n                <div class=\"ml10 grey\"></div>\n              </div>\n            </FormItem>\n          </Col>\n\n          <Col span=\"24\">\n            <FormItem label=\"商品推荐：\">\n              <CheckboxGroup v-model=\"formValidate.recommend\">\n                <Checkbox label=\"is_hot\">热卖单品</Checkbox>\n                <Checkbox label=\"is_benefit\">促销单品</Checkbox>\n                <Checkbox label=\"is_best\">精品推荐</Checkbox>\n                <Checkbox label=\"is_new\">首发新品</Checkbox>\n                <Checkbox label=\"is_good\">优品推荐</Checkbox>\n              </CheckboxGroup>\n            </FormItem>\n          </Col>\n          <!-- <Col v-bind=\"grid\">\n            <FormItem label=\"热卖单品：\">\n              <RadioGroup v-model=\"formValidate.is_hot\">\n                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                <Radio :label=\"0\">关闭</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col>\n          <Col v-bind=\"grid\">\n            <FormItem label=\"促销单品：\">\n              <RadioGroup v-model=\"formValidate.is_benefit\">\n                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                <Radio :label=\"0\">关闭</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col>\n          <Col v-bind=\"grid\">\n            <FormItem label=\"精品推荐：\">\n              <RadioGroup v-model=\"formValidate.is_best\">\n                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                <Radio :label=\"0\">关闭</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col>\n          <Col v-bind=\"grid\">\n            <FormItem label=\"首发新品：\">\n              <RadioGroup v-model=\"formValidate.is_new\">\n                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                <Radio :label=\"0\">关闭</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col>\n          <Col v-bind=\"grid\">\n            <FormItem label=\"优品推荐：\">\n              <RadioGroup v-model=\"formValidate.is_good\">\n                <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                <Radio :label=\"0\">关闭</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col> -->\n          <Col v-bind=\"grid3\">\n            <FormItem label=\"活动优先级：\">\n              <div class=\"color-list acea-row row-middle\">\n                <div\n                  class=\"color-item\"\n                  :class=\"activity[color]\"\n                  v-for=\"color in formValidate.activity\"\n                  v-dragging=\"{\n                    item: color,\n                    list: formValidate.activity,\n                    group: 'color',\n                  }\"\n                  :key=\"color\"\n                >\n                  {{ color }}\n                </div>\n              </div>\n              <div class=\"titTip\">可拖动按钮调整活动的优先展示顺序</div>\n            </FormItem>\n          </Col>\n          <Col v-bind=\"grid3\">\n            <FormItem label=\"选择优品推荐商品：\">\n              <div class=\"picBox\">\n                <div class=\"pictrue\" v-for=\"(item, index) in formValidate.recommend_list\" :key=\"index\">\n                  <img v-lazy=\"item.image\" />\n                  <Button\n                    shape=\"circle\"\n                    icon=\"md-close\"\n                    @click.native=\"handleRemoveRecommend(index)\"\n                    class=\"btndel\"\n                  ></Button>\n                </div>\n                <div class=\"upLoad acea-row row-center-wrapper\" @click=\"changeGoods\">\n                  <Icon type=\"ios-add\" size=\"26\" class=\"iconfonts\" />\n                </div>\n              </div>\n            </FormItem>\n          </Col>\n        </Row>\n        <!-- 其他设置-->\n        <Row\n          type=\"flex\"\n          justify=\"space-between\"\n          v-show=\"headTab.length === 6 ? currentTab === '6' : currentTab === '5'\"\n        >\n          <Col span=\"24\">\n            <FormItem label=\"商品关键字：\">\n              <Input class=\"perW30\" v-model.trim=\"formValidate.keyword\" placeholder=\"请输入商品关键字\" />\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"商品简介：\">\n              <Input\n                class=\"perW30\"\n                v-model.trim=\"formValidate.store_info\"\n                type=\"textarea\"\n                :rows=\"3\"\n                placeholder=\"请输入商品简介\"\n              />\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"商品口令：\">\n              <Input\n                v-model.trim=\"formValidate.command_word\"\n                placeholder=\"请输入商品口令\"\n                type=\"textarea\"\n                :rows=\"3\"\n                class=\"perW30\"\n              />\n            </FormItem>\n          </Col>\n\n          <Col span=\"24\">\n            <FormItem label=\"商品推荐图：\">\n              <div class=\"pictrueBox\" @click=\"modalPicTap('dan', 'recommend_image')\">\n                <div class=\"pictrue\" v-if=\"formValidate.recommend_image\">\n                  <img v-lazy=\"formValidate.recommend_image\" />\n                  <Input v-model.trim=\"formValidate.recommend_image\" style=\"display: none\"></Input>\n                </div>\n                <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                  <Input v-model.trim=\"formValidate.recommend_image\" style=\"display: none\"></Input>\n                  <Icon type=\"ios-camera-outline\" size=\"26\" />\n                </div>\n                <div class=\"titTip\">建议比例：5:2</div>\n              </div>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"自定义留言：\">\n              <i-switch v-model=\"customBtn\" @on-change=\"customMessBtn\" size=\"large\">\n                <span slot=\"open\">开启</span>\n                <span slot=\"close\">关闭</span>\n              </i-switch>\n              <div class=\"addCustom_content\" v-if=\"customBtn\">\n                <div v-for=\"(item, index) in formValidate.custom_form\" type=\"flex\" :key=\"index\" class=\"custom_box\">\n                  <Input\n                    v-model.trim=\"item.title\"\n                    :placeholder=\"'留言标题' + (index + 1)\"\n                    style=\"width: 150px; margin-right: 10px\"\n                    :maxlength=\"10\"\n                  />\n                  <Select v-model=\"item.label\" style=\"width: 200px; margin-left: 6px; margin-right: 10px\">\n                    <Option v-for=\"items in CustomList\" :value=\"items.value\" :key=\"items.value\">{{\n                      items.label\n                    }}</Option>\n                  </Select>\n                  <Checkbox v-model=\"item.status\">必填</Checkbox>\n                  <div class=\"addfont\" @click=\"delcustom(index)\">删除</div>\n                </div>\n              </div>\n              <div class=\"addCustomBox\" v-show=\"customBtn\">\n                <div class=\"btn\" @click=\"addcustom\">+ 添加表单</div>\n                <div class=\"titTip\">用户下单时需填写的信息，最多可设置10条</div>\n              </div>\n            </FormItem>\n          </Col>\n        </Row>\n        <FormItem>\n          <Button v-if=\"currentTab !== '1'\" @click=\"upTab\">上一步</Button>\n          <Button\n            type=\"primary\"\n            class=\"submission\"\n            v-if=\"currentTab !== '6' && formValidate.virtual_type == 0\"\n            @click=\"downTab\"\n            >下一步</Button\n          >\n          <Button\n            type=\"primary\"\n            class=\"submission\"\n            v-if=\"currentTab !== '5' && formValidate.virtual_type != 0\"\n            @click=\"downTab\"\n            >下一步</Button\n          >\n          <Button\n            type=\"primary\"\n            :disabled=\"openSubimit\"\n            class=\"submission\"\n            @click=\"handleSubmit('formValidate')\"\n            v-if=\"($route.params.id || currentTab === '6') && formValidate.virtual_type == 0\"\n            >保存</Button\n          >\n          <Button\n            type=\"primary\"\n            :disabled=\"openSubimit\"\n            class=\"submission\"\n            @click=\"handleSubmit('formValidate')\"\n            v-if=\"($route.params.id || currentTab === '5') && formValidate.virtual_type != 0\"\n            >保存</Button\n          >\n        </FormItem>\n        <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n      </Form>\n      <Modal\n        v-model=\"modalPic\"\n        width=\"1024px\"\n        scrollable\n        footer-hide\n        closable\n        title=\"上传商品图\"\n        :mask-closable=\"false\"\n        :z-index=\"1\"\n      >\n        <uploadPictures\n          :isChoice=\"isChoice\"\n          @getPic=\"getPic\"\n          @getPicD=\"getPicD\"\n          :gridBtn=\"gridBtn\"\n          :gridPic=\"gridPic\"\n          v-if=\"modalPic\"\n        ></uploadPictures>\n      </Modal>\n      <Modal\n        v-model=\"addVirtualModel\"\n        width=\"700px\"\n        closable\n        title=\"添加卡密\"\n        :mask-closable=\"false\"\n        :z-index=\"1\"\n        footer-hide\n        @on-visible-change=\"initVirtualData\"\n      >\n        <div class=\"trip\"></div>\n        <div class=\"type-radio\">\n          <Form :label-width=\"80\">\n            <FormItem label=\"卡密类型：\">\n              <RadioGroup v-model=\"disk_type\" size=\"large\">\n                <Radio :label=\"1\">固定卡密</Radio>\n                <Radio :label=\"2\">一次性卡密</Radio>\n              </RadioGroup>\n              <div v-if=\"disk_type == 1\">\n                <div class=\"stock-disk\">\n                  <Input v-model=\"disk_info\" size=\"large\" type=\"textarea\" :rows=\"4\" placeholder=\"填写卡密信息\" />\n                </div>\n                <div class=\"stock-input\">\n                  <!-- <Input type=\"number\" v-model=\"stock\" size=\"large\" :min='0' placeholder=\"填写库存数量\">\n                    <span slot=\"append\">件</span>\n                  </Input> -->\n                  <InputNumber :max=\"100000\" :min=\"1\" :step=\"1\" :precision=\"0\" v-model=\"stock\" />\n                  <span class=\"pl10\">件</span>\n                </div>\n              </div>\n              <div class=\"scroll-virtual\" v-if=\"disk_type == 2\">\n                <div class=\"virtual-data mb10\" v-for=\"(item, index) in virtualList\" :key=\"index\">\n                  <span class=\"mr10 virtual-title\">卡号{{ index + 1 }}：</span>\n                  <Input\n                    class=\"mr10\"\n                    type=\"text\"\n                    v-model.trim=\"item.key\"\n                    style=\"width: 150px\"\n                    placeholder=\"请输入卡号(非必填)\"\n                  ></Input>\n                  <span class=\"mr10 virtual-title\">卡密{{ index + 1 }}：</span>\n                  <Input\n                    class=\"mr10\"\n                    type=\"text\"\n                    v-model.trim=\"item.value\"\n                    style=\"width: 150px\"\n                    placeholder=\"请输入卡密\"\n                  ></Input>\n                  <span class=\"deteal-btn\" @click=\"removeVirtual(index)\">删除</span>\n                </div>\n              </div>\n              <div class=\"add-more\" v-if=\"disk_type == 2\">\n                <Button type=\"primary\" @click=\"handleAdd\" icon=\"md-add\">新增</Button>\n                <Upload class=\"ml10\" :action=\"cardUrl\" :data=\"uploadData\" :headers=\"header\" :on-success=\"upFile\">\n                  <Button icon=\"ios-cloud-upload-outline\">导入卡密</Button>\n                </Upload>\n              </div>\n            </FormItem>\n          </Form>\n        </div>\n        <div class=\"footer\">\n          <div class=\"clear\" @click=\"closeVirtual\">取消</div>\n          <div class=\"submit\" @click=\"upVirtual\">确认</div>\n        </div>\n      </Modal>\n    </Card>\n    <freightTemplate :template=\"template\" v-on:changeTemplate=\"changeTemplate\" ref=\"templates\"></freightTemplate>\n    <add-attr ref=\"addattr\" @getList=\"userSearchs\"></add-attr>\n    <coupon-list\n      ref=\"couponTemplates\"\n      @nameId=\"nameId\"\n      :couponids=\"formValidate.coupon_ids\"\n      :updateIds=\"updateIds\"\n      :updateName=\"updateName\"\n    ></coupon-list>\n    <coupon-list ref=\"goodsCoupon\" many=\"one\" :luckDraw=\"true\" @getCouponId=\"goodsCouponId\"></coupon-list>\n    <!-- 生成淘宝京东表单-->\n    <Modal\n      v-model=\"modals\"\n      @on-cancel=\"cancel\"\n      class=\"Box\"\n      scrollable\n      footer-hide\n      closable\n      title=\"复制淘宝、天猫、京东、苏宁、1688\"\n      :mask-closable=\"false\"\n      width=\"800\"\n      height=\"500\"\n    >\n      <tao-bao ref=\"taobaos\" v-if=\"modals\" @on-close=\"onClose\"></tao-bao>\n    </Modal>\n    <Modal v-model=\"goods_modals\" title=\"商品列表\" footerHide class=\"paymentFooter\" scrollable width=\"900\">\n      <goods-list v-if=\"goods_modals\" ref=\"goodslist\" :ischeckbox=\"true\" @getProductId=\"getProductId\"></goods-list>\n    </Modal>\n    <!-- 用户标签 -->\n    <Modal\n      v-model=\"labelShow\"\n      scrollable\n      title=\"请选择用户标签\"\n      :closable=\"false\"\n      width=\"500\"\n      :footer-hide=\"true\"\n      :mask-closable=\"false\"\n    >\n      <userLabel ref=\"userLabel\" @activeData=\"activeData\" @close=\"labelClose\"></userLabel>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport userLabel from '@/components/labelList';\nimport { mapState } from 'vuex';\nimport vuedraggable from 'vuedraggable';\nimport uploadPictures from '@/components/uploadPictures';\nimport freightTemplate from '@/components/freightTemplate';\nimport couponList from '@/components/couponList';\nimport addAttr from '../productAttr/addAttr';\nimport goodsList from '@/components/goodsList/index';\nimport taoBao from './taoBao';\nimport WangEditor from '@/components/wangEditor/index.vue';\nimport { userLabelAddApi } from '@/api/user';\nimport {\n  productInfoApi,\n  cascaderListApi,\n  productAddApi,\n  generateAttrApi,\n  productGetRuleApi,\n  productGetTemplateApi,\n  productGetTempKeysApi,\n  checkActivityApi,\n  productCache,\n  cacheDelete,\n  uploadType,\n  importCard,\n  productCreateApi,\n} from '@/api/product';\nimport Setting from '@/setting';\nimport { getCookies } from '@/libs/util';\nimport { uploadByPieces } from '@/utils/upload'; //引入uploadByPieces方法\n\nexport default {\n  name: 'product_productAdd',\n  components: {\n    // VueUeditorWrap,\n    uploadPictures,\n    freightTemplate,\n    addAttr,\n    couponList,\n    taoBao,\n    draggable: vuedraggable,\n    goodsList,\n    WangEditor,\n    userLabel,\n  },\n  data() {\n    return {\n      labelShow: false,\n      dataLabel: [],\n      headTab: [\n        { tit: '基础信息', name: '1' },\n        { tit: '规格库存', name: '2' },\n        { tit: '商品详情', name: '3' },\n        { tit: '物流设置', name: '4' },\n        { tit: '营销设置', name: '5' },\n        { tit: '其他设置', name: '6' },\n      ],\n      virtual: [\n        { tit: '普通商品', id: 0, tit2: '物流发货' },\n        { tit: '卡密/网盘', id: 1, tit2: '自动发货' },\n        { tit: '优惠券', id: 2, tit2: '自动发货' },\n        { tit: '虚拟商品', id: 3, tit2: '虚拟发货' },\n      ],\n      seletVideo: 0, //选择视频类型\n      customBtn: false, //自定义留言开关\n      content: '',\n      contents: '',\n      fileUrl: Setting.apiBaseURL + '/file/upload',\n      fileUrl2: Setting.apiBaseURL + '/file/video_upload',\n      cardUrl: Setting.apiBaseURL + '/file/upload/1',\n      upload_type: '', //视频上传类型 1 本地上传 2 3 4 OSS上传\n      uploadData: {}, // 上传参数\n      header: {},\n\n      type: 0,\n      modals: false,\n      goods_modals: false,\n      spinShow: false,\n      openSubimit: false,\n      virtualData: '',\n      virtualList: [\n        {\n          key: '',\n          value: '',\n        },\n      ],\n      grid2: {\n        xl: 10,\n        lg: 12,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      grid3: {\n        xl: 18,\n        lg: 18,\n        md: 20,\n        sm: 24,\n        xs: 24,\n      },\n      // 批量设置表格data\n      oneFormBatch: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n        },\n      ],\n      // 规格数据\n      formDynamic: {\n        attrsName: '',\n        attrsVal: '',\n      },\n      disk_type: 1, //卡密类型\n      tabIndex: 0,\n      tabName: '',\n      formDynamicNameData: [],\n      isBtn: false,\n      columns2: [\n        {\n          title: '图片',\n          slot: 'pic',\n          align: 'center',\n          minWidth: 80,\n        },\n        {\n          title: '售价',\n          slot: 'price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '成本价',\n          slot: 'cost',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '原价',\n          slot: 'ot_price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '库存',\n          slot: 'stock',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '商品编号',\n          slot: 'bar_code',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '重量（KG）',\n          slot: 'weight',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '体积(m³)',\n          slot: 'volume',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          fixed: 'right',\n          align: 'center',\n          minWidth: 140,\n        },\n      ],\n      columns3: [\n        {\n          title: '图片',\n          slot: 'pic',\n          align: 'center',\n          minWidth: 80,\n        },\n        {\n          title: '售价',\n          slot: 'price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '成本价',\n          slot: 'cost',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '原价',\n          slot: 'ot_price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '库存',\n          slot: 'stock',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '商品编号',\n          slot: 'bar_code',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '虚拟商品',\n          slot: 'fictitious',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          fixed: 'right',\n          align: 'center',\n          minWidth: 140,\n        },\n      ],\n      columns: [],\n      columnsInstall: [],\n      columnsInstal2: [],\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      //自定义留言下拉选择\n      CustomList: [\n        {\n          value: 'text',\n          label: '文本框',\n        },\n        {\n          value: 'number',\n          label: '数字',\n        },\n        {\n          value: 'email',\n          label: '邮件',\n        },\n        {\n          value: 'data',\n          label: '日期',\n        },\n        {\n          value: 'time',\n          label: '时间',\n        },\n        {\n          value: 'id',\n          label: '身份证',\n        },\n        {\n          value: 'phone',\n          label: '手机号',\n        },\n        {\n          value: 'img',\n          label: '图片',\n        },\n      ],\n      customess: {\n        content: [],\n      }, //自定义留言内容\n\n      formValidate: {\n        disk_info: '', //卡密类型\n        logistics: ['1'], //选择物流方式\n        freight: 2, //运费设置\n        postage: 0, //设置运费金额\n        recommend: [], //商品推荐\n        presale_day: 1, //预售发货时间-结束\n        presale: false, //预售商品开关\n        is_limit: false,\n        limit_type: 0,\n        limit_num: 0,\n        video_open: false, //视频按钮是否显示\n        vip_product: false, //付费会员专属开关\n        custom_form: [], //自定义留言\n        store_name: '',\n        cate_id: [],\n        label_id: [],\n        keyword: '',\n        unit_name: '',\n        store_info: '',\n        image: '',\n        recommend_image: '',\n        slider_image: [],\n        description: '',\n        ficti: 0,\n        give_integral: 0,\n        sort: 0,\n        is_show: 1,\n        is_hot: 0,\n        is_benefit: 0,\n        is_best: 0,\n        is_new: 0,\n        is_good: 0,\n        is_postage: 0,\n        is_sub: [],\n        recommend_list: [],\n        virtual_type: 0,\n        // is_sub: 0,\n        id: 0,\n        spec_type: 0,\n        is_virtual: 0,\n        video_link: '',\n        // postage: 0,\n        temp_id: '',\n        attrs: [],\n        items: [\n          {\n            pic: '',\n            price: 0,\n            cost: 0,\n            ot_price: 0,\n            stock: 0,\n            bar_code: '',\n          },\n        ],\n        activity: ['默认', '秒杀', '砍价', '拼团'],\n        couponName: [],\n        header: [],\n        selectRule: '',\n        coupon_ids: [],\n        command_word: '',\n      },\n      ruleList: [],\n      templateList: [],\n      createBnt: true,\n      showIput: false,\n      manyFormValidate: [],\n      // 单规格表格data\n      oneFormValidate: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n          brokerage: 0,\n          brokerage_two: 0,\n          vip_price: 0,\n          virtual_list: [],\n          coupon_id: 0,\n        },\n      ],\n      images: [],\n      imagesTable: '',\n      currentTab: '1',\n      isChoice: '',\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      loading: false,\n      modalPic: false,\n      addVirtualModel: false,\n      template: false,\n      uploadList: [],\n      treeSelect: [],\n      picTit: '',\n      tableIndex: 0,\n      ruleValidate: {\n        store_name: [{ required: true, message: '请输入商品名称', trigger: 'blur' }],\n        cate_id: [\n          {\n            required: true,\n            message: '请选择商品分类',\n            trigger: 'change',\n            type: 'array',\n            min: '1',\n          },\n        ],\n        unit_name: [{ required: true, message: '请输入单位', trigger: 'blur' }],\n        // image: [{ required: true, message: \"请上传商品图\", trigger: \"change\" }],\n        slider_image: [\n          {\n            required: true,\n            message: '请上传商品轮播图',\n            type: 'array',\n            trigger: 'change',\n          },\n        ],\n        spec_type: [{ required: true, message: '请选择商品规格', trigger: 'change' }],\n        is_virtual: [{ required: true, message: '请选择商品类型', trigger: 'change' }],\n        selectRule: [{ required: true, message: '请选择商品规格属性', trigger: 'change' }],\n        temp_id: [\n          {\n            required: true,\n            message: '请选择运费模板',\n            trigger: 'change',\n            type: 'number',\n          },\n        ],\n        presale_time: [\n          {\n            required: true,\n            type: 'array',\n            message: '请选择活动时间',\n            trigger: 'change',\n          },\n        ],\n        logistics: [\n          {\n            required: true,\n            type: 'array',\n            min: 1,\n            message: '请选择物流方式',\n            trigger: 'change',\n          },\n          {\n            type: 'array',\n            max: 2,\n            message: '请选择物流方式',\n            trigger: 'change',\n          },\n        ],\n        give_integral: [{ type: 'integer', message: '请输入整数' }],\n      },\n      manyBrokerage: 0,\n      manyBrokerageTwo: 0,\n      manyVipPrice: 0,\n      upload: {\n        videoIng: false, // 是否显示进度条；\n      },\n      videoIng: false, // 是否显示进度条；\n      progress: 0, // 进度条默认0\n      stock: 0,\n      disk_info: '',\n      videoLink: '',\n      attrs: [],\n      activity: { 默认: 'red', 秒杀: 'blue', 砍价: 'green', 拼团: 'yellow' },\n      couponName: [],\n      updateIds: [],\n      updateName: [],\n      couponIds: '',\n      couponNames: [],\n      rakeBack: [\n        {\n          title: '一级返佣',\n          slot: 'brokerage',\n          align: 'center',\n          width: 95,\n        },\n        {\n          title: '二级返佣',\n          slot: 'brokerage_two',\n          align: 'center',\n          width: 95,\n        },\n      ],\n      member: [\n        {\n          title: '会员价',\n          slot: 'vip_price',\n          align: 'center',\n          width: 95,\n        },\n      ],\n      columnsInstalM: [],\n      moveIndex: '',\n      // aa: [],\n      // openSubimit: false\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : 120;\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n    labelBottom() {\n      return this.isMobile ? undefined : 15;\n    },\n  },\n  beforeRouteUpdate(to, from, next) {\n    this.bus.$emit('onTagsViewRefreshRouterView', this.$route.path);\n    next();\n  },\n  created() {\n    this.columns = this.columns2.slice(0, 8);\n    this.getToken();\n\n    // this.columnsInstall = this.columns2.slice(0, 4).concat(this.columnsInstall);\n    // this.columnsInsta8 = this.columns2.slice(0, 4).concat(this.columnsInsta8);\n  },\n  mounted() {\n    if (this.$route.params.id !== '0' && this.$route.params.id) {\n      this.getInfo();\n    } else if (this.$route.params.id === '0') {\n      productCache()\n        .then((res) => {\n          let data = res.data.info;\n          if (!Array.isArray(data)) {\n            let cate_id = data.cate_id.map(Number);\n            let label_id = data.label_id.map(Number);\n            this.attrs = data.items || [];\n            let ids = [];\n            // let names = [];\n            if (data.coupons) {\n              data.coupons.map((item) => {\n                ids.push(item.id);\n                // names.push(item.title);\n              });\n              this.couponName = data.coupons;\n            }\n\n            this.formValidate = data;\n            // this.couponName = data.coupons;\n            // that.couponName = names;\n            this.dataLabel = data.label_id;\n            this.formValidate.coupon_ids = ids;\n            this.updateIds = ids;\n            this.updateName = data.coupons;\n            this.formValidate.cate_id = cate_id;\n            // this.formValidate.label_id = label_id;\n            this.oneFormValidate = data.attrs;\n            this.formValidate.logistics = data.logistics || ['1'];\n            this.formValidate.header = [];\n            this.generate(0);\n            this.manyFormValidate = data.attrs;\n            this.spec_type = data.spec_type;\n            this.formValidate.is_virtual = data.is_virtual;\n            this.formValidate.custom_form = data.custom_form || [];\n            if (this.formValidate.custom_form.length != 0) {\n              this.customBtn = true;\n            }\n            this.virtualbtn(data.virtual_type, 1);\n            if (data.spec_type === 0) {\n              this.manyFormValidate = [];\n            } else {\n              this.createBnt = true;\n              this.oneFormValidate = [\n                {\n                  pic: data.image,\n                  price: 0,\n                  cost: 0,\n                  ot_price: 0,\n                  stock: 0,\n                  bar_code: '',\n                  weight: 0,\n                  volume: 0,\n                  brokerage: 0,\n                  brokerage_two: 0,\n                  vip_price: 0,\n                  virtual_list: [],\n                  coupon_id: 0,\n                },\n              ];\n            }\n            this.spinShow = false;\n          }\n        })\n        .catch((err) => {\n          this.$Message.error(err.msg);\n        });\n    }\n    if (this.$route.query.type) {\n      this.modals = true;\n      this.type = this.$route.query.type;\n    } else {\n      this.type = 0;\n    }\n    this.goodsCategory();\n    this.productGetRule();\n    this.productGetTemplate();\n    // this.userLabel();\n    this.uploadType();\n  },\n  methods: {\n    // 分片上传\n    videoSaveToUrl(file) {\n      uploadByPieces({\n        file: file, // 视频实体\n        pieceSize: 3, // 分片大小\n        success: (data) => {\n          this.formValidate.video_link = data.file_path;\n          this.progress = 100;\n        },\n        error: (e) => {\n          this.$Message.error(e.msg);\n        },\n        uploading: (chunk, allChunk) => {\n          this.videoIng = true;\n          let st = Math.floor((chunk / allChunk) * 100);\n          this.progress = st;\n        },\n      });\n      return false;\n    },\n    // 类型选择/填入内容判断\n    virtualbtn(index, type) {\n      if (type != 1) {\n        this.formValidate.is_sub = [];\n        let id = this.$route.params.id;\n        if (id) {\n          checkActivityApi(id)\n            .then((res) => {})\n            .catch((res) => {\n              this.formValidate.spec_type = this.spec_type;\n              this.$Message.error(res.msg);\n            });\n        } else {\n          if (this.formValidate.spec_type == 1) {\n            this.generate(1);\n          }\n        }\n      }\n      switch (index) {\n        case 0:\n          this.formValidate.virtual_type = 0;\n          this.formValidate.is_virtual = 0;\n          this.headTab = [\n            { tit: '基础信息', name: '1' },\n            { tit: '规格库存', name: '2' },\n            { tit: '商品详情', name: '3' },\n            { tit: '物流设置', name: '4' },\n            { tit: '营销设置', name: '5' },\n            { tit: '其他设置', name: '6' },\n          ];\n          break;\n        case 1:\n          this.formValidate.virtual_type = 1;\n          this.formValidate.postage = 0;\n          this.formValidate.is_virtual = 1;\n          this.headTab = [\n            { tit: '基础信息', name: '1' },\n            { tit: '规格库存', name: '2' },\n            { tit: '商品详情', name: '3' },\n            // { tit: \"物流设置\", name: \"4\" },\n            { tit: '营销设置', name: '4' },\n            { tit: '其他设置', name: '5' },\n          ];\n          break;\n        case 2:\n          this.formValidate.virtual_type = 2;\n          this.formValidate.is_virtual = 1;\n          this.headTab = [\n            { tit: '基础信息', name: '1' },\n            { tit: '规格库存', name: '2' },\n            { tit: '商品详情', name: '3' },\n            // { tit: \"物流设置\", name: \"4\" },\n            { tit: '营销设置', name: '4' },\n            { tit: '其他设置', name: '5' },\n          ];\n          break;\n        case 3:\n          this.formValidate.virtual_type = 3;\n          this.formValidate.is_virtual = 1;\n          this.headTab = [\n            { tit: '基础信息', name: '1' },\n            { tit: '规格库存', name: '2' },\n            { tit: '商品详情', name: '3' },\n            // { tit: \"物流设置\", name: \"4\" },\n            { tit: '营销设置', name: '4' },\n            { tit: '其他设置', name: '5' },\n          ];\n          break;\n      }\n    },\n    // 新增分类\n    addCate() {\n      this.$modalForm(productCreateApi()).then(() => this.goodsCategory());\n    },\n    // 物流方式选择\n    logisticsBtn(e) {\n      this.formValidate.logistics = e;\n    },\n    // 新增标签\n    addLabel() {\n      this.$modalForm(userLabelAddApi(0)).then(() => this.userLabel());\n    },\n    // 自定义留言 开启关闭\n    customMessBtn(e) {\n      if (!e) {\n        this.formValidate.custom_form = [];\n      }\n    },\n    // 自定义留言 新增表单\n    addcustom() {\n      if (this.formValidate.custom_form.length > 9) {\n        this.$Message.warning('最多添加10条');\n      } else {\n        this.formValidate.custom_form.push({\n          title: '',\n          label: 'text',\n          value: '',\n          status: false,\n        });\n      }\n    },\n    // 删除\n    delcustom(index) {\n      this.formValidate.custom_form.splice(index, 1);\n    },\n    // 预售具体日期\n    onchangeTime(e) {\n      this.formValidate.presale_time = e;\n    },\n    // 商品详情\n    getEditorContent(data) {\n      this.content = data;\n    },\n    cancel() {\n      this.$router.push({ path: this.$routeProStr + '/product/product_list' });\n    },\n    // 上传头部token\n    getToken() {\n      this.header['Authori-zation'] = 'Bearer ' + getCookies('token');\n    },\n    // 导入卡密\n    upFile(res) {\n      importCard({ file: res.data.src }).then((res) => {\n        this.virtualList = this.virtualList.concat(res.data);\n      });\n    },\n    //获取视频上传类型\n    uploadType() {\n      uploadType().then((res) => {\n        this.upload_type = res.data.upload_type;\n      });\n    },\n    // 初始化数据展示\n    infoData(data) {\n      let cate_id = data.cate_id.map(Number);\n      let label_id = data.label_id.map(Number);\n      this.attrs = data.items || [];\n      let ids = [];\n      data.coupons.map((item) => {\n        ids.push(item.id);\n      });\n      this.formValidate = data;\n      this.seletVideo = data.seletVideo;\n      this.contents = data.description;\n      this.couponName = data.coupons;\n      this.formValidate.coupon_ids = ids;\n      this.updateIds = ids;\n      this.dataLabel = data.label_id;\n      this.updateName = data.coupons;\n      this.virtualbtn(data.virtual_type, 1);\n      this.formValidate.logistics = data.logistics || ['1'];\n      this.formValidate.custom_form = data.custom_form || [];\n      if (this.formValidate.custom_form.length != 0) {\n        this.customBtn = true;\n      }\n      this.formValidate.cate_id = cate_id;\n      if (data.attr) {\n        this.oneFormValidate = [data.attr];\n      }\n      this.formValidate.header = [];\n      this.generate(0);\n      // this.manyFormValidate = data.attrs;\n      this.$set(this, 'manyFormValidate', data.attrs);\n      this.spec_type = data.spec_type;\n      this.formValidate.is_virtual = data.is_virtual;\n      if (data.spec_type === 0) {\n        this.manyFormValidate = [];\n      } else {\n        this.createBnt = true;\n        this.oneFormValidate = [\n          {\n            pic: '',\n            price: 0,\n            cost: 0,\n            ot_price: 0,\n            stock: 0,\n            bar_code: '',\n            weight: 0,\n            volume: 0,\n            brokerage: 0,\n            brokerage_two: 0,\n            vip_price: 0,\n            virtual_list: [],\n            coupon_id: 0,\n          },\n        ];\n      }\n    },\n    //关闭淘宝弹窗并生成数据；\n    onClose(data) {\n      this.modals = false;\n      this.infoData(data);\n    },\n\n    checkMove(evt) {\n      this.moveIndex = evt.draggedContext.index;\n    },\n    end() {\n      this.moveIndex = '';\n      this.generate(1);\n    },\n    // 单独设置会员设置\n    checkAllGroupChange(data) {\n      this.checkAllGroup(data);\n    },\n    checkAllGroup(data) {\n      if (this.formValidate.spec_type === 0) {\n        if (data.indexOf(0) > -1) {\n          this.columnsInstall = this.columns2.slice(0, 4).concat(this.member);\n        } else if (data.indexOf(1) > -1) {\n          this.columnsInstall = this.columns2.slice(0, 4).concat(this.rakeBack);\n        } else {\n          this.columnsInstall = this.columns2.slice(0, 4);\n        }\n        if (data.length === 2) {\n          this.columnsInstall = this.columns2.slice(0, 4).concat(this.rakeBack).concat(this.member);\n        }\n      } else {\n        if (data.indexOf(0) > -1) {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.member);\n        } else if (data.indexOf(1) > -1) {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.rakeBack);\n        } else {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4);\n        }\n        if (data.length === 2) {\n          this.columnsInstal2 = this.columnsInstalM.slice(0, 4).concat(this.rakeBack).concat(this.member);\n        }\n      }\n    },\n    // 添加优惠券\n    addCoupon() {\n      this.$refs.couponTemplates.isTemplate = true;\n      this.$refs.couponTemplates.tableList();\n    },\n    // 规格中优惠券查看\n    see(data, name, index) {\n      this.tabName = name;\n      this.tabIndex = index;\n\n      if (this.formValidate.virtual_type === 1) {\n        if (data.disk_info != '') {\n          this.disk_type = 1;\n          this.disk_info = data.disk_info;\n          this.stock = data.stock;\n        } else if (data.virtual_list.length) {\n          this.disk_type = 2;\n          this.virtualList = data.virtual_list;\n        }\n        this.addVirtualModel = true;\n      } else {\n        this.$refs.goodsCoupon.isTemplate = true;\n        this.$refs.goodsCoupon.tableList(3);\n      }\n    },\n    // 添加优惠券\n    addGoodsCoupon(index, name) {\n      this.tabIndex = index;\n      this.tabName = name;\n      this.$refs.goodsCoupon.isTemplate = true;\n      this.$refs.goodsCoupon.tableList(3);\n    },\n    addVirtual(index, name) {\n      this.tabIndex = index;\n      this.tabName = name;\n      this.addVirtualModel = true;\n    },\n    // 提交卡密信息\n    upVirtual() {\n      if (this.disk_type == 2) {\n        for (let i = 0; i < this.virtualList.length; i++) {\n          const element = this.virtualList[i];\n          if (!element.value) {\n            this.$Message.error('请输入所有卡密');\n            return;\n          }\n        }\n        this.$set(this[this.tabName][this.tabIndex], 'virtual_list', this.virtualList);\n        this.$set(this[this.tabName][this.tabIndex], 'stock', this.virtualList.length);\n        this.virtualList = [\n          {\n            key: '',\n            value: '',\n          },\n        ];\n        this.$set(this[this.tabName][this.tabIndex], 'disk_info', '');\n      } else {\n        if (!this.disk_info.length) {\n          return this.$Message.error('请填写卡密信息');\n        }\n        if (!this.stock) {\n          return this.$Message.error('请填写库存数量');\n        }\n        this.$set(this[this.tabName][this.tabIndex], 'stock', Number(this.stock));\n        this.$set(this[this.tabName][this.tabIndex], 'stock', Number(this.stock));\n        this.$set(this[this.tabName][this.tabIndex], 'disk_info', this.disk_info);\n        this.$set(this[this.tabName][this.tabIndex], 'virtual_list', []);\n      }\n      this.addVirtualModel = false;\n      this.closeVirtual();\n    },\n    //  初始化卡密数据信息\n    closeVirtual() {\n      this.addVirtualModel = false;\n      this.virtualList = [\n        {\n          key: '',\n          value: '',\n        },\n      ];\n      this.disk_info = '';\n      this.stock = 0;\n    },\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n    },\n    // 获取优惠券id数据\n    nameId(id, names) {\n      this.formValidate.coupon_ids = id;\n      this.couponName = this.unique(names);\n    },\n    // 获取优惠券信息\n    goodsCouponId(data) {\n      // this[this.tabName][this.tabIndex].coupon_id = data.id;\n      // this[this.tabName][this.tabIndex].coupon_name = data.title;\n      this.$set(this[this.tabName][this.tabIndex], 'coupon_id', data.id);\n      this.$set(this[this.tabName][this.tabIndex], 'coupon_name', data.title);\n      this.$refs.goodsCoupon.isTemplate = false;\n    },\n    handleClose(name) {\n      let index = this.couponName.indexOf(name);\n      this.couponName.splice(index, 1);\n      let couponIds = this.formValidate.coupon_ids;\n      couponIds.splice(index, 1);\n      this.updateIds = couponIds;\n      this.updateName = this.couponName;\n    },\n    // 运费模板\n    getList() {\n      this.productGetTemplate();\n    },\n    // 添加运费模板\n    addTemp() {\n      this.$refs.templates.isTemplate = true;\n    },\n    // 删除视频；\n    delVideo() {\n      let that = this;\n      that.$set(that.formValidate, 'video_link', '');\n      that.$set(that, 'progress', 0);\n      that.videoIng = false;\n      that.upload.videoIng = false;\n    },\n    zh_uploadFile() {\n      if (this.seletVideo == 1) {\n        this.formValidate.video_link = this.videoLink;\n      } else {\n        this.$refs.refid.click();\n      }\n    },\n    // 上传视频\n    zh_uploadFile_change(evfile) {\n      let that = this;\n      let suffix = evfile.target.files[0].name.substr(evfile.target.files[0].name.indexOf('.'));\n      if (suffix.indexOf('.mp4') === -1) {\n        return that.$Message.error('只能上传MP4文件');\n      }\n      productGetTempKeysApi()\n        .then((res) => {\n          that.$videoCloud\n            .videoUpload({\n              type: res.data.type,\n              evfile: evfile,\n              res: res,\n              uploading(status, progress) {\n                that.upload.videoIng = status;\n                if (res.status == 200) {\n                  that.progress = 100;\n                }\n              },\n            })\n            .then((res) => {\n              that.formValidate.video_link = res.url;\n              that.$Message.success('视频上传成功');\n              that.upload.videoIng = false;\n            })\n            .catch((res) => {\n              that.$Message.error(res);\n            });\n        })\n        .catch((res) => {\n          that.$Message.error(res.msg);\n        });\n    },\n    // 上一页；\n    upTab() {\n      this.currentTab = (Number(this.currentTab) - 1).toString();\n    },\n    // 下一页；\n    downTab() {\n      this.currentTab = (Number(this.currentTab) + 1).toString();\n    },\n    // 属性弹窗回调函数；\n    userSearchs() {\n      this.productGetRule();\n    },\n    // 添加规则；\n    addRule() {\n      this.$refs.addattr.modal = true;\n    },\n    // 批量设置分佣；\n    brokerageSetUp() {\n      let that = this;\n      if (that.formValidate.is_sub.indexOf(1) > -1) {\n        if (that.manyBrokerage <= 0 || that.manyBrokerageTwo <= 0) {\n          return that.$Message.error('请填写返佣金额后进行批量添加');\n        }\n      } else if (that.formValidate.is_sub.indexOf(0) > -1) {\n        if (that.manyVipPrice <= 0) {\n          return that.$Message.error('请填写会员价后进行批量添加');\n        }\n      }\n      if (this.formValidate.is_sub.length === 2) {\n        if (that.manyBrokerage <= 0 || that.manyBrokerageTwo <= 0 || that.manyVipPrice <= 0) {\n          return that.$Message.error('请填写完金额后进行批量添加');\n        }\n      }\n      for (let val of that.manyFormValidate) {\n        this.$set(val, 'brokerage', that.manyBrokerage);\n        this.$set(val, 'brokerage_two', that.manyBrokerageTwo);\n        this.$set(val, 'vip_price', that.manyVipPrice);\n      }\n    },\n    // 批量设置会员价\n    vipPriceSetUp() {\n      let that = this;\n      if (that.manyVipPrice <= 0) {\n        return that.$Message.error('请填写会员价在进行批量添加');\n      } else {\n        for (let val of that.manyFormValidate) {\n          this.$set(val, 'vip_price', that.manyVipPrice);\n        }\n      }\n    },\n    // 新增卡密\n    handleAdd() {\n      this.virtualList.push({\n        key: '',\n        value: '',\n      });\n    },\n    // 初始化卡密信息\n    initVirtualData(status) {\n      if (!status) {\n        this.virtualList = [\n          {\n            key: '',\n            value: '',\n          },\n        ];\n      }\n    },\n    removeVirtual(index) {\n      this.virtualList.splice(index, 1);\n    },\n    // 清空批量规格信息\n    batchDel() {\n      this.oneFormBatch = [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n        },\n      ];\n    },\n    confirm() {\n      let that = this;\n      that.createBnt = true;\n      if (that.formValidate.selectRule.trim().length <= 0) {\n        return that.$Message.error('请选择属性');\n      }\n      that.ruleList.forEach(function (item, index) {\n        if (item.rule_name === that.formValidate.selectRule) {\n          that.attrs = item.rule_value;\n        }\n      });\n    },\n    // 获取商品属性模板；\n    productGetRule() {\n      productGetRuleApi().then((res) => {\n        this.ruleList = res.data;\n      });\n    },\n    // 获取运费模板；\n    productGetTemplate() {\n      productGetTemplateApi().then((res) => {\n        this.templateList = res.data;\n      });\n    },\n    // 删除表格中的属性\n    delAttrTable(index) {\n      let id = this.$route.params.id;\n      if (id) {\n        checkActivityApi(id)\n          .then((res) => {\n            this.manyFormValidate.splice(index, 1);\n            this.$Message.success(res.msg);\n          })\n          .catch((res) => {\n            this.$Message.error(res.msg);\n          });\n      } else {\n        this.manyFormValidate.splice(index, 1);\n      }\n    },\n    // 批量添加\n    batchAdd() {\n      for (let val of this.manyFormValidate) {\n        if (this.oneFormBatch[0].pic) {\n          this.$set(val, 'pic', this.oneFormBatch[0].pic);\n        }\n        if (this.oneFormBatch[0].price > 0) {\n          this.$set(val, 'price', this.oneFormBatch[0].price);\n        }\n        if (this.oneFormBatch[0].cost > 0) {\n          this.$set(val, 'cost', this.oneFormBatch[0].cost);\n        }\n        if (this.oneFormBatch[0].ot_price > 0) {\n          this.$set(val, 'ot_price', this.oneFormBatch[0].ot_price);\n        }\n        if (this.oneFormBatch[0].stock > 0) {\n          this.$set(val, 'stock', this.oneFormBatch[0].stock);\n        }\n        if (this.oneFormBatch[0].bar_code !== '') {\n          this.$set(val, 'bar_code', this.oneFormBatch[0].bar_code);\n        }\n        if (this.oneFormBatch[0].weight > 0) {\n          this.$set(val, 'weight', this.oneFormBatch[0].weight);\n        }\n        if (this.oneFormBatch[0].volume > 0) {\n          this.$set(val, 'volume', this.oneFormBatch[0].volume);\n        }\n      }\n    },\n    // 添加按钮\n    addBtn() {\n      this.clearAttr();\n      this.createBnt = false;\n      this.showIput = true;\n    },\n    // 立即生成\n    generate(type) {\n      generateAttrApi(\n        {\n          attrs: this.attrs,\n          is_virtual: [1, 2].includes(this.formValidate.virtual_type) ? 1 : 0,\n          virtual_type: this.formValidate.virtual_type,\n        },\n        this.formValidate.id,\n        type,\n      )\n        .then((res) => {\n          let info = res.data.info,\n            header1 = JSON.parse(JSON.stringify(info.header));\n          if (this.$route.params.id !== '0' && (this.$route.query.type != -1 || type)) {\n            this.manyFormValidate = info.value;\n          }\n          let header = info.header;\n          if ([1, 2].includes(this.formValidate.virtual_type)) {\n            this.columnsInstalM = header;\n            this.formValidate.header = header;\n          } else {\n            this.formValidate.header = header1;\n            this.columnsInstalM = info.header;\n          }\n          this.checkAllGroup(this.formValidate.is_sub);\n          if (!this.$route.params.id && this.formValidate.spec_type === 1) {\n            this.manyFormValidate.map((item) => {\n              item.pic = this.formValidate.image;\n            });\n            this.oneFormBatch[0].pic = this.formValidate.image;\n          } else if (this.$route.params.id) {\n            this.manyFormValidate.map((item) => {\n              if (!item.pic) {\n                item.pic = this.formValidate.image;\n              }\n            });\n            this.oneFormBatch[0].pic = this.formValidate.image;\n          }\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 取消\n    offAttrName() {\n      this.showIput = false;\n      this.createBnt = true;\n    },\n    clearAttr() {\n      this.formDynamic.attrsName = '';\n      this.formDynamic.attrsVal = '';\n    },\n    // 删除规格\n    handleRemoveRole(index) {\n      this.attrs.splice(index, 1);\n      this.manyFormValidate.splice(index, 1);\n    },\n    // 删除属性\n    handleRemove2(item, index) {\n      item.splice(index, 1);\n    },\n    // 添加规则名称\n    createAttrName() {\n      if (this.formDynamic.attrsName && this.formDynamic.attrsVal) {\n        let data = {\n          value: this.formDynamic.attrsName,\n          detail: [this.formDynamic.attrsVal],\n        };\n        this.attrs.push(data);\n        var hash = {};\n        this.attrs = this.attrs.reduce(function (item, next) {\n          /* eslint-disable */\n          hash[next.value] ? '' : (hash[next.value] = true && item.push(next));\n          return item;\n        }, []);\n        this.clearAttr();\n        this.showIput = false;\n        this.createBnt = true;\n      } else {\n        this.$Message.warning('请添加完整的规格！');\n      }\n    },\n    // 添加属性\n    createAttr(num, idx) {\n      if (num) {\n        this.attrs[idx].detail.push(num);\n        var hash = {};\n        this.attrs[idx].detail = this.attrs[idx].detail.reduce(function (item, next) {\n          /* eslint-disable */\n          hash[next] ? '' : (hash[next] = true && item.push(next));\n          return item;\n        }, []);\n      } else {\n        this.$Message.warning('请添加属性');\n      }\n    },\n    // 商品分类；\n    goodsCategory() {\n      cascaderListApi(1)\n        .then((res) => {\n          this.treeSelect = res.data;\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    //视视上传类型\n    changeVideo(e) {\n      this.formValidate.video_link = '';\n      this.videoLink = '';\n    },\n    // 改变规格\n    changeSpec() {\n      this.formValidate.is_sub = [];\n      let id = this.$route.params.id;\n      if (id) {\n        checkActivityApi(id)\n          .then((res) => {})\n          .catch((res) => {\n            this.formValidate.spec_type = this.spec_type;\n            this.$Message.error(res.msg);\n          });\n      }\n    },\n    // 详情\n    getInfo() {\n      let that = this;\n      that.spinShow = true;\n      productInfoApi(that.$route.params.id)\n        .then(async (res) => {\n          let data = res.data.productInfo;\n          this.infoData(data);\n          this.spinShow = false;\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    // tab切换\n    onhangeTab(name) {\n      this.currentTab = name;\n    },\n    handleRemove(i) {\n      this.images.splice(i, 1);\n      this.formValidate.slider_image.splice(i, 1);\n      this.oneFormValidate[0].pic = this.formValidate.slider_image[0];\n    },\n    // 关闭图片上传模态框\n    changeCancel(msg) {\n      this.modalPic = false;\n    },\n    // 点击商品图\n    modalPicTap(tit, picTit, index) {\n      this.modalPic = true;\n      this.isChoice = tit === 'dan' ? '单选' : '多选';\n      this.picTit = picTit;\n      this.tableIndex = index;\n    },\n    // 获取单张图片信息\n    getPic(pc) {\n      switch (this.picTit) {\n        case 'danFrom':\n          this.formValidate.image = pc.att_dir;\n          if (!this.$route.params.id) {\n            if (this.formValidate.spec_type === 0) {\n              this.oneFormValidate[0].pic = pc.att_dir;\n            } else {\n              this.manyFormValidate.map((item) => {\n                item.pic = pc.att_dir;\n              });\n              this.oneFormBatch[0].pic = pc.att_dir;\n            }\n          }\n          break;\n        case 'danTable':\n          this.oneFormValidate[this.tableIndex].pic = pc.att_dir;\n          break;\n        case 'duopi':\n          this.oneFormBatch[this.tableIndex].pic = pc.att_dir;\n          break;\n        case 'recommend_image':\n          this.formValidate.recommend_image = pc.att_dir;\n          break;\n        default:\n          this.manyFormValidate[this.tableIndex].pic = pc.att_dir;\n      }\n      this.modalPic = false;\n    },\n    // 获取多张图信息\n    getPicD(pc) {\n      this.images = pc;\n      this.images.map((item) => {\n        this.formValidate.slider_image.push(item.att_dir);\n        this.formValidate.slider_image = this.formValidate.slider_image.splice(0, 10);\n      });\n      this.oneFormValidate[0].pic = this.formValidate.slider_image[0];\n      this.modalPic = false;\n    },\n    // 提交\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.formValidate.type = this.type;\n          if (this.formValidate.spec_type === 0) {\n            this.formValidate.attrs = this.oneFormValidate;\n            this.formValidate.header = [];\n            this.formValidate.items = [];\n            this.formValidate.is_copy = 0;\n          } else {\n            this.formValidate.items = this.attrs;\n            this.formValidate.attrs = this.manyFormValidate;\n            this.formValidate.is_copy = 1;\n          }\n          if (this.formValidate.spec_type === 1 && this.manyFormValidate.length === 0) {\n            return this.$Message.warning('商品信息-请点击生成多规格');\n            // return this.$Message.warning('请点击生成规格！');\n          }\n          let item = this.formValidate.attrs;\n          for (let i = 0; i < item.length; i++) {\n            if (item[i].stock > 1000000) {\n              return this.$Message.error('规格库存-库存超出系统范围(1000000)');\n            }\n          }\n          if (this.formValidate.is_sub[0] === 1) {\n            for (let i = 0; i < item.length; i++) {\n              if (item[i].brokerage === null || item[i].brokerage_two === null) {\n                return this.$Message.error('营销设置- 一二级返佣不能为空');\n              }\n            }\n          } else {\n            for (let i = 0; i < item.length; i++) {\n              if (item[i].vip_price === null) {\n                return this.$Message.error('营销设置-会员价不能为空');\n              }\n            }\n          }\n          if (this.formValidate.is_sub.length === 2) {\n            for (let i = 0; i < item.length; i++) {\n              if (item[i].brokerage === null || item[i].brokerage_two === null || item[i].vip_price === null) {\n                return this.$Message.error('营销设置- 一二级返佣和会员价不能为空');\n              }\n            }\n          }\n          if (this.formValidate.freight == 3 && !this.formValidate.temp_id) {\n            return this.$Message.warning('商品信息-运费模板不能为空');\n          }\n          let activeIds = [];\n          this.dataLabel.forEach((item) => {\n            activeIds.push(item.id);\n          });\n          this.formValidate.label_id = activeIds;\n          this.openSubimit = true;\n          this.formValidate.description = this.formatRichText(this.content);\n          productAddApi(this.formValidate)\n            .then(async (res) => {\n              this.openSubimit = false;\n              this.$Message.success(res.msg);\n              if (this.$route.params.id === '0') {\n                cacheDelete().catch((err) => {\n                  this.$Message.error(err.msg);\n                });\n              }\n              setTimeout(() => {\n                this.openSubimit = false;\n                this.$router.push({ path: this.$routeProStr + '/product/product_list' });\n              }, 500);\n            })\n            .catch((res) => {\n              setTimeout((e) => {\n                this.openSubimit = false;\n              }, 1000);\n              this.$Message.error(res.msg);\n            });\n        } else {\n          if (!this.formValidate.store_name) {\n            return this.$Message.warning('商品信息-商品名称不能为空');\n          } else if (!this.formValidate.cate_id.length) {\n            return this.$Message.warning('商品信息-商品分类不能为空');\n          } else if (!this.formValidate.unit_name) {\n            return this.$Message.warning('商品信息-商品单位不能为空');\n          } else if (!this.formValidate.slider_image.length) {\n            return this.$Message.warning('商品信息-商品轮播图不能为空');\n          } else if (!this.formValidate.logistics.length && !this.formValidate.virtual_type) {\n            return this.$Message.warning('物流设置-至少选择一种物流方式');\n          } else if (!this.formValidate.temp_id && this.formValidate.freight == 3) {\n            return this.$Message.warning('商品信息-运费模板不能为空');\n          }\n        }\n      });\n    },\n    changeTemplate(msg) {\n      this.template = msg;\n    },\n    // 表单验证\n    validate(prop, status, error) {\n      if (status === false) {\n        this.$Message.warning(error);\n      }\n    },\n    // 移动\n    handleDragStart(e, item) {\n      this.dragging = item;\n    },\n    handleDragEnd(e, item) {\n      this.dragging = null;\n    },\n    handleDragOver(e) {\n      e.dataTransfer.dropEffect = 'move';\n    },\n    handleDragEnter(e, item) {\n      e.dataTransfer.effectAllowed = 'move';\n      if (item === this.dragging) {\n        return;\n      }\n      const newItems = [...this.formValidate.slider_image];\n      const src = newItems.indexOf(this.dragging);\n      const dst = newItems.indexOf(item);\n      newItems.splice(dst, 0, ...newItems.splice(src, 1));\n      this.formValidate.slider_image = newItems;\n    },\n    // 过滤详情内容\n    formatRichText(html) {\n      let newContent = html.replace(/<img[^>]*>/gi, function (match, capture) {\n        match = match.replace(/style=\"[^\"]+\"/gi, '').replace(/style='[^']+'/gi, '');\n        match = match.replace(/width=\"[^\"]+\"/gi, '').replace(/width='[^']+'/gi, '');\n        match = match.replace(/height=\"[^\"]+\"/gi, '').replace(/height='[^']+'/gi, '');\n        return match;\n      });\n      newContent = newContent.replace(/style=\"[^\"]+\"/gi, function (match, capture) {\n        match = match.replace(/width:[^;]+;/gi, 'max-width:100%;').replace(/width:[^;]+;/gi, 'max-width:100%;');\n        return match;\n      });\n      newContent = newContent.replace(/<br[^>]*\\/>/gi, '');\n      newContent = newContent.replace(\n        /\\<img/gi,\n        '<img style=\"max-width:100%;height:auto;display:block;margin-top:0;margin-bottom:0;\"',\n      );\n      return newContent;\n    },\n    // 商品id\n    getProductId(row) {\n      this.goods_modals = false;\n      let arr = this.formValidate.recommend_list.concat(row);\n      this.formValidate.recommend_list = this.uniques(arr);\n    },\n    // 选择推荐商品\n    changeGoods() {\n      this.goods_modals = true;\n      this.$refs.goodslist.getList();\n      this.$refs.goodslist.goodsCategory();\n    },\n    // 选择用户标签\n    activeData(dataLabel) {\n      this.labelShow = false;\n      this.dataLabel = dataLabel;\n    },\n    // 标签弹窗关闭\n    labelClose() {\n      this.labelShow = false;\n    },\n    // 删除用户标签\n    closeLabel(label) {\n      let index = this.dataLabel.indexOf(this.dataLabel.filter((d) => d.id == label.id)[0]);\n      this.dataLabel.splice(index, 1);\n    },\n    // 打开选择用户标签\n    openLabel(row) {\n      this.labelShow = true;\n      this.$refs.userLabel.userLabel(JSON.parse(JSON.stringify(this.dataLabel)));\n    },\n    uniques(songs) {\n      let result = {};\n      let finalResult = [];\n      for (let i = 0; i < songs.length; i++) {\n        result[songs[i].product_id] = songs[i];\n      }\n      for (let item in result) {\n        finalResult.push(result[item]);\n      }\n      return finalResult;\n    },\n    handleRemoveRecommend(i) {\n      this.formValidate.recommend_list.splice(i, 1);\n    },\n  },\n};\n</script>\n<style scoped lang=\"stylus\">\n.list-group {\n  margin-left: -8px;\n}\n\n.borderStyle {\n  border: 1px solid #ccc;\n  padding: 8px;\n  border-radius: 4px;\n}\n\n.drag {\n  cursor: move;\n}\n\n.move-icon {\n  width: 30px;\n  cursor: move;\n  margin-right: 10px;\n}\n\n.move-icon .icondrag2 {\n  font-size: 26px;\n  color: #d8d8d8;\n}\n\n.maxW /deep/.ivu-select-dropdown {\n  max-width: 600px;\n}\n\n#shopp-manager .ivu-table-wrapper {\n  border-left: 1px solid #dcdee2;\n  border-top: 1px solid #dcdee2;\n}\n\n.noLeft {\n  >>> .ivu-form-item-content {\n    margin-left: 0 !important;\n  }\n}\n\n#shopp-manager .ivu-form-item {\n  position: relative;\n}\n\n#shopp-manager .ivu-form-item .tips {\n  position: absolute;\n  color: #999;\n  top: 29px;\n  left: -77px;\n  font-size: 12px;\n}\n\n.iview-video-style {\n  width: 40%;\n  height: 180px;\n  border-radius: 10px;\n  background-color: #707070;\n  margin-top: 10px;\n  position: relative;\n  overflow: hidden;\n}\n\n.iview-video-style .iconv {\n  color: #fff;\n  line-height: 180px;\n  width: 50px;\n  height: 50px;\n  display: inherit;\n  font-size: 26px;\n  position: absolute;\n  top: -74px;\n  left: 50%;\n  margin-left: -25px;\n}\n\n.iview-video-style .mark {\n  position: absolute;\n  width: 100%;\n  height: 30px;\n  top: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  text-align: center;\n}\n\n.submission {\n  margin-left: 10px;\n}\n\n.color-list .tip {\n  color: #c9c9c9;\n}\n\n.color-list .color-item {\n  height: 30px;\n  line-height: 30px;\n  padding: 0 10px;\n  color: #fff;\n  margin-right: 10px;\n}\n\n.color-list .color-item.blue {\n  background-color: #1E9FFF;\n}\n\n.color-list .color-item.yellow {\n  background-color: rgb(254, 185, 0);\n}\n\n.color-list .color-item.green {\n  background-color: #009688;\n}\n\n.color-list .color-item.red {\n  background-color: #ed4014;\n}\n\n.columnsBox {\n  margin-right: 10px;\n}\n\n.priceBox {\n  width: 100%;\n}\n\n.rulesBox {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.pictrueBox {\n  display: inline-block;\n}\n\n.pictrueTab {\n  width: 40px !important;\n  height: 40px !important;\n}\n\n.pictrue {\n  width: 60px;\n  height: 60px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  margin-right: 15px;\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n\n  .btndel {\n    position: absolute;\n    z-index: 1;\n    width: 20px !important;\n    height: 20px !important;\n    left: 46px;\n    top: -4px;\n  }\n}\n\n.upLoad {\n  width: 58px;\n  height: 58px;\n  line-height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n}\n\n.curs {\n  cursor: pointer;\n}\n\n.inpWith {\n  width: 60%;\n}\n\n.labeltop {\n  >>> .ivu-form-item-label {\n    float: none !important;\n    display: inline-block !important;\n    margin-left: 120px !important;\n    width: auto !important;\n  }\n}\n\n.video-icon {\n  background-image: url('https://cdn.oss.9gt.net/prov1.1/1/icons.png'); // cdn.oss.9gt.net/prov1.1/1/icons.png);\n  background-color: #fff;\n  background-position: -9999px;\n  background-repeat: no-repeat;\n}\n\n.see {\n  color: #2d8cf0;\n  cursor: pointer;\n}\n\n.trip {\n  color: #bbb;\n  margin-bottom: 10px;\n}\n\n.virtual-data {\n  display: flex;\n  align-items: center;\n}\n\n.add-more {\n  margin-top: 20px;\n  display: flex;\n}\n\n.virtual-title {\n  width: 50px;\n}\n\n.scroll-virtual {\n  max-height: 400px;\n  overflow-y: auto;\n  margin-top: 10px;\n}\n\n.footer {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-top: 30px;\n\n  .clear, .submit {\n    padding: 10px 20px;\n    border-radius: 5px;\n    color: #fff;\n    cursor: pointer;\n  }\n\n  .clear {\n    background-color: #ccc;\n    margin-right: 20px;\n  }\n\n  .submit {\n    background-color: #2d8cf0;\n  }\n}\n\n.picBox {\n  display: flex;\n}\n\n.btndel {\n  position: absolute;\n  z-index: 9;\n  width: 20px !important;\n  height: 20px !important;\n  left: 46px;\n  top: -4px;\n}\n\n.ifam {\n  width: 344px;\n  height: 644px;\n  background: url('../../../assets/images/phonebg.png') no-repeat center top;\n  background-size: 344px 644px;\n  padding: 40px 20px;\n  padding-top: 50px;\n  margin: 0 auto;\n\n  .content {\n    height: 560px;\n    overflow: hidden;\n    scrollbar-width: none; /* firefox */\n    -ms-overflow-style: none; /* IE 10+ */\n    overflow-x: hidden;\n    overflow-y: auto;\n  }\n\n  .content::-webkit-scrollbar {\n    display: none; /* Chrome Safari */\n  }\n}\n</style>\n<style scoped lang=\"stylus\">\n/deep/.ivu-date-picker {\n  width: 300px;\n}\n\n.virtual_boder {\n  border: 1px solid #1890FF;\n}\n\n.virtual_boder2 {\n  border: 1px solid #E7E7E7;\n}\n\n.virtual_san {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 0;\n  height: 0;\n  border-bottom: 26px solid #1890FF;\n  border-left: 26px solid transparent;\n}\n\n.virtual_dui {\n  position: absolute;\n  bottom: -2px;\n  right: 2px;\n  color: #FFFFFF;\n  font-family: system-ui;\n}\n\n.virtual {\n  width: 120px;\n  height: 60px;\n  background: #FFFFFF;\n  border-radius: 3px;\n  // border: 1px solid #E7E7E7;\n  float: left;\n  text-align: center;\n  padding-top: 8px;\n  position: relative;\n  cursor: pointer;\n  line-height: 23px;\n\n  .virtual_top {\n    font-size: 14px;\n    font-weight: 600;\n    color: rgba(0, 0, 0, 0.85);\n  }\n\n  .virtual_bottom {\n    font-size: 12px;\n    font-weight: 400;\n    color: #999999;\n  }\n}\n\n.virtual:nth-child(2n) {\n  margin: 0 12px;\n}\n\n.addfont {\n  display: inline-block;\n  font-size: 13px;\n  font-weight: 400;\n  color: #1890FF;\n  margin-left: 14px;\n  cursor: pointer;\n}\n\n.titTip {\n  display: inline-bolck;\n  font-size: 12px;\n  line-height: 24px;\n  font-weight: 400;\n  color: #999999;\n}\n\n.videbox {\n  width: 60px;\n  height: 60px;\n  background: rgba(0, 0, 0, 0.02);\n  border-radius: 4px;\n  border: 1px dashed #DDDDDD;\n  line-height: 50px;\n  text-align: center;\n  color: #898989;\n  font-size: 30px;\n  font-weight: 400;\n  cursor: pointer;\n}\n\n.addCustom_content {\n  margin-top: 20px;\n\n  .custom_box {\n    margin-bottom: 10px;\n  }\n}\n\n.addCustomBox {\n  margin-top: 12px;\n  font-size: 13px;\n  font-weight: 400;\n  color: #1890FF;\n\n  .btn {\n    cursor: pointer;\n    width: max-content;\n  }\n}\n\n.type-radio {\n  margin-buttom: 10px;\n}\n\n.deteal-btn {\n  color: #5179ea;\n}\n\n.stock-disk {\n  margin: 10px 0;\n}\n\n.line {\n  border-bottom: 1px dashed #eee;\n  margin-bottom: 20px;\n}\n\n.labelInput {\n  border: 1px solid #dcdee2;\n  width: 20%;\n  padding: 0 5px;\n  border-radius: 5px;\n  min-height: 30px;\n  cursor: pointer;\n\n  .span {\n    color: #c5c8ce;\n  }\n\n  .iconxiayi {\n    font-size: 12px;\n  }\n}\n\n#shopp-manager /deep/.ivu-form-item-content {\n  line-height: 33px !important;\n}\n\n#selectvideo /deep/.ivu-form-item-content {\n  line-height: 0px !important;\n}\n\n.progress {\n  margin-top: 10px;\n}\n</style>\n"]}]}