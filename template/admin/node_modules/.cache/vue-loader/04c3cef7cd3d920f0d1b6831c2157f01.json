{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/notify/smsPay/index.vue?vue&type=style&index=0&id=12f55984&lang=less&scoped=true&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/notify/smsPay/index.vue","mtime":1689324015240},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/@vue/cli-service/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/less-loader/dist/cjs.js","mtime":1689384648502},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hY3RpdmUgewogIGJhY2tncm91bmQ6ICMwMDkxZmY7CiAgYm94LXNoYWRvdzogMHB4IDZweCAyMHB4IDBweCByZ2JhKDAsIDE0NSwgMjU1LCAwLjMpOwogIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7Cn0KLmxpc3QtZ29vZHMtbGlzdC1pdGVtIHsKICBib3JkZXI6IDFweCBzb2xpZCAjZGFkZmU2OwogIHBhZGRpbmc6IDIwcHggMTBweDsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGJvcmRlci1yYWRpdXM6IDNweDsKfQoubGlzdC1nb29kcy1saXN0IHsKICAmLWl0ZW0gewogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgaW1nIHsKICAgICAgd2lkdGg6IDYwJTsKICAgIH0KICAgIC5pdnUtdGFnIHsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICB0b3A6IDEwcHg7CiAgICAgIHJpZ2h0OiAxMHB4OwogICAgfQogICAgJi10aXRsZSB7CiAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgIGNvbG9yOiAjMDA5MWZmOwogICAgICBtYXJnaW4tYm90dG9tOiAzcHg7CiAgICAgIGkgewogICAgICAgIGZvbnQtc2l6ZTogMzBweDsKICAgICAgICBmb250LXN0eWxlOiBub3JtYWw7CiAgICAgIH0KICAgIH0KICAgICYtZGVzYyB7CiAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgY29sb3I6ICM4MDg2OTU7CiAgICB9CiAgICAmLXByaWNlIHsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBjb2xvcjogIzAwMDAwMDsKICAgICAgcyB7CiAgICAgICAgY29sb3I6ICNjNWM4Y2U7CiAgICAgIH0KICAgIH0KICAgICYtbnVtYmVyIHsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBjb2xvcjogI2VkNDAxNDsKICAgIH0KICAgICYtcGF5IHsKICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICBjb2xvcjogIzAwYzA1MDsKICAgICAgaSB7CiAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIGZvbnQtc3R5bGU6IG5vcm1hbDsKICAgICAgICBjb2xvcjogIzZkNzI3ODsKICAgICAgfQogICAgfQogICAgJi1jb2RlIHsKICAgICAgd2lkdGg6IDEzMHB4OwogICAgICBoZWlnaHQ6IDEzMHB4OwogICAgICBpbWcgewogICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/notify/smsPay","sourcesContent":["<template>\n  <div>\n    <div class=\"i-layout-page-header header_top\">\n      <div class=\"i-layout-page-header fl_header\">\n        <router-link :to=\"{ path: $routeProStr + '/setting/sms/sms_config/index' }\"\n          ><Button icon=\"ios-arrow-back\" size=\"small\" type=\"text\">返回</Button></router-link\n        >\n        <Divider type=\"vertical\" />\n        <span class=\"ivu-page-header-title mr20\" style=\"padding: 0\">{{ $route.meta.title }}</span>\n      </div>\n    </div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <Tabs v-model=\"isChecked\" @on-click=\"onChangeType\">\n        <TabPane label=\"短信\" name=\"sms\"></TabPane>\n        <TabPane label=\"商品采集\" name=\"copy\"></TabPane>\n        <TabPane label=\"物流查询\" name=\"expr_query\"></TabPane>\n        <TabPane label=\"电子面单打印\" name=\"expr_dump\"></TabPane>\n      </Tabs>\n      <Row :gutter=\"16\" class=\"mt50\">\n        <Col span=\"24\" class=\"ivu-text-left mb20\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">当前剩余条数：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <span>{{ numbers }}</span>\n          </Col>\n        </Col>\n        <Col span=\"24\" class=\"ivu-text-left mb20\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">选择套餐：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <Row :gutter=\"20\">\n              <Col v-for=\"(item, index) in list\" :key=\"index\" :xxl=\"4\" :xl=\"8\" :lg=\"8\" :md=\"12\" :sm=\"24\" :xs=\"24\">\n                <div\n                  class=\"list-goods-list-item mb15\"\n                  :class=\"{ active: index === current }\"\n                  @click=\"check(item, index)\"\n                >\n                  <div class=\"list-goods-list-item-title\" :class=\"{ active: index === current }\">\n                    ¥ <i>{{ item.price }}</i>\n                  </div>\n                  <div class=\"list-goods-list-item-price\" :class=\"{ active: index === current }\">\n                    <span>{{ all[isChecked] }}条数: {{ item.num }}</span>\n                  </div>\n                </div>\n              </Col>\n            </Row>\n          </Col>\n        </Col>\n        <Col span=\"24\" class=\"ivu-text-left mb20\" v-if=\"checkList\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">充值条数：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <span>{{ checkList.num }}</span>\n          </Col>\n        </Col>\n        <Col span=\"24\" class=\"ivu-text-left mb20\" v-if=\"checkList\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">支付金额：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <span class=\"list-goods-list-item-number\">￥{{ checkList.price }}</span>\n          </Col>\n        </Col>\n        <Col span=\"24\" class=\"ivu-text-left mb20\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">付款方式：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <span class=\"list-goods-list-item-pay\"\n              >微信支付<i v-if=\"code.invalid\">{{ '  （ 支付码过期时间：' + code.invalid + ' ）' }}</i></span\n            >\n          </Col>\n        </Col>\n        <Col span=\"24\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"3\" class=\"mr20\">&nbsp;</Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <div class=\"list-goods-list-item-code mr20\"><img v-lazy=\"code.code_url\" v-if=\"code.code_url\" /></div>\n          </Col>\n        </Col>\n        <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n      </Row>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { smsPriceApi, payCodeApi, isLoginApi, serveInfoApi } from '@/api/setting';\nexport default {\n  name: 'smsPay',\n  data() {\n    return {\n      all: { sms: '短信', copy: '商品采集', expr_query: '物流查询', expr_dump: '电子面单打印' },\n      isChecked: 'sms',\n      numbers: '',\n      account: '',\n      list: [],\n      current: 0,\n      checkList: {},\n      spinShow: false,\n      code: {},\n    };\n  },\n  created() {\n    this.isChecked = this.$route.query.type;\n    this.onIsLogin();\n  },\n  methods: {\n    // 查看是否登录\n    onIsLogin() {\n      this.spinShow = true;\n      isLoginApi()\n        .then(async (res) => {\n          let data = res.data;\n          if (!data.status) {\n            this.$Message.warning('请先登录');\n            this.$router.push({\n              path: this.$routeProStr + '/setting/sms/sms_config/index?url=' + this.$route.path,\n              query: {\n                type: this.$route.query.type,\n              },\n            });\n          } else {\n            this.getServeInfo();\n            this.getPrice();\n          }\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 平台用户信息\n    getServeInfo() {\n      serveInfoApi()\n        .then(async (res) => {\n          let data = res.data;\n          switch (this.isChecked) {\n            case 'sms':\n              this.numbers = data.sms.num;\n              break;\n            case 'copy':\n              this.numbers = data.copy.num;\n              break;\n            case 'expr_dump':\n              this.numbers = data.dump.num;\n              break;\n            default:\n              this.numbers = data.query.num;\n              break;\n          }\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    onChangeType(val) {\n      this.current = 0;\n      this.getPrice();\n      this.getServeInfo();\n    },\n    // 支付套餐\n    getPrice() {\n      this.spinShow = true;\n      smsPriceApi({ type: this.isChecked })\n        .then(async (res) => {\n          setTimeout(() => {\n            this.spinShow = false;\n          }, 800);\n          let data = res.data;\n          this.list = data.data;\n          this.checkList = this.list[0];\n          this.getCode(this.checkList);\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$Message.error(res.msg);\n          this.list = [];\n        });\n    },\n    // 选中\n    check(item, index) {\n      this.spinShow = true;\n      this.current = index;\n      setTimeout(() => {\n        this.getCode(item);\n        this.checkList = item;\n        this.spinShow = false;\n      }, 800);\n    },\n    // 支付码\n    getCode(item) {\n      let data = {\n        pay_type: 'weixin',\n        meal_id: item.id,\n        price: item.price,\n        num: item.num,\n        type: item.type,\n      };\n      payCodeApi(data)\n        .then(async (res) => {\n          this.code = res.data;\n        })\n        .catch((res) => {\n          this.code = '';\n          this.$Message.error(res.msg);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.active {\n  background: #0091ff;\n  box-shadow: 0px 6px 20px 0px rgba(0, 145, 255, 0.3);\n  color: #fff !important;\n}\n.list-goods-list-item {\n  border: 1px solid #dadfe6;\n  padding: 20px 10px;\n  box-sizing: border-box;\n  border-radius: 3px;\n}\n.list-goods-list {\n  &-item {\n    text-align: center;\n    position: relative;\n    cursor: pointer;\n    img {\n      width: 60%;\n    }\n    .ivu-tag {\n      position: absolute;\n      top: 10px;\n      right: 10px;\n    }\n    &-title {\n      font-size: 16px;\n      font-weight: bold;\n      color: #0091ff;\n      margin-bottom: 3px;\n      i {\n        font-size: 30px;\n        font-style: normal;\n      }\n    }\n    &-desc {\n      font-size: 14px;\n      color: #808695;\n    }\n    &-price {\n      font-size: 14px;\n      color: #000000;\n      s {\n        color: #c5c8ce;\n      }\n    }\n    &-number {\n      font-size: 14px;\n      color: #ed4014;\n    }\n    &-pay {\n      font-size: 14px;\n      color: #00c050;\n      i {\n        font-size: 12px;\n        font-style: normal;\n        color: #6d7278;\n      }\n    }\n    &-code {\n      width: 130px;\n      height: 130px;\n      img {\n        width: 100%;\n        height: 100%;\n      }\n    }\n  }\n}\n</style>\n"]}]}