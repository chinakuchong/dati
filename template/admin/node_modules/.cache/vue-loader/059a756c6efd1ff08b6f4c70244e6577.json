{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/setting/devise/components/uploadPic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/setting/devise/components/uploadPic.vue","mtime":1689324015251},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2dWVkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJzsKaW1wb3J0IHVwbG9hZFBpY3R1cmVzIGZyb20gJ0AvY29tcG9uZW50cy91cGxvYWRQaWN0dXJlcyc7CmltcG9ydCBsaW5rYWRkcmVzcyBmcm9tICdAL2NvbXBvbmVudHMvbGlua2FkZHJlc3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3VwbG9hZFBpYycsCiAgcHJvcHM6IHsKICAgIGxpc3REYXRhOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgfSwKICAgIHR5cGU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgfSwKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGRyYWdnYWJsZTogdnVlZHJhZ2dhYmxlLAogICAgdXBsb2FkUGljdHVyZXMsCiAgICBsaW5rYWRkcmVzcywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RhbFBpYzogZmFsc2UsCiAgICAgIGlzQ2hvaWNlOiAn5Y2V6YCJJywKICAgICAgZ3JpZEJ0bjogewogICAgICAgIHhsOiA0LAogICAgICAgIGxnOiA4LAogICAgICAgIG1kOiA4LAogICAgICAgIHNtOiA4LAogICAgICAgIHhzOiA4LAogICAgICB9LAogICAgICBncmlkUGljOiB7CiAgICAgICAgeGw6IDYsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAxMiwKICAgICAgICB4czogMTIsCiAgICAgIH0sCiAgICAgIGFjdGl2ZUluZGV4OiAwLAogICAgICBsYXN0T2JqOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgcGljOiAnJywKICAgICAgICB1cmw6ICcnLAogICAgICB9LAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7fSwKICB3YXRjaDogewogICAgY29uZmlnT2JqOiB7CiAgICAgIGhhbmRsZXIoblZhbCwgb1ZhbCkge30sCiAgICAgIGRlZXA6IHRydWUsCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgbGlua1VybChlKSB7CiAgICAgIHRoaXMubGlzdERhdGFbdGhpcy5hY3RpdmVJbmRleF0udXJsID0gZTsKICAgIH0sCiAgICBnZXRMaW5rKGluZGV4KSB7CiAgICAgIHRoaXMuYWN0aXZlSW5kZXggPSBpbmRleDsKICAgICAgdGhpcy4kcmVmcy5saW5rYWRkcmVzLm1vZGFscyA9IHRydWU7CiAgICB9LAogICAgYWRkQm94KCkgewogICAgICBpZiAodGhpcy5saXN0RGF0YS5sZW5ndGggPT0gMCkgewogICAgICAgIHRoaXMubGlzdERhdGEucHVzaCh0aGlzLmxhc3RPYmopOwogICAgICB9IGVsc2UgewogICAgICAgIGxldCBvYmogPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMubGlzdERhdGFbdGhpcy5saXN0RGF0YS5sZW5ndGggLSAxXSkpOwogICAgICAgIG9iai5uYW1lID0gJyc7CiAgICAgICAgb2JqLnBpYyA9ICcnOwogICAgICAgIG9iai51cmwgPSAnJzsKICAgICAgICB0aGlzLmxpc3REYXRhLnB1c2gob2JqKTsKICAgICAgfQogICAgICAvLyB0aGlzLiRlbWl0KCdwYXJlbnRGdW4nLHRoaXMubGlzdERhdGEpCiAgICB9LAogICAgLy8g54K55Ye75Zu+5paH5bCB6Z2iCiAgICBtb2RhbFBpY1RhcCh0aXRsZSwgaW5kZXgpIHsKICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4OwogICAgICB0aGlzLm1vZGFsUGljID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDmt7vliqDoh6rlrprkuYnlvLnnqpcKICAgIGFkZEN1c3RvbURpYWxvZyhlZGl0b3JJZCkgewogICAgICB3aW5kb3cuVUUucmVnaXN0ZXJVSSgKICAgICAgICAndGVzdC1kaWFsb2cnLAogICAgICAgIGZ1bmN0aW9uIChlZGl0b3IsIHVpTmFtZSkgewogICAgICAgICAgbGV0IGRpYWxvZyA9IG5ldyB3aW5kb3cuVUUudWkuRGlhbG9nKHsKICAgICAgICAgICAgaWZyYW1lVXJsOiB0aGlzLiRyb3V0ZVByb1N0ciArICcvd2lkZ2V0LmltYWdlcy9pbmRleC5odG1sP2ZvZGRlcj1kaWFsb2cnLAogICAgICAgICAgICBlZGl0b3I6IGVkaXRvciwKICAgICAgICAgICAgbmFtZTogdWlOYW1lLAogICAgICAgICAgICB0aXRsZTogJ+S4iuS8oOWbvueJhycsCiAgICAgICAgICAgIGNzc1J1bGVzOiAnd2lkdGg6OTYwcHg7aGVpZ2h0OjU1MHB4O3BhZGRpbmc6MjBweDsnLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZzsKICAgICAgICAgIC8vIOWPguiAg+S4iumdoueahOiHquWumuS5ieaMiemSrgogICAgICAgICAgdmFyIGJ0biA9IG5ldyB3aW5kb3cuVUUudWkuQnV0dG9uKHsKICAgICAgICAgICAgbmFtZTogJ2RpYWxvZy1idXR0b24nLAogICAgICAgICAgICB0aXRsZTogJ+S4iuS8oOWbvueJhycsCiAgICAgICAgICAgIGNzc1J1bGVzOiBgYmFja2dyb3VuZC1pbWFnZTogdXJsKC4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvaWNvbnMucG5nKTtiYWNrZ3JvdW5kLXBvc2l0aW9uOiAtNzI2cHggLTc3cHg7YCwKICAgICAgICAgICAgb25jbGljazogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIC8vIOa4suafk2RpYWxvZwogICAgICAgICAgICAgIGRpYWxvZy5yZW5kZXIoKTsKICAgICAgICAgICAgICBkaWFsb2cub3BlbigpOwogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CgogICAgICAgICAgcmV0dXJuIGJ0bjsKICAgICAgICB9LAogICAgICAgIDM3LAogICAgICApOwogICAgfSwKICAgIC8vIOiOt+WPluWbvueJh+S/oeaBrwogICAgZ2V0UGljKHBjKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmxpc3REYXRhW3RoaXMuYWN0aXZlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgdGhpcy5tb2RhbFBpYyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDliKDpmaQKICAgIGJpbmREZWxldGUoaXRlbSwgaW5kZXgpIHsKICAgICAgaWYgKHRoaXMubGlzdERhdGEubGVuZ3RoID09IDEpIHsKICAgICAgICB0aGlzLmxhc3RPYmogPSB0aGlzLmxpc3REYXRhWzBdOwogICAgICB9CiAgICAgIHRoaXMubGlzdERhdGEuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgLy8gdGhpcy4kZW1pdCgncGFyZW50RnVuJyx0aGlzLmxpc3REYXRhKQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["uploadPic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"uploadPic.vue","sourceRoot":"src/pages/setting/devise/components","sourcesContent":["<template>\n  <div class=\"hot_imgs\">\n    <div class=\"list-box\">\n      <draggable class=\"dragArea list-group\" :list=\"listData\" group=\"peoples\" handle=\".move-icon\">\n        <div class=\"item\" v-for=\"(item, index) in listData\" :key=\"index\">\n          <div class=\"move-icon\">\n            <span class=\"iconfont-diy icondrag\"></span>\n          </div>\n          <div class=\"img-box\" @click=\"modalPicTap('单选', index)\">\n            <img :src=\"item.pic\" alt=\"\" v-if=\"item.pic && item.pic != ''\" />\n            <div class=\"upload-box\" v-else>\n              <Icon type=\"ios-camera-outline\" size=\"36\" />\n            </div>\n          </div>\n          <div class=\"info\">\n            <div class=\"info-item\" v-if=\"item.hasOwnProperty('name')\">\n              <span>{{ type == 1 ? '管理名称：' : type == 2 ? '广告名称' : '服务名称：' }}</span>\n              <div class=\"input-box\">\n                <Input v-model=\"item.name\" :placeholder=\"type == 2 ? '请输入名称' : '服务中心'\" :maxlength=\"4\" />\n              </div>\n            </div>\n            <div class=\"info-item\">\n              <span>链接地址：</span>\n              <div class=\"input-box\" @click=\"getLink(index)\">\n                <Input v-model=\"item.url\" icon=\"ios-arrow-forward\" readonly placeholder=\"选择链接\" />\n              </div>\n            </div>\n          </div>\n          <div v-if=\"type != 1\" class=\"delect-btn\" @click.stop=\"bindDelete(item, index)\">\n            <span class=\"iconfont-diy icondel_1\"></span>\n          </div>\n        </div>\n      </draggable>\n      <div>\n        <Modal\n          v-model=\"modalPic\"\n          width=\"950px\"\n          scrollable\n          footer-hide\n          closable\n          title=\"上传商品图\"\n          :mask-closable=\"false\"\n          :z-index=\"1\"\n        >\n          <uploadPictures\n            :isChoice=\"isChoice\"\n            @getPic=\"getPic\"\n            :gridBtn=\"gridBtn\"\n            :gridPic=\"gridPic\"\n            v-if=\"modalPic\"\n          ></uploadPictures>\n        </Modal>\n      </div>\n    </div>\n    <template v-if=\"listData\">\n      <div class=\"add-btn\" v-if=\"(type != 1 && type != 2) || (type == 2 && listData.length < 5)\">\n        <Button\n          type=\"primary\"\n          ghost\n          style=\"width: 100px; height: 30px; background: #1890ff; color: #fff; font-size: 13px\"\n          @click=\"addBox\"\n          >添加板块</Button\n        >\n      </div>\n    </template>\n    <linkaddress ref=\"linkaddres\" @linkUrl=\"linkUrl\"></linkaddress>\n  </div>\n</template>\n\n<script>\nimport vuedraggable from 'vuedraggable';\nimport uploadPictures from '@/components/uploadPictures';\nimport linkaddress from '@/components/linkaddress';\nexport default {\n  name: 'uploadPic',\n  props: {\n    listData: {\n      type: Array,\n    },\n    type: {\n      type: Number,\n    },\n  },\n  components: {\n    draggable: vuedraggable,\n    uploadPictures,\n    linkaddress,\n  },\n  data() {\n    return {\n      modalPic: false,\n      isChoice: '单选',\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      activeIndex: 0,\n      lastObj: {\n        name: '',\n        pic: '',\n        url: '',\n      },\n    };\n  },\n  mounted() {},\n  watch: {\n    configObj: {\n      handler(nVal, oVal) {},\n      deep: true,\n    },\n  },\n  methods: {\n    linkUrl(e) {\n      this.listData[this.activeIndex].url = e;\n    },\n    getLink(index) {\n      this.activeIndex = index;\n      this.$refs.linkaddres.modals = true;\n    },\n    addBox() {\n      if (this.listData.length == 0) {\n        this.listData.push(this.lastObj);\n      } else {\n        let obj = JSON.parse(JSON.stringify(this.listData[this.listData.length - 1]));\n        obj.name = '';\n        obj.pic = '';\n        obj.url = '';\n        this.listData.push(obj);\n      }\n      // this.$emit('parentFun',this.listData)\n    },\n    // 点击图文封面\n    modalPicTap(title, index) {\n      this.activeIndex = index;\n      this.modalPic = true;\n    },\n    // 添加自定义弹窗\n    addCustomDialog(editorId) {\n      window.UE.registerUI(\n        'test-dialog',\n        function (editor, uiName) {\n          let dialog = new window.UE.ui.Dialog({\n            iframeUrl: this.$routeProStr + '/widget.images/index.html?fodder=dialog',\n            editor: editor,\n            name: uiName,\n            title: '上传图片',\n            cssRules: 'width:960px;height:550px;padding:20px;',\n          });\n          this.dialog = dialog;\n          // 参考上面的自定义按钮\n          var btn = new window.UE.ui.Button({\n            name: 'dialog-button',\n            title: '上传图片',\n            cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n            onclick: function () {\n              // 渲染dialog\n              dialog.render();\n              dialog.open();\n            },\n          });\n\n          return btn;\n        },\n        37,\n      );\n    },\n    // 获取图片信息\n    getPic(pc) {\n      this.$nextTick(() => {\n        this.listData[this.activeIndex].pic = pc.att_dir;\n        this.modalPic = false;\n      });\n    },\n    // 删除\n    bindDelete(item, index) {\n      if (this.listData.length == 1) {\n        this.lastObj = this.listData[0];\n      }\n      this.listData.splice(index, 1);\n      // this.$emit('parentFun',this.listData)\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.hot_imgs {\n  margin-bottom: 20px;\n\n  // border-top 1px solid rgba(0,0,0,0.05)\n  .title {\n    padding: 13px 0;\n    color: #999;\n    font-size: 12px;\n    border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  }\n\n  .list-box {\n    .item {\n      position: relative;\n      display: flex;\n      margin-top: 20px;\n      border: 1px dashed rgba(0, 0, 0, 0.15);\n      padding: 18px 10px 18px 0;\n      border-radius: 6px;\n\n      .move-icon {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 30px;\n        cursor: move;\n      }\n\n      .img-box {\n        position: relative;\n        width: 70px;\n        height: 70px;\n\n        img {\n          width: 100%;\n          height: 100%;\n        }\n      }\n\n      .info {\n        flex: 1;\n        margin-left: 16px;\n\n        .info-item {\n          display: flex;\n          align-items: center;\n          margin-bottom: 10px;\n\n          span {\n            width: 70px;\n            font-size: 13px;\n          }\n\n          .input-box {\n            flex: 1;\n\n            /deep/input {\n              cursor: pointer;\n            }\n          }\n\n          /deep/ .ivu-input {\n            font-size: 13px !important;\n          }\n        }\n      }\n\n      .delect-btn {\n        position: absolute;\n        right: -11px;\n        top: -15px;\n\n        .iconfont-diy {\n          font-size: 25px;\n          color: #FF1818;\n        }\n      }\n    }\n  }\n\n  .add-btn {\n    margin-top: 24px;\n  }\n}\n\n.upload-box {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  background: #ccc;\n}\n\n.iconfont-diy {\n  color: #DDDDDD;\n  font-size: 28px;\n}\n</style>\n"]}]}