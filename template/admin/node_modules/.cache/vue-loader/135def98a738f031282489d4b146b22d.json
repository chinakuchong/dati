{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/setting/devisePage/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/setting/devisePage/index.vue","mtime":1689324015254},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRpeUdldEluZm8sIGRpeVNhdmUgfSBmcm9tICdAL2FwaS9kaXknOwppbXBvcnQgeyBtYXBNdXRhdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHJpZ2h0Q29uZmlnIGZyb20gJ0AvY29tcG9uZW50cy9yaWdodENvbmZpZy9pbmRleCc7CmltcG9ydCBsaW5rcyBmcm9tICcuL2xpbmtzJzsKaW1wb3J0IHsgZ2V0Q29va2llcywgc2V0Q29va2llcyB9IGZyb20gJ0AvbGlicy91dGlsJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdpbmRleCcsCiAgY29tcG9uZW50czogewogICAgcmlnaHRDb25maWcsCiAgICBsaW5rcywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb25maWdOYW1lOiB7fSwKICAgICAgY29uZmlnTnVtOiAnZGVmYXVsdCcsCiAgICAgIGlmcmFtZVVybDogJycsCiAgICAgIHNldENvbmZpZzogJycsCiAgICAgIHVwZGF0YUNvbmZpZzogJycsCiAgICAgIHBhZ2VJZDogMCwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5zaG93ID0gdHJ1ZTsKICAgIGxldCBwYWdlSWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZDsKICAgIGxldCBkZWZhdWx0RGF0YSA9IHRoaXMuJHN0b3JlLnN0YXRlLm1vcmVuLmRlZmF1bHRDb25maWc7CiAgICB0aGlzLnBhZ2VJZCA9IHBhcnNlSW50KHBhZ2VJZCk7CiAgICBsZXQgbW92ZUxpbmsgPSBnZXRDb29raWVzKCdtb3ZlTGluaycpOwogICAgaWYgKE51bWJlcih0aGlzLiRyb3V0ZS5xdWVyeS50eXBlKSA9PT0gMSkgewogICAgICB0aGlzLmlmcmFtZVVybCA9IGAke21vdmVMaW5rfS9wYWdlcy9pbmRleC9pbmRleD9tZFR5cGU9aWZyYW1lV2luZG93YDsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuaWZyYW1lVXJsID0gYCR7bG9jYXRpb24ub3JpZ2lufS9wYWdlcy9pbmRleC9pbmRleD9tZFR5cGU9aWZyYW1lV2luZG93YDsKICAgIH0KICAgIGRpeUdldEluZm8ocGFyc2VJbnQocGFnZUlkKSkudGhlbigoZGF0YXMpID0+IHsKICAgICAgbGV0IGRhdGEgPSBkYXRhcy5kYXRhLmluZm8udmFsdWU7CiAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgdGhpcy51cERhdGEoZGF0YSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGl5U2F2ZShwYXJzZUludChwYWdlSWQpLCB7CiAgICAgICAgICB2YWx1ZTogZGVmYXVsdERhdGEsCiAgICAgICAgfSkudGhlbigocmVzKSA9PiB7fSk7CiAgICAgIH0KICAgIH0pOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8v55uR5ZCs5a2Q6aG16Z2i57uZ5b2T5YmN6aG16Z2i5Lyg5YC8CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuaGFuZGxlTWVzc2FnZSwgZmFsc2UpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/mjqXmlLZpZnJhbWXlgLwKICAgIGhhbmRsZU1lc3NhZ2UoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmRhdGEubmFtZSkgewogICAgICAgIGxldCBvYmogPSB7IG5hbWU6IGV2ZW50LmRhdGEubmFtZSwgbnVtOiBldmVudC5kYXRhLmRhdGFOYW1lIH07CiAgICAgICAgdGhpcy5jb25maWdOYW1lID0gb2JqOwogICAgICAgIHRoaXMuY29uZmlnTnVtID0gZXZlbnQuZGF0YS5kYXRhTmFtZTsKICAgICAgICB0aGlzLmFkZChldmVudC5kYXRhLm5hbWUpOwogICAgICB9CiAgICB9LAogICAgYWRkKGRhdGEpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdtb3Jlbi9zZXRDb25maWcnLCBkYXRhKTsKICAgIH0sCiAgICB1cERhdGEoZGF0YSkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ21vcmVuL3VwZGF0YUNvbmZpZycsIGRhdGEpOwogICAgfSwKICAgIC8vIC4uLm1hcE11dGF0aW9ucyh7CiAgICAvLyAgICAgYWRkOiAnZGl5L3NldENvbmZpZycsCiAgICAvLyAgICAgdXBEYXRhOidkaXkvdXBkYXRhQ29uZmlnJwogICAgLy8gfSkKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/setting/devisePage","sourcesContent":["<template>\n  <div>\n    <div class=\"i-layout-page-header header_top\">\n      <div class=\"i-layout-page-header fl_header\">\n        <router-link :to=\"{ path: $routeProStr + '/setting/pages/devise' }\"\n          ><Button icon=\"ios-arrow-back\" size=\"small\" type=\"text\">返回</Button></router-link\n        >\n        <Divider type=\"vertical\" />\n        <span class=\"ivu-page-header-title mr20\" style=\"padding: 0\">页面设计</span>\n      </div>\n    </div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <div class=\"flex-wrapper\">\n        <!-- :src=\"iframeUrl\" -->\n        <iframe class=\"iframe-box\" :src=\"iframeUrl\" frameborder=\"0\" ref=\"iframe\"></iframe>\n        <div>\n          <div class=\"content\">\n            <rightConfig :name=\"configName\" :pageId=\"pageId\" :configNum=\"configNum\"></rightConfig>\n          </div>\n        </div>\n        <!-- <links v-if=\"show\"></links> -->\n      </div>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { diyGetInfo, diySave } from '@/api/diy';\nimport { mapMutations } from 'vuex';\nimport rightConfig from '@/components/rightConfig/index';\nimport links from './links';\nimport { getCookies, setCookies } from '@/libs/util';\nexport default {\n  name: 'index',\n  components: {\n    rightConfig,\n    links,\n  },\n  data() {\n    return {\n      configName: {},\n      configNum: 'default',\n      iframeUrl: '',\n      setConfig: '',\n      updataConfig: '',\n      pageId: 0,\n    };\n  },\n  created() {\n    this.show = true;\n    let pageId = this.$route.query.id;\n    let defaultData = this.$store.state.moren.defaultConfig;\n    this.pageId = parseInt(pageId);\n    let moveLink = getCookies('moveLink');\n    if (Number(this.$route.query.type) === 1) {\n      this.iframeUrl = `${moveLink}/pages/index/index?mdType=iframeWindow`;\n    } else {\n      this.iframeUrl = `${location.origin}/pages/index/index?mdType=iframeWindow`;\n    }\n    diyGetInfo(parseInt(pageId)).then((datas) => {\n      let data = datas.data.info.value;\n      if (data) {\n        this.upData(data);\n      } else {\n        diySave(parseInt(pageId), {\n          value: defaultData,\n        }).then((res) => {});\n      }\n    });\n  },\n  mounted() {\n    //监听子页面给当前页面传值\n    window.addEventListener('message', this.handleMessage, false);\n  },\n  methods: {\n    //接收iframe值\n    handleMessage(event) {\n      if (event.data.name) {\n        let obj = { name: event.data.name, num: event.data.dataName };\n        this.configName = obj;\n        this.configNum = event.data.dataName;\n        this.add(event.data.name);\n      }\n    },\n    add(data) {\n      this.$store.commit('moren/setConfig', data);\n    },\n    upData(data) {\n      this.$store.commit('moren/updataConfig', data);\n    },\n    // ...mapMutations({\n    //     add: 'diy/setConfig',\n    //     upData:'diy/updataConfig'\n    // })\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.content {\n  // width: 500px;\n}\n\n.flex-wrapper {\n  display: flex;\n}\n\n.iframe-box {\n  min-width: 375px;\n  height: 700px;\n  /* border: 1px solid #ddd; */\n  border-radius: 4px;\n  box-shadow: 0 0 7px #cccccc;\n}\n\n.right-box {\n  width: 500px;\n  margin-left: 50px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n\n  .title-bar {\n    width: 100%;\n    height: 38px;\n    line-height: 38px;\n    padding-left: 24px;\n    color: #333;\n    border-radius: 4px;\n    border-bottom: 1px solid #eee;\n  }\n}\n</style>\n"]}]}