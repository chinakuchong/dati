{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/components/freightTemplate/city.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/components/freightTemplate/city.vue","mtime":1689324015146},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHRlbXBsYXRlc0NpdHlMaXN0QXBpIH0gZnJvbSAnQC9hcGkvc2V0dGluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY2l0eScsCiAgcHJvcHM6IHsKICAgIHR5cGU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwLAogICAgfSwKICAgIHNlbGVjdEFycjogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogW10sCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlTc2VsZWN0OiBmYWxzZSwKICAgICAgYWRkcmVzc01vZGFsOiBmYWxzZSwKICAgICAgY2l0eUxpc3Q6IFtdLAogICAgICBhY3RpdmVDaXR5OiAtMSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHt9LAogIG1ldGhvZHM6IHsKICAgIGVudGVyKGluZGV4KSB7CiAgICAgIHRoaXMuYWN0aXZlQ2l0eSA9IGluZGV4OwogICAgfSwKICAgIGxlYXZlKCkgewogICAgICB0aGlzLmFjdGl2ZUNpdHkgPSBudWxsOwogICAgfSwKICAgIGdldENpdHlMaXN0KCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0ZW1wbGF0ZXNDaXR5TGlzdEFwaSgpLnRoZW4oKHJlcykgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuc2VsZWN0QXJyID0gW107CiAgICAgICAgcmVzLmRhdGEuZm9yRWFjaCgoZWwsIGluZGV4LCBhcnIpID0+IHsKICAgICAgICAgIGVsLmlzU2hvdyA9IHRydWU7CiAgICAgICAgICBlbC5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCwgaikgPT4gewogICAgICAgICAgICBjaGlsZC5pc1Nob3cgPSB0cnVlOwogICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RBcnIubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgIHRoaXMuc2VsZWN0QXJyLmZvckVhY2goKHNlbCwgc2luZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBzZWwuY2hpbGRyZW4uZm9yRWFjaCgoc2l0ZW0sIHNqKSA9PiB7CiAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5jaXR5X2lkID09IHNpdGVtLmNpdHlfaWQpIHsKICAgICAgICAgICAgICAgICAgICBjaGlsZC5pc1Nob3cgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJlcy5kYXRhLmZvckVhY2goKGVsLCBpbmRleCwgYXJyKSA9PiB7CiAgICAgICAgICBsZXQgbnVtID0gMDsKICAgICAgICAgIGxldCBvbGROdW0gPSAwOwogICAgICAgICAgZWwuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQsIGopID0+IHsKICAgICAgICAgICAgaWYgKCFjaGlsZC5pc1Nob3cpIHsKICAgICAgICAgICAgICBudW0rKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBvbGROdW0rKzsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAobnVtID09IGVsLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICBlbC5pc1Nob3cgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGVsLmNoaWxkTnVtID0gb2xkTnVtOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuY2l0eUxpc3QgPSByZXMuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgLyoqCiAgICAgKiDlhajpgInmiJbogIXlj43pgIkKICAgICAqIEBwYXJhbSBjaGVja2VkCiAgICAgKi8KICAgIGFsbENoZWNrYm94OiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpcywKICAgICAgICBjaGVja2VkID0gdGhpcy5pU3NlbGVjdDsKICAgICAgdGhhdC5jaXR5TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBrZXkpIHsKICAgICAgICB0aGF0LiRzZXQodGhhdC5jaXR5TGlzdFtrZXldLCAnY2hlY2tlZCcsIGNoZWNrZWQpOwogICAgICAgIGlmIChjaGVja2VkKSB7CiAgICAgICAgICB0aGF0LiRzZXQodGhhdC5jaXR5TGlzdFtrZXldLCAnY291bnQnLCB0aGF0LmNpdHlMaXN0W2tleV0uY2hpbGRyZW4ubGVuZ3RoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhhdC4kc2V0KHRoYXQuY2l0eUxpc3Rba2V5XSwgJ2NvdW50JywgMCk7CiAgICAgICAgfQogICAgICAgIHRoYXQuY2l0eUxpc3Rba2V5XS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uICh2YWwsIGspIHsKICAgICAgICAgIHRoYXQuJHNldCh0aGF0LmNpdHlMaXN0W2tleV0uY2hpbGRyZW5ba10sICdjaGVja2VkJywgY2hlY2tlZCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICAvLyB0aGlzLnJlbmRlcigpOwogICAgfSwKICAgIC8vIOa4heepuu+8mwogICAgZW1wdHkoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5jaXR5TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBrZXkpIHsKICAgICAgICB0aGF0LiRzZXQodGhhdC5jaXR5TGlzdFtrZXldLCAnY2hlY2tlZCcsIGZhbHNlKTsKICAgICAgICB0aGF0LmNpdHlMaXN0W2tleV0uY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAodmFsLCBrKSB7CiAgICAgICAgICB0aGF0LiRzZXQodGhhdC5jaXR5TGlzdFtrZXldLmNoaWxkcmVuW2tdLCAnY2hlY2tlZCcsIGZhbHNlKTsKICAgICAgICB9KTsKICAgICAgICB0aGF0LiRzZXQodGhhdC5jaXR5TGlzdFtrZXldLCAnY291bnQnLCAwKTsKICAgICAgfSk7CiAgICAgIHRoaXMuaVNzZWxlY3QgPSBmYWxzZTsKICAgIH0sCiAgICAvKioKICAgICAqIOeCueWHu+ecgQogICAgICogQHBhcmFtIGluZGV4CiAgICAgKi8KICAgIGNoZWNrZWRDbGljazogZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgaWYgKHRoYXQuY2l0eUxpc3RbaW5kZXhdLmNoZWNrZWQpIHsKICAgICAgICB0aGF0LiRzZXQodGhhdC5jaXR5TGlzdFtpbmRleF0sICdjb3VudCcsIHRoYXQuY2l0eUxpc3RbaW5kZXhdLmNoaWxkTnVtKTsKICAgICAgICB0aGF0LmNpdHlMaXN0W2luZGV4XS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBrZXkpIHsKICAgICAgICAgIHRoYXQuJHNldCh0aGF0LmNpdHlMaXN0W2luZGV4XS5jaGlsZHJlbltrZXldLCAnY2hlY2tlZCcsIHRydWUpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoYXQuJHNldCh0aGF0LmNpdHlMaXN0W2luZGV4XSwgJ2NvdW50JywgMCk7CiAgICAgICAgdGhhdC4kc2V0KHRoYXQuY2l0eUxpc3RbaW5kZXhdLCAnY2hlY2tlZCcsIGZhbHNlKTsKICAgICAgICB0aGF0LmNpdHlMaXN0W2luZGV4XS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBrZXkpIHsKICAgICAgICAgIHRoYXQuJHNldCh0aGF0LmNpdHlMaXN0W2luZGV4XS5jaGlsZHJlbltrZXldLCAnY2hlY2tlZCcsIGZhbHNlKTsKICAgICAgICB9KTsKICAgICAgICB0aGF0LmlTc2VsZWN0ID0gZmFsc2U7CiAgICAgIH0KICAgICAgLy8gdGhpcy5yZW5kZXIoKTsKICAgIH0sCiAgICAvKioKICAgICAqIOeCueWHu+W4guWMugogICAgICogQHBhcmFtIGluZGV4CiAgICAgKiBAcGFyYW0gaW5kCiAgICAgKi8KICAgIHByaW1hcnk6IGZ1bmN0aW9uIChpbmRleCwgaW5kKSB7CiAgICAgIGxldCBjaGVja2VkID0gZmFsc2UsCiAgICAgICAgY291bnQgPSAwOwogICAgICB0aGlzLmNpdHlMaXN0W2luZGV4XS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBrZXkpIHsKICAgICAgICBpZiAoaXRlbS5jaGVja2VkKSB7CiAgICAgICAgICBjaGVja2VkID0gdHJ1ZTsKICAgICAgICAgIGNvdW50Kys7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy4kc2V0KHRoaXMuY2l0eUxpc3RbaW5kZXhdLCAnY291bnQnLCBjb3VudCk7CiAgICAgIHRoaXMuJHNldCh0aGlzLmNpdHlMaXN0W2luZGV4XSwgJ2NoZWNrZWQnLCBjaGVja2VkKTsKICAgICAgLy8gdGhpcy5yZW5kZXIoKTsKICAgIH0sCiAgICAvLyDnoa7lrpo7CiAgICBjb25maXJtKCkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIC8vIOiiq+mAieS4reeahOecgeW4gu+8mwogICAgICBsZXQgc2VsZWN0TGlzdCA9IFtdOwogICAgICB0aGF0LmNpdHlMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGtleSkgewogICAgICAgIGxldCBkYXRhID0ge307CiAgICAgICAgaWYgKGl0ZW0uY2hlY2tlZCkgewogICAgICAgICAgZGF0YSA9IHsKICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgICAgICBjaXR5X2lkOiBpdGVtLmNpdHlfaWQsCiAgICAgICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIHRoYXQuY2l0eUxpc3Rba2V5XS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChpLCBrKSB7CiAgICAgICAgICBpZiAoaS5jaGVja2VkKSB7CiAgICAgICAgICAgIGRhdGEuY2hpbGRyZW4ucHVzaCh7CiAgICAgICAgICAgICAgY2l0eV9pZDogaS5jaXR5X2lkLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoZGF0YS5jaXR5X2lkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHNlbGVjdExpc3QucHVzaChkYXRhKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAoc2VsZWN0TGlzdC5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gdGhhdC4kTWVzc2FnZS5lcnJvcign6Iez5bCR6YCJ5oup5LiA5Liq55yB5Lu95oiW6ICF5Z+O5biCJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kZW1pdCgnc2VsZWN0Q2l0eScsIHNlbGVjdExpc3QsIHRoaXMudHlwZSk7CiAgICAgICAgdGhhdC5hZGRyZXNzTW9kYWwgPSBmYWxzZTsKICAgICAgICB0aGlzLmNpdHlMaXN0ID0gW107CiAgICAgIH0KICAgICAgLy8gcGFyZW50LnNlbGVjdENpdHkoc2VsZWN0TGlzdCx0eXBlKTsKICAgICAgLy8gdmFyIGluZGV4ID0gcGFyZW50LmxheWVyLmdldEZyYW1lSW5kZXgod2luZG93Lm5hbWUpOwogICAgICAvLyBwYXJlbnQubGF5ZXIuY2xvc2UoaW5kZXgpOwogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLmFkZHJlc3NNb2RhbCA9IGZhbHNlOwogICAgICB0aGlzLmNpdHlMaXN0ID0gW107CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIC8vIHRoaXMuZ2V0Q2l0eUxpc3QoKTsKICB9LAp9Owo="},{"version":3,"sources":["city.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"city.vue","sourceRoot":"src/components/freightTemplate","sourcesContent":["<template>\n  <div>\n    <Modal v-model=\"addressModal\" title=\"选择可配送区域\" width=\"50%\" class=\"modal\" :mask=\"true\">\n      <Row :gutter=\"24\" type=\"flex\">\n        <Col :xl=\"24\" :lg=\"24\" :md=\"24\" :sm=\"24\" :xs=\"24\" class=\"item\">\n          <div class=\"acea-row row-right row-middle\">\n            <Checkbox v-model=\"iSselect\" @on-change=\"allCheckbox\">全选</Checkbox>\n            <div class=\"empty\" @click=\"empty\">清空</div>\n          </div>\n        </Col>\n      </Row>\n      <Row :gutter=\"24\" type=\"flex\" :loading=\"loading\">\n        <Col\n          :xl=\"6\"\n          :lg=\"6\"\n          :md=\"6\"\n          :sm=\"8\"\n          :xs=\"6\"\n          class=\"item\"\n          v-for=\"(item, index) in cityList\"\n          :key=\"index\"\n          v-if=\"item.isShow\"\n        >\n          <div @mouseenter=\"enter(index)\" @mouseleave=\"leave()\">\n            <Checkbox v-model=\"item.checked\" :label=\"item.name\" @on-change=\"checkedClick(index)\">{{\n              item.name\n            }}</Checkbox\n            ><span class=\"red\">({{ (item.count || 0) + '/' + item.childNum }})</span>\n            <div class=\"city\" v-show=\"activeCity === index\">\n              <div class=\"checkBox\">\n                <div class=\"arrow\"></div>\n                <div>\n                  <Checkbox\n                    v-model=\"city.checked\"\n                    :label=\"city.name\"\n                    @on-change=\"primary(index, indexn)\"\n                    class=\"itemn\"\n                    v-for=\"(city, indexn) in item.children\"\n                    :key=\"indexn\"\n                    v-show=\"city.isShow\"\n                    >{{ city.name }}</Checkbox\n                  >\n                </div>\n              </div>\n            </div>\n          </div>\n        </Col>\n      </Row>\n      <div slot=\"footer\">\n        <Button @click=\"close\">取消</Button>\n        <Button type=\"primary\" @click=\"confirm\">确定</Button>\n      </div>\n      <Spin size=\"large\" fix v-if=\"loading\"></Spin>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { templatesCityListApi } from '@/api/setting';\nexport default {\n  name: 'city',\n  props: {\n    type: {\n      type: Number,\n      default: 0,\n    },\n    selectArr: {\n      type: Array,\n      default: [],\n    },\n  },\n  data() {\n    return {\n      iSselect: false,\n      addressModal: false,\n      cityList: [],\n      activeCity: -1,\n      loading: false,\n    };\n  },\n  computed: {},\n  methods: {\n    enter(index) {\n      this.activeCity = index;\n    },\n    leave() {\n      this.activeCity = null;\n    },\n    getCityList() {\n      this.loading = true;\n      templatesCityListApi().then((res) => {\n        this.loading = false;\n        this.selectArr = [];\n        res.data.forEach((el, index, arr) => {\n          el.isShow = true;\n          el.children.forEach((child, j) => {\n            child.isShow = true;\n            if (this.selectArr.length > 0) {\n              this.selectArr.forEach((sel, sindex) => {\n                sel.children.forEach((sitem, sj) => {\n                  if (child.city_id == sitem.city_id) {\n                    child.isShow = false;\n                  }\n                });\n              });\n            }\n          });\n        });\n        res.data.forEach((el, index, arr) => {\n          let num = 0;\n          let oldNum = 0;\n          el.children.forEach((child, j) => {\n            if (!child.isShow) {\n              num++;\n            } else {\n              oldNum++;\n            }\n          });\n          if (num == el.children.length) {\n            el.isShow = false;\n          }\n          el.childNum = oldNum;\n        });\n        this.cityList = res.data;\n      });\n    },\n    /**\n     * 全选或者反选\n     * @param checked\n     */\n    allCheckbox: function () {\n      let that = this,\n        checked = this.iSselect;\n      that.cityList.forEach(function (item, key) {\n        that.$set(that.cityList[key], 'checked', checked);\n        if (checked) {\n          that.$set(that.cityList[key], 'count', that.cityList[key].children.length);\n        } else {\n          that.$set(that.cityList[key], 'count', 0);\n        }\n        that.cityList[key].children.forEach(function (val, k) {\n          that.$set(that.cityList[key].children[k], 'checked', checked);\n        });\n      });\n      // this.render();\n    },\n    // 清空；\n    empty() {\n      let that = this;\n      that.cityList.forEach(function (item, key) {\n        that.$set(that.cityList[key], 'checked', false);\n        that.cityList[key].children.forEach(function (val, k) {\n          that.$set(that.cityList[key].children[k], 'checked', false);\n        });\n        that.$set(that.cityList[key], 'count', 0);\n      });\n      this.iSselect = false;\n    },\n    /**\n     * 点击省\n     * @param index\n     */\n    checkedClick: function (index) {\n      let that = this;\n      if (that.cityList[index].checked) {\n        that.$set(that.cityList[index], 'count', that.cityList[index].childNum);\n        that.cityList[index].children.forEach(function (item, key) {\n          that.$set(that.cityList[index].children[key], 'checked', true);\n        });\n      } else {\n        that.$set(that.cityList[index], 'count', 0);\n        that.$set(that.cityList[index], 'checked', false);\n        that.cityList[index].children.forEach(function (item, key) {\n          that.$set(that.cityList[index].children[key], 'checked', false);\n        });\n        that.iSselect = false;\n      }\n      // this.render();\n    },\n    /**\n     * 点击市区\n     * @param index\n     * @param ind\n     */\n    primary: function (index, ind) {\n      let checked = false,\n        count = 0;\n      this.cityList[index].children.forEach(function (item, key) {\n        if (item.checked) {\n          checked = true;\n          count++;\n        }\n      });\n      this.$set(this.cityList[index], 'count', count);\n      this.$set(this.cityList[index], 'checked', checked);\n      // this.render();\n    },\n    // 确定;\n    confirm() {\n      let that = this;\n      // 被选中的省市；\n      let selectList = [];\n      that.cityList.forEach(function (item, key) {\n        let data = {};\n        if (item.checked) {\n          data = {\n            name: item.name,\n            city_id: item.city_id,\n            children: [],\n          };\n        }\n        that.cityList[key].children.forEach(function (i, k) {\n          if (i.checked) {\n            data.children.push({\n              city_id: i.city_id,\n            });\n          }\n        });\n        if (data.city_id !== undefined) {\n          selectList.push(data);\n        }\n      });\n      if (selectList.length === 0) {\n        return that.$Message.error('至少选择一个省份或者城市');\n      } else {\n        this.$emit('selectCity', selectList, this.type);\n        that.addressModal = false;\n        this.cityList = [];\n      }\n      // parent.selectCity(selectList,type);\n      // var index = parent.layer.getFrameIndex(window.name);\n      // parent.layer.close(index);\n    },\n    close() {\n      this.addressModal = false;\n      this.cityList = [];\n    },\n  },\n  mounted() {\n    // this.getCityList();\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.modal .item {\n  margin-bottom: 20px;\n}\n\n.modal .item .city {\n  position: absolute;\n  z-index: 9;\n  top: 17px;\n  width: 100%;\n  padding-top: 18px;\n}\n\n.modal .item .city .checkBox {\n  width: 97%;\n  padding: 10px;\n  border: 1px solid #eee;\n  background-color: #fff;\n  max-height: 100px;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n\n.modal .item .city .checkBox .arrow {\n  position: absolute;\n  top: 3px;\n  width: 0;\n  height: 0;\n  border: 8px solid transparent;\n  border-bottom-color: #ddd;\n}\n\n.modal .item .city .checkBox .arrow:before {\n  position: absolute;\n  bottom: -8px;\n  right: -7px;\n  content: '';\n  width: 0;\n  height: 0;\n  border: 7px solid transparent;\n  border-bottom-color: #fff;\n}\n\n.modal .item .city .checkBox .itemn {\n  margin-bottom: 10px;\n}\n\n.radio {\n  padding: 5px 0;\n  font-size: 14px !important;\n}\n\n.red {\n  color: #ff0000;\n}\n\n.empty {\n  cursor: pointer;\n}\n</style>\n"]}]}