{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/system/onlineUpgrade/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/system/onlineUpgrade/index.vue","mtime":1689324015280},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgdXBncmFkZUxpc3RBcGksCiAgdXBncmFkZVByb2dyZXNzQXBpLAogIHVwZ3JhZGVBZ3JlZW1lbnRBcGksCiAgdXBncmFkZVN0YXR1c0FwaSwKICB1cGdyYWRlTG9nTGlzdEFwaSwKICB1cGdyYWRlYWJsZUxpc3RBcGksCiAgZG93bmxvYWRBcGksCn0gZnJvbSAnQC9hcGkvc3lzdGVtJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgQWNjb3VudExvZ291dCB9IGZyb20gJ0AvYXBpL2FjY291bnQnOwppbXBvcnQgeyBnZXRDb29raWVzLHJlbW92ZUNvb2tpZXN9IGZyb20gJ0AvbGlicy91dGlsJzsKCmltcG9ydCBTZXR0aW5nIGZyb20gJ0Avc2V0dGluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnc3lzdGVtVXBncmFkZWNsaWVudCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIFBhbmVsOiAnMScsCiAgICAgIGN1cnJlbnRUYWI6ICcxJywKICAgICAgZGVjbGFyYXRpb246IGZhbHNlLAogICAgICB1cGRhdGVNb2RhbDogZmFsc2UsCiAgICAgIG1vZGFsX2xvYWRpbmc6IGZhbHNlLAogICAgICBwZXJjZW50OiAwLAogICAgICBwYXJhbXM6IFtdLAogICAgICBhcnI6IFtdLAogICAgICBkeW5hbWljOiBmYWxzZSwKICAgICAgc3RhdHVzOiBmYWxzZSwKICAgICAgdmVyc2lvbjogJycsCiAgICAgIGZvcmNlVmVyc2lvbjogJycsCiAgICAgIGhlYWRlckxpc3Q6IFsKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ+ezu+e7n+WNh+e6pycsCiAgICAgICAgICB2YWx1ZTogMSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAn5Y2H57qn6K6w5b2VJywKICAgICAgICAgIHZhbHVlOiAyLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHVwZ3JhZGVMaXN0OiBbXSwKICAgICAgdXBncmFkZUxvZ0xpc3Q6IFtdLAogICAgICB1cGdyYWRlYWJsZUxpc3Q6IFtdLAogICAgICB1cGdyYWRlUHJvZ3Jlc3M6IHsKICAgICAgICBzcGVlZDogMCwKICAgICAgfSwKICAgICAgdXBncmFkZUFncmVlbWVudDogW10sCiAgICAgIHVwZ3JhZGVTdGF0dXM6IHt9LAogICAgICBkb3dubG9hZFN0YXR1czogbnVsbCwKICAgICAgcGFnZTogMSwKICAgICAgbGltaXQ6IDE1LAogICAgICAvLyDlrprml7blmagKICAgICAgdGltZXI6IG51bGwsCiAgICAgIHBhcmFtc19rZXk6IHVuZGVmaW5lZCwKICAgICAgbmV3S2V5OiBudWxsLAogICAgICBzZXJ2aW9uU3RhdHVzOiBmYWxzZSwKICAgICAgY291bnQ6MAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyB0aGlzLmdldFVwZ3JhZGVMaXN0KCk7CiAgICAvLyB0aGlzLmdldFVwZ3JhZGVMb2dMaXN0KCk7CiAgICAvLyB0aGlzLmdldHVwZ3JhZGVhYmxlTGlzdCgpOwogICAgLy8gaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pdGVtcykgewogICAgLy8gICB0aGlzLmdldFVwZ3JhZGVBZ3JlZW1lbnQoKTsKICAgIC8vIH0KICB9LAogIGFzeW5jIG1vdW50ZWQoKSB7CgogICAgdGhpcy5nZXRVcGdyYWRlU3RhdHVzKCk7CiAgICBhd2FpdCB0aGlzLmdldFVwZ3JhZGVMaXN0KCk7CiAgICBhd2FpdCB0aGlzLmdldHVwZ3JhZGVhYmxlTGlzdCgpOwogICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnVwZ3JhZGUudG9nZ2xlU3RhdHVzKSB7CiAgICAgIHRoaXMuc2VydmlvblN0YXR1cyA9IHRydWU7CiAgICAgIHRoaXMuZ2V0VXBncmFkZUFncmVlbWVudCgpOwogICAgfQogICAgLy8gdGhpcy5jb21wYXJlKCk7CiAgfSwKICB3YXRjaDogewogICAgJ3VwZ3JhZGVQcm9ncmVzcy5zcGVlZCc6IHsKICAgICAgaGFuZGxlcihuZXdWYWwsIG9sZFZhbCkgewogICAgICAgIGlmIChuZXdWYWwgPT09ICcxMDAuMCcpIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgfQogICAgICB9LAogICAgfSwKICAgIC8vICd0aGlzLmRvd25sb2FkU3RhdHVzJzogewogICAgLy8gICBoYW5kbGVyKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICAvLyAgICAgaWYgKG5ld1ZhbCA9ICcyMDAnKSB7CiAgICAvLyAgICAgICB0aGlzLnVwZGF0ZU1vZGFsID0gZmFsc2U7CiAgICAvLyAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlUmVhY2hCb3R0b20oKXsKICAgICAgaWYodGhpcy5jb3VudCA9PT0gdGhpcy51cGdyYWRlTG9nTGlzdC5sZW5ndGgpIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+aaguaXoOabtOWkmuWNh+e6p+iusOW9lScpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5nZXRVcGdyYWRlTG9nTGlzdCgpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2xpY2sodGFiLCBldmVudCkgewogICAgICB0aGlzLnBhZ2UgPSAxCiAgICAgIGlmKHRhYiA9PSAxKXsKICAgICAgICB0aGlzLmdldHVwZ3JhZGVhYmxlTGlzdCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXBncmFkZUxvZ0xpc3QgPSBbXQogICAgICAgIHRoaXMuZ2V0VXBncmFkZUxvZ0xpc3QoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWNh+e6p+WIl+ihqAogICAgYXN5bmMgZ2V0VXBncmFkZUxpc3QoKSB7CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBsaW1pdDogdGhpcy5saW1pdCwKICAgICAgfTsKICAgICAgbGV0IHJlcyA9IGF3YWl0IHVwZ3JhZGVMaXN0QXBpKGRhdGEpOwogICAgICB0aGlzLnVwZ3JhZGVMaXN0ID0gcmVzLmRhdGEubGlzdDsKICAgICAgdGhpcy51cGdyYWRlTGlzdCA9IHJlcy5kYXRhLmxpc3Q7CiAgICB9LAogICAgLy8g5Y2H57qn6K6w5b2VCiAgICBnZXRVcGdyYWRlTG9nTGlzdCgpIHsKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgcGFnZTogdGhpcy5wYWdlLAogICAgICAgIGxpbWl0OiB0aGlzLmxpbWl0LAogICAgICB9OwogICAgICB1cGdyYWRlTG9nTGlzdEFwaShkYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMudXBncmFkZUxvZ0xpc3QgPSBbLi4udGhpcy51cGdyYWRlTG9nTGlzdCwuLi5yZXMuZGF0YS5saXN0XQogICAgICAgICAgdGhpcy5jb3VudCA9IHJlcy5kYXRhLmNvdW50CiAgICAgICAgICBpZih0aGlzLnVwZ3JhZGVMb2dMaXN0Lmxlbmd0aCA8IHRoaXMuY291bnQpewogICAgICAgICAgICB0aGlzLnBhZ2UrKwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOWPr+WNh+e6p+WIl+ihqAogICAgYXN5bmMgZ2V0dXBncmFkZWFibGVMaXN0KCkgewogICAgICBsZXQgcmVzID0gYXdhaXQgdXBncmFkZWFibGVMaXN0QXBpKCk7CiAgICAgIHRoaXMudXBncmFkZWFibGVMaXN0ID0gcmVzLmRhdGE7CiAgICAgIGxldCBmaXJzdFZlciA9IHJlcy5kYXRhWzBdCiAgICAgIGlmKHRoaXMuJHN0b3JlLnN0YXRlLnVwZ3JhZGUudG9nZ2xlU3RhdHVzIHx8IHRoaXMudXBncmFkZVN0YXR1cy5mb3JjZV9yZW1pbmRlcil7CiAgICAgICAgY29uc3QgZGF0YSA9IHJlcy5kYXRhLmZpbmQoaXRlbSA9PiBpdGVtLmZvcmNlX3JlbWluZGVyID09PSAxKQogICAgICAgIHRoaXMubmV3S2V5ID0gZGF0YS5wYWNrYWdlX2tleTsKICAgICAgICB0aGlzLmZvcmNlVmVyc2lvbiA9IGRhdGEuZmlyc3RfdmVyc2lvbiArICcuJyArIGRhdGEuc2Vjb25kX3ZlcnNpb24gKyAnLicgKyBkYXRhLnRoaXJkX3ZlcnNpb24gKyAnLicgKyBkYXRhLmZvdXJ0aF92ZXJzaW9uCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMucGFyYW1zX2tleSA9IHRoaXMudXBncmFkZWFibGVMaXN0WzBdLnBhY2thZ2Vfa2V5CiAgICAgICAgdGhpcy5mb3JjZVZlcnNpb24gPSBmaXJzdFZlci5maXJzdF92ZXJzaW9uICsgJy4nICsgZmlyc3RWZXIuc2Vjb25kX3ZlcnNpb24gKyAnLicgKyBmaXJzdFZlci50aGlyZF92ZXJzaW9uICsgJy4nICsgZmlyc3RWZXIuZm91cnRoX3ZlcnNpb24KICAgICAgfQoKCiAgICAgIC8vIGFyci5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgIC8vICAgdGhpcy4kc2V0KAogICAgICAvLyAgICAgaXRlbSwKICAgICAgLy8gICAgICdzZXJ2aW9uJywKICAgICAgLy8gICAgIGl0ZW0uZmlyc3RfdmVyc2lvbiArICcuJyArIGl0ZW0uc2Vjb25kX3ZlcnNpb24gKyAnLicgKyBpdGVtLnRoaXJkX3ZlcnNpb24gKyAnLicgKyBpdGVtLmZvdXJ0aF92ZXJzaW9uLAogICAgICAvLyAgICk7CiAgICAgIC8vIH0pOwoKICAgICAgLy8gbGV0IGRhdGEgPSBbXTsKICAgICAgLy8gYXJyLm1hcCgoZWxlKSA9PiB7CiAgICAgIC8vICAgZGF0YS5wdXNoKGVsZS5zZXJ2aW9uKTsKICAgICAgLy8gfSk7CiAgICAgIC8vIC8vIOeJiOacrOWPt+aOkuW6jwogICAgICAvLyBmdW5jdGlvbiBzb3J0VmVyc2lvbihsaXN0KSB7CiAgICAgIC8vICAgcmV0dXJuIGxpc3Quc29ydCgodmVyc2lvbjEsIHZlcnNpb24yKSA9PiB7CiAgICAgIC8vICAgICBjb25zdCBhcnIxID0gdmVyc2lvbjEuc3BsaXQoJy4nKS5tYXAoKGUpID0+IGUgKiAxKTsKICAgICAgLy8gICAgIGNvbnN0IGFycjIgPSB2ZXJzaW9uMi5zcGxpdCgnLicpLm1hcCgoZSkgPT4gZSAqIDEpOwogICAgICAvLyAgICAgY29uc3QgbGVuZ3RoID0gTWF0aC5tYXgoYXJyMS5sZW5ndGgsIGFycjIubGVuZ3RoKTsKICAgICAgLy8gICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgICAgLy8gICAgICAgaWYgKChhcnIxW2ldIHx8IDApID4gKGFycjJbaV0gfHwgMCkpIHJldHVybiAxOwogICAgICAvLyAgICAgICBpZiAoKGFycjFbaV0gfHwgMCkgPCAoYXJyMltpXSB8fCAwKSkgcmV0dXJuIC0xOwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgcmV0dXJuIDA7CiAgICAgIC8vICAgfSk7CiAgICAgIC8vIH0KICAgICAgLy8gdGhpcy5mb3JjZVZlcnNpb24gPSBkYXRhWzBdOwogICAgICAvLyB0aGlzLnBhcmFtcy5tYXAoKGl0ZW0pID0+IHsKICAgICAgLy8gICBpZiAoaXRlbS5zZXJ2aW9uID09IGRhdGFbZGF0YS5sZW5ndGggLSAxXSkgewogICAgICAvLyAgICAgdGhpcy5uZXdLZXkgPSBpdGVtLnBhY2thZ2Vfa2V5OwogICAgICAvLyAgIH0KICAgICAgLy8gfSk7CiAgICB9LAogICAgLy8g5LiL6L295Y2H57qn5YyFCiAgICBnZXRkb3dubG9hZCgpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnVwZ3JhZGUudG9nZ2xlU3RhdHVzIHx8IHRoaXMudXBncmFkZVN0YXR1cy5mb3JjZV9yZW1pbmRlcikgewogICAgICAgIHRoaXMucGFyYW1zX2tleSA9IHRoaXMubmV3S2V5OwogICAgICB9CiAgICAgIGRvd25sb2FkQXBpKHRoaXMucGFyYW1zX2tleSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAvLyB0aGlzLmRvd25sb2FkU3RhdHVzID0gcmVzLnN0YXR1czsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgICBpZiAodGhpcy51cGdyYWRlUHJvZ3Jlc3Muc3BlZWQgIT09ICcxMDAuMCcpIHsKICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRVcGdyYWRlUHJvZ3Jlc3MoKTsKICAgICAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb2RhbCA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnVwZGF0ZU1vZGFsID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+S4i+i9vee7iOatoicpOwogICAgICAgICAgdGhpcy51cGRhdGVNb2RhbCA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIGRvd25sb2FkRmlsZSh1cmwpewogICAgICB3aW5kb3cub3Blbih1cmwsICdfYmxhbmsnKTsKICAgIH0sCgogICAgLy8g5Y2H57qn6L+b5bqmCiAgICBnZXRVcGdyYWRlUHJvZ3Jlc3MoKSB7CiAgICAgIHVwZ3JhZGVQcm9ncmVzc0FwaSgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy51cGdyYWRlUHJvZ3Jlc3MgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMuZG93bmxvYWRTdGF0dXMgPSByZXMuc3RhdHVzOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOWNh+e6p+WNj+iurgogICAgZ2V0VXBncmFkZUFncmVlbWVudCgpIHsKICAgICAgdXBncmFkZUFncmVlbWVudEFwaSgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy51cGdyYWRlQWdyZWVtZW50ID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLmRlY2xhcmF0aW9uID0gdHJ1ZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOWNh+e6p+eKtuaAgQogICAgZ2V0VXBncmFkZVN0YXR1cygpIHsKICAgICAgdXBncmFkZVN0YXR1c0FwaSgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy51cGdyYWRlU3RhdHVzID0gcmVzLmRhdGE7CiAgICAgICAgICBpZihyZXMuZGF0YS5mb3JjZV9yZW1pbmRlcil7CiAgICAgICAgICAgIHRoaXMuZGVjbGFyYXRpb24gPSB0cnVlCiAgICAgICAgICAgIHRoaXMuZ2V0VXBncmFkZUFncmVlbWVudCgpCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDnq4vljbPmm7TmlrAKICAgIHVwZGF0ZShpdGVtKSB7CiAgICAgIHRoaXMuZGVjbGFyYXRpb24gPSB0cnVlOwogICAgICBpZiAoaXRlbSAmJiB0aGlzLiRzdG9yZS5zdGF0ZS51cGdyYWRlLnRvZ2dsZVN0YXR1cyA9PSBmYWxzZSkgewogICAgICAgIHRoaXMucGFyYW1zX2tleSA9IGl0ZW0ucGFyYW1zX2tleTsKICAgICAgfQogICAgICAvLyB0aGlzLnZlcnNpb24gPSBpdGVtLmZpcnN0X3ZlcnNpb24gKyAiLiIgKyBpdGVtLnNlY29uZF92ZXJzaW9uICsgIi4iICsgaXRlbS50aGlyZF92ZXJzaW9uICsgIi4iICsgaXRlbS5mb3VydGhfdmVyc2lvbjsKICAgICAgdGhpcy5nZXRVcGdyYWRlQWdyZWVtZW50KCk7CiAgICB9LAogICAgLy8g5q+U6L6D55u45ZCM54mI5pys5Y+3CiAgICBjb21wYXJlKCkgewogICAgICB0aGlzLnVwZ3JhZGVMaXN0Lm1hcCgoZWxlLCBpKSA9PiB7CiAgICAgICAgdGhpcy4kc2V0KAogICAgICAgICAgdGhpcy51cGdyYWRlTGlzdFtpXSwKICAgICAgICAgICdtbicsCiAgICAgICAgICBlbGUuZmlyc3RfdmVyc2lvbiArIGVsZS5zZWNvbmRfdmVyc2lvbiArIGVsZS50aGlyZF92ZXJzaW9uICsgZWxlLmZvdXJ0aF92ZXJzaW9uLAogICAgICAgICk7CgogICAgICAgIHRoaXMudXBncmFkZWFibGVMaXN0Lm1hcCgoaXRlbSwgaSkgPT4gewogICAgICAgICAgdGhpcy4kc2V0KAogICAgICAgICAgICB0aGlzLnVwZ3JhZGVhYmxlTGlzdFtpXSwKICAgICAgICAgICAgJ21uJywKICAgICAgICAgICAgaXRlbS5maXJzdF92ZXJzaW9uICsgaXRlbS5zZWNvbmRfdmVyc2lvbiArIGl0ZW0udGhpcmRfdmVyc2lvbiArIGl0ZW0uZm91cnRoX3ZlcnNpb24sCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgICAgIGlmICh0aGlzLnVwZ3JhZGVMaXN0W2ldLm1uID09IHRoaXMudXBncmFkZWFibGVMaXN0W2ldLm1uKSB7CiAgICAgICAgICB0aGlzLiRzZXQodGhpcy51cGdyYWRlTGlzdFtpXSwgJ2luZGV4bicsIHRydWUpOwogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudXBncmFkZUxpc3RbaV0sICdwYXJhbXNfa2V5JywgdGhpcy51cGdyYWRlYWJsZUxpc3RbaV0ucGFja2FnZV9rZXkpOwogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudXBncmFkZWFibGVMaXN0W2ldLCAnaW5kZXhuJywgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDlkIzmhI8KICAgIGFncmVlKCkgewogICAgICB0aGlzLmRlY2xhcmF0aW9uID0gZmFsc2U7CiAgICAgIHRoaXMudXBkYXRlTW9kYWwgPSB0cnVlOwogICAgICB0aGlzLmdldGRvd25sb2FkKCk7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBncmFkZS9UT0dHTEVfU1RBVFVTIixmYWxzZSkKICAgIH0sCiAgICByZWplY3QoKXsKICAgICAgdGhpcy5kZWNsYXJhdGlvbiA9IGZhbHNlCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBncmFkZS9UT0dHTEVfU1RBVFVTIixmYWxzZSkKICAgIH0sCiAgICBiYWNrKCkgewogICAgICB0aGlzLnVwZGF0ZU1vZGFsID0gZmFsc2U7CiAgICAgIC8vIHRoaXMuZ2V0VXBncmFkZUxpc3QoKTsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgICAgQWNjb3VudExvZ291dCgpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCfmgqjlt7LmiJDlip/pgIDlh7onKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHRoaXMuJHJvdXRlUHJvU3RyICsgJy9sb2dpbicpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7CiAgICAgICAgICByZW1vdmVDb29raWVzKCd0b2tlbicpOwogICAgICAgICAgcmVtb3ZlQ29va2llcygnZXhwaXJlc190aW1lJyk7CiAgICAgICAgICByZW1vdmVDb29raWVzKCd1dWlkJyk7CiAgICAgICAgICAvLyB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7fSk7CiAgICB9LAogICAgYmFja1N1cmUoKSB7CiAgICAgIHRoaXMudXBkYXRlTW9kYWwgPSBmYWxzZTsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIH0sCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMudXBkYXRlTW9kYWwgPSBmYWxzZTsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVyKTsKICAgIH0sCiAgICAvLyDlr7zlh7rlpIfku73mlofku7YKICAgIGV4cG9ydHMoaXRlbSkgewogICAgICBsZXQgbmFtZSA9CiAgICAgICAgaXRlbS50aXRsZSArCiAgICAgICAgJ3YnICsKICAgICAgICBpdGVtLmZpcnN0X3ZlcnNpb24gKwogICAgICAgICcuJyArCiAgICAgICAgaXRlbS5zZWNvbmRfdmVyc2lvbiArCiAgICAgICAgJy4nICsKICAgICAgICBpdGVtLnRoaXJkX3ZlcnNpb24gKwogICAgICAgICcuJyArCiAgICAgICAgaXRlbS5mb3VydGhfdmVyc2lvbiArCiAgICAgICAgJy4nICsKICAgICAgICBpdGVtLnVwZ3JhZGVfdGltZTsKICAgICAgbGV0IGhyZWYgPSBTZXR0aW5nLmFwaUJhc2VVUkwgKyBgL3N5c3RlbS91cGdyYWRlX2V4cG9ydC8ke2l0ZW0uaWR9L2ZpbGVgOwogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICB1cmw6IGhyZWYsCiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0F1dGhvcmktemF0aW9uJzogJ0JlYXJlciAnICsgZ2V0Q29va2llcygndG9rZW4nKSwKICAgICAgICB9LAogICAgICB9KS50aGVuKChyZXMpID0+IHsKICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtyZXMuZGF0YV0sIHsKICAgICAgICAgIHR5cGU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW07Y2hhcnNldD1VVEYtOCcsCiAgICAgICAgfSk7CiAgICAgICAgdmFyIGRvd25sb2FkRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAvLyDkuIvovb3nmoTmlofku7blkI0KICAgICAgICBkb3dubG9hZEVsZW1lbnQuZG93bmxvYWQgPSBgJHtuYW1lfS56aXBgOwogICAgICAgIC8vIOWIm+W7uuS4i+i9veeahOmTvuaOpQogICAgICAgIGRvd25sb2FkRWxlbWVudC5ocmVmID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7CiAgICAgICAgLy8g54K55Ye75LiL6L29CiAgICAgICAgZG93bmxvYWRFbGVtZW50LmNsaWNrKCk7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb3dubG9hZEVsZW1lbnQpOwogICAgICAgIC8vIOS4i+i9veWujOaIkOenu+mZpOWFg+e0oAogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZG93bmxvYWRFbGVtZW50KTsKICAgICAgICAvLyDph4rmlL7mjolibG9i5a+56LGhCiAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoZG93bmxvYWRFbGVtZW50LmhyZWYpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVEb3dubG9hZChpdGVtKSB7CiAgICAgIGxldCBuYW1lID0KICAgICAgICBpdGVtLnRpdGxlICsKICAgICAgICAndicgKwogICAgICAgIGl0ZW0uZmlyc3RfdmVyc2lvbiArCiAgICAgICAgJy4nICsKICAgICAgICBpdGVtLnNlY29uZF92ZXJzaW9uICsKICAgICAgICAnLicgKwogICAgICAgIGl0ZW0udGhpcmRfdmVyc2lvbiArCiAgICAgICAgJy4nICsKICAgICAgICBpdGVtLmZvdXJ0aF92ZXJzaW9uICsKICAgICAgICAnLicgKwogICAgICAgIGl0ZW0udXBncmFkZV90aW1lOwogICAgICBsZXQgaHJlZiA9IFNldHRpbmcuYXBpQmFzZVVSTCArIGAvc3lzdGVtL3VwZ3JhZGVfZXhwb3J0LyR7aXRlbS5pZH0vZGF0YWA7CiAgICAgIGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdnZXQnLAogICAgICAgIHVybDogaHJlZiwKICAgICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQXV0aG9yaS16YXRpb24nOiAnQmVhcmVyICcgKyBnZXRDb29raWVzKCd0b2tlbicpLAogICAgICAgIH0sCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW3Jlcy5kYXRhXSwgewogICAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtjaGFyc2V0PVVURi04JywKICAgICAgICB9KTsKICAgICAgICB2YXIgZG93bmxvYWRFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIC8vIOS4i+i9veeahOaWh+S7tuWQjQogICAgICAgIGRvd25sb2FkRWxlbWVudC5kb3dubG9hZCA9IGAke25hbWV9Lmd6YDsKICAgICAgICAvLyDliJvlu7rkuIvovb3nmoTpk77mjqUKICAgICAgICBkb3dubG9hZEVsZW1lbnQuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIC8vIOeCueWHu+S4i+i9vQogICAgICAgIGRvd25sb2FkRWxlbWVudC5jbGljaygpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG93bmxvYWRFbGVtZW50KTsKICAgICAgICAvLyDkuIvovb3lrozmiJDnp7vpmaTlhYPntKAKICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRvd25sb2FkRWxlbWVudCk7CiAgICAgICAgLy8g6YeK5pS+5o6JYmxvYuWvueixoQogICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGRvd25sb2FkRWxlbWVudC5ocmVmKTsKICAgICAgfSk7CiAgICB9LAogICAgcXVlYXJ5RXZlYXIoaWQsIGluZGV4KSB7CiAgICAgIHRoaXMuZHluYW1pYyA9IGluZGV4OwogICAgfSwKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIC8v6ZSA5q+BCiAgICBjbGVhckludGVydmFsKHRpaHMudGltZXIpOwogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/system/onlineUpgrade","sourcesContent":["<template>\n<div class=\"upgrade\">\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <div class=\"header\">\n        <div>当前版本<span class=\"v\"></span><span class=\"num\">{{$store.state.userInfo.version}}</span></div>\n        <div class=\"info title\">\n          更新说明：\n          <span v-if=\"upgradeStatus.status != 1\">已升级至最新版本，无需更新</span>\n        <ul v-if=\"upgradeStatus.status == 1\">\n          <li>{{upgradeStatus.title}}</li>\n        </ul>\n        </div>\n        <Button v-if=\"currentTab == 1 && upgradeStatus.status == 1\" type=\"primary\" class=\"primary btn update\" @click=\"update()\">立即更新</Button>\n      </div>\n    </Card>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n        <div>\n          <Tabs v-model=\"currentTab\" @on-click=\"handleClick\">\n            <TabPane :label=\"item.label\" :name=\"item.value.toString()\" v-for=\"item in headerList\" :key=\"item.id\"/>\n          </Tabs>\n        </div>\n          <div class=\"contentTime\" v-if=\"currentTab == 1\">\n            <div class=\"acea-row row-top on\" @mouseenter=\"quearyEvear(item.id,index)\" v-for=\"(item, index) in upgradeList\" :key=\"index\" :class=\"{active:index==dynamic}\">\n                <div class=\"time\">{{item.release_time}}</div>\n                <Timeline class=\"list\">\n                    <TimelineItem>\n                        <!-- <Icon :type=\"index==0 ? 'md-radio-button-on' : 'md-radio-button-off'\" slot=\"dot\"/> -->\n                        <Collapse simple>\n                            <Panel hide-arrow>\n                                {{item.title}} v{{item.first_version}}.{{item.second_version}}.{{item.third_version}}.{{item.fourth_version}}<Icon type=\"ios-arrow-down\" />\n                              <p slot=\"content\" class=\"info\">\n                                <ul style=\"white-space: pre-wrap;\">\n                                  <li v-html=\"item.content\"></li>\n                                </ul>\n                              </p>\n                            </Panel>\n                        </Collapse>\n                    </TimelineItem>\n                    <Button v-if=\"item.client_package_link\" type=\"success\"  class=\"primary btn\" @click=\"downloadFile(item.client_package_link)\">移动端源码</Button>\n                    <Button v-if=\"item.pc_package_link\" type=\"primary\" class=\"primary btn1\" @click=\"downloadFile(item.pc_package_link)\">PC端源码</Button>\n                </Timeline>\n            </div>\n        </div>\n        <Scroll v-if=\"currentTab == 2\" :on-reach-bottom=\"handleReachBottom\" height=\"550\">\n        <div class=\"contentTime\" >\n            <div class=\"acea-row row-top off\" @mouseenter=\"quearyEvear(item.id,index)\" v-for=\"(item,index) in upgradeLogList\" :key=\"index\" :class=\"{active:index==dynamic}\">\n                <div class=\"time\">\n                    <div v-if=\"index == 0\">最近更新</div>\n                    <div>{{item.upgrade_time}}</div>\n                  </div>\n                <Timeline class=\"list\">\n                    <TimelineItem>\n                        <Icon :type=\"index==0 ? 'md-radio-button-on' : 'md-radio-button-off'\" slot=\"dot\"/>\n                        <Collapse simple>\n                            <Panel hide-arrow>\n                                {{item.title}} v{{item.first_version}}.{{item.second_version}}.{{item.third_version}}.{{item.fourth_version}}<Icon type=\"ios-arrow-down\" />\n                              <p slot=\"content\" class=\"info\">\n                                <ul style=\"white-space: pre-wrap;\">\n                                  <li v-html=\"item.content\"></li>\n                                </ul>\n                              </p>\n                            </Panel>\n                        </Collapse>\n                    </TimelineItem>\n                    <!-- <Button v-if=\"item.data_status == 1\" type=\"primary\" class=\"primary btn\" @click=\"handleDownload(item)\">数据库备份</Button>\n                    <Button v-if=\"item.file_status == 1\" type=\"primary\" class=\"primary btn1\" @click=\"exports(item)\">导出文件</Button> -->\n                </Timeline>\n            </div>\n        </div>\n        </Scroll>\n\n    </Card>\n    <!-- 免责声明 -->\n    <Modal :loading=\"modal_loading\" v-model=\"declaration\" width=\"340\" height=\"96\" :closable=\"false\" class-name=\"vertical-center-modal\" :mask-closable=\"false\">\n        <p slot=\"header\" class=\"header-modal\">\n          <span>{{upgradeAgreement.title}}</span>\n        </p>\n        <div class=\"describe\">\n          <p v-html=\"upgradeAgreement.content\"></p>\n        </div>\n        <div slot=\"footer\" class=\"footer\">\n            <Button class=\"cancel\" shape=\"circle\" @click=\"reject\">拒绝</Button>\n            <Button shape=\"circle\" type=\"primary\" @click=\"agree()\">同意</Button>\n        </div>\n    </Modal>\n    <!-- 升级 -->\n    <Modal v-model=\"updateModal\" width=\"340\" height=\"96\" :closable=\"false\" class-name=\"vertical-center-modal\" :mask-closable=\"false\" @on-cancel=\"cancel\">\n        <p slot=\"header\" class=\"header-modal2\">\n          <span >升级至v{{forceVersion}}</span>\n        </p>\n        <div class=\"describe\" v-if=\"upgradeProgress.speed != '100.0' || this.downloadStatus !='200'\">\n          <i-circle\n            :size=\"140\"\n            :trail-width=\"4\"\n            :stroke-width=\"5\"\n            :percent=\"Number(upgradeProgress.speed)\"\n            stroke-linecap=\"square\"\n            stroke-color=\"#43a3fb\">\n            <div class=\"demo-i-circle-custom\">\n                <p>{{upgradeProgress.tip || '升级中'}}</p>\n            </div>\n          </i-circle>\n          <div class=\"proportion\">{{!upgradeProgress.speed?'':upgradeProgress.speed+'%'}}</div>\n          <div class=\"wait\">正在更新，请耐心等候～</div>\n        </div>\n        <div slot=\"footer\">\n          <!-- <div v-if=\"upgradeProgress.speed == '100.0'\"><Button class=\"back\" type=\"primary\" shape=\"circle\" @click=\"updateModal = false\">确认</Button></div> -->\n        </div>\n        <div v-if=\"upgradeProgress.speed == '100.0'\" class=\"describe\">\n          <i-circle :percent=\"100\" stroke-color=\"#5cb85c\">\n            <Icon type=\"ios-checkmark\" size=\"90\" style=\"color:#5cb85c\"></Icon>\n          </i-circle>\n          <div class=\"success\">升级成功</div>\n        </div>\n        <!-- <div v-if=\"upgradeProgress.speed == '100.0'\" class=\"describe\">\n          <i-circle :percent=\"100\" stroke-color=\"#5cb85c\">\n            <Icon type=\"md-close\" size=\"90\" style=\"color:#5cb85c\">\n          </i-circle>\n          <div class=\"success\">升级失败</div>\n        </div> -->\n        <div v-if=\"upgradeProgress.speed == '100.0'\" slot=\"footer\" class=\"footer2\">\n          <Button class=\"confirm\" type=\"primary\" shape=\"circle\" @click=\"back()\">确认</Button>\n          <!-- <div><Button class=\"back\" shape=\"circle\" @click=\"backSure()\">返回</Button></div> -->\n        </div>\n    </Modal>\n</div>\n</template>\n\n<script>\nimport {\n  upgradeListApi,\n  upgradeProgressApi,\n  upgradeAgreementApi,\n  upgradeStatusApi,\n  upgradeLogListApi,\n  upgradeableListApi,\n  downloadApi,\n} from '@/api/system';\nimport axios from 'axios';\nimport { AccountLogout } from '@/api/account';\nimport { getCookies,removeCookies} from '@/libs/util';\n\nimport Setting from '@/setting';\nexport default {\n  name: 'systemUpgradeclient',\n  data() {\n    return {\n      Panel: '1',\n      currentTab: '1',\n      declaration: false,\n      updateModal: false,\n      modal_loading: false,\n      percent: 0,\n      params: [],\n      arr: [],\n      dynamic: false,\n      status: false,\n      version: '',\n      forceVersion: '',\n      headerList: [\n        {\n          label: '系统升级',\n          value: 1,\n        },\n        {\n          label: '升级记录',\n          value: 2,\n        },\n      ],\n      upgradeList: [],\n      upgradeLogList: [],\n      upgradeableList: [],\n      upgradeProgress: {\n        speed: 0,\n      },\n      upgradeAgreement: [],\n      upgradeStatus: {},\n      downloadStatus: null,\n      page: 1,\n      limit: 15,\n      // 定时器\n      timer: null,\n      params_key: undefined,\n      newKey: null,\n      servionStatus: false,\n      count:0\n    };\n  },\n  created() {\n    // this.getUpgradeList();\n    // this.getUpgradeLogList();\n    // this.getupgradeableList();\n    // if (this.$route.params.items) {\n    //   this.getUpgradeAgreement();\n    // }\n  },\n  async mounted() {\n\n    this.getUpgradeStatus();\n    await this.getUpgradeList();\n    await this.getupgradeableList();\n    if (this.$store.state.upgrade.toggleStatus) {\n      this.servionStatus = true;\n      this.getUpgradeAgreement();\n    }\n    // this.compare();\n  },\n  watch: {\n    'upgradeProgress.speed': {\n      handler(newVal, oldVal) {\n        if (newVal === '100.0') {\n          clearInterval(this.timer);\n        }\n      },\n    },\n    // 'this.downloadStatus': {\n    //   handler(newVal, oldVal) {\n    //     if (newVal = '200') {\n    //       this.updateModal = false;\n    //       clearInterval(this.timer);\n    //     }\n    //   }\n    // }\n  },\n  methods: {\n    handleReachBottom(){\n      if(this.count === this.upgradeLogList.length) {\n        this.$Message.warning('暂无更多升级记录')\n      } else {\n        this.getUpgradeLogList();\n      }\n    },\n    handleClick(tab, event) {\n      this.page = 1\n      if(tab == 1){\n        this.getupgradeableList();\n      } else {\n        this.upgradeLogList = []\n        this.getUpgradeLogList();\n      }\n    },\n    // 升级列表\n    async getUpgradeList() {\n      let data = {\n        page: this.page,\n        limit: this.limit,\n      };\n      let res = await upgradeListApi(data);\n      this.upgradeList = res.data.list;\n      this.upgradeList = res.data.list;\n    },\n    // 升级记录\n    getUpgradeLogList() {\n      let data = {\n        page: this.page,\n        limit: this.limit,\n      };\n      upgradeLogListApi(data)\n        .then((res) => {\n          this.upgradeLogList = [...this.upgradeLogList,...res.data.list]\n          this.count = res.data.count\n          if(this.upgradeLogList.length < this.count){\n            this.page++\n          }\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n\n    // 可升级列表\n    async getupgradeableList() {\n      let res = await upgradeableListApi();\n      this.upgradeableList = res.data;\n      let firstVer = res.data[0]\n      if(this.$store.state.upgrade.toggleStatus || this.upgradeStatus.force_reminder){\n        const data = res.data.find(item => item.force_reminder === 1)\n        this.newKey = data.package_key;\n        this.forceVersion = data.first_version + '.' + data.second_version + '.' + data.third_version + '.' + data.fourth_version\n      }else{\n        this.params_key = this.upgradeableList[0].package_key\n        this.forceVersion = firstVer.first_version + '.' + firstVer.second_version + '.' + firstVer.third_version + '.' + firstVer.fourth_version\n      }\n\n\n      // arr.forEach((item) => {\n      //   this.$set(\n      //     item,\n      //     'servion',\n      //     item.first_version + '.' + item.second_version + '.' + item.third_version + '.' + item.fourth_version,\n      //   );\n      // });\n\n      // let data = [];\n      // arr.map((ele) => {\n      //   data.push(ele.servion);\n      // });\n      // // 版本号排序\n      // function sortVersion(list) {\n      //   return list.sort((version1, version2) => {\n      //     const arr1 = version1.split('.').map((e) => e * 1);\n      //     const arr2 = version2.split('.').map((e) => e * 1);\n      //     const length = Math.max(arr1.length, arr2.length);\n      //     for (let i = 0; i < length; i++) {\n      //       if ((arr1[i] || 0) > (arr2[i] || 0)) return 1;\n      //       if ((arr1[i] || 0) < (arr2[i] || 0)) return -1;\n      //     }\n      //     return 0;\n      //   });\n      // }\n      // this.forceVersion = data[0];\n      // this.params.map((item) => {\n      //   if (item.servion == data[data.length - 1]) {\n      //     this.newKey = item.package_key;\n      //   }\n      // });\n    },\n    // 下载升级包\n    getdownload() {\n      if (this.$store.state.upgrade.toggleStatus || this.upgradeStatus.force_reminder) {\n        this.params_key = this.newKey;\n      }\n      downloadApi(this.params_key)\n        .then((res) => {\n          // this.downloadStatus = res.status;\n          if (res.status == 200) {\n            if (this.upgradeProgress.speed !== '100.0') {\n              this.timer = setInterval(() => {\n                setTimeout(() => {\n                    this.getUpgradeProgress();\n                }, 0);\n              }, 5000);\n            } else {\n              clearInterval(this.timer);\n              this.updateModal = false;\n            }\n          } else {\n            this.updateModal = false;\n          }\n        })\n        .catch((err) => {\n          clearInterval(this.timer);\n          this.$Message.error('下载终止');\n          this.updateModal = false;\n        });\n    },\n    downloadFile(url){\n      window.open(url, '_blank');\n    },\n\n    // 升级进度\n    getUpgradeProgress() {\n      upgradeProgressApi()\n        .then((res) => {\n          this.upgradeProgress = res.data;\n          this.downloadStatus = res.status;\n        })\n        .catch((res) => {\n          clearInterval(this.timer);\n          this.$Message.error(res.msg);\n        });\n    },\n    // 升级协议\n    getUpgradeAgreement() {\n      upgradeAgreementApi()\n        .then((res) => {\n          this.upgradeAgreement = res.data;\n          this.declaration = true;\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 升级状态\n    getUpgradeStatus() {\n      upgradeStatusApi()\n        .then((res) => {\n          this.upgradeStatus = res.data;\n          if(res.data.force_reminder){\n            this.declaration = true\n            this.getUpgradeAgreement()\n          }\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 立即更新\n    update(item) {\n      this.declaration = true;\n      if (item && this.$store.state.upgrade.toggleStatus == false) {\n        this.params_key = item.params_key;\n      }\n      // this.version = item.first_version + \".\" + item.second_version + \".\" + item.third_version + \".\" + item.fourth_version;\n      this.getUpgradeAgreement();\n    },\n    // 比较相同版本号\n    compare() {\n      this.upgradeList.map((ele, i) => {\n        this.$set(\n          this.upgradeList[i],\n          'mn',\n          ele.first_version + ele.second_version + ele.third_version + ele.fourth_version,\n        );\n\n        this.upgradeableList.map((item, i) => {\n          this.$set(\n            this.upgradeableList[i],\n            'mn',\n            item.first_version + item.second_version + item.third_version + item.fourth_version,\n          );\n        });\n        if (this.upgradeList[i].mn == this.upgradeableList[i].mn) {\n          this.$set(this.upgradeList[i], 'indexn', true);\n          this.$set(this.upgradeList[i], 'params_key', this.upgradeableList[i].package_key);\n          this.$set(this.upgradeableList[i], 'indexn', true);\n        }\n      });\n    },\n    // 同意\n    agree() {\n      this.declaration = false;\n      this.updateModal = true;\n      this.getdownload();\n      this.$store.commit(\"upgrade/TOGGLE_STATUS\",false)\n    },\n    reject(){\n      this.declaration = false\n      this.$store.commit(\"upgrade/TOGGLE_STATUS\",false)\n    },\n    back() {\n      this.updateModal = false;\n      // this.getUpgradeList();\n      clearInterval(this.timer);\n      AccountLogout()\n        .then((res) => {\n          this.$Message.success('您已成功退出');\n          this.$router.replace(this.$routeProStr + '/login');\n          localStorage.clear();\n          removeCookies('token');\n          removeCookies('expires_time');\n          removeCookies('uuid');\n          // window.location.reload()\n        })\n        .catch((res) => {});\n    },\n    backSure() {\n      this.updateModal = false;\n      clearInterval(this.timer);\n    },\n    cancel() {\n      this.updateModal = false;\n      clearInterval(this.timer);\n    },\n    // 导出备份文件\n    exports(item) {\n      let name =\n        item.title +\n        'v' +\n        item.first_version +\n        '.' +\n        item.second_version +\n        '.' +\n        item.third_version +\n        '.' +\n        item.fourth_version +\n        '.' +\n        item.upgrade_time;\n      let href = Setting.apiBaseURL + `/system/upgrade_export/${item.id}/file`;\n      axios({\n        method: 'get',\n        url: href,\n        responseType: 'blob',\n        headers: {\n          'Authori-zation': 'Bearer ' + getCookies('token'),\n        },\n      }).then((res) => {\n        var blob = new Blob([res.data], {\n          type: 'application/octet-stream;charset=UTF-8',\n        });\n        var downloadElement = document.createElement('a');\n        // 下载的文件名\n        downloadElement.download = `${name}.zip`;\n        // 创建下载的链接\n        downloadElement.href = window.URL.createObjectURL(blob);\n        // 点击下载\n        downloadElement.click();\n        document.body.appendChild(downloadElement);\n        // 下载完成移除元素\n        document.body.removeChild(downloadElement);\n        // 释放掉blob对象\n        window.URL.revokeObjectURL(downloadElement.href);\n      });\n    },\n    handleDownload(item) {\n      let name =\n        item.title +\n        'v' +\n        item.first_version +\n        '.' +\n        item.second_version +\n        '.' +\n        item.third_version +\n        '.' +\n        item.fourth_version +\n        '.' +\n        item.upgrade_time;\n      let href = Setting.apiBaseURL + `/system/upgrade_export/${item.id}/data`;\n      axios({\n        method: 'get',\n        url: href,\n        responseType: 'blob',\n        headers: {\n          'Authori-zation': 'Bearer ' + getCookies('token'),\n        },\n      }).then((res) => {\n        var blob = new Blob([res.data], {\n          type: 'application/octet-stream;charset=UTF-8',\n        });\n        var downloadElement = document.createElement('a');\n        // 下载的文件名\n        downloadElement.download = `${name}.gz`;\n        // 创建下载的链接\n        downloadElement.href = window.URL.createObjectURL(blob);\n        // 点击下载\n        downloadElement.click();\n        document.body.appendChild(downloadElement);\n        // 下载完成移除元素\n        document.body.removeChild(downloadElement);\n        // 释放掉blob对象\n        window.URL.revokeObjectURL(downloadElement.href);\n      });\n    },\n    quearyEvear(id, index) {\n      this.dynamic = index;\n    },\n  },\n  destroyed() {\n    //销毁\n    clearInterval(tihs.timer);\n  },\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.active {\n  padding: 6px 0;\n  // background-color: #eee !important;\n}\n\n.active .ivu-collapse-simple {\n  // background-color: #eee !important;\n}\n\n.active .ivu-collapse-content {\n  // background-color: #eee !important;\n}\n\n.active .ivu-timeline-item-head-custom {\n  // background-color: #fff !important;\n  // z-index 9999\n}\n\n.active .btn {\n  top: 50px;\n}\n\n.primary {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n}\n\n.upgrade .header {\n  font-size: 12px;\n  color: #000;\n  // border-bottom:1px dotted rgba(221,221,221,1);\n  // padding-bottom: 25px;\n}\n\n.upgrade .header .v {\n  color: #1890FF;\n  margin-left: 10px;\n}\n\n.upgrade .header .num {\n  color: #1890FF;\n  font-size: 24px;\n}\n\n.upgrade .header .info {\n  color: #999999;\n}\n\n.upgrade .header .title {\n  color: #999999;\n  display: flex;\n}\n\n.upgrade .header .info ul {\n  color: #999999;\n  display: flex;\n  margin-left: 14px;\n}\n\n.upgrade .header .info ul li::marker {\n  color: red;\n}\n\n.upgrade .header .info ul li+li {\n  margin-left: 40px;\n}\n\n.upgrade .contentTime .acea-row {\n  padding: 5px;\n}\n\n.upgrade .contentTime .list {\n  position: relative;\n  width: 85%;\n}\n\n.upgrade .contentTime .info {\n  font-size: 12px !important;\n  color: #999 !important;\n  margin-top: 13px;\n}\n\n.upgrade .contentTime .info li {\n  list-style-type: disc;\n  margin-left: 16px;\n  line-height: 26px;\n  list-style: none;\n}\n\n.upgrade .contentTime .collapse {\n  width: 100%;\n}\n\n.upgrade .contentTime .ivu-collapse {\n  border: 0 !important;\n}\n\n.upgrade .contentTime .ivu-collapse > .ivu-collapse-item > .ivu-collapse-header {\n  height: unset !important;\n  line-height: 20px !important;\n  border: 0 !important;\n  font-size: 16px !important;\n  color: #333333;\n  font-weight: 600;\n  // background: #eee;\n}\n\n.upgrade .contentTime .ivu-collapse > .ivu-collapse-item > .ivu-collapse-header > i {\n  color: #BBBBBB !important;\n  margin-left: 9px;\n}\n\n.upgrade .contentTime .ivu-collapse > .ivu-collapse-item.ivu-collapse-item-active > .ivu-collapse-header > i {\n  transform: rotate(180deg);\n}\n\n.upgrade .contentTime {\n  margin-top: 30px;\n  position: relative;\n}\n\n.upgrade .contentTime .btn {\n  position: absolute;\n  top: 0;\n  right: 60px;\n  z-index: 99;\n}\n\n.upgrade .contentTime .btn1 {\n  position: absolute;\n  top: 0;\n  right: -29px;\n  z-index: 99;\n  margin-left: 14px;\n}\n\n.upgrade .contentTime .time {\n  font-size: 14px;\n  line-height: 14px;\n  color: #999;\n  text-align: right;\n  padding-right: 28px;\n  min-width: 150px;\n}\n\n.upgrade .contentTime .ivu-timeline-item:after {\n  content: ' ';\n  position: absolute;\n  top: 13px;\n  left: 6.5px;\n  width: 1px;\n  height: calc(100% - 13px);\n  background-color: #e8eaec;\n}\n\n.upgrade .contentTime:nth-child(2n) .ivu-timeline-item-head-custom {\n  z-index: 2;\n  font-size: 16px;\n  color: #DDDCDD;\n  // background: #eee;\n  margin-left: 12px;\n  margin-top: 10px;\n}\n\n.ivu-timeline-item-head-custom {\n  left: -24px;\n}\n.upgrade .contentTimed .on{\n  display:flex;\n  flex-wrap: nowrap;\n}\n.upgrade .contentTime .on:first-child .ivu-timeline-item-head-custom {\n  color: #1890FF;\n  font-size: 18px;\n}\n/deep/ .ivu-collapse > .ivu-collapse-item > .ivu-collapse-header{\n  line-height: 20px;\n\n}\n.upgrade .contentTimed .on .ivu-collapse > .ivu-collapse-item > .ivu-collapse-header {\n  color: #1890FF;\n}\n\n.on:first-child .ivu-collapse-header {\n  color: #1890FF !important;\n}\n\n.upgrade .contentTime .off:first-child .ivu-timeline-item-head-custom {\n  color: #1890FF;\n  font-size: 18px;\n}\n\n.off:first-child .ivu-collapse-header {\n  color: #1890FF !important;\n}\n\n.off:first-child .time {\n  color: #1890FF !important;\n}\n\n.header-modal {\n  background: url('../../../assets/images/bg.png') no-repeat;\n  background-size: 100% 100%;\n  text-align: center;\n  border-radius: 6px 6px 0 0;\n}\n\n.ivu-modal{\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.header-modal2 {\n  background: url('../../../assets/images/bg2.png') no-repeat;\n  background-size: 100% 100%;\n  text-align: center;\n  border-radius: 6px 6px 0 0;\n}\n\n.ivu-modal-header {\n  padding: 0;\n  border-radius: 10px;\n  border: none;\n}\n\n.ivu-modal-header .header-modal2 {\n  height: 74px;\n  line-height: 74px;\n  font-size: 20px;\n  font-weight: 500;\n}\n\n.ivu-modal-header p, .ivu-modal-header-inner {\n  height: 96px;\n  color: #fff;\n  line-height: 96px;\n  font-size: 24px;\n}\n\n.describe {\n  text-align: center;\n  padding-top: 30px;\n\n  .success {\n    font-size: 20px;\n    color: #333333;\n    margin-top: 10px;\n  }\n}\n\n.ivu-modal-footer {\n  border: none;\n  display: flex;\n  justify-content: center;\n}\n\n.footer .ivu-btn {\n  width: 128px;\n  height: 40px;\n  border: none;\n}\n\n.cancel {\n  background: #EEEEEE;\n}\n\n.vertical-center-modal {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  .ivu-modal {\n    top: 0;\n  }\n}\n/deep/ .vertical-center-modal .ivu-modal-header{\n  padding: 0 !important;\n  border: none;\n}\n/deep/ .ivu-modal-content{\n  border-radius: 14px 14px 0 0;\n  overflow hidden\n}\n.footer {\n  display: flex;\n  justify-content: space-around;\n}\n\n.demo-i-circle-custom {\n  & h1 {\n    color: #CCCCCC;\n    font-size: 12px;\n    font-weight: normal;\n    line-height: 17px;\n  }\n\n  & p {\n    color: #2A7EFB;\n    font-size: 14px;\n    line-height: 20px;\n    margin: 6px 0;\n  }\n\n  & span {\n    display: block;\n    color: #CCCCCC;\n    font-size: 12px;\n    line-height: 17px;\n  }\n\n  & span i {\n    font-style: normal;\n    color: #3f414d;\n  }\n}\n\n.proportion {\n  font-size: 20px;\n  font-weight: 600;\n  color: #2A7EFB;\n  margin: 12px 0 6px;\n}\n\n.wait {\n  font-size: 12px;\n  font-weight: 400;\n  color: #999999;\n}\n\n.footer2 {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content center\n  align-items: center\n  flex-direction: column;\n\n  .confirm, .back {\n    width: 210px;\n    height: 40px;\n  }\n\n  .back {\n    border: none;\n  }\n}\n\n.describe {\n  padding-top: 0;\n}\n\n.describe h2 {\n  font-size: 22px;\n  font-weight: 400;\n  color: #333333;\n  margin-bottom: 12px;\n}\n\n.acea-row.row-top {\n  position: relative;\n  overflow: hidden;\n}\n\n.update {\n  margin: 27px 16px;\n}\n</style>\n"]}]}