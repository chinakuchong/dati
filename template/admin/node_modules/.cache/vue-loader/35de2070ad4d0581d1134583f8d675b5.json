{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/product/productList/taoBao.vue?vue&type=style&index=0&id=19e32458&scoped=true&lang=stylus&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/product/productList/taoBao.vue","mtime":1689324015249},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/@vue/cli-service/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgovZGVlcC8uaXZ1LWZvcm0taXRlbS1jb250ZW50IHsKICBsaW5lLWhlaWdodDogdW5zZXQgIWltcG9ydGFudDsKfQoKLkJveCAuaXZ1LXJhZGlvLXdyYXBwZXIgewogIG1hcmdpbi1yaWdodDogMjVweDsKfQoKLkJveCAubnVtUHV0IHsKICB3aWR0aDogMTAwJSAhaW1wb3J0YW50Owp9Ci5hZGR7CiAgY29sb3I6ICMyRDhjRjA7CiAgY3Vyc29yIHBvaW50ZXIKfQoubHVuQm94IHsKICAvKiB3aWR0aCA4MHB4ICovCiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGJvcmRlcjogMXB4IHNvbGlkICMwYmIyMGM7Cn0KCi5waWN0cnVlQm94IHsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7Cn0KCi5waWN0cnVlIHsKICB3aWR0aDogODVweDsKICBoZWlnaHQ6IDg1cHg7CiAgYm9yZGVyOiAxcHggZG90dGVkIHJnYmEoMCwgMCwgMCwgMC4xKTsKICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGN1cnNvcjogcG9pbnRlcjsKCiAgaW1nIHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogIH0KfQoKLnBpY3RydWVUYWIgewogIHdpZHRoOiA0MHB4ICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiA0MHB4ICFpbXBvcnRhbnQ7Cn0KCi51cExvYWQgewogIHdpZHRoOiA0MHB4OwogIGhlaWdodDogNDBweDsKICBib3JkZXI6IDFweCBkb3R0ZWQgcmdiYSgwLCAwLCAwLCAwLjEpOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMDIpOwogIGN1cnNvcjogcG9pbnRlcjsKfQoKLml2dS10YWJsZS13cmFwcGVyIHsKICBib3JkZXItbGVmdDogMXB4IHNvbGlkICNkY2RlZTI7CiAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkY2RlZTI7Cn0KCi5mdCB7CiAgY29sb3I6IHJlZDsKfQo="},{"version":3,"sources":["taoBao.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+sBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"taoBao.vue","sourceRoot":"src/pages/product/productList","sourcesContent":["<template>\n  <div class=\"Box\">\n    <Card>\n      <div>\n        生成的商品默认是没有上架的，请手动上架商品！\n        <a href=\"http://help.crmeb.net/crmeb-v4/1863579\" v-if=\"copyConfig.copy_type == 2\" target=\"_blank\"\n          >如何配置密钥</a\n        >\n        <span v-else\n          >您当前剩余{{ copyConfig.copy_num }}条采集次数，<a class=\"add\" @click=\"mealPay('copy')\">增加采集次数</a></span\n        >\n      </div>\n      <div>商品采集设置：设置 > 系统设置 > 第三方接口设置 > 采集商品配置</div>\n    </Card>\n    <Form\n      class=\"formValidate mt20\"\n      ref=\"formValidate\"\n      :model=\"formValidate\"\n      :rules=\"ruleInline\"\n      :label-width=\"120\"\n      label-position=\"right\"\n      @submit.native.prevent\n    >\n      <Row :gutter=\"24\" type=\"flex\">\n        <!--<Col span=\"24\">-->\n        <!--<FormItem label=\"\"  label-for=\"\">-->\n        <!--<RadioGroup v-model=\"artFrom.type\">-->\n        <!--<Radio label=\"taobao\">淘宝</Radio>-->\n        <!--<Radio label=\"tmall\">天猫</Radio>-->\n        <!--<Radio label=\"jd\">京东</Radio>-->\n        <!--<Radio label=\"pdd\">拼多多</Radio>-->\n        <!--<Radio label=\"suning\">苏宁</Radio>-->\n        <!--<Radio label=\"1688\">1688</Radio>-->\n        <!--</RadioGroup>-->\n        <!--</FormItem>-->\n        <!--</Col>-->\n        <Col span=\"15\">\n          <FormItem label=\"链接地址：\">\n            <Input\n              search\n              enter-button=\"确定\"\n              v-model=\"soure_link\"\n              placeholder=\"请输入链接地址\"\n              class=\"numPut\"\n              @on-search=\"add\"\n            />\n          </FormItem>\n        </Col>\n        <div>\n          <div v-if=\"isData\">\n            <Col span=\"24\" class=\"\">\n              <FormItem label=\"商品名称：\" prop=\"store_name\">\n                <Input v-model=\"formValidate.store_name\" placeholder=\"请输入商品名称\" />\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"商品简介：\" prop=\"store_info\" label-for=\"store_info\">\n                <Input v-model=\"formValidate.store_info\" type=\"textarea\" :rows=\"3\" placeholder=\"请输入商品简介\" />\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"商品分类：\" prop=\"cate_id\">\n                <!-- <Select v-model=\"formValidate.cate_id\" multiple>\n                  <Option v-for=\"item in treeSelect\" :disabled=\"item.pid === 0\" :value=\"item.id\" :key=\"item.id\">{{\n                    item.html + item.cate_name\n                  }}</Option>\n                </Select> -->\n                <el-cascader\n                  v-model=\"formValidate.cate_id\"\n                  size=\"small\"\n                  :options=\"treeSelect\"\n                  :props=\"{ multiple: true, emitPath: false }\"\n                  clearable\n                ></el-cascader>\n              </FormItem>\n            </Col>\n            <Col v-bind=\"grid\">\n              <FormItem label=\"商品关键字：\" prop=\"keyword\" label-for=\"keyword\">\n                <Input v-model=\"formValidate.keyword\" placeholder=\"请输入商品关键字\" />\n              </FormItem>\n            </Col>\n            <Col v-bind=\"grid\">\n              <FormItem label=\"单位：\" prop=\"unit_name\" label-for=\"unit_name\">\n                <Input v-model=\"formValidate.unit_name\" placeholder=\"请输入单位\" />\n              </FormItem>\n            </Col>\n            <Col v-bind=\"grid\">\n              <FormItem label=\"虚拟销量：\" label-for=\"ficti\">\n                <InputNumber class=\"perW100\" v-model=\"formValidate.ficti\" placeholder=\"请输入虚拟销量\" />\n              </FormItem>\n            </Col>\n            <Col v-bind=\"grid\">\n              <FormItem label=\"积分：\" label-for=\"give_integral\">\n                <InputNumber class=\"perW100\" v-model=\"formValidate.give_integral\" placeholder=\"请输入积分\" />\n              </FormItem>\n            </Col>\n            <Col v-bind=\"grid\">\n              <FormItem label=\"运费模板：\" prop=\"temp_id\">\n                <Select v-model=\"formValidate.temp_id\" clearable>\n                  <Option v-for=\"(item, index) in templateList\" :value=\"item.id\" :key=\"index\">{{ item.name }}</Option>\n                </Select>\n              </FormItem>\n            </Col>\n            <!--<Col v-bind=\"grid\">-->\n            <!--<FormItem label=\"邮费：\"  label-for=\"postage\">-->\n            <!--<InputNumber  v-model=\"formValidate.postage\" placeholder=\"请输入邮费\"  />-->\n            <!--</FormItem>-->\n            <!--</Col>-->\n            <Col span=\"24\">\n              <FormItem label=\"商品图：\">\n                <div class=\"pictrueBox\">\n                  <div class=\"pictrue\" v-if=\"formValidate.image\" v-viewer>\n                    <img v-lazy=\"formValidate.image\" />\n                  </div>\n                </div>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"商品轮播图：\">\n                <div class=\"acea-row\" v-viewer>\n                  <div\n                    class=\"lunBox mr15\"\n                    v-for=\"(item, index) in formValidate.slider_image\"\n                    :key=\"index\"\n                    draggable=\"true\"\n                    @dragstart=\"handleDragStart($event, item)\"\n                    @dragover.prevent=\"handleDragOver($event, item)\"\n                    @dragenter=\"handleDragEnter($event, item)\"\n                    @dragend=\"handleDragEnd($event, item)\"\n                  >\n                    <div class=\"pictrue\"><img v-lazy=\"item\" /></div>\n                    <ButtonGroup size=\"small\">\n                      <Button @click.native=\"checked(item, index)\">主图</Button>\n                      <Button @click.native=\"handleRemove(index)\">移除</Button>\n                    </ButtonGroup>\n                  </div>\n                </div>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"批量设置：\" class=\"labeltop\" v-if=\"formValidate.attrs\">\n                <Col :xl=\"23\" :lg=\"24\" :md=\"24\" :sm=\"24\" :xs=\"24\">\n                  <FormItem>\n                    <Table :data=\"oneFormBatch\" :columns=\"columnsBatch\" border>\n                      <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                        <div class=\"acea-row row-middle row-center-wrapper\" @click=\"modalPicTap('dan', 'duopi', index)\">\n                          <div class=\"pictrue pictrueTab\" v-if=\"oneFormBatch[0].pic\">\n                            <img v-lazy=\"oneFormBatch[0].pic\" />\n                          </div>\n                          <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                            <Icon type=\"ios-camera-outline\" size=\"21\" class=\"iconfont\" />\n                          </div>\n                        </div>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"price\">\n                        <InputNumber v-model=\"oneFormBatch[0].price\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"cost\">\n                        <InputNumber v-model=\"oneFormBatch[0].cost\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"ot_price\">\n                        <InputNumber v-model=\"oneFormBatch[0].ot_price\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"stock\">\n                        <InputNumber v-model=\"oneFormBatch[0].stock\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"bar_code\">\n                        <Input v-model=\"oneFormBatch[0].bar_code\"></Input>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"weight\">\n                        <InputNumber v-model=\"oneFormBatch[0].weight\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"volume\">\n                        <InputNumber v-model=\"oneFormBatch[0].volume\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"action\">\n                        <a @click=\"batchAdd\">添加</a>\n                        <Divider type=\"vertical\" />\n                        <a @click=\"batchDel\">清空</a>\n                      </template>\n                    </Table>\n                  </FormItem>\n                </Col>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"商品规格：\" props=\"spec_type\" label-for=\"spec_type\">\n                <!-- 单规格表格-->\n                <Col :xl=\"23\" :lg=\"24\" :md=\"24\" :sm=\"24\" :xs=\"24\">\n                  <FormItem>\n                    <Table :data=\"items\" :columns=\"columns\" border>\n                      <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                        <div class=\"acea-row row-middle row-center-wrapper\" @click=\"modalPicTap('dan', index)\">\n                          <div class=\"pictrue pictrueTab\" v-if=\"formValidate.attrs[index].pic\">\n                            <img v-lazy=\"formValidate.attrs[index].pic\" />\n                          </div>\n                          <div class=\"upLoad upLoadTab acea-row row-center-wrapper\" v-else>\n                            <Icon type=\"ios-camera-outline\" size=\"26\" class=\"iconfont\" />\n                          </div>\n                        </div>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"price\">\n                        <InputNumber v-model=\"formValidate.attrs[index].price\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"cost\">\n                        <InputNumber v-model=\"formValidate.attrs[index].cost\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"ot_price\">\n                        <InputNumber v-model=\"formValidate.attrs[index].ot_price\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"stock\">\n                        <InputNumber v-model=\"formValidate.attrs[index].stock\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"bar_code\">\n                        <Input v-model=\"formValidate.attrs[index].bar_code\"></Input>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"weight\">\n                        <InputNumber v-model=\"formValidate.attrs[index].weight\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"volume\">\n                        <InputNumber v-model=\"formValidate.attrs[index].volume\" :min=\"0\" class=\"priceBox\"></InputNumber>\n                      </template>\n                      <template slot-scope=\"{ row, index }\" slot=\"action\">\n                        <a @click=\"delAttrTable(index)\">删除</a>\n                      </template>\n                    </Table>\n                  </FormItem>\n                </Col>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem label=\"商品详情：\">\n                <WangEditor\n                  style=\"width: 100%\"\n                  :content=\"formValidate.description\"\n                  @editorContent=\"getEditorContent\"\n                ></WangEditor>\n              </FormItem>\n            </Col>\n            <Col span=\"24\">\n              <FormItem>\n                <Button type=\"primary\" :loading=\"modal_loading\" class=\"submission\" @click=\"handleSubmit('formValidate')\"\n                  >提交</Button\n                >\n              </FormItem>\n            </Col>\n          </div>\n          <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n        </div>\n      </Row>\n    </Form>\n    <Modal\n      v-model=\"modalPic\"\n      width=\"950px\"\n      scrollable\n      footer-hide\n      closable\n      title=\"上传商品图\"\n      :mask-closable=\"false\"\n      :z-index=\"9999\"\n    >\n      <uploadPictures\n        :isChoice=\"isChoice\"\n        @getPic=\"getPic\"\n        :gridBtn=\"gridBtn\"\n        :gridPic=\"gridPic\"\n        v-if=\"modalPic\"\n      ></uploadPictures>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { crawlFromApi, cascaderListApi, crawlSaveApi, productGetTemplateApi, copyConfigApi } from '@/api/product';\nimport uploadPictures from '@/components/uploadPictures';\nimport WangEditor from '@/components/wangEditor/index.vue';\n\nexport default {\n  name: 'taoBao',\n  data() {\n    return {\n      // 批量设置表格data\n      oneFormBatch: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n        },\n      ],\n      columnsBatch: [\n        {\n          title: '图片',\n          slot: 'pic',\n          align: 'center',\n          minWidth: 80,\n        },\n        {\n          title: '售价',\n          slot: 'price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '成本价',\n          slot: 'cost',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '原价',\n          slot: 'ot_price',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '库存',\n          slot: 'stock',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '商品编号',\n          slot: 'bar_code',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '重量（KG）',\n          slot: 'weight',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '体积(m³)',\n          slot: 'volume',\n          align: 'center',\n          minWidth: 95,\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          align: 'center',\n          minWidth: 140,\n        },\n      ],\n      modal_loading: false,\n      images: '',\n      soure_link: '',\n      modalPic: false,\n      isChoice: '',\n      spinShow: false,\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      columns: [],\n      treeSelect: [],\n      ruleInline: {\n        cate_id: [\n          {\n            required: true,\n            message: '请选择商品分类',\n            trigger: 'change',\n            type: 'array',\n            min: '1',\n          },\n        ],\n        temp_id: [\n          {\n            required: true,\n            message: '请选择运费模板',\n            trigger: 'change',\n            type: 'number',\n          },\n        ],\n      },\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      grid2: {\n        xl: 12,\n        lg: 12,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      formValidate: {\n        store_name: '',\n        cate_id: [],\n        temp_id: '',\n        keyword: '',\n        unit_name: '',\n        store_info: '',\n        image: '',\n        slider_image: [],\n        description: '',\n        ficti: 0,\n        give_integral: 0,\n        is_show: 0,\n        price: 0,\n        cost: 0,\n        ot_price: 0,\n        stock: 0,\n        soure_link: '',\n        description_images: '',\n        postage: 0,\n        attrs: [],\n        items: [],\n      },\n      items: [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n        },\n      ],\n      templateList: [],\n      copyConfig: {\n        copy_type: 2,\n        copy_num: 0,\n      },\n      isData: false,\n      artFrom: {\n        type: 'taobao',\n        url: '',\n      },\n      tableIndex: 0,\n      content: '',\n    };\n  },\n  components: { WangEditor, uploadPictures },\n  computed: {},\n\n  created() {\n    this.goodsCategory();\n  },\n  mounted() {\n    this.productGetTemplate();\n    this.getCopyConfig();\n  },\n  methods: {\n    mealPay(val) {\n      this.$router.push({\n        path: this.$routeProStr + '/setting/sms/sms_pay/index',\n        query: { type: val },\n      });\n    },\n    batchDel() {\n      this.oneFormBatch = [\n        {\n          pic: '',\n          price: 0,\n          cost: 0,\n          ot_price: 0,\n          stock: 0,\n          bar_code: '',\n          weight: 0,\n          volume: 0,\n        },\n      ];\n    },\n    batchAdd() {\n      let formBatch = this.oneFormBatch[0];\n      this.$set(\n        this.formValidate,\n        'attrs',\n        this.formValidate.attrs.map((item) => {\n          if (formBatch.pic) {\n            item.pic = formBatch.pic;\n          }\n          if (formBatch.price > 0) {\n            item.price = formBatch.price;\n          }\n          if (formBatch.cost > 0) {\n            item.cost = formBatch.cost;\n          }\n          if (formBatch.ot_price > 0) {\n            item.ot_price = formBatch.ot_price;\n          }\n          if (formBatch.stock > 0) {\n            item.stock = formBatch.stock;\n          }\n          if (formBatch.bar_code) {\n            item.bar_code = formBatch.bar_code;\n          }\n          if (formBatch.weight) {\n            item.weight = formBatch.weight;\n          }\n          if (formBatch.volume) {\n            item.weight = formBatch.volume;\n          }\n          return item;\n        }),\n      );\n    },\n    getEditorContent(data) {\n      this.content = data;\n    },\n    // 删除表格中的属性\n    delAttrTable(index) {\n      this.items.splice(index, 1);\n    },\n    // 获取运费模板；\n    productGetTemplate() {\n      productGetTemplateApi().then((res) => {\n        this.templateList = res.data;\n      });\n    },\n    getCopyConfig() {\n      copyConfigApi().then((res) => {\n        this.copyConfig.copy_type = res.data.copy_type;\n        this.copyConfig.copy_num = res.data.copy_num;\n      });\n    },\n    // 删除图片\n    handleRemove(i) {\n      this.formValidate.slider_image.splice(i, 1);\n    },\n    // 选择主图\n    checked(item, index) {\n      this.formValidate.image = item;\n    },\n    // 商品分类；\n    goodsCategory() {\n      cascaderListApi(1)\n        .then((res) => {\n          this.treeSelect = res.data;\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 生成表单\n    add() {\n      if (this.soure_link) {\n        var reg = /(http|ftp|https):\\/\\/[\\w\\-_]+(\\.[\\w\\-_]+)+([\\w\\-\\.,@?^=%&:/~\\+#]*[\\w\\-\\@?^=%&/~\\+#])?/;\n        if (!reg.test(this.soure_link)) {\n          return this.$Message.warning('请输入以http开头的地址！');\n        }\n        this.spinShow = true;\n        this.artFrom.url = this.soure_link;\n        crawlFromApi(this.artFrom)\n          .then((res) => {\n            let info = res.data.info;\n            this.columns = info.info.header;\n            this.formValidate = info;\n            this.formValidate.soure_link = this.soure_link;\n            this.formValidate.attrs = info.info.value;\n            if (this.formValidate.image) {\n              this.oneFormBatch[0].pic = this.formValidate.image;\n            }\n            this.items = this.formValidate.attrs;\n            this.isData = true;\n            this.spinShow = false;\n          })\n          .catch((res) => {\n            this.spinShow = false;\n            this.$Message.error(res.msg);\n          });\n      } else {\n        this.$Message.warning('请输入链接地址！');\n      }\n    },\n    // 提交\n    handleSubmit(name) {\n      this.formValidate.description = this.content;\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          this.modal_loading = true;\n          // this.formValidate.attrs = [\n          //     {\n          //         pic: this.images,\n          //         price: this.formValidate.price,\n          //         cost: this.formValidate.cost,\n          //         ot_price: this.formValidate.ot_price,\n          //         stock: this.formValidate.stock,\n          //         bar_code: this.formValidate.bar_code,\n          //         weight: this.formValidate.weight,\n          //         volume: this.formValidate.volume\n          //     }\n          // ];\n          // this.formValidate.items = [];\n          crawlSaveApi(this.formValidate)\n            .then((res) => {\n              this.$Message.success('商品默认为不上架状态请手动上架商品!');\n              setTimeout(() => {\n                this.modal_loading = false;\n              }, 500);\n              setTimeout(() => {\n                this.$emit('on-close');\n              }, 600);\n            })\n            .catch((res) => {\n              this.modal_loading = false;\n              this.$Message.error(res.msg);\n            });\n        } else {\n          if (!this.formValidate.cate_id) {\n            this.$Message.warning('请填写商品分类！');\n          }\n        }\n      });\n    },\n    // 点击商品图\n    modalPicTap(tit, index) {\n      this.modalPic = true;\n      this.isChoice = tit === 'dan' ? '单选' : '多选';\n      this.tableIndex = index;\n    },\n    // 获取单张图片信息\n    getPic(pc) {\n      if (this.tableIndex === 'duopi') {\n        this.oneFormBatch[0].pic = pc.att_dir;\n      } else {\n        this.formValidate.attrs[this.tableIndex].pic = pc.att_dir;\n      }\n      this.modalPic = false;\n    },\n    handleDragStart(e, item) {\n      this.dragging = item;\n    },\n    handleDragEnd(e, item) {\n      this.dragging = null;\n    },\n    // 首先把div变成可以放置的元素，即重写dragenter/dragover\n    handleDragOver(e) {\n      // e.dataTransfer.dropEffect=\"move\";//在dragenter中针对放置目标来设置!\n      e.dataTransfer.dropEffect = 'move';\n    },\n    handleDragEnter(e, item) {\n      // 为需要移动的元素设置dragstart事件\n      e.dataTransfer.effectAllowed = 'move';\n      if (item === this.dragging) {\n        return;\n      }\n      const newItems = [...this.formValidate.slider_image];\n      const src = newItems.indexOf(this.dragging);\n      const dst = newItems.indexOf(item);\n      newItems.splice(dst, 0, ...newItems.splice(src, 1));\n      this.formValidate.slider_image = newItems;\n    },\n    // 添加自定义弹窗\n    addCustomDialog(editorId) {\n      window.UE.registerUI(\n        'test-dialog',\n        function (editor, uiName) {\n          // 创建 dialog\n          let dialog = new window.UE.ui.Dialog({\n            iframeUrl: this.$routeProStr + '/widget.images/index.html?fodder=dialog',\n            editor: editor,\n            name: uiName,\n            title: '上传图片',\n            cssRules: 'width:960px;height:550px;padding:20px;',\n          });\n          this.dialog = dialog;\n          let btn = new window.UE.ui.Button({\n            name: 'dialog-button',\n            title: '上传图片',\n            cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n            onclick: function () {\n              // 渲染dialog\n              dialog.render();\n              dialog.open();\n            },\n          });\n          return btn;\n        },\n        37,\n      );\n      // window.UE.registerUI('test-dialog', function (editor, uiName) {\n      //     let dialog = new window.UE.ui.Dialog({\n      //         iframeUrl: '/admin/widget.images/index.html?fodder=dialog',\n      //         editor: editor,\n      //         name: uiName,\n      //         title: '上传图片',\n      //         cssRules: 'width:960px;height:550px;padding:20px;'\n      //     })\n      //     this.dialog = dialog\n      //     var btn = new window.UE.ui.Button({\n      //         name: 'dialog-button',\n      //         title: '上传图片',\n      //         cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n      //         onclick: function () {\n      //             dialog.render()\n      //             dialog.open()\n      //         }\n      //     })\n      //     return btn\n      // }, 37)\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n/deep/.ivu-form-item-content {\n  line-height: unset !important;\n}\n\n.Box .ivu-radio-wrapper {\n  margin-right: 25px;\n}\n\n.Box .numPut {\n  width: 100% !important;\n}\n.add{\n  color: #2D8cF0;\n  cursor pointer\n}\n.lunBox {\n  /* width 80px */\n  display: flex;\n  flex-direction: column;\n  border: 1px solid #0bb20c;\n}\n\n.pictrueBox {\n  display: inline-block;\n}\n\n.pictrue {\n  width: 85px;\n  height: 85px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100%;\n  }\n}\n\n.pictrueTab {\n  width: 40px !important;\n  height: 40px !important;\n}\n\n.upLoad {\n  width: 40px;\n  height: 40px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.02);\n  cursor: pointer;\n}\n\n.ivu-table-wrapper {\n  border-left: 1px solid #dcdee2;\n  border-top: 1px solid #dcdee2;\n}\n\n.ft {\n  color: red;\n}\n</style>\n"]}]}