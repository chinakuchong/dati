{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/system/group/components/groupFrom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/system/group/components/groupFrom.vue","mtime":1689324015276},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdyb3VwQWRkQXBpLCBncm91cEluZm9BcGkgfSBmcm9tICdAL2FwaS9zeXN0ZW0nOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ21lbnVzRnJvbScsCiAgcHJvcHM6IHsKICAgIGdyb3VwSWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwLAogICAgfSwKICAgIHRpdGxlRnJvbTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnLAogICAgfSwKICAgIGFkZElkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGljb25WYWw6ICcnLAogICAgICBncmlkOiB7CiAgICAgICAgeGw6IDcsCiAgICAgICAgbGc6IDcsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgIG1vZGFsMTI6IGZhbHNlLAogICAgICBydWxlVmFsaWRhdGU6IHsKICAgICAgICBuYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeaVsOaNrue7hOWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBjb25maWdfbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmlbDmja7lrZfmrrUnLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgaW5mbzogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmlbDmja7nroDku4snLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgbmFtZXM6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5a2X5q615ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICB9LAogICAgICBGcm9tRGF0YTogW10sCiAgICAgIHZhbGlkczogZmFsc2UsCiAgICAgIGxpc3QyOiBbXSwKICAgICAgZm9ybVZhbGlkYXRlOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgY29uZmlnX25hbWU6ICcnLAogICAgICAgIGluZm86ICcnLAogICAgICAgIHR5cGVsaXN0OiBbXSwKICAgICAgICBjYXRlX2lkOiAwLAogICAgICB9LAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBhZGRJZChuKSB7CiAgICAgIGlmIChuID09PSAnYWRkSWQnKSB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudHlwZWxpc3QgPSBbXTsKICAgICAgfQogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOeCueWHu+a3u+WKoOWtl+autQogICAgYWRkVHlwZSgpIHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudHlwZWxpc3QucHVzaCh7CiAgICAgICAgbmFtZTogewogICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgIH0sCiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICB9LAogICAgICAgIHR5cGU6IHsKICAgICAgICAgIHZhbHVlOiAnJywKICAgICAgICB9LAogICAgICAgIHBhcmFtOiB7CiAgICAgICAgICBwbGFjZWhvbGRlcjogJ+WPguaVsOaWueW8j+S+i+WmgjpcbjE955m96ImyXG4yPee6ouiJslxuMz3pu5HoibInLAogICAgICAgICAgdmFsdWU6ICcnLAogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOWtl+autQogICAgZGVsR3JvdXAoaW5kZXgpIHsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUudHlwZWxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDor6bmg4UKICAgIGZyb21EYXRhKGlkKSB7CiAgICAgIGdyb3VwSW5mb0FwaShpZCkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZSA9IHJlcy5kYXRhLmluZm87CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDmj5DkuqQKICAgIGhhbmRsZVN1Ym1pdChuYW1lKSB7CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIHVybDogdGhpcy5ncm91cElkID8gYC9zZXR0aW5nL2dyb3VwLyR7dGhpcy5ncm91cElkfWAgOiAnc2V0dGluZy9ncm91cCcsCiAgICAgICAgbWV0aG9kOiB0aGlzLmdyb3VwSWQgPyAncHV0JyA6ICdwb3N0JywKICAgICAgICBkYXRhczogdGhpcy5mb3JtVmFsaWRhdGUsCiAgICAgIH07CiAgICAgIHRoaXMuJHJlZnNbbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUudHlwZWxpc3QubGVuZ3RoID09PSAwKSByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign6K+35re75Yqg5a2X5q615ZCN56ew77ya5aeT5ZCN77yBJyk7CiAgICAgICAgICBncm91cEFkZEFwaShkYXRhKQogICAgICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kcmVmc1tuYW1lXS5yZXNldEZpZWxkcygpOwogICAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnR5cGVsaXN0ID0gW107CiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnZ2V0TGlzdCcpOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAoIXRoaXMuZm9ybVZhbGlkYXRlLm5hbWUpIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfor7fmt7vliqDmlbDmja7nu4TlkI3np7DvvIEnKTsKICAgICAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGUuY29uZmlnX25hbWUpIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfor7fmt7vliqDmlbDmja7lrZfmrrXvvIEnKTsKICAgICAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGUuaW5mbykgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+ivt+a3u+WKoOaVsOaNrueugOS7i++8gScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVzZXQoKSB7CiAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICAgIHRoaXMuJHJlZnNbJ2Zvcm1WYWxpZGF0ZSddLnJlc2V0RmllbGRzKCk7CiAgICAgIHRoaXMuJGVtaXQoJ2NsZWFyRnJvbScpOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7fSwKICBtb3VudGVkKCkge30sCn07Cg=="},{"version":3,"sources":["groupFrom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"groupFrom.vue","sourceRoot":"src/pages/system/group/components","sourcesContent":["<template>\n  <div>\n    <Modal\n      v-model=\"modals\"\n      width=\"850\"\n      scrollable\n      footer-hide\n      closable\n      :title=\"titleFrom\"\n      :mask-closable=\"false\"\n      @on-cancel=\"handleReset\"\n    >\n      <Form ref=\"formValidate\" :model=\"formValidate\" :label-width=\"100\" :rules=\"ruleValidate\" @submit.native.prevent>\n        <Row type=\"flex\" :gutter=\"24\">\n          <Col span=\"24\">\n            <FormItem label=\"数据组名称：\" prop=\"name\">\n              <Input v-model=\"formValidate.name\" placeholder=\"请输入数据组名称\" style=\"width: 90%\"></Input>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"数据字段：\" prop=\"config_name\">\n              <Input v-model=\"formValidate.config_name\" placeholder=\"请输入数据字段\" style=\"width: 90%\"></Input>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"数据简介：\" prop=\"info\">\n              <Input v-model=\"formValidate.info\" placeholder=\"请输入数据简介\" style=\"width: 90%\"></Input>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <FormItem label=\"数类型：\" prop=\"cate_id\">\n              <RadioGroup v-model=\"formValidate.cate_id\">\n                <Radio :label=\"0\">默认</Radio>\n                <Radio :label=\"1\">数据</Radio>\n              </RadioGroup>\n            </FormItem>\n          </Col>\n          <Col span=\"24\" v-for=\"(item, index) in formValidate.typelist\" :key=\"index\">\n            <Col v-bind=\"grid\">\n              <FormItem\n                :label=\"'字段' + (index + 1) + '：'\"\n                :prop=\"'typelist.' + index + '.name.value'\"\n                :rules=\"{ required: true, message: '请输入字段名称：姓名', trigger: 'blur' }\"\n              >\n                <Input v-model=\"item.name.value\" placeholder=\"字段名称：姓名\"></Input>\n              </FormItem>\n            </Col>\n            <Col v-bind=\"grid\" class=\"goupBox\">\n              <FormItem\n                :prop=\"'typelist.' + index + '.title.value'\"\n                :rules=\"{ required: true, message: '请输入字段配置名', trigger: 'blur' }\"\n              >\n                <Input v-model=\"item.title.value\" placeholder=\"字段配置名：name\"></Input>\n              </FormItem>\n            </Col>\n            <Col v-bind=\"grid\" prop=\"type\" class=\"goupBox mr15\">\n              <FormItem\n                :prop=\"'typelist.' + index + '.type.value'\"\n                :rules=\"{ required: true, message: '请选择字段类型', trigger: 'change' }\"\n              >\n                <i-select placeholder=\"字段类型\" v-model=\"item.type.value\">\n                  <i-option value=\"input\">文本框</i-option>\n                  <i-option value=\"textarea\">多行文本框</i-option>\n                  <i-option value=\"radio\">单选框</i-option>\n                  <i-option value=\"checkbox\">多选框</i-option>\n                  <i-option value=\"select\">下拉选择</i-option>\n                  <i-option value=\"upload\">单图</i-option>\n                  <i-option value=\"uploads\">多图</i-option>\n                </i-select>\n              </FormItem>\n            </Col>\n            <Col span=\"1\">\n              <Icon type=\"ios-close-circle-outline\" class=\"cur\" @click=\"delGroup(index)\" />\n            </Col>\n            <Col\n              span=\"24\"\n              v-if=\"item.type.value === 'radio' || item.type.value === 'checkbox' || item.type.value === 'select'\"\n            >\n              <FormItem\n                :prop=\"'typelist.' + index + '.param.value'\"\n                :rules=\"{ required: true, message: '请输入参数方式', trigger: 'blur' }\"\n              >\n                <Input\n                  type=\"textarea\"\n                  :rows=\"4\"\n                  :placeholder=\"item.param.placeholder\"\n                  v-model=\"item.param.value\"\n                  style=\"width: 90%\"\n                ></Input>\n              </FormItem>\n            </Col>\n          </Col>\n          <Col>\n            <FormItem>\n              <Button type=\"primary\" @click=\"addType\">添加字段</Button>\n            </FormItem>\n          </Col>\n          <Col span=\"24\">\n            <Button type=\"primary\" long @click=\"handleSubmit('formValidate')\" :disabled=\"valids\">提交</Button>\n          </Col>\n        </Row>\n      </Form>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { groupAddApi, groupInfoApi } from '@/api/system';\nexport default {\n  name: 'menusFrom',\n  props: {\n    groupId: {\n      type: Number,\n      default: 0,\n    },\n    titleFrom: {\n      type: String,\n      default: '',\n    },\n    addId: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      iconVal: '',\n      grid: {\n        xl: 7,\n        lg: 7,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      modals: false,\n      modal12: false,\n      ruleValidate: {\n        name: [{ required: true, message: '请输入数据组名称', trigger: 'blur' }],\n        config_name: [{ required: true, message: '请输入数据字段', trigger: 'blur' }],\n        info: [{ required: true, message: '请输入数据简介', trigger: 'blur' }],\n        names: [{ required: true, message: '请输入字段名称', trigger: 'blur' }],\n      },\n      FromData: [],\n      valids: false,\n      list2: [],\n      formValidate: {\n        name: '',\n        config_name: '',\n        info: '',\n        typelist: [],\n        cate_id: 0,\n      },\n    };\n  },\n  watch: {\n    addId(n) {\n      if (n === 'addId') {\n        this.formValidate.typelist = [];\n      }\n    },\n  },\n  methods: {\n    // 点击添加字段\n    addType() {\n      this.formValidate.typelist.push({\n        name: {\n          value: '',\n        },\n        title: {\n          value: '',\n        },\n        type: {\n          value: '',\n        },\n        param: {\n          placeholder: '参数方式例如:\\n1=白色\\n2=红色\\n3=黑色',\n          value: '',\n        },\n      });\n    },\n    // 删除字段\n    delGroup(index) {\n      this.formValidate.typelist.splice(index, 1);\n    },\n    // 详情\n    fromData(id) {\n      groupInfoApi(id)\n        .then(async (res) => {\n          this.formValidate = res.data.info;\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 提交\n    handleSubmit(name) {\n      let data = {\n        url: this.groupId ? `/setting/group/${this.groupId}` : 'setting/group',\n        method: this.groupId ? 'put' : 'post',\n        datas: this.formValidate,\n      };\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          if (this.formValidate.typelist.length === 0) return this.$Message.error('请添加字段名称：姓名！');\n          groupAddApi(data)\n            .then(async (res) => {\n              this.$Message.success(res.msg);\n              this.modals = false;\n              this.$refs[name].resetFields();\n              this.formValidate.typelist = [];\n              this.$emit('getList');\n            })\n            .catch((res) => {\n              this.$Message.error(res.msg);\n            });\n        } else {\n          if (!this.formValidate.name) return this.$Message.error('请添加数据组名称！');\n          if (!this.formValidate.config_name) return this.$Message.error('请添加数据字段！');\n          if (!this.formValidate.info) return this.$Message.error('请添加数据简介！');\n        }\n      });\n    },\n    handleReset() {\n      this.modals = false;\n      this.$refs['formValidate'].resetFields();\n      this.$emit('clearFrom');\n    },\n  },\n  created() {},\n  mounted() {},\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.cur\n   cursor pointer\n.goupBox >>> .ivu-form-item-content\n   margin-left: 43px!important;\n</style>\n"]}]}