{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/components/rightConfig/index.vue?vue&type=style&index=0&id=c733c8be&scoped=true&lang=stylus&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/components/rightConfig/index.vue","mtime":1689324015168},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/@vue/cli-service/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5yaWdodC1ib3ggewogIHdpZHRoOiA3MDBweDsKICBtYXJnaW4tbGVmdDogNTBweDsKICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBoZWlnaHQ6IDcwMHB4OwogIG92ZXJmbG93LXk6IHNjcm9sbDsKCiAgJjo6LXdlYmtpdC1zY3JvbGxiYXIgewogICAgLyog5rua5Yqo5p2h5pW05L2T5qC35byPICovCiAgICB3aWR0aDogNHB4OyAvKiDpq5jlrr3liIbliKvlr7nlupTmqKrnq5bmu5rliqjmnaHnmoTlsLrlr7ggKi8KICAgIGhlaWdodDogMXB4OwogIH0KCiAgJjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgewogICAgLyog5rua5Yqo5p2h6YeM6Z2i5bCP5pa55Z2XICovCiAgICBib3JkZXItcmFkaXVzOiA0cHg7CiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgNXB4IHJnYmEoMCwgMCwgMCwgMC4yKTsKICAgIGJhY2tncm91bmQ6ICM1MzUzNTM7CiAgfQoKICAmOjotd2Via2l0LXNjcm9sbGJhci10cmFjayB7CiAgICAvKiDmu5rliqjmnaHph4zpnaLovajpgZMgKi8KICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCA1cHggI2ZmZjsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKICAgIGJhY2tncm91bmQ6ICNmZmY7CiAgfQp9CgoudGl0bGUtYmFyIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDM4cHg7CiAgbGluZS1oZWlnaHQ6IDM4cHg7CiAgcGFkZGluZy1sZWZ0OiAyNHB4OwogIGNvbG9yOiAjMzMzOwogIGJvcmRlci1yYWRpdXM6IDRweDsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/rightConfig","sourcesContent":["<template>\n  <div class=\"right-box\" v-if=\"rCom.length\">\n    <div class=\"title-bar\">模块配置</div>\n    <div class=\"mobile-config\" v-if=\"rCom.length\">\n      <div v-for=\"(item, key) in rCom\" :key=\"key\">\n        <component\n          :is=\"item.components.name\"\n          :moduleName=\"name.name\"\n          :name=\"item.configNme\"\n          :configData=\"configData\"\n          :configNum=\"configNum\"\n        ></component>\n      </div>\n      <div style=\"text-align: center\" v-if=\"rCom.length\">\n        <Button type=\"primary\" style=\"width: 100%; margin: 0 auto; height: 40px\" @click=\"saveConfig\">保存</Button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getCategory, getByCategory, getProduct, diySave, storeStatus } from '@/api/diy';\nimport toolCom from '@/components/diyComponents/index.js';\nimport { mapMutations } from 'vuex';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'rightConfig',\n  components: {\n    ...toolCom,\n  },\n  props: {\n    name: {\n      type: Object,\n      default: {},\n    },\n    pageId: {\n      type: Number,\n      default: 0,\n    },\n    configNum: {\n      type: Number | String,\n      default: 'default',\n    },\n  },\n  computed: {\n    // ...mapState({\n    //     defultArr:(state)=>state.goodSelect.component,\n    // })\n    defultArr() {\n      return this.$store.state.moren.component;\n    },\n  },\n  watch: {\n    name: {\n      handler(nVal, oVal) {\n        this.rCom = [];\n        this.configData = this.$store.state.moren.defaultConfig[nVal.name];\n        if (!this.configData.hasOwnProperty(this.configNum)) {\n          let defaultObj = JSON.parse(JSON.stringify(this.configData.defaultVal));\n          this.configData[nVal.num] = defaultObj;\n          this.$store.commit('moren/upDataName', this.configData);\n        }\n        let that = this;\n        setTimeout(function () {\n          that.rCom = that.$store.state.moren.component[nVal.name].list;\n        }, 30);\n        if (this.configData[nVal.num].selectConfig) {\n          let type = this.configData[nVal.num].selectConfig.type ? this.configData[nVal.num].selectConfig.type : 0;\n          if (type) {\n            this.getByCategory();\n          } else {\n            this.getCategory();\n          }\n        }\n      },\n      deep: true,\n    },\n    defultArr: {\n      handler(nVal, oVal) {\n        this.rCom = [];\n        let tempArr = this.objToArray(nVal);\n        this.rCom = nVal[this.name.name].list;\n      },\n      deep: true,\n    },\n  },\n  data() {\n    return {\n      rCom: [],\n      configData: {},\n      isShow: true,\n      categoryList: [],\n      status: 0,\n    };\n  },\n  mounted() {\n    this.storeStatus();\n  },\n  methods: {\n    storeStatus() {\n      storeStatus().then((res) => {\n        this.status = parseInt(res.data.store_status);\n      });\n    },\n    getCategory() {\n      getCategory().then((res) => {\n        let data = [];\n        res.data.map((item) => {\n          data.push({\n            title: item.title,\n            pid: item.pid,\n            activeValue: item.id.toString(),\n          });\n        });\n        this.configData[this.name.num].selectConfig.list = data;\n        this.bus.$emit('upData', data);\n      });\n    },\n    //获取二级分类\n    getByCategory() {\n      getByCategory().then((res) => {\n        let data = [];\n        res.data.map((item) => {\n          data.push({\n            title: item.cate_name,\n            pid: item.pid,\n            activeValue: item.id.toString(),\n          });\n        });\n        this.configData[this.name.num].selectConfig.list = data;\n        this.bus.$emit('upData', data);\n      });\n    },\n    // 保存数据\n    saveConfig() {\n      let data = this.$store.state.moren.defaultConfig;\n      if (this.name.name == 'tabBar') {\n        if (!this.status) {\n          let list = data.tabBar.default.tabBarList.list;\n          for (let i = 0; i < list.length; i++) {\n            if (list[i].link == '/pages/storeList/index' || list[i].link == 'pages/storeList/index') {\n              return this.$Message.error('请先开启您的周边功能(/pages/storeList/index)');\n            }\n          }\n        }\n        if (data.tabBar.default.tabBarList.list.length < 2) {\n          return this.$Message.error('您最少应添加2个导航');\n        }\n      }\n\n      diySave(this.pageId, {\n        value: data,\n      }).then((res) => {\n        this.$Message.success('保存成功');\n      });\n    },\n    // 对象转数组\n    objToArray(array) {\n      var arr = [];\n      for (var i in array) {\n        arr.push(array[i]);\n      }\n      return arr;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.right-box {\n  width: 700px;\n  margin-left: 50px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  height: 700px;\n  overflow-y: scroll;\n\n  &::-webkit-scrollbar {\n    /* 滚动条整体样式 */\n    width: 4px; /* 高宽分别对应横竖滚动条的尺寸 */\n    height: 1px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    /* 滚动条里面小方块 */\n    border-radius: 4px;\n    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n    background: #535353;\n  }\n\n  &::-webkit-scrollbar-track {\n    /* 滚动条里面轨道 */\n    box-shadow: inset 0 0 5px #fff;\n    border-radius: 4px;\n    background: #fff;\n  }\n}\n\n.title-bar {\n  width: 100%;\n  height: 38px;\n  line-height: 38px;\n  padding-left: 24px;\n  color: #333;\n  border-radius: 4px;\n  border-bottom: 1px solid #eee;\n}\n</style>\n"]}]}