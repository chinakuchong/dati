{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/kefu/components/PriceChange.vue?vue&type=style&index=0&id=c0dbd7dc&scoped=true&lang=css&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/kefu/components/PriceChange.vue","mtime":1689324015210},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/@vue/cli-service/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbnB1dCB7CiAgZGlzcGxheTogYmxvY2s7CiAgaGVpZ2h0OiAxMDAlOwogIGJhY2tncm91bmQ6IG5vbmU7CiAgY29sb3I6IGluaGVyaXQ7CiAgb3BhY2l0eTogMTsKICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogY3VycmVudGNvbG9yOwogIGZvbnQ6IGluaGVyaXQ7CiAgbGluZS1oZWlnaHQ6IGluaGVyaXQ7CiAgbGV0dGVyLXNwYWNpbmc6IGluaGVyaXQ7CiAgdGV4dC1hbGlnbjogaW5oZXJpdDsKICB0ZXh0LWluZGVudDogaW5oZXJpdDsKICB0ZXh0LXRyYW5zZm9ybTogaW5oZXJpdDsKICB0ZXh0LXNoYWRvdzogaW5oZXJpdDsKICBib3JkZXI6IG5vbmU7Cn0KLypAaW1wb3J0ICcuLi8uLi8uLi9zdHlsZXMvcmVzZXQuY3NzJzsqLwoucHJpY2VDaGFuZ2UgewogIHBvc2l0aW9uOiBmaXhlZDsKICB3aWR0aDogNS44cmVtOwogIGhlaWdodDogNi43cmVtOwogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7CiAgYm9yZGVyLXJhZGl1czogMC4xcmVtOwogIHRvcDogNTAlOwogIGxlZnQ6IDUwJTsKICBtYXJnaW4tbGVmdDogLTIuOXJlbTsKICBtYXJnaW4tdG9wOiAtMy4zNXJlbTsKICB6LWluZGV4OiA5OTsKICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlLWluLW91dCAwczsKICAtd2Via2l0LXRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UtaW4tb3V0IDBzOwogIC1vLXRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2UtaW4tb3V0IDBzOwogIC1tb3otdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZS1pbi1vdXQgMHM7CiAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlKDApOwogIC1vLXRyYW5zZm9ybTogc2NhbGUoMCk7CiAgLW1vei10cmFuc2Zvcm06IHNjYWxlKDApOwogIC1tcy10cmFuc2Zvcm06IHNjYWxlKDApOwogIHRyYW5zZm9ybTogc2NhbGUoMCk7CiAgb3BhY2l0eTogMDsKfQoucHJpY2VDaGFuZ2Uub24gewogIG9wYWNpdHk6IDE7CiAgdHJhbnNmb3JtOiBzY2FsZSgxKTsKICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMSk7CiAgLW8tdHJhbnNmb3JtOiBzY2FsZSgxKTsKICAtbW96LXRyYW5zZm9ybTogc2NhbGUoMSk7CiAgLW1zLXRyYW5zZm9ybTogc2NhbGUoMSk7Cn0KLnByaWNlQ2hhbmdlIC5wcmljZVRpdGxlIHsKICBiYWNrZ3JvdW5kOiB1cmwoJy4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvcHJpY2V0aXRsZS5qcGcnKSBuby1yZXBlYXQ7CiAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxLjZyZW07CiAgYm9yZGVyLXJhZGl1czogMC4xcmVtIDAuMXJlbSAwIDA7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGZvbnQtc2l6ZTogMC40cmVtOwogIGNvbG9yOiAjZmZmOwogIGxpbmUtaGVpZ2h0OiAxLjZyZW07CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9Ci5wcmljZUNoYW5nZSAucHJpY2VUaXRsZSAuaWNvbmZvbnRZSSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGZvbnQtc2l6ZTogMC40cmVtOwogIHJpZ2h0OiAwLjI2cmVtOwogIHRvcDogMC4yM3JlbTsKICB3aWR0aDogMC40cmVtOwogIGhlaWdodDogMC40cmVtOwogIGxpbmUtaGVpZ2h0OiAwLjRyZW07Cn0KLnByaWNlQ2hhbmdlIC5saXN0Q2hhbmdlIHsKICBwYWRkaW5nOiAwIDAuNHJlbTsKfQoucHJpY2VDaGFuZ2UgLmxpc3RDaGFuZ2UgLml0ZW0gewogIGhlaWdodDogMS4wM3JlbTsKICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2UzZTNlMzsKICBmb250LXNpemU6IDAuMzJyZW07CiAgY29sb3I6ICMzMzM7Cn0KLnByaWNlQ2hhbmdlIC5saXN0Q2hhbmdlIC5pdGVtIC5tb25leSB7CiAgY29sb3I6ICM2NjY7CiAgd2lkdGg6IDNyZW07CiAgdGV4dC1hbGlnbjogcmlnaHQ7Cn0KLnByaWNlQ2hhbmdlIC5saXN0Q2hhbmdlIC5pdGVtIC5tb25leSAuaWNvbmZvbnRZSSB7CiAgZm9udC1zaXplOiAwLjMycmVtOwogIG1hcmdpbi1sZWZ0OiAwLjJyZW07Cn0KLnByaWNlQ2hhbmdlIC5saXN0Q2hhbmdlIC5pdGVtIC5tb25leSBpbnB1dCB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHRleHQtYWxpZ246IHJpZ2h0OwogIGNvbG9yOiAjY2NjOwogIGJvcmRlcjogbm9uZTsKfQoucHJpY2VDaGFuZ2UgLmxpc3RDaGFuZ2UgLml0ZW0gLm1vbmV5IGlucHV0Lm9uIHsKICBjb2xvcjogIzY2NjsKfQoucHJpY2VDaGFuZ2UgLm1vZGlmeSB7CiAgZm9udC1zaXplOiAwLjMycmVtOwogIGNvbG9yOiAjZmZmOwogIHdpZHRoOiA0LjlyZW07CiAgaGVpZ2h0OiAwLjlyZW07CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGxpbmUtaGVpZ2h0OiAwLjlyZW07CiAgYm9yZGVyLXJhZGl1czogMC40NXJlbTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjI5MWY4OwogIG1hcmdpbjogMC41M3JlbSBhdXRvIDAgYXV0bzsKfQoucHJpY2VDaGFuZ2UgLm1vZGlmeTEgewogIGZvbnQtc2l6ZTogMC4zMnJlbTsKICBjb2xvcjogIzMxMmIyYjsKICB3aWR0aDogNC45cmVtOwogIGhlaWdodDogMC45cmVtOwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBsaW5lLWhlaWdodDogMC45cmVtOwogIGJvcmRlci1yYWRpdXM6IDAuNDVyZW07CiAgYmFja2dyb3VuZC1jb2xvcjogI2VlZTsKICBtYXJnaW46IDAuM3JlbSBhdXRvIDAgYXV0bzsKfQoucHJpY2VDaGFuZ2UgLmxpc3RDaGFuZ2UgdGV4dGFyZWEgewogIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAycmVtOwogIG1hcmdpbi10b3A6IDAuNXJlbTsKICBib3JkZXItcmFkaXVzOiAwLjFyZW07CiAgY29sb3I6ICMzMzM7CiAgcGFkZGluZzogMC4ycmVtOwogIGZvbnQtc2l6ZTogMC4zcmVtOwp9Cg=="},{"version":3,"sources":["PriceChange.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PriceChange.vue","sourceRoot":"src/pages/kefu/components","sourcesContent":["<template>\n  <div>\n    <div class=\"priceChange\" :class=\"change === true ? 'on' : ''\">\n      <div class=\"priceTitle\">\n        {{ status === 0 ? (orderInfo.refund_status === 1 ? '立即退款' : '一键改价') : '订单备注' }}\n        <span class=\"iconfontYI icon-guanbi\" @click=\"close\"></span>\n      </div>\n      <div class=\"listChange\" v-if=\"status === 0\">\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 0\">\n          <div>商品总价(¥)</div>\n          <div class=\"money\">{{ orderInfo.total_price }}<span class=\"iconfontYI icon-suozi\"></span></div>\n        </div>\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 0\">\n          <div>原始邮费(¥)</div>\n          <div class=\"money\">{{ orderInfo.pay_postage }}<span class=\"iconfontYI icon-suozi\"></span></div>\n        </div>\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 0\">\n          <div>实际支付(¥)</div>\n          <div class=\"money\">\n            <input type=\"text\" v-model=\"price\" :class=\"focus === true ? 'on' : ''\" @focus=\"priceChange\" />\n          </div>\n        </div>\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 1\">\n          <div>实际支付(¥)</div>\n          <div class=\"money\">{{ orderInfo.pay_price }}<span class=\"iconfontYI icon-suozi\"></span></div>\n        </div>\n        <div class=\"item acea-row row-between-wrapper\" v-if=\"orderInfo.refund_status === 1\">\n          <div>退款金额(¥)</div>\n          <div class=\"money\">\n            <input type=\"text\" v-model=\"refund_price\" :class=\"focus === true ? 'on' : ''\" @focus=\"priceChange\" />\n          </div>\n        </div>\n      </div>\n      <div class=\"listChange\" v-else>\n        <textarea\n          :placeholder=\"orderInfo.remark ? orderInfo.remark : '请填写备注信息...'\"\n          v-model=\"remark\"\n          maxlength=\"100\"\n        ></textarea>\n      </div>\n      <div class=\"modify\" @click=\"save\">\n        {{ orderInfo.refund_status === 0 || status === 1 ? '立即修改' : '确认退款' }}\n      </div>\n      <div class=\"modify1\" @click=\"refuse\" v-if=\"orderInfo.refund_status === 1 && status === 0\">拒绝退款</div>\n    </div>\n    <div class=\"maskModel\" @touchmove.prevent v-show=\"change === true\"></div>\n  </div>\n</template>\n<script>\nimport { required, num } from '@/utils/validate';\nimport { validatorDefaultCatch } from '@/libs/dialog';\nimport { orderRemark, editPriceApi, orderRefundApi } from '@/api/kefu';\nexport default {\n  name: 'PriceChange',\n  components: {},\n  props: {\n    change: Boolean,\n    orderInfo: {\n      type: Object,\n      default: null,\n    },\n    status: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data: function () {\n    return {\n      focus: false,\n      price: 0,\n      refund_price: 0,\n      remark: '',\n    };\n  },\n  watch: {\n    orderInfo: function () {\n      this.price = this.orderInfo.pay_price;\n      this.refund_price = this.orderInfo.pay_price;\n      this.remark = this.orderInfo.remark;\n    },\n  },\n  methods: {\n    priceChange: function () {\n      this.focus = true;\n    },\n    close: function () {\n      this.price = this.orderInfo.pay_price;\n      this.$emit('closeChange', false);\n    },\n    save() {\n      this.savePrice({\n        price: this.price,\n        refund_price: this.refund_price,\n        type: 1,\n        remark: this.remark,\n        id: this.orderInfo.id,\n        order_id: this.orderInfo.order_id,\n      });\n    },\n    async savePrice(opt) {\n      let that = this,\n        data = {},\n        price = opt.price,\n        refund_price = opt.refund_price,\n        refund_status = that.orderInfo.refund_status,\n        remark = opt.remark;\n      if (that.status == 0 && refund_status === 0) {\n        try {\n          await this.$validator({\n            price: [required(required.message('金额')), num(num.message('金额'))],\n          }).validate({ price });\n        } catch (e) {\n          return validatorDefaultCatch(e);\n        }\n        data.total_price = this.orderInfo.total_price;\n        data.total_postage = this.orderInfo.total_price;\n        data.pay_postage = this.orderInfo.pay_postage;\n        data.gain_integral = this.orderInfo.gain_integral;\n        data.pay_price = opt.price;\n        data.order_id = opt.order_id;\n        editPriceApi(opt.id, data)\n          .then(() => {\n            this.$emit('closechange', false);\n            that.$dialog.success('改价成功');\n          })\n          .catch((error) => {\n            that.$dialog.error(error.msg);\n          });\n      } else if (that.status == 0 && refund_status === 1) {\n        try {\n          await this.$validator({\n            refund_price: [required(required.message('金额')), num(num.message('金额'))],\n          }).validate({ refund_price });\n        } catch (e) {\n          return validatorDefaultCatch(e);\n        }\n        data.price = opt.refund_price;\n        data.type = opt.type;\n        data.order_id = opt.order_id;\n        orderRefundApi(data).then(\n          (res) => {\n            this.$emit('closechange', false);\n            that.$dialog.success('操作成功');\n          },\n          (err) => {\n            this.$emit('closechange', false);\n            that.$dialog.error(err.msg);\n          },\n        );\n      } else {\n        try {\n          await this.$validator({\n            remark: [required(required.message('备注'))],\n          }).validate({ remark });\n        } catch (e) {\n          return validatorDefaultCatch(e);\n        }\n        data.remark = remark;\n        data.order_id = opt.order_id;\n        orderRemark(data).then(\n          (res) => {\n            this.$emit('closechange', false);\n            that.$dialog.success('提交成功');\n          },\n          (err) => {\n            this.$emit('closechange', false);\n            that.$dialog.error(err.msg);\n          },\n        );\n      }\n    },\n    refuse() {\n      this.savePrice({\n        price: this.price,\n        refund_price: this.refund_price,\n        type: 2,\n        remark: this.remark,\n        id: this.orderInfo.id,\n        order_id: this.orderInfo.order_id,\n      });\n    },\n  },\n};\n</script>\n<style scoped>\ninput {\n  display: block;\n  height: 100%;\n  background: none;\n  color: inherit;\n  opacity: 1;\n  -webkit-text-fill-color: currentcolor;\n  font: inherit;\n  line-height: inherit;\n  letter-spacing: inherit;\n  text-align: inherit;\n  text-indent: inherit;\n  text-transform: inherit;\n  text-shadow: inherit;\n  border: none;\n}\n/*@import '../../../styles/reset.css';*/\n.priceChange {\n  position: fixed;\n  width: 5.8rem;\n  height: 6.7rem;\n  background-color: #fff;\n  border-radius: 0.1rem;\n  top: 50%;\n  left: 50%;\n  margin-left: -2.9rem;\n  margin-top: -3.35rem;\n  z-index: 99;\n  transition: all 0.3s ease-in-out 0s;\n  -webkit-transition: all 0.3s ease-in-out 0s;\n  -o-transition: all 0.3s ease-in-out 0s;\n  -moz-transition: all 0.3s ease-in-out 0s;\n  -webkit-transform: scale(0);\n  -o-transform: scale(0);\n  -moz-transform: scale(0);\n  -ms-transform: scale(0);\n  transform: scale(0);\n  opacity: 0;\n}\n.priceChange.on {\n  opacity: 1;\n  transform: scale(1);\n  -webkit-transform: scale(1);\n  -o-transform: scale(1);\n  -moz-transform: scale(1);\n  -ms-transform: scale(1);\n}\n.priceChange .priceTitle {\n  background: url('../../../assets/images/pricetitle.jpg') no-repeat;\n  background-size: 100% 100%;\n  width: 100%;\n  height: 1.6rem;\n  border-radius: 0.1rem 0.1rem 0 0;\n  text-align: center;\n  font-size: 0.4rem;\n  color: #fff;\n  line-height: 1.6rem;\n  position: relative;\n}\n.priceChange .priceTitle .iconfontYI {\n  position: absolute;\n  font-size: 0.4rem;\n  right: 0.26rem;\n  top: 0.23rem;\n  width: 0.4rem;\n  height: 0.4rem;\n  line-height: 0.4rem;\n}\n.priceChange .listChange {\n  padding: 0 0.4rem;\n}\n.priceChange .listChange .item {\n  height: 1.03rem;\n  border-bottom: 1px solid #e3e3e3;\n  font-size: 0.32rem;\n  color: #333;\n}\n.priceChange .listChange .item .money {\n  color: #666;\n  width: 3rem;\n  text-align: right;\n}\n.priceChange .listChange .item .money .iconfontYI {\n  font-size: 0.32rem;\n  margin-left: 0.2rem;\n}\n.priceChange .listChange .item .money input {\n  width: 100%;\n  height: 100%;\n  text-align: right;\n  color: #ccc;\n  border: none;\n}\n.priceChange .listChange .item .money input.on {\n  color: #666;\n}\n.priceChange .modify {\n  font-size: 0.32rem;\n  color: #fff;\n  width: 4.9rem;\n  height: 0.9rem;\n  text-align: center;\n  line-height: 0.9rem;\n  border-radius: 0.45rem;\n  background-color: #2291f8;\n  margin: 0.53rem auto 0 auto;\n}\n.priceChange .modify1 {\n  font-size: 0.32rem;\n  color: #312b2b;\n  width: 4.9rem;\n  height: 0.9rem;\n  text-align: center;\n  line-height: 0.9rem;\n  border-radius: 0.45rem;\n  background-color: #eee;\n  margin: 0.3rem auto 0 auto;\n}\n.priceChange .listChange textarea {\n  border: 1px solid #eee;\n  width: 100%;\n  height: 2rem;\n  margin-top: 0.5rem;\n  border-radius: 0.1rem;\n  color: #333;\n  padding: 0.2rem;\n  font-size: 0.3rem;\n}\n</style>\n"]}]}