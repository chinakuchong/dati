{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/notify/smsConfig/components/register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/notify/smsConfig/components/register.vue","mtime":1689324015239},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNhcHRjaGFBcGksIHJlZ2lzdGVyQXBpIH0gZnJvbSAnQC9hcGkvc2V0dGluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncmVnaXN0ZXInLAogIGRhdGEoKSB7CiAgICBjb25zdCB2YWxpZGF0ZVBob25lID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35aGr5YaZ5omL5py65Y+3JykpOwogICAgICB9IGVsc2UgaWYgKCEvXjFbMzQ1Njc4OV1cZHs5fSQvLnRlc3QodmFsdWUpKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmiYvmnLrlj7fmoLzlvI/kuI3mraPnoa4hJykpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gewogICAgICBjdXROVW06ICfojrflj5bpqozor4HnoIEnLAogICAgICBjYW5DbGljazogdHJ1ZSwKICAgICAgZm9ybUlubGluZTogewogICAgICAgIHVybDogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnLAogICAgICAgIHZlcmlmeV9jb2RlOiAnJywKICAgICAgICBwaG9uZTogJycsCiAgICAgIH0sCiAgICAgIHJ1bGVJbmxpbmU6IHsKICAgICAgICBhY2NvdW50OiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeefreS/oeW5s+WPsOi0puWPtycsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBwYXNzd29yZDogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgdXJsOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpee9keWdgOWfn+WQjScsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBwaG9uZTogW3sgcmVxdWlyZWQ6IHRydWUsIHZhbGlkYXRvcjogdmFsaWRhdGVQaG9uZSwgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIHNpZ246IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl55+t5L+h562+5ZCNJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIHZlcmlmeV9jb2RlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpemqjOivgeeggScsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgfSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDnn63kv6Hpqozor4HnoIEKICAgIGN1dERvd24oKSB7CiAgICAgIGlmICh0aGlzLmZvcm1JbmxpbmUucGhvbmUpIHsKICAgICAgICBpZiAoIXRoaXMuY2FuQ2xpY2spIHJldHVybjsKICAgICAgICB0aGlzLmNhbkNsaWNrID0gZmFsc2U7CiAgICAgICAgdGhpcy5jdXROVW0gPSA2MDsKICAgICAgICBsZXQgZGF0YSA9IHsKICAgICAgICAgIHBob25lOiB0aGlzLmZvcm1JbmxpbmUucGhvbmUsCiAgICAgICAgfTsKICAgICAgICBjYXB0Y2hhQXBpKGRhdGEpCiAgICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgICAgfSk7CiAgICAgICAgbGV0IHRpbWUgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmN1dE5VbS0tOwogICAgICAgICAgaWYgKHRoaXMuY3V0TlVtID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMuY3V0TlVtID0gJ+iOt+WPlumqjOivgeeggSc7CiAgICAgICAgICAgIHRoaXMuY2FuQ2xpY2sgPSB0cnVlOwogICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWUpOwogICAgICAgICAgfQogICAgICAgIH0sIDEwMDApOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35aGr5YaZ5omL5py65Y+3IScpOwogICAgICB9CiAgICB9LAogICAgLy8g5rOo5YaMCiAgICBoYW5kbGVTdWJtaXQobmFtZSkgewogICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgcmVnaXN0ZXJBcGkodGhpcy5mb3JtSW5saW5lKQogICAgICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2Vsb2dvKCk7CiAgICAgICAgICAgICAgfSwgMTAwMCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOeri+WNs+eZu+W9lQogICAgY2hhbmdlbG9nbygpIHsKICAgICAgdGhpcy4kZW1pdCgnb24tY2hhbmdlJyk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/pages/notify/smsConfig/components","sourcesContent":["<template>\n  <Row type=\"flex\">\n    <Col span=\"24\">\n      <div class=\"index_from page-account-container\">\n        <div class=\"page-account-top\">\n          <span class=\"page-account-top-tit\">一号通账户注册</span>\n        </div>\n        <Form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\" @submit.native.prevent>\n          <!--<FormItem prop=\"account\">-->\n          <!--<Input type=\"text\" v-model=\"formInline.account\" prefix=\"ios-contact-outline\"-->\n          <!--placeholder=\"请输入短信平台账号\" />-->\n          <!--</FormItem>-->\n          <FormItem prop=\"phone\" class=\"maxInpt\">\n            <Input\n              type=\"number\"\n              v-model=\"formInline.phone\"\n              prefix=\"ios-contact-outline\"\n              placeholder=\"请输入您的手机号\"\n            />\n          </FormItem>\n          <FormItem prop=\"password\" class=\"maxInpt\">\n            <Input type=\"password\" v-model=\"formInline.password\" prefix=\"ios-lock-outline\" placeholder=\"请输入密码\" />\n          </FormItem>\n          <!--<FormItem prop=\"password\">-->\n          <!--<Input type=\"password\" v-model=\"formInline.password\" prefix=\"ios-lock-outline\"-->\n          <!--placeholder=\"请确认短信平台密码/token\" />-->\n          <!--</FormItem>-->\n          <FormItem prop=\"url\" class=\"maxInpt\">\n            <Input type=\"text\" v-model=\"formInline.url\" prefix=\"ios-contact-outline\" placeholder=\"请输入网址域名\" />\n          </FormItem>\n          <!--<FormItem prop=\"sign\">-->\n          <!--<Input type=\"text\" v-model=\"formInline.sign\" prefix=\"ios-contact-outline\"-->\n          <!--placeholder=\"请输入短信签名，例如：CRMEB\" />-->\n          <!--</FormItem>-->\n          <FormItem prop=\"verify_code\" class=\"maxInpt\">\n            <div class=\"code\">\n              <Input\n                type=\"text\"\n                v-model=\"formInline.verify_code\"\n                prefix=\"ios-keypad-outline\"\n                placeholder=\"请输入验证码\"\n              />\n              <Button :disabled=\"!canClick\" @click=\"cutDown\">{{ cutNUm }}</Button>\n            </div>\n          </FormItem>\n          <FormItem class=\"maxInpt\">\n            <Button type=\"primary\" long size=\"large\" @click=\"handleSubmit('formInline')\" class=\"btn\">注册</Button>\n          </FormItem>\n        </Form>\n        <div class=\"page-account-other\">\n          <span @click=\"changelogo\">立即登录</span>\n        </div>\n      </div>\n    </Col>\n  </Row>\n</template>\n\n<script>\nimport { captchaApi, registerApi } from '@/api/setting';\nexport default {\n  name: 'register',\n  data() {\n    const validatePhone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请填写手机号'));\n      } else if (!/^1[3456789]\\d{9}$/.test(value)) {\n        callback(new Error('手机号格式不正确!'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      cutNUm: '获取验证码',\n      canClick: true,\n      formInline: {\n        url: '',\n        password: '',\n        verify_code: '',\n        phone: '',\n      },\n      ruleInline: {\n        account: [{ required: true, message: '请输入短信平台账号', trigger: 'blur' }],\n        password: [{ required: true, message: '请输入密码', trigger: 'blur' }],\n        url: [{ required: true, message: '请输入网址域名', trigger: 'blur' }],\n        phone: [{ required: true, validator: validatePhone, trigger: 'blur' }],\n        sign: [{ required: true, message: '请输入短信签名', trigger: 'blur' }],\n        verify_code: [{ required: true, message: '请输入验证码', trigger: 'blur' }],\n      },\n    };\n  },\n  methods: {\n    // 短信验证码\n    cutDown() {\n      if (this.formInline.phone) {\n        if (!this.canClick) return;\n        this.canClick = false;\n        this.cutNUm = 60;\n        let data = {\n          phone: this.formInline.phone,\n        };\n        captchaApi(data)\n          .then(async (res) => {\n            this.$Message.success(res.msg);\n          })\n          .catch((res) => {\n            this.$Message.error(res.msg);\n          });\n        let time = setInterval(() => {\n          this.cutNUm--;\n          if (this.cutNUm === 0) {\n            this.cutNUm = '获取验证码';\n            this.canClick = true;\n            clearInterval(time);\n          }\n        }, 1000);\n      } else {\n        this.$Message.warning('请填写手机号!');\n      }\n    },\n    // 注册\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          registerApi(this.formInline)\n            .then(async (res) => {\n              this.$Message.success(res.msg);\n              setTimeout(() => {\n                this.changelogo();\n              }, 1000);\n            })\n            .catch((res) => {\n              this.$Message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 立即登录\n    changelogo() {\n      this.$emit('on-change');\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.maxInpt{\n    max-width 400px\n    margin-left auto\n    margin-right auto\n}\n.page-account-container{\n    text-align center\n    padding 50px 0\n}\n.page-account-top{\n    margin-bottom 20px\n}\n.page-account-top-tit\n    font-size 21px\n    color #1890FF\n.page-account-other\n    text-align center\n    color #1890FF\n    font-size 12px\n    span\n        cursor pointer\n.code {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n</style>\n"]}]}