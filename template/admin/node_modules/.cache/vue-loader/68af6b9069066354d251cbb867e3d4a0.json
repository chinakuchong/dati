{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/storeBargain/create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/storeBargain/create.vue","mtime":1689324015227},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAnQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCc7CmltcG9ydCB1cGxvYWRQaWN0dXJlcyBmcm9tICdAL2NvbXBvbmVudHMvdXBsb2FkUGljdHVyZXMnOwppbXBvcnQgeyBiYXJnYWluSW5mb0FwaSwgYmFyZ2FpbkNyZWF0QXBpLCBwcm9kdWN0QXR0cnNBcGkgfSBmcm9tICdAL2FwaS9tYXJrZXRpbmcnOwppbXBvcnQgeyBwcm9kdWN0R2V0VGVtcGxhdGVBcGkgfSBmcm9tICdAL2FwaS9wcm9kdWN0JzsKaW1wb3J0IGZyZWlnaHRUZW1wbGF0ZSBmcm9tICdAL2NvbXBvbmVudHMvZnJlaWdodFRlbXBsYXRlL2luZGV4JzsKaW1wb3J0IFdhbmdFZGl0b3IgZnJvbSAnQC9jb21wb25lbnRzL3dhbmdFZGl0b3IvaW5kZXgudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnc3RvcmVCYXJnYWluQ3JlYXRlJywKICBjb21wb25lbnRzOiB7CiAgICBnb29kc0xpc3QsCiAgICB1cGxvYWRQaWN0dXJlcywKICAgIGZyZWlnaHRUZW1wbGF0ZSwKICAgIFdhbmdFZGl0b3IsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3VibWl0T3BlbjogZmFsc2UsCiAgICAgIHNwaW5TaG93OiBmYWxzZSwKICAgICAgbXlDb25maWc6IHsKICAgICAgICBhdXRvSGVpZ2h0RW5hYmxlZDogZmFsc2UsIC8vIOe8lui+keWZqOS4jeiHquWKqOiiq+WGheWuueaSkemrmAogICAgICAgIGluaXRpYWxGcmFtZUhlaWdodDogNTAwLCAvLyDliJ3lp4vlrrnlmajpq5jluqYKICAgICAgICBpbml0aWFsRnJhbWVXaWR0aDogJzEwMCUnLCAvLyDliJ3lp4vlrrnlmajlrr3luqYKICAgICAgICBVRURJVE9SX0hPTUVfVVJMOiAnL1VFZGl0b3IvJywKICAgICAgICBzZXJ2ZXJVcmw6ICcnLAogICAgICB9LAogICAgICBpc0Nob2ljZTogJycsCiAgICAgIGN1cnJlbnQ6IDAsCiAgICAgIG1vZGFsUGljOiBmYWxzZSwKICAgICAgZ3JpZDogewogICAgICAgIHhsOiAxMiwKICAgICAgICBsZzogMjAsCiAgICAgICAgbWQ6IDI0LAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIGdyaWQyOiB7CiAgICAgICAgeGw6IDgsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDEyLAogICAgICAgIHNtOiAyNCwKICAgICAgICB4czogMjQsCiAgICAgIH0sCiAgICAgIGdyaWRQaWM6IHsKICAgICAgICB4bDogNiwKICAgICAgICBsZzogOCwKICAgICAgICBtZDogMTIsCiAgICAgICAgc206IDEyLAogICAgICAgIHhzOiAxMiwKICAgICAgfSwKICAgICAgZ3JpZEJ0bjogewogICAgICAgIHhsOiA0LAogICAgICAgIGxnOiA4LAogICAgICAgIG1kOiA4LAogICAgICAgIHNtOiA4LAogICAgICAgIHhzOiA4LAogICAgICB9LAogICAgICBtb2RhbHM6IGZhbHNlLAogICAgICBtb2RhbF9sb2FkaW5nOiBmYWxzZSwKICAgICAgaW1hZ2VzOiBbXSwKICAgICAgdGVtcGxhdGVMaXN0OiBbXSwKICAgICAgY29sdW1uczogW10sCiAgICAgIHNwZWNzRGF0YTogW10sCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIGltYWdlczogW10sCiAgICAgICAgaW5mbzogJycsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIHN0b3JlX25hbWU6ICcnLAogICAgICAgIGltYWdlOiAnJywKICAgICAgICB1bml0X25hbWU6ICcnLAogICAgICAgIHByaWNlOiAwLAogICAgICAgIG1pbl9wcmljZTogMCwKICAgICAgICBiYXJnYWluX21heF9wcmljZTogMTAsCiAgICAgICAgYmFyZ2Fpbl9taW5fcHJpY2U6IDAuMDEsCiAgICAgICAgY29zdDogMCwKICAgICAgICBiYXJnYWluX251bTogMSwKICAgICAgICBwZW9wbGVfbnVtOiAyLAogICAgICAgIHN0b2NrOiAxLAogICAgICAgIHNhbGVzOiAwLAogICAgICAgIHNvcnQ6IDAsCiAgICAgICAgbnVtOiAxLAogICAgICAgIGdpdmVfaW50ZWdyYWw6IDAsCiAgICAgICAgcG9zdGFnZTogMCwKICAgICAgICBpc19wb3N0YWdlOiAwLAogICAgICAgIGlzX2hvdDogMCwKICAgICAgICBzdGF0dXM6IDAsCiAgICAgICAgc2VjdGlvbl90aW1lOiBbXSwKICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgcnVsZTogJycsCiAgICAgICAgaWQ6IDAsCiAgICAgICAgcHJvZHVjdF9pZDogMCwKICAgICAgICB0ZW1wX2lkOiAnJywKICAgICAgICBhdHRyczogW10sCiAgICAgICAgaXRlbXM6IFtdLAogICAgICAgIGxvZ2lzdGljczogWycxJ10sIC8v6YCJ5oup54mp5rWB5pa55byPCiAgICAgICAgZnJlaWdodDogMiwgLy/ov5DotLnorr7nva4KICAgICAgICBwb3N0YWdlOiAxLCAvL+iuvue9rui/kOi0uemHkeminQogICAgICB9LAogICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgIHJ1bGU6ICcnLAogICAgICBydWxlVmFsaWRhdGU6IHsKICAgICAgICBpbWFnZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nkuLvlm74nLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwKICAgICAgICBpbWFnZXM6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nkuLvlm74nLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgICAgIG1pbjogMSwKICAgICAgICAgICAgbWVzc2FnZTogJ0Nob29zZSB0d28gaG9iYmllcyBhdCBiZXN0JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2NoYW5nZScsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgdGl0bGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl56CN5Lu35rS75Yqo5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIGluZm86IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl56CN5Lu35rS75Yqo566A5LuLJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIHN0b3JlX25hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl56CN5Lu35ZWG5ZOB5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIHNlY3Rpb25fdGltZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ2FycmF5JywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+mAieaLqea0u+WKqOaXtumXtCcsCiAgICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHVuaXRfbmFtZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXljZXkvY0nLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgcHJpY2U6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5Y6f5Lu3JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIG1pbl9wcmljZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmnIDkvY7otK3kubDku7cnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgLy8gYmFyZ2Fpbl9tYXhfcHJpY2U6IFsKICAgICAgICAvLyAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogJ251bWJlcicsIG1lc3NhZ2U6ICfor7fovpPljZXmrKHnoI3ku7fmnIDlpKfph5Hpop0nLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIC8vIF0sCiAgICAgICAgLy8gYmFyZ2Fpbl9taW5fcHJpY2U6IFsKICAgICAgICAvLyAgICAgeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogJ251bWJlcicsIG1lc3NhZ2U6ICfljZXmrKHnoI3ku7fmnIDlsI/ph5Hpop0nLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIC8vIF0sCiAgICAgICAgY29zdDogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmiJDmnKzku7cnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgYmFyZ2Fpbl9udW06IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5biu56CN5qyh5pWwJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHBlb3BsZV9udW06IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl56CN5Lu35Lq65pWwJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHN0b2NrOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICB0eXBlOiAnbnVtYmVyJywKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeW6k+WtmCcsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJywKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBudW06IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5Y2V5qyh5YWB6K646LSt5Lmw5pWw6YePJywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIHRlbXBfaWQ6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nov5DotLnmqKHmnb8nLAogICAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJywKICAgICAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGN1cnJlbnRpZDogJycsCiAgICAgIHBpY1RpdDogJycsCiAgICAgIHRhYmxlSW5kZXg6IDAsCiAgICAgIGNvcHk6IDAsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdtZWRpYScsIFsnaXNNb2JpbGUnXSksCiAgICBsYWJlbFdpZHRoKCkgewogICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHVuZGVmaW5lZCA6IDE0MDsKICAgIH0sCiAgICBsYWJlbFBvc2l0aW9uKCkgewogICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/ICd0b3AnIDogJ3JpZ2h0JzsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCAhPT0gJzAnICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICB0aGlzLmNvcHkgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuY29weTsKICAgICAgdGhpcy5jdXJyZW50ID0gMTsKICAgICAgdGhpcy5nZXRJbmZvKCk7CiAgICB9CiAgICB0aGlzLnByb2R1Y3RHZXRUZW1wbGF0ZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6K+m5oOF5YaF5a65CiAgICBnZXRFZGl0b3JDb250ZW50KGRhdGEpIHsKICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRhdGE7CiAgICB9LAogICAgLy8g6KeE5YiZ5YaF5a65CiAgICBnZXRFZGl0b3JDb250ZW50MihkYXRhKSB7CiAgICAgIHRoaXMucnVsZSA9IGRhdGE7CiAgICB9LAogICAgLy8g5re75Yqg6L+Q6LS55qih5p2/CiAgICBmcmVpZ2h0KCkgewogICAgICB0aGlzLiRyZWZzLnRlbXBsYXRlLmlkID0gMDsKICAgICAgdGhpcy4kcmVmcy50ZW1wbGF0ZS5pc1RlbXBsYXRlID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDnoI3ku7fop4TmoLzvvJsKICAgIHByb2R1Y3RBdHRycyhyb3cpIHsKICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICBwcm9kdWN0QXR0cnNBcGkocm93LmlkLCAyKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGEuaW5mbzsKICAgICAgICAgIGxldCByYWRpbyA9IHsKICAgICAgICAgICAgdGl0bGU6ICfpgInmi6knLAogICAgICAgICAgICBrZXk6ICdjaG9zZScsCiAgICAgICAgICAgIHdpZHRoOiA2MCwKICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICByZW5kZXI6IChoLCBwYXJhbXMpID0+IHsKICAgICAgICAgICAgICBsZXQgdWlkID0gcGFyYW1zLmluZGV4OwogICAgICAgICAgICAgIGxldCBmbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudGlkID09PSB1aWQpIHsKICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGxldCBzZWxmID0gdGhpczsKICAgICAgICAgICAgICByZXR1cm4gaCgnZGl2JywgWwogICAgICAgICAgICAgICAgaCgnUmFkaW8nLCB7CiAgICAgICAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZsYWcsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICAgJ29uLWNoYW5nZSc6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY3VycmVudGlkID0gdWlkOwogICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHJzID0gW107CiAgICAgICAgICAgICAgICAgICAgICBhdHRycy5wdXNoKHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgICAgICAgc2VsZi5mb3JtVmFsaWRhdGUuYXR0cnMgPSBhdHRyczsKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgXSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9OwogICAgICAgICAgdGhhdC5jb2x1bW5zID0gZGF0YS5oZWFkZXI7CiAgICAgICAgICB0aGF0LmNvbHVtbnMudW5zaGlmdChyYWRpbyk7CiAgICAgICAgICB0aGF0LnNwZWNzRGF0YSA9IGRhdGEuYXR0cnM7CiAgICAgICAgICB0aGF0LmlucHV0Q2hhbmdlKGRhdGEpOwogICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUuaXRlbXMgPSBkYXRhLml0ZW1zOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoYXQuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgaW5wdXRDaGFuZ2UoZGF0YSkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIGxldCAkaW5kZXggPSBbXTsKICAgICAgZGF0YS5oZWFkZXIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBpZiAoaXRlbS50eXBlID09PSAxKSB7CiAgICAgICAgICAkaW5kZXgucHVzaCh7IGluZGV4OiBpbmRleCwga2V5OiBpdGVtLmtleSwgdGl0bGU6IGl0ZW0udGl0bGUgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgJGluZGV4LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgbGV0IHRpdGxlID0gaXRlbS50aXRsZTsKICAgICAgICBsZXQga2V5ID0gaXRlbS5rZXk7CiAgICAgICAgbGV0IHJvdyA9IHsKICAgICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDEwMCwKICAgICAgICAgIHJlbmRlcjogKGgsIHBhcmFtcykgPT4gewogICAgICAgICAgICByZXR1cm4gaCgnZGl2JywgWwogICAgICAgICAgICAgIGgoJ0lucHV0TnVtYmVyJywgewogICAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgICAgbWluOiAxLAogICAgICAgICAgICAgICAgICBwcmVjaXNpb246IDAsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJhbXMucm93LnF1b3RhLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICdvbi1jaGFuZ2UnOiAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgIHBhcmFtcy5yb3cucXVvdGEgPSBlOwogICAgICAgICAgICAgICAgICAgIHRoYXQuc3BlY3NEYXRhW3BhcmFtcy5pbmRleF0gPSBwYXJhbXMucm93OwogICAgICAgICAgICAgICAgICAgIGlmICghIXRoYXQuZm9ybVZhbGlkYXRlLmF0dHJzICYmIHRoYXQuZm9ybVZhbGlkYXRlLmF0dHJzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUuYXR0cnMuZm9yRWFjaCgodiwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuaWQgPT09IHBhcmFtcy5yb3cuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmZvcm1WYWxpZGF0ZS5hdHRycy5zcGxpY2UoaW5kZXgsIDEsIHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICBdKTsKICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgICAgICB0aGF0LmNvbHVtbnMuc3BsaWNlKGl0ZW0uaW5kZXgsIDEsIHJvdyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiOt+WPlui/kOi0ueaooeadv++8mwogICAgcHJvZHVjdEdldFRlbXBsYXRlKCkgewogICAgICBwcm9kdWN0R2V0VGVtcGxhdGVBcGkoKS50aGVuKChyZXMpID0+IHsKICAgICAgICB0aGlzLnRlbXBsYXRlTGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDllYblk4FpZAogICAgZ2V0UHJvZHVjdElkKHJvdykgewogICAgICB0aGlzLm1vZGFsX2xvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5tb2RhbHMgPSBmYWxzZTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSB7CiAgICAgICAgICBpbWFnZXM6IHJvdy5zbGlkZXJfaW1hZ2UsCiAgICAgICAgICBpbmZvOiByb3cuc3RvcmVfaW5mbywKICAgICAgICAgIHRpdGxlOiByb3cuc3RvcmVfbmFtZSwKICAgICAgICAgIHN0b3JlX25hbWU6IHJvdy5zdG9yZV9uYW1lLAogICAgICAgICAgaW1hZ2U6IHJvdy5pbWFnZSwKICAgICAgICAgIHVuaXRfbmFtZTogcm93LnVuaXRfbmFtZSwKICAgICAgICAgIHByaWNlOiAwLCAvLyDkuI3lj5bllYblk4HkuK3nmoTljp/ku7cKICAgICAgICAgIG1pbl9wcmljZTogMCwKICAgICAgICAgIGJhcmdhaW5fbWF4X3ByaWNlOiAxMCwKICAgICAgICAgIGJhcmdhaW5fbWluX3ByaWNlOiAwLjAxLAogICAgICAgICAgY29zdDogcm93LmNvc3QsCiAgICAgICAgICBiYXJnYWluX251bTogMSwKICAgICAgICAgIHBlb3BsZV9udW06IDIsCiAgICAgICAgICBzdG9jazogcm93LnN0b2NrLAogICAgICAgICAgc2FsZXM6IHJvdy5zYWxlcywKICAgICAgICAgIHNvcnQ6IHJvdy5zb3J0LAogICAgICAgICAgbnVtOiAxLAogICAgICAgICAgZ2l2ZV9pbnRlZ3JhbDogcm93LmdpdmVfaW50ZWdyYWwsCiAgICAgICAgICBwb3N0YWdlOiByb3cucG9zdGFnZSwKICAgICAgICAgIGlzX3Bvc3RhZ2U6IHJvdy5pc19wb3N0YWdlLAogICAgICAgICAgaXNfaG90OiByb3cuaXNfaG90LAogICAgICAgICAgc3RhdHVzOiAwLAogICAgICAgICAgc2VjdGlvbl90aW1lOiBbXSwKICAgICAgICAgIGRlc2NyaXB0aW9uOiByb3cuZGVzY3JpcHRpb24sIC8vIOS4jeWPluWVhuWTgeS4reeahAogICAgICAgICAgcnVsZTogJycsCiAgICAgICAgICBpZDogMCwKICAgICAgICAgIHByb2R1Y3RfaWQ6IHJvdy5pZCwKICAgICAgICAgIHRlbXBfaWQ6IHJvdy50ZW1wX2lkLAogICAgICAgICAgbG9naXN0aWNzOiByb3cudGVtcF9pZCwgLy/pgInmi6nnianmtYHmlrnlvI8KICAgICAgICAgIGZyZWlnaHQ6IHJvdy5mcmVpZ2h0LCAvL+i/kOi0ueiuvue9rgogICAgICAgICAgcG9zdGFnZTogcm93LnBvc3RhZ2UsIC8v6K6+572u6L+Q6LS56YeR6aKdCiAgICAgICAgICBjdXN0b21fZm9ybTogcm93LmN1c3RvbV9mb3JtLCAvL+iHquWumuS5ieihqOWNleaVsOaNrgogICAgICAgICAgdmlydHVhbF90eXBlOiByb3cudmlydHVhbF90eXBlLCAvL+iZmuaLn+WVhuWTgeexu+WeiwogICAgICAgIH07CiAgICAgICAgdGhpcy5wcm9kdWN0QXR0cnMocm93KTsKICAgICAgfSwgNTAwKTsKICAgIH0sCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICB9LAogICAgLy8g56e75YqoCiAgICBoYW5kbGVEcmFnU3RhcnQoZSwgaXRlbSkgewogICAgICB0aGlzLmRyYWdnaW5nID0gaXRlbTsKICAgIH0sCiAgICBoYW5kbGVEcmFnRW5kKGUsIGl0ZW0pIHsKICAgICAgdGhpcy5kcmFnZ2luZyA9IG51bGw7CiAgICB9LAogICAgLy8g6aaW5YWI5oqKZGl25Y+Y5oiQ5Y+v5Lul5pS+572u55qE5YWD57Sg77yM5Y2z6YeN5YaZZHJhZ2VudGVyL2RyYWdvdmVyCiAgICBoYW5kbGVEcmFnT3ZlcihlKSB7CiAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbW92ZSc7CiAgICB9LAogICAgaGFuZGxlRHJhZ0VudGVyKGUsIGl0ZW0pIHsKICAgICAgZS5kYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9ICdtb3ZlJzsKICAgICAgaWYgKGl0ZW0gPT09IHRoaXMuZHJhZ2dpbmcpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgbmV3SXRlbXMgPSBbLi4udGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2VzXTsKICAgICAgY29uc3Qgc3JjID0gbmV3SXRlbXMuaW5kZXhPZih0aGlzLmRyYWdnaW5nKTsKICAgICAgY29uc3QgZHN0ID0gbmV3SXRlbXMuaW5kZXhPZihpdGVtKTsKICAgICAgbmV3SXRlbXMuc3BsaWNlKGRzdCwgMCwgLi4ubmV3SXRlbXMuc3BsaWNlKHNyYywgMSkpOwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXMgPSBuZXdJdGVtczsKICAgIH0sCiAgICAvLyDlhbfkvZPml6XmnJ8KICAgIG9uY2hhbmdlVGltZShlKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNlY3Rpb25fdGltZSA9IGU7CiAgICB9LAogICAgLy8g6K+m5oOFCiAgICBnZXRJbmZvKCkgewogICAgICB0aGlzLnNwaW5TaG93ID0gdHJ1ZTsKICAgICAgYmFyZ2FpbkluZm9BcGkodGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICAgIGxldCBpbmZvID0gcmVzLmRhdGEuaW5mbzsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gaW5mbzsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnJ1bGUgPSBpbmZvLnJ1bGUgPT09IG51bGwgPyAnJyA6IGluZm8ucnVsZTsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmZvcm1WYWxpZGF0ZSwgJ2l0ZW1zJywgaW5mby5hdHRycy5pdGVtcyk7CiAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdGhpcy5mb3JtVmFsaWRhdGUuZGVzY3JpcHRpb247CgogICAgICAgICAgdGhpcy5jb2x1bW5zID0gaW5mby5hdHRycy5oZWFkZXI7CiAgICAgICAgICBsZXQgcmFkaW8gPSB7CiAgICAgICAgICAgIHRpdGxlOiAn6YCJ5oupJywKICAgICAgICAgICAga2V5OiAnY2hvc2UnLAogICAgICAgICAgICB3aWR0aDogNjAsCiAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7CiAgICAgICAgICAgICAgbGV0IHVpZCA9IHBhcmFtcy5pbmRleDsKICAgICAgICAgICAgICBsZXQgZmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRpZCA9PT0gdWlkKSB7CiAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgICAgcmV0dXJuIGgoJ2RpdicsIFsKICAgICAgICAgICAgICAgIGgoJ1JhZGlvJywgewogICAgICAgICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmbGFnLAogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgICAgICdvbi1jaGFuZ2UnOiAoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICBzZWxmLmN1cnJlbnRpZCA9IHVpZDsKICAgICAgICAgICAgICAgICAgICAgIGxldCBhdHRycyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgYXR0cnMucHVzaChwYXJhbXMucm93KTsKICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZm9ybVZhbGlkYXRlLmF0dHJzID0gYXR0cnM7CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIF0pOwogICAgICAgICAgICB9LAogICAgICAgICAgfTsKICAgICAgICAgIHRoYXQuY29sdW1ucy51bnNoaWZ0KHJhZGlvKTsKICAgICAgICAgIHRoaXMuc3BlY3NEYXRhID0gaW5mby5hdHRycy52YWx1ZTsKICAgICAgICAgIGxldCBkZWZhdWx0QXR0cnMgPSBbXTsKICAgICAgICAgIGluZm8uYXR0cnMudmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICAgICAgaWYgKGl0ZW0ub3B0KSB7CiAgICAgICAgICAgICAgZGVmYXVsdEF0dHJzLnB1c2goaXRlbSk7CiAgICAgICAgICAgICAgdGhhdC4kc2V0KHRoYXQsICdjdXJyZW50aWQnLCBpbmRleCk7CiAgICAgICAgICAgICAgdGhhdC4kc2V0KHRoYXQuZm9ybVZhbGlkYXRlLCAnYXR0cnMnLCBkZWZhdWx0QXR0cnMpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOS4i+S4gOatpQogICAgbmV4dChuYW1lKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnQgPT09IDMpIHsKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kZXNjcmlwdGlvbiA9IHRoaXMuZGVzY3JpcHRpb247CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucnVsZSA9IHRoaXMucnVsZTsKICAgICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvcHkgPT0gMSkgdGhpcy5mb3JtVmFsaWRhdGUuY29weSA9IDE7CiAgICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkIHx8IDA7CiAgICAgICAgICAgIHRoaXMuc3VibWl0T3BlbiA9IHRydWU7CiAgICAgICAgICAgIGJhcmdhaW5DcmVhdEFwaSh0aGlzLmZvcm1WYWxpZGF0ZSkKICAgICAgICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLnN1Ym1pdE9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgcGF0aDogdGhpcy4kcm91dGVQcm9TdHIgKyAnL21hcmtldGluZy9zdG9yZV9iYXJnYWluL2luZGV4JywKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9LCA1MDApOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuc3VibWl0T3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLmN1cnJlbnQgPT09IDEpIHsKICAgICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRpZCA9PT0gJycpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign6K+36YCJ5oup5bGe5oCn6KeE5qC8Jyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbGV0IHZhbCA9IHRoaXMuc3BlY3NEYXRhW3RoaXMuY3VycmVudGlkXTsKICAgICAgICAgICAgICBsZXQgZm9ybVZhbGlkYXRlID0gdGhpcy5mb3JtVmFsaWRhdGUuYXR0cnNbMF07CiAgICAgICAgICAgICAgZm9ybVZhbGlkYXRlLnByaWNlID0gdmFsLnByaWNlOwogICAgICAgICAgICAgIGZvcm1WYWxpZGF0ZS5taW5fcHJpY2UgPSB2YWwubWluX3ByaWNlOwogICAgICAgICAgICAgIGZvcm1WYWxpZGF0ZS5xdW90YSA9IHZhbC5xdW90YTsKICAgICAgICAgICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUuYXR0cnNbMF0ucXVvdGEgPD0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+egjeS7t+mZkOmHj+W/hemhu+Wkp+S6jjAnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmF0dHJzWzBdLnF1b3RhID4gdGhpcy5mb3JtVmFsaWRhdGUuYXR0cnNbMF1bJ3N0b2NrJ10pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfnoI3ku7fpmZDph4/kuI3og73otoXov4fop4TmoLzlupPlrZgnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5jdXJyZW50ICs9IDE7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKGUpID0+IHsKICAgICAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kZXNjcmlwdGlvbiArPSAnICc7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35a6M5ZaE5oKo55qE5L+h5oGvJyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnQgKz0gMTsKICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnQgPT0gMykgewogICAgICAgICAgICBzZXRUaW1lb3V0KChlKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUucnVsZSArPSAnICc7CiAgICAgICAgICAgIH0sIDApOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeWVhuWTgScpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS4gOatpQogICAgc3RlcCgpIHsKICAgICAgdGhpcy5jdXJyZW50LS07CiAgICB9LAogICAgLy8g5YaF5a65CiAgICBnZXRDb250ZW50KHZhbCkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kZXNjcmlwdGlvbiA9IHZhbDsKICAgIH0sCiAgICAvLyDop4TliJkKICAgIGdldFJvbGUodmFsKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnJ1bGUgPSB2YWw7CiAgICB9LAogICAgLy8g54K55Ye75ZWG5ZOB5Zu+CiAgICBtb2RhbFBpY1RhcCh0aXQsIHBpY1RpdCwgaW5kZXgpIHsKICAgICAgdGhpcy5tb2RhbFBpYyA9IHRydWU7CiAgICAgIHRoaXMuaXNDaG9pY2UgPSB0aXQgPT09ICdkYW4nID8gJ+WNlemAiScgOiAn5aSa6YCJJzsKICAgICAgdGhpcy5waWNUaXQgPSBwaWNUaXQ7CiAgICAgIHRoaXMudGFibGVJbmRleCA9IGluZGV4OwogICAgfSwKICAgIC8vIOiOt+WPluWNleW8oOWbvueJh+S/oeaBrwogICAgZ2V0UGljKHBjKSB7CiAgICAgIHN3aXRjaCAodGhpcy5waWNUaXQpIHsKICAgICAgICBjYXNlICdkYW5Gcm9tJzoKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlID0gcGMuYXR0X2RpcjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aGlzLnNwZWNzRGF0YVt0aGlzLnRhYmxlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5hdHRyc1swXS5waWMgPSBwYy5hdHRfZGlyOwogICAgICB9CiAgICAgIHRoaXMubW9kYWxQaWMgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDojrflj5blpJrlvKDlm77kv6Hmga8KICAgIGdldFBpY0QocGMpIHsKICAgICAgdGhpcy5pbWFnZXMgPSBwYzsKICAgICAgdGhpcy5pbWFnZXMubWFwKChpdGVtKSA9PiB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2VzLnB1c2goaXRlbS5hdHRfZGlyKTsKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXMuc3BsaWNlKDAsIDEwKTsKICAgICAgfSk7CiAgICAgIHRoaXMubW9kYWxQaWMgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmUoaSkgewogICAgICB0aGlzLmltYWdlcy5zcGxpY2UoaSwgMSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlcy5zcGxpY2UoaSwgMSk7CiAgICB9LAogICAgLy8g6YCJ5oup5ZWG5ZOBCiAgICBjaGFuZ2VHb29kcygpIHsKICAgICAgdGhpcy5tb2RhbHMgPSB0cnVlOwogICAgICB0aGlzLiRyZWZzLmdvb2RzbGlzdC5mb3JtVmFsaWRhdGUuaXNfcHJlc2FsZSA9IDA7CiAgICAgIHRoaXMuJHJlZnMuZ29vZHNsaXN0LmZvcm1WYWxpZGF0ZS5pc192aXJ0dWFsID0gMDsKICAgICAgdGhpcy4kcmVmcy5nb29kc2xpc3QuZ2V0TGlzdCgpOwogICAgICB0aGlzLiRyZWZzLmdvb2RzbGlzdC5nb29kc0NhdGVnb3J5KCk7CiAgICB9LAogICAgLy8g6KGo5Y2V6aqM6K+BCiAgICB2YWxpZGF0ZShwcm9wLCBzdGF0dXMsIGVycm9yKSB7CiAgICAgIGlmIChzdGF0dXMgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihlcnJvcik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmt7vliqDoh6rlrprkuYnlvLnnqpcKICAgIGFkZEN1c3RvbURpYWxvZyhlZGl0b3JJZCkgewogICAgICB3aW5kb3cuVUUucmVnaXN0ZXJVSSgKICAgICAgICAndGVzdC1kaWFsb2cnLAogICAgICAgIGZ1bmN0aW9uIChlZGl0b3IsIHVpTmFtZSkgewogICAgICAgICAgLy8g5Yib5bu6IGRpYWxvZwogICAgICAgICAgbGV0IGRpYWxvZyA9IG5ldyB3aW5kb3cuVUUudWkuRGlhbG9nKHsKICAgICAgICAgICAgLy8g5oyH5a6a5by55Ye65bGC5Lit6aG16Z2i55qE6Lev5b6E77yM6L+Z6YeM5Y+q6IO95pSv5oyB6aG16Z2i77yM6Lev5b6E5Y+C6ICD5bi46KeB6Zeu6aKYIDIKICAgICAgICAgICAgaWZyYW1lVXJsOiB0aGlzLiRyb3V0ZVByb1N0ciArICcvd2lkZ2V0LmltYWdlcy9pbmRleC5odG1sP2ZvZGRlcj1kaWFsb2cnLAogICAgICAgICAgICAvLyDpnIDopoHmjIflrprlvZPliY3nmoTnvJbovpHlmajlrp7kvosKICAgICAgICAgICAgZWRpdG9yOiBlZGl0b3IsCiAgICAgICAgICAgIC8vIOaMh+WumiBkaWFsb2cg55qE5ZCN5a2XCiAgICAgICAgICAgIG5hbWU6IHVpTmFtZSwKICAgICAgICAgICAgLy8gZGlhbG9nIOeahOagh+mimAogICAgICAgICAgICB0aXRsZTogJ+S4iuS8oOWbvueJhycsCiAgICAgICAgICAgIC8vIOaMh+WumiBkaWFsb2cg55qE5aSW5Zu05qC35byPCiAgICAgICAgICAgIGNzc1J1bGVzOiAnd2lkdGg6OTYwcHg7aGVpZ2h0OjU1MHB4O3BhZGRpbmc6MjBweDsnLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmRpYWxvZyA9IGRpYWxvZzsKICAgICAgICAgIHZhciBidG4gPSBuZXcgd2luZG93LlVFLnVpLkJ1dHRvbih7CiAgICAgICAgICAgIG5hbWU6ICdkaWFsb2ctYnV0dG9uJywKICAgICAgICAgICAgdGl0bGU6ICfkuIrkvKDlm77niYcnLAogICAgICAgICAgICBjc3NSdWxlczogYGJhY2tncm91bmQtaW1hZ2U6IHVybCguLi8uLi8uLi9hc3NldHMvaW1hZ2VzL2ljb25zLnBuZyk7YmFja2dyb3VuZC1wb3NpdGlvbjogLTcyNnB4IC03N3B4O2AsCiAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAvLyDmuLLmn5NkaWFsb2cKICAgICAgICAgICAgICBkaWFsb2cucmVuZGVyKCk7CiAgICAgICAgICAgICAgZGlhbG9nLm9wZW4oKTsKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIGJ0bjsKICAgICAgICB9LAogICAgICAgIDM3LAogICAgICApOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuXA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create.vue","sourceRoot":"src/pages/marketing/storeBargain","sourcesContent":["<template>\n  <div>\n    <div class=\"i-layout-page-header header-title\">\n      <div class=\"fl_header\">\n        <router-link :to=\"{ path: $routeProStr + '/marketing/store_bargain/index' }\"\n          ><Button icon=\"ios-arrow-back\" size=\"small\" type=\"text\">返回</Button></router-link\n        >\n        <Divider type=\"vertical\" />\n        <span\n          class=\"ivu-page-header-title mr20\"\n          style=\"padding: 0\"\n          v-text=\"$route.params.id !== '0' ? '编辑砍价商品' : '添加砍价商品'\"\n        ></span>\n      </div>\n    </div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <Row type=\"flex\" class=\"mt30 acea-row row-middle row-center\">\n        <Col span=\"20\">\n          <Steps :current=\"current\">\n            <Step title=\"选择砍价商品\"></Step>\n            <Step title=\"填写基础信息\"></Step>\n            <Step title=\"修改商品详情\"></Step>\n            <Step title=\"修改商品规则\"></Step>\n          </Steps>\n        </Col>\n        <Col span=\"23\">\n          <Form\n            class=\"form mt30\"\n            ref=\"formValidate\"\n            :rules=\"ruleValidate\"\n            :model=\"formValidate\"\n            @on-validate=\"validate\"\n            :label-width=\"labelWidth\"\n            :label-position=\"labelPosition\"\n            @submit.native.prevent\n          >\n            <FormItem label=\"选择商品：\" prop=\"image_input\" v-show=\"current === 0\">\n              <div class=\"picBox\" @click=\"changeGoods\">\n                <div class=\"pictrue\" v-if=\"formValidate.image\">\n                  <img v-lazy=\"formValidate.image\" />\n                </div>\n                <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                  <Icon type=\"ios-camera-outline\" size=\"26\" class=\"iconfonts\" />\n                </div>\n              </div>\n            </FormItem>\n            <Row v-show=\"current === 1\" type=\"flex\">\n              <Col span=\"24\">\n                <FormItem label=\"商品主图：\" prop=\"image\">\n                  <div class=\"picBox\" @click=\"modalPicTap('dan', 'danFrom')\">\n                    <div class=\"pictrue\" v-if=\"formValidate.image\">\n                      <img v-lazy=\"formValidate.image\" />\n                    </div>\n                    <div class=\"upLoad acea-row row-center-wrapper\" v-else>\n                      <Icon type=\"ios-camera-outline\" size=\"26\" class=\"iconfonts\" />\n                    </div>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"商品轮播图：\" prop=\"images\">\n                  <div class=\"acea-row\">\n                    <div\n                      class=\"pictrue\"\n                      v-for=\"(item, index) in formValidate.images\"\n                      :key=\"index\"\n                      draggable=\"true\"\n                      @dragstart=\"handleDragStart($event, item)\"\n                      @dragover.prevent=\"handleDragOver($event, item)\"\n                      @dragenter=\"handleDragEnter($event, item)\"\n                      @dragend=\"handleDragEnd($event, item)\"\n                    >\n                      <img v-lazy=\"item\" />\n                      <Button\n                        shape=\"circle\"\n                        icon=\"md-close\"\n                        @click.native=\"handleRemove(index)\"\n                        class=\"btndel\"\n                      ></Button>\n                    </div>\n                    <div\n                      v-if=\"formValidate.images.length < 10\"\n                      class=\"upLoad acea-row row-center-wrapper\"\n                      @click=\"modalPicTap('duo')\"\n                    >\n                      <Icon type=\"ios-camera-outline\" size=\"26\" class=\"iconfonts\" />\n                    </div>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <Col v-bind=\"grid\">\n                  <FormItem label=\"砍价活动名称：\" prop=\"title\" label-for=\"title\">\n                    <Input placeholder=\"请输入砍价活动名称\" element-id=\"title\" v-model=\"formValidate.title\" />\n                  </FormItem>\n                </Col>\n              </Col>\n              <Col span=\"24\">\n                <Col v-bind=\"grid\">\n                  <FormItem label=\"砍价活动简介：\" prop=\"info\" label-for=\"info\">\n                    <Input\n                      placeholder=\"请输入砍价活动简介\"\n                      type=\"textarea\"\n                      :rows=\"4\"\n                      element-id=\"info\"\n                      v-model=\"formValidate.info\"\n                    />\n                  </FormItem>\n                </Col>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"活动时间：\" prop=\"section_time\">\n                  <div class=\"acea-row row-middle\">\n                    <DatePicker\n                      :editable=\"false\"\n                      type=\"datetimerange\"\n                      format=\"yyyy-MM-dd HH:mm\"\n                      placeholder=\"请选择活动时间\"\n                      @on-change=\"onchangeTime\"\n                      class=\"perW30\"\n                      :value=\"formValidate.section_time\"\n                      v-model=\"formValidate.section_time\"\n                    ></DatePicker>\n                    <div class=\"ml10 grey\">设置活动开启结束时间，用户可以在设置时间内发起参与砍价</div>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\" v-if=\"formValidate.virtual_type == 0\">\n                <FormItem label=\"物流方式：\" prop=\"logistics\">\n                  <CheckboxGroup v-model=\"formValidate.logistics\" @on-change=\"logisticsBtn\">\n                    <Checkbox label=\"1\">快递</Checkbox>\n                    <Checkbox label=\"2\">到店核销</Checkbox>\n                  </CheckboxGroup>\n                </FormItem>\n              </Col>\n              <Col span=\"24\" v-if=\"formValidate.virtual_type == 0\">\n                <FormItem label=\"运费设置：\" :prop=\"formValidate.freight != 1 ? 'freight' : ''\">\n                  <RadioGroup v-model=\"formValidate.freight\">\n                    <Radio :label=\"2\">固定邮费</Radio>\n                    <Radio :label=\"3\">运费模板</Radio>\n                  </RadioGroup>\n                </FormItem>\n              </Col>\n              <Col\n                span=\"24\"\n                v-if=\"formValidate.freight != 3 && formValidate.freight != 1 && formValidate.virtual_type == 0\"\n              >\n                <FormItem label=\"\">\n                  <div class=\"acea-row\">\n                    <InputNumber\n                      min=\"0.01\"\n                      max=\"10000\"\n                      v-model=\"formValidate.postage\"\n                      placeholder=\"请输入金额\"\n                      class=\"perW20 maxW\"\n                    />\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\" v-if=\"formValidate.freight == 3 && formValidate.virtual_type == 0\">\n                <FormItem label=\"\" prop=\"temp_id\">\n                  <div class=\"acea-row\">\n                    <Select v-model=\"formValidate.temp_id\" clearable placeholder=\"请选择运费模板\" class=\"perW20 maxW\">\n                      <Option v-for=\"(item, index) in templateList\" :value=\"item.id\" :key=\"index\">{{\n                        item.name\n                      }}</Option>\n                    </Select>\n                    <span class=\"addfont\" @click=\"freight\">新增运费模板</span>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"砍价人数：\" prop=\"people_num\" label-for=\"people_num\">\n                  <div class=\"acea-row row-middle\">\n                    <InputNumber\n                      placeholder=\"请输入砍价人数\"\n                      element-id=\"people_num\"\n                      :min=\"2\"\n                      :max=\"10000\"\n                      :precision=\"0\"\n                      v-model=\"formValidate.people_num\"\n                      class=\"perW20\"\n                    />\n                    <div class=\"ml10 grey\">需要多少人砍价成功</div>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"帮砍次数：\" prop=\"bargain_num\" label-for=\"bargain_num\">\n                  <div class=\"acea-row row-middle\">\n                    <InputNumber\n                      placeholder=\"请输入帮砍次数\"\n                      element-id=\"bargain_num\"\n                      :min=\"1\"\n                      :max=\"10000\"\n                      :precision=\"0\"\n                      v-model=\"formValidate.bargain_num\"\n                      class=\"perW20\"\n                    />\n                    <div class=\"ml10 grey\">\n                      单个商品用户可以帮砍的次数，例：次数设置为1，甲和乙同时将商品A的砍价链接发给丙，丙只能帮甲或乙其中一个人砍价\n                    </div>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"购买数量限制：\" prop=\"num\">\n                  <div class=\"acea-row row-middle\">\n                    <InputNumber\n                      placeholder=\"购买数量限制\"\n                      :min=\"1\"\n                      :max=\"10000\"\n                      :precision=\"0\"\n                      v-model=\"formValidate.num\"\n                      class=\"perW20\"\n                    />\n                    <div class=\"ml10 grey\">单个活动每个用户发起砍价次数限制</div>\n                  </div>\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"单位：\" prop=\"unit_name\" label-for=\"unit_name\">\n                  <Input\n                    placeholder=\"请输入单位\"\n                    element-id=\"unit_name\"\n                    v-model=\"formValidate.unit_name\"\n                    class=\"perW20\"\n                  />\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"排序：\">\n                  <InputNumber\n                    placeholder=\"请输入排序\"\n                    element-id=\"sort\"\n                    :min=\"0\"\n                    :max=\"10000\"\n                    :precision=\"0\"\n                    v-model=\"formValidate.sort\"\n                    class=\"perW10\"\n                  />\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"活动状态：\" props=\"status\" label-for=\"status\">\n                  <RadioGroup element-id=\"status\" v-model=\"formValidate.status\">\n                    <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                    <Radio :label=\"0\">关闭</Radio>\n                  </RadioGroup>\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"规格选择：\">\n                  <Table :data=\"specsData\" :columns=\"columns\" border>\n                    <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                      <div\n                        class=\"acea-row row-middle row-center-wrapper\"\n                        @click=\"modalPicTap('dan', 'danTable', index)\"\n                      >\n                        <div class=\"pictrue pictrueTab\" v-if=\"specsData[index].pic\">\n                          <img v-lazy=\"specsData[index].pic\" />\n                        </div>\n                        <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                          <Icon type=\"ios-camera-outline\" size=\"21\" class=\"iconfonts\" />\n                        </div>\n                      </div>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"price\">\n                      <InputNumber\n                        v-model=\"specsData[index].price\"\n                        :min=\"0\"\n                        :precision=\"2\"\n                        class=\"priceBox\"\n                        :active-change=\"false\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"min_price\">\n                      <InputNumber\n                        v-model=\"specsData[index].min_price\"\n                        :min=\"0\"\n                        :precision=\"2\"\n                        class=\"priceBox\"\n                        :active-change=\"false\"\n                      ></InputNumber>\n                    </template>\n                    <template slot-scope=\"{ row, index }\" slot=\"quota\">\n                      <InputNumber\n                        v-model=\"specsData[index].quota\"\n                        :min=\"1\"\n                        active-change\n                        class=\"priceBox\"\n                      ></InputNumber>\n                    </template>\n                  </Table>\n                </FormItem>\n              </Col>\n            </Row>\n            <div v-if=\"current === 2\">\n              <FormItem label=\"内容：\">\n                <WangEditor\n                  style=\"width: 90%\"\n                  :content=\"formValidate.description\"\n                  @editorContent=\"getEditorContent\"\n                ></WangEditor>\n              </FormItem>\n            </div>\n            <div v-if=\"current === 3\">\n              <FormItem label=\"规则：\">\n                <WangEditor\n                  style=\"width: 90%\"\n                  :content=\"formValidate.rule\"\n                  @editorContent=\"getEditorContent2\"\n                ></WangEditor>\n              </FormItem>\n            </div>\n            <FormItem>\n              <Button\n                class=\"submission mr15\"\n                @click=\"step\"\n                v-show=\"current !== 0\"\n                :disabled=\"$route.params.id && $route.params.id !== '0' && current === 1\"\n                >上一步</Button\n              >\n              <Button\n                type=\"primary\"\n                :disabled=\"submitOpen && current === 3\"\n                class=\"submission\"\n                @click=\"next('formValidate')\"\n                v-text=\"current === 3 ? '提交' : '下一步'\"\n              ></Button>\n            </FormItem>\n            <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n          </Form>\n        </Col>\n      </Row>\n    </Card>\n    <!-- 选择商品-->\n    <Modal\n      v-model=\"modals\"\n      title=\"商品列表\"\n      footerHide\n      class=\"paymentFooter\"\n      scrollable\n      width=\"900\"\n      @on-cancel=\"cancel\"\n    >\n      <goods-list ref=\"goodslist\" @getProductId=\"getProductId\"></goods-list>\n    </Modal>\n\n    <!-- 上传图片-->\n    <Modal\n      v-model=\"modalPic\"\n      width=\"950px\"\n      scrollable\n      footer-hide\n      closable\n      title=\"上传商品图\"\n      :mask-closable=\"false\"\n      :z-index=\"888\"\n    >\n      <uploadPictures\n        :isChoice=\"isChoice\"\n        @getPic=\"getPic\"\n        @getPicD=\"getPicD\"\n        :gridBtn=\"gridBtn\"\n        :gridPic=\"gridPic\"\n        v-if=\"modalPic\"\n      ></uploadPictures>\n    </Modal>\n    <!-- 运费模板-->\n    <freight-template ref=\"template\" @addSuccess=\"productGetTemplate\"></freight-template>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport goodsList from '@/components/goodsList/index';\nimport uploadPictures from '@/components/uploadPictures';\nimport { bargainInfoApi, bargainCreatApi, productAttrsApi } from '@/api/marketing';\nimport { productGetTemplateApi } from '@/api/product';\nimport freightTemplate from '@/components/freightTemplate/index';\nimport WangEditor from '@/components/wangEditor/index.vue';\n\nexport default {\n  name: 'storeBargainCreate',\n  components: {\n    goodsList,\n    uploadPictures,\n    freightTemplate,\n    WangEditor,\n  },\n  data() {\n    return {\n      submitOpen: false,\n      spinShow: false,\n      myConfig: {\n        autoHeightEnabled: false, // 编辑器不自动被内容撑高\n        initialFrameHeight: 500, // 初始容器高度\n        initialFrameWidth: '100%', // 初始容器宽度\n        UEDITOR_HOME_URL: '/UEditor/',\n        serverUrl: '',\n      },\n      isChoice: '',\n      current: 0,\n      modalPic: false,\n      grid: {\n        xl: 12,\n        lg: 20,\n        md: 24,\n        sm: 24,\n        xs: 24,\n      },\n      grid2: {\n        xl: 8,\n        lg: 8,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      modals: false,\n      modal_loading: false,\n      images: [],\n      templateList: [],\n      columns: [],\n      specsData: [],\n      formValidate: {\n        images: [],\n        info: '',\n        title: '',\n        store_name: '',\n        image: '',\n        unit_name: '',\n        price: 0,\n        min_price: 0,\n        bargain_max_price: 10,\n        bargain_min_price: 0.01,\n        cost: 0,\n        bargain_num: 1,\n        people_num: 2,\n        stock: 1,\n        sales: 0,\n        sort: 0,\n        num: 1,\n        give_integral: 0,\n        postage: 0,\n        is_postage: 0,\n        is_hot: 0,\n        status: 0,\n        section_time: [],\n        description: '',\n        rule: '',\n        id: 0,\n        product_id: 0,\n        temp_id: '',\n        attrs: [],\n        items: [],\n        logistics: ['1'], //选择物流方式\n        freight: 2, //运费设置\n        postage: 1, //设置运费金额\n      },\n      description: '',\n      rule: '',\n      ruleValidate: {\n        image: [{ required: true, message: '请选择主图', trigger: 'change' }],\n        images: [\n          {\n            required: true,\n            type: 'array',\n            message: '请选择主图',\n            trigger: 'change',\n          },\n          {\n            type: 'array',\n            min: 1,\n            message: 'Choose two hobbies at best',\n            trigger: 'change',\n          },\n        ],\n        title: [{ required: true, message: '请输入砍价活动名称', trigger: 'blur' }],\n        info: [{ required: true, message: '请输入砍价活动简介', trigger: 'blur' }],\n        store_name: [{ required: true, message: '请输入砍价商品名称', trigger: 'blur' }],\n        section_time: [\n          {\n            required: true,\n            type: 'array',\n            message: '请选择活动时间',\n            trigger: 'change',\n          },\n        ],\n        unit_name: [{ required: true, message: '请输入单位', trigger: 'blur' }],\n        price: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入原价',\n            trigger: 'blur',\n          },\n        ],\n        min_price: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入最低购买价',\n            trigger: 'blur',\n          },\n        ],\n        // bargain_max_price: [\n        //     { required: true, type: 'number', message: '请输单次砍价最大金额', trigger: 'blur' }\n        // ],\n        // bargain_min_price: [\n        //     { required: true, type: 'number', message: '单次砍价最小金额', trigger: 'blur' }\n        // ],\n        cost: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入成本价',\n            trigger: 'blur',\n          },\n        ],\n        bargain_num: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入帮砍次数',\n            trigger: 'blur',\n          },\n        ],\n        people_num: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入砍价人数',\n            trigger: 'blur',\n          },\n        ],\n        stock: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入库存',\n            trigger: 'blur',\n          },\n        ],\n        num: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入单次允许购买数量',\n            trigger: 'blur',\n          },\n        ],\n        temp_id: [\n          {\n            required: true,\n            message: '请选择运费模板',\n            trigger: 'change',\n            type: 'number',\n          },\n        ],\n      },\n      currentid: '',\n      picTit: '',\n      tableIndex: 0,\n      copy: 0,\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : 140;\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  mounted() {\n    if (this.$route.params.id !== '0' && this.$route.params.id) {\n      this.copy = this.$route.params.copy;\n      this.current = 1;\n      this.getInfo();\n    }\n    this.productGetTemplate();\n  },\n  methods: {\n    // 详情内容\n    getEditorContent(data) {\n      this.description = data;\n    },\n    // 规则内容\n    getEditorContent2(data) {\n      this.rule = data;\n    },\n    // 添加运费模板\n    freight() {\n      this.$refs.template.id = 0;\n      this.$refs.template.isTemplate = true;\n    },\n    // 砍价规格；\n    productAttrs(row) {\n      let that = this;\n      productAttrsApi(row.id, 2)\n        .then((res) => {\n          let data = res.data.info;\n          let radio = {\n            title: '选择',\n            key: 'chose',\n            width: 60,\n            align: 'center',\n            render: (h, params) => {\n              let uid = params.index;\n              let flag = false;\n              if (this.currentid === uid) {\n                flag = true;\n              } else {\n                flag = false;\n              }\n              let self = this;\n              return h('div', [\n                h('Radio', {\n                  props: {\n                    value: flag,\n                  },\n                  on: {\n                    'on-change': () => {\n                      self.currentid = uid;\n                      let attrs = [];\n                      attrs.push(params.row);\n                      self.formValidate.attrs = attrs;\n                    },\n                  },\n                }),\n              ]);\n            },\n          };\n          that.columns = data.header;\n          that.columns.unshift(radio);\n          that.specsData = data.attrs;\n          that.inputChange(data);\n          that.formValidate.items = data.items;\n        })\n        .catch((res) => {\n          that.$Message.error(res.msg);\n        });\n    },\n    inputChange(data) {\n      let that = this;\n      let $index = [];\n      data.header.forEach(function (item, index) {\n        if (item.type === 1) {\n          $index.push({ index: index, key: item.key, title: item.title });\n        }\n      });\n      $index.forEach(function (item, index) {\n        let title = item.title;\n        let key = item.key;\n        let row = {\n          title: title,\n          key: key,\n          align: 'center',\n          minWidth: 100,\n          render: (h, params) => {\n            return h('div', [\n              h('InputNumber', {\n                props: {\n                  min: 1,\n                  precision: 0,\n                  value: params.row.quota,\n                },\n                on: {\n                  'on-change': (e) => {\n                    params.row.quota = e;\n                    that.specsData[params.index] = params.row;\n                    if (!!that.formValidate.attrs && that.formValidate.attrs.length) {\n                      that.formValidate.attrs.forEach((v, index) => {\n                        if (v.id === params.row.id) {\n                          that.formValidate.attrs.splice(index, 1, params.row);\n                        }\n                      });\n                    }\n                  },\n                },\n              }),\n            ]);\n          },\n        };\n        that.columns.splice(item.index, 1, row);\n      });\n    },\n    // 获取运费模板；\n    productGetTemplate() {\n      productGetTemplateApi().then((res) => {\n        this.templateList = res.data;\n      });\n    },\n    // 商品id\n    getProductId(row) {\n      this.modal_loading = false;\n      this.modals = false;\n      setTimeout(() => {\n        this.formValidate = {\n          images: row.slider_image,\n          info: row.store_info,\n          title: row.store_name,\n          store_name: row.store_name,\n          image: row.image,\n          unit_name: row.unit_name,\n          price: 0, // 不取商品中的原价\n          min_price: 0,\n          bargain_max_price: 10,\n          bargain_min_price: 0.01,\n          cost: row.cost,\n          bargain_num: 1,\n          people_num: 2,\n          stock: row.stock,\n          sales: row.sales,\n          sort: row.sort,\n          num: 1,\n          give_integral: row.give_integral,\n          postage: row.postage,\n          is_postage: row.is_postage,\n          is_hot: row.is_hot,\n          status: 0,\n          section_time: [],\n          description: row.description, // 不取商品中的\n          rule: '',\n          id: 0,\n          product_id: row.id,\n          temp_id: row.temp_id,\n          logistics: row.temp_id, //选择物流方式\n          freight: row.freight, //运费设置\n          postage: row.postage, //设置运费金额\n          custom_form: row.custom_form, //自定义表单数据\n          virtual_type: row.virtual_type, //虚拟商品类型\n        };\n        this.productAttrs(row);\n      }, 500);\n    },\n    cancel() {\n      this.modals = false;\n    },\n    // 移动\n    handleDragStart(e, item) {\n      this.dragging = item;\n    },\n    handleDragEnd(e, item) {\n      this.dragging = null;\n    },\n    // 首先把div变成可以放置的元素，即重写dragenter/dragover\n    handleDragOver(e) {\n      e.dataTransfer.dropEffect = 'move';\n    },\n    handleDragEnter(e, item) {\n      e.dataTransfer.effectAllowed = 'move';\n      if (item === this.dragging) {\n        return;\n      }\n      const newItems = [...this.formValidate.images];\n      const src = newItems.indexOf(this.dragging);\n      const dst = newItems.indexOf(item);\n      newItems.splice(dst, 0, ...newItems.splice(src, 1));\n      this.formValidate.images = newItems;\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.formValidate.section_time = e;\n    },\n    // 详情\n    getInfo() {\n      this.spinShow = true;\n      bargainInfoApi(this.$route.params.id)\n        .then(async (res) => {\n          let that = this;\n          let info = res.data.info;\n          this.formValidate = info;\n          this.formValidate.rule = info.rule === null ? '' : info.rule;\n          this.$set(this.formValidate, 'items', info.attrs.items);\n          this.description = this.formValidate.description;\n\n          this.columns = info.attrs.header;\n          let radio = {\n            title: '选择',\n            key: 'chose',\n            width: 60,\n            align: 'center',\n            render: (h, params) => {\n              let uid = params.index;\n              let flag = false;\n              if (this.currentid === uid) {\n                flag = true;\n              } else {\n                flag = false;\n              }\n              let self = this;\n              return h('div', [\n                h('Radio', {\n                  props: {\n                    value: flag,\n                  },\n                  on: {\n                    'on-change': () => {\n                      self.currentid = uid;\n                      let attrs = [];\n                      attrs.push(params.row);\n                      self.formValidate.attrs = attrs;\n                    },\n                  },\n                }),\n              ]);\n            },\n          };\n          that.columns.unshift(radio);\n          this.specsData = info.attrs.value;\n          let defaultAttrs = [];\n          info.attrs.value.forEach(function (item, index) {\n            if (item.opt) {\n              defaultAttrs.push(item);\n              that.$set(that, 'currentid', index);\n              that.$set(that.formValidate, 'attrs', defaultAttrs);\n            }\n          });\n          this.spinShow = false;\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    // 下一步\n    next(name) {\n      if (this.current === 3) {\n        this.formValidate.description = this.description;\n        this.formValidate.rule = this.rule;\n        this.$refs[name].validate((valid) => {\n          if (valid) {\n            if (this.copy == 1) this.formValidate.copy = 1;\n            this.formValidate.id = this.$route.params.id || 0;\n            this.submitOpen = true;\n            bargainCreatApi(this.formValidate)\n              .then(async (res) => {\n                this.submitOpen = false;\n                this.$Message.success(res.msg);\n                setTimeout(() => {\n                  this.$router.push({\n                    path: this.$routeProStr + '/marketing/store_bargain/index',\n                  });\n                }, 500);\n              })\n              .catch((res) => {\n                this.submitOpen = false;\n                this.$Message.error(res.msg);\n              });\n          } else {\n            return false;\n          }\n        });\n      } else if (this.current === 1) {\n        this.$refs[name].validate((valid) => {\n          if (valid) {\n            if (this.currentid === '') {\n              return this.$Message.error('请选择属性规格');\n            } else {\n              let val = this.specsData[this.currentid];\n              let formValidate = this.formValidate.attrs[0];\n              formValidate.price = val.price;\n              formValidate.min_price = val.min_price;\n              formValidate.quota = val.quota;\n              if (this.formValidate.attrs[0].quota <= 0) {\n                return this.$Message.error('砍价限量必须大于0');\n              }\n              if (this.formValidate.attrs[0].quota > this.formValidate.attrs[0]['stock']) {\n                return this.$Message.error('砍价限量不能超过规格库存');\n              }\n            }\n            this.current += 1;\n            setTimeout((e) => {\n              this.formValidate.description += ' ';\n            }, 0);\n          } else {\n            return this.$Message.warning('请完善您的信息');\n          }\n        });\n      } else {\n        if (this.formValidate.image) {\n          this.current += 1;\n          if (this.current == 3) {\n            setTimeout((e) => {\n              this.formValidate.rule += ' ';\n            }, 0);\n          }\n        } else {\n          this.$Message.warning('请选择商品');\n        }\n      }\n    },\n    // 上一步\n    step() {\n      this.current--;\n    },\n    // 内容\n    getContent(val) {\n      this.formValidate.description = val;\n    },\n    // 规则\n    getRole(val) {\n      this.formValidate.rule = val;\n    },\n    // 点击商品图\n    modalPicTap(tit, picTit, index) {\n      this.modalPic = true;\n      this.isChoice = tit === 'dan' ? '单选' : '多选';\n      this.picTit = picTit;\n      this.tableIndex = index;\n    },\n    // 获取单张图片信息\n    getPic(pc) {\n      switch (this.picTit) {\n        case 'danFrom':\n          this.formValidate.image = pc.att_dir;\n          break;\n        default:\n          this.specsData[this.tableIndex].pic = pc.att_dir;\n          this.formValidate.attrs[0].pic = pc.att_dir;\n      }\n      this.modalPic = false;\n    },\n    // 获取多张图信息\n    getPicD(pc) {\n      this.images = pc;\n      this.images.map((item) => {\n        this.formValidate.images.push(item.att_dir);\n        this.formValidate.images = this.formValidate.images.splice(0, 10);\n      });\n      this.modalPic = false;\n    },\n    handleRemove(i) {\n      this.images.splice(i, 1);\n      this.formValidate.images.splice(i, 1);\n    },\n    // 选择商品\n    changeGoods() {\n      this.modals = true;\n      this.$refs.goodslist.formValidate.is_presale = 0;\n      this.$refs.goodslist.formValidate.is_virtual = 0;\n      this.$refs.goodslist.getList();\n      this.$refs.goodslist.goodsCategory();\n    },\n    // 表单验证\n    validate(prop, status, error) {\n      if (status === false) {\n        this.$Message.error(error);\n      }\n    },\n    // 添加自定义弹窗\n    addCustomDialog(editorId) {\n      window.UE.registerUI(\n        'test-dialog',\n        function (editor, uiName) {\n          // 创建 dialog\n          let dialog = new window.UE.ui.Dialog({\n            // 指定弹出层中页面的路径，这里只能支持页面，路径参考常见问题 2\n            iframeUrl: this.$routeProStr + '/widget.images/index.html?fodder=dialog',\n            // 需要指定当前的编辑器实例\n            editor: editor,\n            // 指定 dialog 的名字\n            name: uiName,\n            // dialog 的标题\n            title: '上传图片',\n            // 指定 dialog 的外围样式\n            cssRules: 'width:960px;height:550px;padding:20px;',\n          });\n          this.dialog = dialog;\n          var btn = new window.UE.ui.Button({\n            name: 'dialog-button',\n            title: '上传图片',\n            cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n            onclick: function () {\n              // 渲染dialog\n              dialog.render();\n              dialog.open();\n            },\n          });\n          return btn;\n        },\n        37,\n      );\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.grey {\n  color: #999;\n}\n\n.maxW /deep/.ivu-select-dropdown {\n  max-width: 600px;\n}\n\n.ivu-table-wrapper {\n  border-left: 1px solid #dcdee2;\n  border-top: 1px solid #dcdee2;\n}\n\n.tabBox_img {\n  width: 50px;\n  height: 50px;\n}\n\n.tabBox_img img {\n  width: 100%;\n  height: 100%;\n}\n\n.priceBox {\n  width: 100%;\n}\n\n.form {\n  .picBox {\n    display: inline-block;\n    cursor: pointer;\n  }\n\n  .pictrue {\n    width: 60px;\n    height: 60px;\n    border: 1px dotted rgba(0, 0, 0, 0.1);\n    margin-right: 15px;\n    display: inline-block;\n    position: relative;\n    cursor: pointer;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n\n    .btndel {\n      position: absolute;\n      z-index: 9;\n      width: 20px !important;\n      height: 20px !important;\n      left: 46px;\n      top: -4px;\n    }\n  }\n\n  .upLoad {\n    width: 58px;\n    height: 58px;\n    line-height: 58px;\n    border: 1px dotted rgba(0, 0, 0, 0.1);\n    border-radius: 4px;\n    background: rgba(0, 0, 0, 0.02);\n    cursor: pointer;\n  }\n\n  .col {\n    color: #2d8cf0;\n    cursor: pointer;\n  }\n}\n\n.addfont {\n  font-size: 13px;\n  color: #1890FF;\n  margin-left: 14px;\n  cursor: pointer;\n  margin-left: 10px;\n  cursor: pointer;\n}\n</style>\n"]}]}