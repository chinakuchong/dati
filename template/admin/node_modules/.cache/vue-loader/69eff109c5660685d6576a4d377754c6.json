{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/notify/smsConfig/components/forgetPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/notify/smsConfig/components/forgetPassword.vue","mtime":1689324015238},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNhcHRjaGFBcGksIGNvbmZpZ0FwaSwgc2VydmVNb2RpZnlBcGksIGNoZWNrQ2FwdGNoYUFwaSB9IGZyb20gJ0AvYXBpL3NldHRpbmcnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2ZvcmdldFBhc3N3b3JkJywKICBkYXRhKCkgewogICAgY29uc3QgdmFsaWRhdGVQaG9uZSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIHJldHVybiBjYWxsYmFjayhuZXcgRXJyb3IoJ+ivt+Whq+WGmeaJi+acuuWPtycpKTsKICAgICAgfSBlbHNlIGlmICghL14xWzM0NTY3ODldXGR7OX0kLy50ZXN0KHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5omL5py65Y+35qC85byP5LiN5q2j56GuIScpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgdmFyIHZhbGlkYXRlUGFzcyA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5a+G56CBJykpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmN1cnJlbnQgPT09IDEpIHsKICAgICAgICAgIGlmICh0aGlzLmZvcm1JbmxpbmUuY2hlY2tQYXNzICE9PSAnJykgewogICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm1JbmxpbmUudmFsaWRhdGVGaWVsZCgnY2hlY2tQYXNzJyk7CiAgICAgICAgICB9CiAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuZm9ybUlubGluZS5jaGVja1Bhc3MpIHsKICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXmraPnoa7lr4bnoIEhJykpOwogICAgICAgICAgfQogICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICB2YXIgdmFsaWRhdGVQYXNzMiA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKHZhbHVlID09PSAnJykgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+35YaN5qyh6L6T5YWl5a+G56CBJykpOwogICAgICB9IGVsc2UgaWYgKHZhbHVlICE9PSB0aGlzLmZvcm1JbmxpbmUucGFzc3dvcmQpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+S4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCEnKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGN1dE5VbTogJ+iOt+WPlumqjOivgeeggScsCiAgICAgIGNhbkNsaWNrOiB0cnVlLAogICAgICBjdXJyZW50OiAwLAogICAgICBmb3JtSW5saW5lOiB7CiAgICAgICAgYWNjb3VudDogJycsCiAgICAgICAgcGhvbmU6ICcnLAogICAgICAgIHZlcmlmeV9jb2RlOiAnJywKICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgY2hlY2tQYXNzOiAnJywKICAgICAgfSwKICAgICAgcnVsZUlubGluZTogewogICAgICAgIHBob25lOiBbeyByZXF1aXJlZDogdHJ1ZSwgdmFsaWRhdG9yOiB2YWxpZGF0ZVBob25lLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgICAgdmVyaWZ5X2NvZGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6aqM6K+B56CBJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIHBhc3N3b3JkOiBbeyB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzcywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIGNoZWNrUGFzczogW3sgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MyLCB0cmlnZ2VyOiAnYmx1cicgfV0sCiAgICAgIH0sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g55+t5L+h6aqM6K+B56CBCiAgICBjdXREb3duKCkgewogICAgICBpZiAodGhpcy5mb3JtSW5saW5lLnBob25lKSB7CiAgICAgICAgaWYgKCF0aGlzLmNhbkNsaWNrKSByZXR1cm47CiAgICAgICAgdGhpcy5jYW5DbGljayA9IGZhbHNlOwogICAgICAgIHRoaXMuY3V0TlVtID0gNjA7CiAgICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgICBwaG9uZTogdGhpcy5mb3JtSW5saW5lLnBob25lLAogICAgICAgIH07CiAgICAgICAgY2FwdGNoYUFwaShkYXRhKQogICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIH0pOwogICAgICAgIGxldCB0aW1lID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgdGhpcy5jdXROVW0tLTsKICAgICAgICAgIGlmICh0aGlzLmN1dE5VbSA9PT0gMCkgewogICAgICAgICAgICB0aGlzLmN1dE5VbSA9ICfojrflj5bpqozor4HnoIEnOwogICAgICAgICAgICB0aGlzLmNhbkNsaWNrID0gdHJ1ZTsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lKTsKICAgICAgICAgIH0KICAgICAgICB9LCAxMDAwKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+Whq+WGmeaJi+acuuWPtyEnKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVN1Ym1pdDEobmFtZSwgY3VycmVudCkgewogICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY2hlY2tDYXB0Y2hhQXBpKHRoaXMuZm9ybUlubGluZSkKICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuY3VycmVudCA9IDE7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdDIobmFtZSkgewogICAgICB0aGlzLmZvcm1JbmxpbmUuYWNjb3VudCA9IHRoaXMuZm9ybUlubGluZS5waG9uZTsKICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHNlcnZlTW9kaWZ5QXBpKHRoaXMuZm9ybUlubGluZSkKICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICB0aGlzLmN1cnJlbnQgPSAyOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+eZu+W9lQogICAgaGFuZGxlU3VibWl0KG5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tuYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGNvbmZpZ0FwaSh7CiAgICAgICAgICAgIGFjY291bnQ6IHRoaXMuZm9ybUlubGluZS5hY2NvdW50LAogICAgICAgICAgICBwYXNzd29yZDogdGhpcy5mb3JtSW5saW5lLnBhc3N3b3JkLAogICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygn55m75b2V5oiQ5YqfIScpOwogICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ29uLUxvZ2luJyk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJldHVybnMoKSB7CiAgICAgIHRoaXMuY3VycmVudCA9PT0gMCA/IHRoaXMuJGVtaXQoJ2dvYmFjaycpIDogKHRoaXMuY3VycmVudCA9IDApOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["forgetPassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"forgetPassword.vue","sourceRoot":"src/pages/notify/smsConfig/components","sourcesContent":["<template>\n  <Row type=\"flex\" justify=\"center\" align=\"middle\">\n    <Col span=\"20\" style=\"margin-top: 70px\" class=\"mb50\">\n      <Steps :current=\"current\">\n        <Step title=\"验证账号信息\"></Step>\n        <Step title=\"修改账户密码\"></Step>\n        <Step title=\"登录\"></Step>\n      </Steps>\n    </Col>\n    <Col span=\"24\">\n      <div class=\"index_from page-account-container\">\n        <Form ref=\"formInline\" :model=\"formInline\" :rules=\"ruleInline\" @submit.native.prevent>\n          <template v-if=\"current === 0\">\n            <FormItem prop=\"phone\" class=\"maxInpt\">\n              <Input\n                type=\"text\"\n                v-model=\"formInline.phone\"\n                prefix=\"ios-contact-outline\"\n                placeholder=\"请输入手机号\"\n                size=\"large\"\n              />\n            </FormItem>\n            <FormItem prop=\"verify_code\" class=\"maxInpt\">\n              <div class=\"code\">\n                <Input\n                  type=\"text\"\n                  v-model=\"formInline.verify_code\"\n                  prefix=\"ios-keypad-outline\"\n                  placeholder=\"请输入验证码\"\n                  size=\"large\"\n                />\n                <Button :disabled=\"!this.canClick\" @click=\"cutDown\" size=\"large\">{{ cutNUm }}</Button>\n              </div>\n            </FormItem>\n          </template>\n          <template v-if=\"current === 1\">\n            <FormItem prop=\"password\" class=\"maxInpt\">\n              <Input\n                type=\"password\"\n                v-model=\"formInline.password\"\n                prefix=\"ios-lock-outline\"\n                placeholder=\"请输入新密码\"\n                size=\"large\"\n              />\n            </FormItem>\n            <FormItem prop=\"checkPass\" class=\"maxInpt\">\n              <Input\n                type=\"password\"\n                v-model=\"formInline.checkPass\"\n                prefix=\"ios-lock-outline\"\n                placeholder=\"请验证新密码\"\n                size=\"large\"\n              />\n            </FormItem>\n          </template>\n          <template v-if=\"current === 2\">\n            <FormItem prop=\"phone\" class=\"maxInpt\">\n              <Input type=\"text\" v-model=\"formInline.phone\" prefix=\"ios-contact-outline\" placeholder=\"请输入手机号\" />\n            </FormItem>\n            <FormItem prop=\"password\" class=\"maxInpt\">\n              <Input type=\"password\" v-model=\"formInline.password\" prefix=\"ios-lock-outline\" placeholder=\"请输入密码\" />\n            </FormItem>\n          </template>\n          <FormItem class=\"maxInpt\">\n            <Button\n              v-if=\"current === 0\"\n              type=\"primary\"\n              long\n              size=\"large\"\n              @click=\"handleSubmit1('formInline', current)\"\n              class=\"mb20\"\n              >下一步</Button\n            >\n            <Button\n              v-if=\"current === 1\"\n              type=\"primary\"\n              long\n              size=\"large\"\n              @click=\"handleSubmit2('formInline', current)\"\n              class=\"mb20\"\n              >提交</Button\n            >\n            <Button\n              v-if=\"current === 2\"\n              type=\"primary\"\n              long\n              size=\"large\"\n              @click=\"handleSubmit('formInline', current)\"\n              class=\"mb20\"\n              >登录</Button\n            >\n            <Button long size=\"large\" @click=\"returns('formInline')\" class=\"btn\">返回 </Button>\n          </FormItem>\n        </Form>\n      </div>\n    </Col>\n  </Row>\n</template>\n\n<script>\nimport { captchaApi, configApi, serveModifyApi, checkCaptchaApi } from '@/api/setting';\nexport default {\n  name: 'forgetPassword',\n  data() {\n    const validatePhone = (rule, value, callback) => {\n      if (!value) {\n        return callback(new Error('请填写手机号'));\n      } else if (!/^1[3456789]\\d{9}$/.test(value)) {\n        callback(new Error('手机号格式不正确!'));\n      } else {\n        callback();\n      }\n    };\n    var validatePass = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请输入密码'));\n      } else {\n        if (this.current === 1) {\n          if (this.formInline.checkPass !== '') {\n            this.$refs.formInline.validateField('checkPass');\n          }\n          callback();\n        } else {\n          if (value !== this.formInline.checkPass) {\n            callback(new Error('请输入正确密码!'));\n          }\n          callback();\n        }\n      }\n    };\n    var validatePass2 = (rule, value, callback) => {\n      if (value === '') {\n        callback(new Error('请再次输入密码'));\n      } else if (value !== this.formInline.password) {\n        callback(new Error('两次输入密码不一致!'));\n      } else {\n        callback();\n      }\n    };\n    return {\n      cutNUm: '获取验证码',\n      canClick: true,\n      current: 0,\n      formInline: {\n        account: '',\n        phone: '',\n        verify_code: '',\n        password: '',\n        checkPass: '',\n      },\n      ruleInline: {\n        phone: [{ required: true, validator: validatePhone, trigger: 'blur' }],\n        verify_code: [{ required: true, message: '请输入验证码', trigger: 'blur' }],\n        password: [{ validator: validatePass, trigger: 'blur' }],\n        checkPass: [{ validator: validatePass2, trigger: 'blur' }],\n      },\n    };\n  },\n  methods: {\n    // 短信验证码\n    cutDown() {\n      if (this.formInline.phone) {\n        if (!this.canClick) return;\n        this.canClick = false;\n        this.cutNUm = 60;\n        let data = {\n          phone: this.formInline.phone,\n        };\n        captchaApi(data)\n          .then(async (res) => {\n            this.$Message.success(res.msg);\n          })\n          .catch((res) => {\n            this.$Message.error(res.msg);\n          });\n        let time = setInterval(() => {\n          this.cutNUm--;\n          if (this.cutNUm === 0) {\n            this.cutNUm = '获取验证码';\n            this.canClick = true;\n            clearInterval(time);\n          }\n        }, 1000);\n      } else {\n        this.$Message.warning('请填写手机号!');\n      }\n    },\n    handleSubmit1(name, current) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          checkCaptchaApi(this.formInline)\n            .then(async (res) => {\n              this.current = 1;\n            })\n            .catch((res) => {\n              this.$Message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    handleSubmit2(name) {\n      this.formInline.account = this.formInline.phone;\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          serveModifyApi(this.formInline)\n            .then(async (res) => {\n              this.$Message.success(res.msg);\n              this.current = 2;\n            })\n            .catch((res) => {\n              this.$Message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    //登录\n    handleSubmit(name) {\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          configApi({\n            account: this.formInline.account,\n            password: this.formInline.password,\n          })\n            .then(async (res) => {\n              this.$Message.success('登录成功!');\n              this.$emit('on-Login');\n            })\n            .catch((res) => {\n              this.$Message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    returns() {\n      this.current === 0 ? this.$emit('goback') : (this.current = 0);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.maxInpt {\n  max-width: 400px;\n  margin-left: auto;\n  margin-right: auto;\n}\n.code {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.ivu-steps-item:last-child {\n  width: unset !important;\n}\n</style>\n"]}]}