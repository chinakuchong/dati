{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/storeIntegral/addStoreIntegral.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/storeIntegral/addStoreIntegral.vue","mtime":1689324015231},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAnQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCc7CmltcG9ydCB1cGxvYWRQaWN0dXJlcyBmcm9tICdAL2NvbXBvbmVudHMvdXBsb2FkUGljdHVyZXMnOwppbXBvcnQgeyBpbnRlZ3JhbEFkZEJhdGNoLCBwcm9kdWN0QXR0cnNBcGksIGludGVncmFsSW5mb0FwaSB9IGZyb20gJ0AvYXBpL21hcmtldGluZyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3N0b3JlSW50ZWdyYWxDcmVhdGUnLAogIGNvbXBvbmVudHM6IHsgZ29vZHNMaXN0LCB1cGxvYWRQaWN0dXJlcyB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZ29vZHNJbWc6IFtdLAogICAgICBwcm9kdWN0c0lkOiBbXSwKICAgICAgc3VibWl0T3BlbjogZmFsc2UsCiAgICAgIHNwaW5TaG93OiBmYWxzZSwKICAgICAgaXNDaG9pY2U6ICcnLAogICAgICBjdXJyZW50OiAwLAogICAgICBtb2RhbFBpYzogZmFsc2UsCiAgICAgIGdyaWQ6IHsKICAgICAgICB4bDogMTIsCiAgICAgICAgbGc6IDIwLAogICAgICAgIG1kOiAyNCwKICAgICAgICBzbTogMjQsCiAgICAgICAgeHM6IDI0LAogICAgICB9LAogICAgICBncmlkMjogewogICAgICAgIHhsOiA4LAogICAgICAgIGxnOiAxMiwKICAgICAgICBtZDogMTIsCiAgICAgICAgc206IDI0LAogICAgICAgIHhzOiAyNCwKICAgICAgfSwKICAgICAgZ3JpZFBpYzogewogICAgICAgIHhsOiA2LAogICAgICAgIGxnOiA4LAogICAgICAgIG1kOiAxMiwKICAgICAgICBzbTogMTIsCiAgICAgICAgeHM6IDEyLAogICAgICB9LAogICAgICBncmlkQnRuOiB7CiAgICAgICAgeGw6IDQsCiAgICAgICAgbGc6IDgsCiAgICAgICAgbWQ6IDgsCiAgICAgICAgc206IDgsCiAgICAgICAgeHM6IDgsCiAgICAgIH0sCiAgICAgIG15Q29uZmlnOiB7CiAgICAgICAgYXV0b0hlaWdodEVuYWJsZWQ6IGZhbHNlLCAvLyDnvJbovpHlmajkuI3oh6rliqjooqvlhoXlrrnmkpHpq5gKICAgICAgICBpbml0aWFsRnJhbWVIZWlnaHQ6IDUwMCwgLy8g5Yid5aeL5a655Zmo6auY5bqmCiAgICAgICAgaW5pdGlhbEZyYW1lV2lkdGg6ICcxMDAlJywgLy8g5Yid5aeL5a655Zmo5a695bqmCiAgICAgICAgVUVESVRPUl9IT01FX1VSTDogJy9VRWRpdG9yLycsCiAgICAgICAgc2VydmVyVXJsOiAnJywKICAgICAgfSwKICAgICAgbW9kYWxzOiBmYWxzZSwKICAgICAgbW9kYWxfbG9hZGluZzogZmFsc2UsCiAgICAgIGltYWdlczogW10sCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIGlzX3Nob3c6IDAsCiAgICAgICAgYXR0cnM6IFtdLAogICAgICB9LAogICAgICB0ZW1wbGF0ZUxpc3Q6IFtdLAogICAgICB0aW1lTGlzdDogW10sCiAgICAgIGNvbHVtbnM6IFtdLAogICAgICBzcGVjc0RhdGE6IFtdLAogICAgICBwaWNUaXQ6ICcnLAogICAgICB0YWJsZUluZGV4OiAwLAogICAgICBydWxlVmFsaWRhdGU6IHsKICAgICAgICBwcmljZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlhZHmjaLnp6/liIYnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICB9LAogICAgICAgIF0sCgogICAgICAgIG51bTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXotK3kubDmlbDph4/pmZDliLYnLAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgb25jZV9udW06IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5Y2V5qyh6LSt5Lmw5pWw6YeP6ZmQ5Yi2JywKICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICB9LAogICAgICBjb3B5OiAwLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgnbWVkaWEnLCBbJ2lzTW9iaWxlJ10pLAogICAgbGFiZWxXaWR0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB1bmRlZmluZWQgOiAxMzU7CiAgICB9LAogICAgbGFiZWxQb3NpdGlvbigpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyAndG9wJyA6ICdyaWdodCc7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgdGhpcy5jb3B5ID0gdGhpcy4kcm91dGUucGFyYW1zLmNvcHk7CiAgICAgIHRoaXMuY3VycmVudCA9IDE7CiAgICAgIHRoaXMuZ2V0SW5mbygpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6KeE5qC877ybCiAgICBwcm9kdWN0QXR0cnMocm93cykgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgICBwcm9kdWN0QXR0cnNBcGkocm93cy5wcm9kdWN0X2lkLCA0KQogICAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhLmluZm87CiAgICAgICAgICAgIGxldCBzZWxlY3Rpb24gPSB7CiAgICAgICAgICAgICAgdHlwZTogJ3NlbGVjdGlvbicsCiAgICAgICAgICAgICAgd2lkdGg6IDYwLAogICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgfTsKICAgICAgICAgICAgdGhhdC5zcGVjc0RhdGEgPSB0aGF0LnNwZWNzRGF0YS5jb25jYXQoZGF0YS5hdHRycyk7CiAgICAgICAgICAgIHRoYXQuc3BlY3NEYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgICAgdGhhdC4kc2V0KHRoYXQuc3BlY3NEYXRhW2luZGV4XSwgJ2lkJywgaW5kZXgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhhdC5jb2x1bW5zID0gZGF0YS5oZWFkZXI7CiAgICAgICAgICAgIHRoYXQuY29sdW1ucy51bnNoaWZ0KHNlbGVjdGlvbik7CiAgICAgICAgICAgIHRoYXQuaW5wdXRDaGFuZ2UoZGF0YSk7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICByZWplY3QoKTsKICAgICAgICAgICAgdGhhdC4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBpbnB1dENoYW5nZShkYXRhKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgbGV0ICRpbmRleCA9IFtdOwogICAgICBkYXRhLmhlYWRlci5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkgewogICAgICAgIGlmIChpdGVtLnR5cGUgPT09IDEpIHsKICAgICAgICAgICRpbmRleC5wdXNoKHsgaW5kZXg6IGluZGV4LCBrZXk6IGl0ZW0ua2V5LCB0aXRsZTogaXRlbS50aXRsZSB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICAkaW5kZXguZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHsKICAgICAgICBsZXQgdGl0bGUgPSBpdGVtLnRpdGxlOwogICAgICAgIGxldCBrZXkgPSBpdGVtLmtleTsKICAgICAgICBsZXQgcm93ID0gewogICAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgICAga2V5OiBrZXksCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogMTIwLAogICAgICAgICAgcmVuZGVyOiAoaCwgcGFyYW1zKSA9PiB7CiAgICAgICAgICAgIHJldHVybiBoKCdkaXYnLCBbCiAgICAgICAgICAgICAgaCgnSW5wdXROdW1iZXInLCB7CiAgICAgICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgICAgICBtaW46IDAsCiAgICAgICAgICAgICAgICAgIHByZWNpc2lvbjogMCwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGtleSA9PT0gJ3ByaWNlJyA/IHBhcmFtcy5yb3cucHJpY2UgOiBwYXJhbXMucm93LnF1b3RhLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgICdvbi1jaGFuZ2UnOiAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgIGtleSA9PT0gJ3ByaWNlJyA/IChwYXJhbXMucm93LnByaWNlID0gZSkgOiAocGFyYW1zLnJvdy5xdW90YSA9IGUpOwogICAgICAgICAgICAgICAgICAgIHRoYXQuc3BlY3NEYXRhW3BhcmFtcy5pbmRleF0gPSBwYXJhbXMucm93OwogICAgICAgICAgICAgICAgICAgIGlmICghIXRoYXQuZm9ybVZhbGlkYXRlLmF0dHJzICYmIHRoYXQuZm9ybVZhbGlkYXRlLmF0dHJzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUuYXR0cnMuZm9yRWFjaCgodiwgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYuaWQgPT09IHBhcmFtcy5yb3cuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmZvcm1WYWxpZGF0ZS5hdHRycy5zcGxpY2UoaW5kZXgsIDEsIHBhcmFtcy5yb3cpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICBdKTsKICAgICAgICAgIH0sCiAgICAgICAgfTsKICAgICAgICB0aGF0LmNvbHVtbnMuc3BsaWNlKGl0ZW0uaW5kZXgsIDEsIHJvdyk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWkmumAiQogICAgY2hhbmdlQ2hlY2tib3goc2VsZWN0aW9uKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmF0dHJzID0gc2VsZWN0aW9uOwogICAgfSwKICAgIC8vIOWVhuWTgWlkCiAgICBhc3luYyBnZXRQcm9kdWN0SWQocm93KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5nb29kc0ltZy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0aGlzLmdvb2RzSW1nW2ldOwogICAgICAgIGlmIChlbGVtZW50LnByb2R1Y3RfaWQgPT09IHJvdy5wcm9kdWN0X2lkKSB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCfor6XllYblk4Hlt7Lnu4/mt7vliqAnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5tb2RhbF9sb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICAgIHRoaXMuZ29vZHNJbWcgPSB0aGlzLmdvb2RzSW1nLmNvbmNhdChyb3cpOwogICAgICAvLyB0aGlzLmdvb2RzSW1nLnB1c2goewogICAgICAvLyAgIGltYWdlOiByb3cuaW1hZ2UsCiAgICAgIC8vICAgaWQ6IHJvdy5pZCwKICAgICAgLy8gfSk7CiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcm93Lmxlbmd0aDsgaisrKSB7CiAgICAgICAgY29uc3QgZWxlbWVudCA9IHJvd1tqXTsKICAgICAgICBhd2FpdCB0aGlzLnByb2R1Y3RBdHRycyhlbGVtZW50KTsKICAgICAgfQogICAgfSwKCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMubW9kYWxzID0gZmFsc2U7CiAgICB9LAogICAgLy8g5YW35L2T5pel5pyfCiAgICBvbmNoYW5nZVRpbWUoZSkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5zZWN0aW9uX3RpbWUgPSBlOwogICAgfSwKICAgIC8vIOivpuaDhQogICAgZ2V0SW5mbygpIHsKICAgICAgdGhpcy5zcGluU2hvdyA9IHRydWU7CiAgICAgIGludGVncmFsSW5mb0FwaSh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgICAgbGV0IGluZm8gPSByZXMuZGF0YS5pbmZvOwogICAgICAgICAgbGV0IHNlbGVjdGlvbiA9IHsKICAgICAgICAgICAgdHlwZTogJ3NlbGVjdGlvbicsCiAgICAgICAgICAgIHdpZHRoOiA2MCwKICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gaW5mbzsKICAgICAgICAgIHRoaXMuY29sdW1ucyA9IGluZm8uYXR0cnMuaGVhZGVyOwogICAgICAgICAgdGhpcy5jb2x1bW5zLnVuc2hpZnQoc2VsZWN0aW9uKTsKICAgICAgICAgIHRoaXMuc3BlY3NEYXRhID0gaW5mby5hdHRycy52YWx1ZTsKICAgICAgICAgIHRoYXQuc3BlY3NEYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7CiAgICAgICAgICAgIHRoYXQuJHNldCh0aGF0LnNwZWNzRGF0YVtpbmRleF0sICdpZCcsIGluZGV4KTsKICAgICAgICAgIH0pOwogICAgICAgICAgbGV0IGRhdGEgPSBpbmZvLmF0dHJzOwogICAgICAgICAgbGV0IGF0dHIgPSBbXTsKICAgICAgICAgIGZvciAobGV0IGluZGV4IGluIGluZm8uYXR0cnMudmFsdWUpIHsKICAgICAgICAgICAgaWYgKGluZm8uYXR0cnMudmFsdWVbaW5kZXhdLl9jaGVja2VkKSB7CiAgICAgICAgICAgICAgYXR0ci5wdXNoKGluZm8uYXR0cnMudmFsdWVbaW5kZXhdKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhhdC5mb3JtVmFsaWRhdGUuYXR0cnMgPSBhdHRyOwogICAgICAgICAgdGhhdC5pbnB1dENoYW5nZShkYXRhKTsKICAgICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLnNwaW5TaG93ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIGJpbmREZWxldGUoaW5kZXgpIHsKICAgICAgbGV0IGRlbElkID0gdGhpcy5nb29kc0ltZ1tpbmRleF0ucHJvZHVjdF9pZDsKICAgICAgdGhpcy5nb29kc0ltZy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAvLyDliKDpmaTpgLvovpHlvoXlrozlloQKICAgIH0sCiAgICAvLyDkuIvkuIDmraUKICAgIG5leHQobmFtZSkgewogICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGUuYXR0cnMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHRoYXQuJE1lc3NhZ2UuZXJyb3IoJ+ivt+WFiOmAieaLqeWVhuWTgeinhOagvCcpOwogICAgICB9CiAgICAgIGZvciAobGV0IGluZGV4IGluIHRoYXQuZm9ybVZhbGlkYXRlLmF0dHJzKSB7CiAgICAgICAgaWYgKHRoYXQuZm9ybVZhbGlkYXRlLmF0dHJzW2luZGV4XS5xdW90YSA8PSAwKSB7CiAgICAgICAgICByZXR1cm4gdGhhdC4kTWVzc2FnZS5lcnJvcign5ZWG5ZOB6ZmQ6YeP5b+F6aG75aSn5LqOMCcpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLiRyZWZzW25hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMuY29weSA9PSAxKSB0aGlzLmZvcm1WYWxpZGF0ZS5jb3B5ID0gMTsKICAgICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmlkID0gTnVtYmVyKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgfHwgMDsKICAgICAgICAgIHRoaXMuc3VibWl0T3BlbiA9IHRydWU7CiAgICAgICAgICBpbnRlZ3JhbEFkZEJhdGNoKHRoaXMuZm9ybVZhbGlkYXRlKQogICAgICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zdWJtaXRPcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICAgICAgICBwYXRoOiB0aGlzLiRyb3V0ZVByb1N0ciArICcvbWFya2V0aW5nL3N0b3JlX2ludGVncmFsL2luZGV4JywKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0sIDUwMCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zdWJtaXRPcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS4iuS4gOatpQogICAgc3RlcCgpIHsKICAgICAgdGhpcy5jdXJyZW50LS07CiAgICB9LAogICAgLy8g5YaF5a65CiAgICBnZXRDb250ZW50KHZhbCkgewogICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5kZXNjcmlwdGlvbiA9IHZhbDsKICAgIH0sCiAgICAvLyDngrnlh7vllYblk4Hlm74KICAgIG1vZGFsUGljVGFwKHRpdCwgcGljVGl0LCBpbmRleCkgewogICAgICB0aGlzLm1vZGFsUGljID0gdHJ1ZTsKICAgICAgdGhpcy5pc0Nob2ljZSA9IHRpdCA9PT0gJ2RhbicgPyAn5Y2V6YCJJyA6ICflpJrpgIknOwogICAgICB0aGlzLnBpY1RpdCA9IHBpY1RpdDsKICAgICAgdGhpcy50YWJsZUluZGV4ID0gaW5kZXg7CiAgICB9LAogICAgLy8g6I635Y+W5Y2V5byg5Zu+54mH5L+h5oGvCiAgICBnZXRQaWMocGMpIHsKICAgICAgc3dpdGNoICh0aGlzLnBpY1RpdCkgewogICAgICAgIGNhc2UgJ2RhbkZyb20nOgogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2UgPSBwYy5hdHRfZGlyOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy8gY2FzZSAnZGFuVGFibGUnOgogICAgICAgIC8vICAgICB0aGlzLnNwZWNzRGF0YVt0aGlzLnRhYmxlSW5kZXhdLnBpYyA9IHBjLmF0dF9kaXI7CiAgICAgICAgLy8gICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBpZiAoISF0aGlzLmZvcm1WYWxpZGF0ZS5hdHRycyAmJiB0aGlzLmZvcm1WYWxpZGF0ZS5hdHRycy5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMuc3BlY3NEYXRhW3RoaXMudGFibGVJbmRleF0sICdfY2hlY2tlZCcsIHRydWUpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5zcGVjc0RhdGFbdGhpcy50YWJsZUluZGV4XS5waWMgPSBwYy5hdHRfZGlyOwogICAgICB9CiAgICAgIHRoaXMubW9kYWxQaWMgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDojrflj5blpJrlvKDlm77kv6Hmga8KICAgIGdldFBpY0QocGMpIHsKICAgICAgdGhpcy5pbWFnZXMgPSBwYzsKICAgICAgdGhpcy5pbWFnZXMubWFwKChpdGVtKSA9PiB7CiAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuaW1hZ2VzLnB1c2goaXRlbS5hdHRfZGlyKTsKICAgICAgICB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXMgPSB0aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXMuc3BsaWNlKDAsIDEwKTsKICAgICAgfSk7CiAgICAgIHRoaXMubW9kYWxQaWMgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVSZW1vdmUoaSkgewogICAgICB0aGlzLmltYWdlcy5zcGxpY2UoaSwgMSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlcy5zcGxpY2UoaSwgMSk7CiAgICB9LAogICAgLy8g6YCJ5oup5ZWG5ZOBCiAgICBjaGFuZ2VHb29kcygpIHsKICAgICAgdGhpcy5tb2RhbHMgPSB0cnVlOwogICAgfSwgLy8g56e75YqoCiAgICBoYW5kbGVEcmFnU3RhcnQoZSwgaXRlbSkgewogICAgICB0aGlzLmRyYWdnaW5nID0gaXRlbTsKICAgIH0sCiAgICBoYW5kbGVEcmFnRW5kKGUsIGl0ZW0pIHsKICAgICAgdGhpcy5kcmFnZ2luZyA9IG51bGw7CiAgICB9LAogICAgLy8g6aaW5YWI5oqKZGl25Y+Y5oiQ5Y+v5Lul5pS+572u55qE5YWD57Sg77yM5Y2z6YeN5YaZZHJhZ2VudGVyL2RyYWdvdmVyCiAgICBoYW5kbGVEcmFnT3ZlcihlKSB7CiAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbW92ZSc7IC8vIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3Q9Im1vdmUiOy8v5ZyoZHJhZ2VudGVy5Lit6ZKI5a+55pS+572u55uu5qCH5p2l6K6+572uIQogICAgfSwKICAgIGhhbmRsZURyYWdFbnRlcihlLCBpdGVtKSB7CiAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7IC8vIOS4uumcgOimgeenu+WKqOeahOWFg+e0oOiuvue9rmRyYWdzdGFydOS6i+S7tgogICAgICBpZiAoaXRlbSA9PT0gdGhpcy5kcmFnZ2luZykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBuZXdJdGVtcyA9IFsuLi50aGlzLmZvcm1WYWxpZGF0ZS5pbWFnZXNdOwogICAgICBjb25zdCBzcmMgPSBuZXdJdGVtcy5pbmRleE9mKHRoaXMuZHJhZ2dpbmcpOwogICAgICBjb25zdCBkc3QgPSBuZXdJdGVtcy5pbmRleE9mKGl0ZW0pOwogICAgICBuZXdJdGVtcy5zcGxpY2UoZHN0LCAwLCAuLi5uZXdJdGVtcy5zcGxpY2Uoc3JjLCAxKSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLmltYWdlcyA9IG5ld0l0ZW1zOwogICAgfSwKICAgIC8vIOa3u+WKoOiHquWumuS5ieW8ueeqlwogICAgYWRkQ3VzdG9tRGlhbG9nKGVkaXRvcklkKSB7CiAgICAgIHdpbmRvdy5VRS5yZWdpc3RlclVJKAogICAgICAgICd0ZXN0LWRpYWxvZycsCiAgICAgICAgZnVuY3Rpb24gKGVkaXRvciwgdWlOYW1lKSB7CiAgICAgICAgICAvLyDliJvlu7ogZGlhbG9nCiAgICAgICAgICBsZXQgZGlhbG9nID0gbmV3IHdpbmRvdy5VRS51aS5EaWFsb2coewogICAgICAgICAgICAvLyDmjIflrprlvLnlh7rlsYLkuK3pobXpnaLnmoTot6/lvoTvvIzov5nph4zlj6rog73mlK/mjIHpobXpnaLvvIzot6/lvoTlj4LogIPluLjop4Hpl67popggMgogICAgICAgICAgICBpZnJhbWVVcmw6IHRoaXMuJHJvdXRlUHJvU3RyICsgJy93aWRnZXQuaW1hZ2VzL2luZGV4Lmh0bWw/Zm9kZGVyPWRpYWxvZycsCiAgICAgICAgICAgIC8vIOmcgOimgeaMh+WumuW9k+WJjeeahOe8lui+keWZqOWunuS+iwogICAgICAgICAgICBlZGl0b3I6IGVkaXRvciwKICAgICAgICAgICAgLy8g5oyH5a6aIGRpYWxvZyDnmoTlkI3lrZcKICAgICAgICAgICAgbmFtZTogdWlOYW1lLAogICAgICAgICAgICAvLyBkaWFsb2cg55qE5qCH6aKYCiAgICAgICAgICAgIHRpdGxlOiAn5LiK5Lyg5Zu+54mHJywKICAgICAgICAgICAgLy8g5oyH5a6aIGRpYWxvZyDnmoTlpJblm7TmoLflvI8KICAgICAgICAgICAgY3NzUnVsZXM6ICd3aWR0aDo5NjBweDtoZWlnaHQ6NTUwcHg7cGFkZGluZzoyMHB4OycsCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuZGlhbG9nID0gZGlhbG9nOwogICAgICAgICAgLy8g5Y+C6ICD5LiK6Z2i55qE6Ieq5a6a5LmJ5oyJ6ZKuCiAgICAgICAgICB2YXIgYnRuID0gbmV3IHdpbmRvdy5VRS51aS5CdXR0b24oewogICAgICAgICAgICBuYW1lOiAnZGlhbG9nLWJ1dHRvbicsCiAgICAgICAgICAgIHRpdGxlOiAn5LiK5Lyg5Zu+54mHJywKICAgICAgICAgICAgY3NzUnVsZXM6IGBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoLi4vLi4vLi4vYXNzZXRzL2ltYWdlcy9pY29ucy5wbmcpO2JhY2tncm91bmQtcG9zaXRpb246IC03MjZweCAtNzdweDtgLAogICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgLy8g5riy5p+TZGlhbG9nCiAgICAgICAgICAgICAgZGlhbG9nLnJlbmRlcigpOwogICAgICAgICAgICAgIGRpYWxvZy5vcGVuKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBidG47CiAgICAgICAgfSwKICAgICAgICAzNyAvKiDmjIflrprmt7vliqDliLDlt6XlhbfmoI/kuIrnmoTpgqPkuKrkvY3nva7vvIzpu5jorqTml7bov73liqDliLDmnIDlkI4gKi8sCiAgICAgICAgZWRpdG9ySWQgLyog5oyH5a6a6L+Z5LiqVUnmmK/lk6rkuKrnvJbovpHlmajlrp7kvovkuIrnmoTvvIzpu5jorqTmmK/pobXpnaLkuIrmiYDmnInnmoTnvJbovpHlmajpg73kvJrmt7vliqDov5nkuKrmjInpkq4gKi8sCiAgICAgICk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["addStoreIntegral.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addStoreIntegral.vue","sourceRoot":"src/pages/marketing/storeIntegral","sourcesContent":["<template>\n  <div>\n    <div class=\"i-layout-page-header\">\n      <div class=\"i-layout-page-header\">\n        <router-link :to=\"{ path: $routeProStr + '/marketing/store_integral/index' }\"\n          ><Button icon=\"ios-arrow-back\" size=\"small\" class=\"mr20\">返回</Button></router-link\n        >\n        <span class=\"ivu-page-header-title mr20\" v-text=\"$route.params.id ? '编辑积分商品' : '添加积分商品'\"></span>\n      </div>\n    </div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <Row type=\"flex\" class=\"mt30 acea-row row-middle row-center\">\n        <Col span=\"23\">\n          <Form\n            class=\"form mt30\"\n            ref=\"formValidate\"\n            :model=\"formValidate\"\n            :rules=\"ruleValidate\"\n            :label-width=\"labelWidth\"\n            :label-position=\"labelPosition\"\n            @submit.native.prevent\n          >\n            <FormItem label=\"选择商品：\" prop=\"image_input\">\n              <div class=\"picBox\" @click=\"changeGoods\">\n                <div class=\"pictrue\" v-for=\"(item, index) in goodsImg\" :key=\"index\">\n                  <img v-lazy=\"item.image\" v-if=\"item.image\" />\n                  <span class=\"iconfont icondel_1\" @click.stop=\"bindDelete(index)\"></span>\n                </div>\n\n                <div class=\"upLoad acea-row row-center-wrapper\">\n                  <Icon type=\"ios-camera-outline\" size=\"26\" class=\"iconfonts\" />\n                </div>\n              </div>\n            </FormItem>\n            <Col type=\"flex\">\n              <Col span=\"24\">\n                <FormItem label=\"规格选择：\">\n                  <Table\n                    :data=\"specsData\"\n                    :columns=\"columns\"\n                    border\n                    class=\"mt25\"\n                    highlight-row\n                    :loading=\"loading\"\n                    @on-selection-change=\"changeCheckbox\"\n                  >\n                    <template slot-scope=\"{ row, index }\" slot=\"pic\">\n                      <div\n                        class=\"acea-row row-middle row-center-wrapper\"\n                        @click=\"modalPicTap('dan', 'danTable', index)\"\n                      >\n                        <div class=\"pictrue pictrueTab\" v-if=\"row.pic\">\n                          <img v-lazy=\"row.pic\" />\n                        </div>\n                        <div class=\"upLoad pictrueTab acea-row row-center-wrapper\" v-else>\n                          <Icon type=\"ios-camera-outline\" size=\"21\" class=\"iconfont\" />\n                        </div>\n                      </div>\n                    </template>\n                  </Table>\n                </FormItem>\n              </Col>\n              <Col span=\"24\">\n                <FormItem label=\"上架状态：\" props=\"is_show\" label-for=\"is_show\">\n                  <RadioGroup element-id=\"is_show\" v-model=\"formValidate.is_show\">\n                    <Radio :label=\"0\">关闭</Radio>\n                    <Radio :label=\"1\" class=\"radio\">开启</Radio>\n                  </RadioGroup>\n                </FormItem>\n              </Col>\n            </Col>\n            <Col span=\"24\">\n              <FormItem>\n                <Button\n                  class=\"submission mr15\"\n                  @click=\"step\"\n                  v-show=\"current !== 0\"\n                  :disabled=\"$route.params.id && current === 1\"\n                  >上一步\n                </Button>\n                <Button\n                  :disabled=\"submitOpen && current === 1\"\n                  type=\"primary\"\n                  class=\"submission\"\n                  @click=\"next('formValidate')\"\n                  v-text=\"'提交'\"\n                ></Button>\n              </FormItem>\n            </Col>\n          </Form>\n          <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n        </Col>\n      </Row>\n    </Card>\n    <!-- 选择商品-->\n    <Modal\n      v-model=\"modals\"\n      title=\"商品列表\"\n      class=\"paymentFooter\"\n      footerHide\n      scrollable\n      width=\"900\"\n      @on-cancel=\"cancel\"\n    >\n      <goods-list v-if=\"modals\" ref=\"goodslist\" :ischeckbox=\"true\" @getProductId=\"getProductId\"></goods-list>\n    </Modal>\n    <!-- 上传图片-->\n    <Modal\n      v-model=\"modalPic\"\n      width=\"950px\"\n      scrollable\n      footer-hide\n      closable\n      title=\"上传商品图\"\n      :mask-closable=\"false\"\n      :z-index=\"1\"\n    >\n      <uploadPictures\n        :isChoice=\"isChoice\"\n        @getPic=\"getPic\"\n        @getPicD=\"getPicD\"\n        :gridBtn=\"gridBtn\"\n        :gridPic=\"gridPic\"\n        v-if=\"modalPic\"\n      ></uploadPictures>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport goodsList from '@/components/goodsList/index';\nimport uploadPictures from '@/components/uploadPictures';\nimport { integralAddBatch, productAttrsApi, integralInfoApi } from '@/api/marketing';\n\nexport default {\n  name: 'storeIntegralCreate',\n  components: { goodsList, uploadPictures },\n  data() {\n    return {\n      loading: false,\n      goodsImg: [],\n      productsId: [],\n      submitOpen: false,\n      spinShow: false,\n      isChoice: '',\n      current: 0,\n      modalPic: false,\n      grid: {\n        xl: 12,\n        lg: 20,\n        md: 24,\n        sm: 24,\n        xs: 24,\n      },\n      grid2: {\n        xl: 8,\n        lg: 12,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 12,\n        sm: 12,\n        xs: 12,\n      },\n      gridBtn: {\n        xl: 4,\n        lg: 8,\n        md: 8,\n        sm: 8,\n        xs: 8,\n      },\n      myConfig: {\n        autoHeightEnabled: false, // 编辑器不自动被内容撑高\n        initialFrameHeight: 500, // 初始容器高度\n        initialFrameWidth: '100%', // 初始容器宽度\n        UEDITOR_HOME_URL: '/UEditor/',\n        serverUrl: '',\n      },\n      modals: false,\n      modal_loading: false,\n      images: [],\n      formValidate: {\n        is_show: 0,\n        attrs: [],\n      },\n      templateList: [],\n      timeList: [],\n      columns: [],\n      specsData: [],\n      picTit: '',\n      tableIndex: 0,\n      ruleValidate: {\n        price: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入兑换积分',\n            trigger: 'blur',\n          },\n        ],\n\n        num: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入购买数量限制',\n            trigger: 'blur',\n          },\n        ],\n        once_num: [\n          {\n            required: true,\n            type: 'number',\n            message: '请输入单次购买数量限制',\n            trigger: 'blur',\n          },\n        ],\n      },\n      copy: 0,\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : 135;\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  mounted() {\n    if (this.$route.params.id) {\n      this.copy = this.$route.params.copy;\n      this.current = 1;\n      this.getInfo();\n    }\n  },\n  methods: {\n    // 规格；\n    productAttrs(rows) {\n      this.loading = true;\n      return new Promise((resolve, reject) => {\n        let that = this;\n        productAttrsApi(rows.product_id, 4)\n          .then((res) => {\n            let data = res.data.info;\n            let selection = {\n              type: 'selection',\n              width: 60,\n              align: 'center',\n            };\n            that.specsData = that.specsData.concat(data.attrs);\n            that.specsData.forEach(function (item, index) {\n              that.$set(that.specsData[index], 'id', index);\n            });\n            that.columns = data.header;\n            that.columns.unshift(selection);\n            that.inputChange(data);\n            resolve();\n            this.loading = false;\n          })\n          .catch((res) => {\n            this.loading = false;\n\n            reject();\n            that.$Message.error(res.msg);\n          });\n      });\n    },\n    inputChange(data) {\n      let that = this;\n      let $index = [];\n      data.header.forEach(function (item, index) {\n        if (item.type === 1) {\n          $index.push({ index: index, key: item.key, title: item.title });\n        }\n      });\n      $index.forEach(function (item, index) {\n        let title = item.title;\n        let key = item.key;\n        let row = {\n          title: title,\n          key: key,\n          align: 'center',\n          minWidth: 120,\n          render: (h, params) => {\n            return h('div', [\n              h('InputNumber', {\n                props: {\n                  min: 0,\n                  precision: 0,\n                  value: key === 'price' ? params.row.price : params.row.quota,\n                },\n                on: {\n                  'on-change': (e) => {\n                    key === 'price' ? (params.row.price = e) : (params.row.quota = e);\n                    that.specsData[params.index] = params.row;\n                    if (!!that.formValidate.attrs && that.formValidate.attrs.length) {\n                      that.formValidate.attrs.forEach((v, index) => {\n                        if (v.id === params.row.id) {\n                          that.formValidate.attrs.splice(index, 1, params.row);\n                        }\n                      });\n                    }\n                  },\n                },\n              }),\n            ]);\n          },\n        };\n        that.columns.splice(item.index, 1, row);\n      });\n    },\n    // 多选\n    changeCheckbox(selection) {\n      this.formValidate.attrs = selection;\n    },\n    // 商品id\n    async getProductId(row) {\n      for (let i = 0; i < this.goodsImg.length; i++) {\n        const element = this.goodsImg[i];\n        if (element.product_id === row.product_id) {\n          this.$Message.error('该商品已经添加');\n          return;\n        }\n      }\n      this.modal_loading = false;\n      this.modals = false;\n      this.goodsImg = this.goodsImg.concat(row);\n      // this.goodsImg.push({\n      //   image: row.image,\n      //   id: row.id,\n      // });\n      for (let j = 0; j < row.length; j++) {\n        const element = row[j];\n        await this.productAttrs(element);\n      }\n    },\n\n    cancel() {\n      this.modals = false;\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.formValidate.section_time = e;\n    },\n    // 详情\n    getInfo() {\n      this.spinShow = true;\n      integralInfoApi(this.$route.params.id)\n        .then(async (res) => {\n          let that = this;\n          let info = res.data.info;\n          let selection = {\n            type: 'selection',\n            width: 60,\n            align: 'center',\n          };\n          this.formValidate = info;\n          this.columns = info.attrs.header;\n          this.columns.unshift(selection);\n          this.specsData = info.attrs.value;\n          that.specsData.forEach(function (item, index) {\n            that.$set(that.specsData[index], 'id', index);\n          });\n          let data = info.attrs;\n          let attr = [];\n          for (let index in info.attrs.value) {\n            if (info.attrs.value[index]._checked) {\n              attr.push(info.attrs.value[index]);\n            }\n          }\n          that.formValidate.attrs = attr;\n          that.inputChange(data);\n          this.spinShow = false;\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    bindDelete(index) {\n      let delId = this.goodsImg[index].product_id;\n      this.goodsImg.splice(index, 1);\n      this.loading = true;\n      // 删除逻辑待完善\n    },\n    // 下一步\n    next(name) {\n      let that = this;\n      if (!this.formValidate.attrs.length) {\n        return that.$Message.error('请先选择商品规格');\n      }\n      for (let index in that.formValidate.attrs) {\n        if (that.formValidate.attrs[index].quota <= 0) {\n          return that.$Message.error('商品限量必须大于0');\n        }\n      }\n      this.$refs[name].validate((valid) => {\n        if (valid) {\n          if (this.copy == 1) this.formValidate.copy = 1;\n          this.formValidate.id = Number(this.$route.params.id) || 0;\n          this.submitOpen = true;\n          integralAddBatch(this.formValidate)\n            .then(async (res) => {\n              this.submitOpen = false;\n              this.$Message.success(res.msg);\n              setTimeout(() => {\n                this.$router.push({\n                  path: this.$routeProStr + '/marketing/store_integral/index',\n                });\n              }, 500);\n            })\n            .catch((res) => {\n              this.submitOpen = false;\n              this.$Message.error(res.msg);\n            });\n        } else {\n          return false;\n        }\n      });\n    },\n    // 上一步\n    step() {\n      this.current--;\n    },\n    // 内容\n    getContent(val) {\n      this.formValidate.description = val;\n    },\n    // 点击商品图\n    modalPicTap(tit, picTit, index) {\n      this.modalPic = true;\n      this.isChoice = tit === 'dan' ? '单选' : '多选';\n      this.picTit = picTit;\n      this.tableIndex = index;\n    },\n    // 获取单张图片信息\n    getPic(pc) {\n      switch (this.picTit) {\n        case 'danFrom':\n          this.formValidate.image = pc.att_dir;\n          break;\n        // case 'danTable':\n        //     this.specsData[this.tableIndex].pic = pc.att_dir;\n        //     break;\n        default:\n          if (!!this.formValidate.attrs && this.formValidate.attrs.length) {\n            this.$set(this.specsData[this.tableIndex], '_checked', true);\n          }\n          this.specsData[this.tableIndex].pic = pc.att_dir;\n      }\n      this.modalPic = false;\n    },\n    // 获取多张图信息\n    getPicD(pc) {\n      this.images = pc;\n      this.images.map((item) => {\n        this.formValidate.images.push(item.att_dir);\n        this.formValidate.images = this.formValidate.images.splice(0, 10);\n      });\n      this.modalPic = false;\n    },\n    handleRemove(i) {\n      this.images.splice(i, 1);\n      this.formValidate.images.splice(i, 1);\n    },\n    // 选择商品\n    changeGoods() {\n      this.modals = true;\n    }, // 移动\n    handleDragStart(e, item) {\n      this.dragging = item;\n    },\n    handleDragEnd(e, item) {\n      this.dragging = null;\n    },\n    // 首先把div变成可以放置的元素，即重写dragenter/dragover\n    handleDragOver(e) {\n      e.dataTransfer.dropEffect = 'move'; // e.dataTransfer.dropEffect=\"move\";//在dragenter中针对放置目标来设置!\n    },\n    handleDragEnter(e, item) {\n      e.dataTransfer.effectAllowed = 'move'; // 为需要移动的元素设置dragstart事件\n      if (item === this.dragging) {\n        return;\n      }\n      const newItems = [...this.formValidate.images];\n      const src = newItems.indexOf(this.dragging);\n      const dst = newItems.indexOf(item);\n      newItems.splice(dst, 0, ...newItems.splice(src, 1));\n      this.formValidate.images = newItems;\n    },\n    // 添加自定义弹窗\n    addCustomDialog(editorId) {\n      window.UE.registerUI(\n        'test-dialog',\n        function (editor, uiName) {\n          // 创建 dialog\n          let dialog = new window.UE.ui.Dialog({\n            // 指定弹出层中页面的路径，这里只能支持页面，路径参考常见问题 2\n            iframeUrl: this.$routeProStr + '/widget.images/index.html?fodder=dialog',\n            // 需要指定当前的编辑器实例\n            editor: editor,\n            // 指定 dialog 的名字\n            name: uiName,\n            // dialog 的标题\n            title: '上传图片',\n            // 指定 dialog 的外围样式\n            cssRules: 'width:960px;height:550px;padding:20px;',\n          });\n          this.dialog = dialog;\n          // 参考上面的自定义按钮\n          var btn = new window.UE.ui.Button({\n            name: 'dialog-button',\n            title: '上传图片',\n            cssRules: `background-image: url(../../../assets/images/icons.png);background-position: -726px -77px;`,\n            onclick: function () {\n              // 渲染dialog\n              dialog.render();\n              dialog.open();\n            },\n          });\n          return btn;\n        },\n        37 /* 指定添加到工具栏上的那个位置，默认时追加到最后 */,\n        editorId /* 指定这个UI是哪个编辑器实例上的，默认是页面上所有的编辑器都会添加这个按钮 */,\n      );\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.custom-label {\n  display: inline-flex;\n  line-height: 1.5;\n}\n\n.grey {\n  color: #999;\n}\n\n.maxW /deep/.ivu-select-dropdown {\n  max-width: 600px;\n}\n\n.tabBox_img {\n  width: 50px;\n  height: 50px;\n  margin: 0 auto;\n}\n\n.tabBox_img img {\n  width: 100%;\n  height: 100%;\n}\n\n.priceBox {\n  width: 100%;\n}\n\n.form {\n  .picBox {\n    display: inline-block;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n  }\n\n  .pictrue {\n    width: 60px;\n    height: 60px;\n    border: 1px dotted rgba(0, 0, 0, 0.1);\n    margin-right: 15px;\n    display: inline-block;\n    position: relative;\n    cursor: pointer;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n\n    .icondel_1 {\n      position: absolute;\n      right: -10px;\n      top: -16px;\n      color: #999999;\n      font-size: 28px;\n      cursor: pointer;\n    }\n\n    .btndel {\n      position: absolute;\n      z-index: 9;\n      width: 20px !important;\n      height: 20px !important;\n      left: 46px;\n      top: -4px;\n    }\n  }\n\n  .upLoad {\n    width: 58px;\n    height: 58px;\n    line-height: 58px;\n    border: 1px dotted rgba(0, 0, 0, 0.1);\n    border-radius: 4px;\n    background: rgba(0, 0, 0, 0.02);\n    cursor: pointer;\n  }\n}\n</style>\n"]}]}