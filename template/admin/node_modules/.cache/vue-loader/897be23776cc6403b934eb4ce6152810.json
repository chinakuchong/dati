{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/statistic/product/components/productRanking.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/statistic/product/components/productRanking.vue","mtime":1689324015267},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHN0YXRpc3RpY1Byb2R1Y3RMaXN0QXBpIH0gZnJvbSAnQC9hcGkvc3RhdGlzdGljJzsKaW1wb3J0IGdvb2RzRGV0YWlsIGZyb20gJy4uL2NvbXBvbmVudHMvZ29vZHNEZXRhaWwnOwppbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnQC91dGlscy92YWxpZGF0ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJvZHVjdFJhbmtpbmcnLAogIGNvbXBvbmVudHM6IHsKICAgIGdvb2RzRGV0YWlsLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbGlkYXRlRnVuOiB0aGlzLiR2YWxpZGF0ZUZ1biwKICAgICAgb3B0aW9uczogdGhpcy4kdGltZU9wdGlvbnMsCiAgICAgIG5hbWU6ICfov5EzMOWkqScsCiAgICAgIHRpbWVWYWw6IFtdLAogICAgICBkYXRhVGltZTogJycsCiAgICAgIGZvcm1WYWxpZGF0ZTogewogICAgICAgIGxpbWl0OiAxMCwKICAgICAgICBwYWdlOiAxLAogICAgICAgIHNvcnQ6ICd2aXNpdCcsCiAgICAgICAgZGF0YTogJycsCiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB0YWJMaXN0OiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIGNvbHVtbnM0OiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfllYblk4Hlm77niYcnLAogICAgICAgICAgc2xvdDogJ2ltYWdlJywKICAgICAgICAgIG1pbldpZHRoOiA4MCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5ZWG5ZOB5ZCN56ewJywKICAgICAgICAgIHdpZHRoOiAxODAsCiAgICAgICAgICBrZXk6ICdzdG9yZV9uYW1lJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5rWP6KeI6YePJywKICAgICAgICAgIGtleTogJ3Zpc2l0JywKICAgICAgICAgIG1pbldpZHRoOiAxMDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+iuv+WuouaVsCcsCiAgICAgICAgICBrZXk6ICd1c2VyJywKICAgICAgICAgIG1pbldpZHRoOiAxMDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+WKoOi0reS7tuaVsCcsCiAgICAgICAgICBrZXk6ICdjYXJ0JywKICAgICAgICAgIG1pbldpZHRoOiAxMDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S4i+WNleS7tuaVsCcsCiAgICAgICAgICBrZXk6ICdvcmRlcnMnLAogICAgICAgICAgbWluV2lkdGg6IDEwMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5pSv5LuY5Lu25pWwJywKICAgICAgICAgIGtleTogJ3BheScsCiAgICAgICAgICBtaW5XaWR0aDogMTAwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmlK/ku5jph5Hpop0nLAogICAgICAgICAga2V5OiAncHJpY2UnLAogICAgICAgICAgbWluV2lkdGg6IDEwMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5q+b5Yip546HKCUpJywKICAgICAgICAgIHNsb3Q6ICdwcm9maXQnLAogICAgICAgICAgbWluV2lkdGg6IDEwMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5pS26JeP5pWwJywKICAgICAgICAgIGtleTogJ2NvbGxlY3QnLAogICAgICAgICAgbWluV2lkdGg6IDEwMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn6K6/5a6iLeaUr+S7mOi9rOWMlueOhyglKScsCiAgICAgICAgICBzbG90OiAnY2hhbmdlcycsCiAgICAgICAgICBtaW5XaWR0aDogMTIwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmk43kvZwnLAogICAgICAgICAgc2xvdDogJ2FjdGlvbicsCiAgICAgICAgICBmaXhlZDogJ3JpZ2h0JywKICAgICAgICAgIG1pbldpZHRoOiA4MCwKICAgICAgICB9LAogICAgICBdLAogICAgICBnb29kc0lkOiAnJywKICAgICAgaXNQcm9kdWN0Qm94OiBmYWxzZSwKICAgICAgbGlzdDogWwogICAgICAgIHsKICAgICAgICAgIHZhbDogJ3Zpc2l0JywKICAgICAgICAgIG5hbWU6ICfmtY/op4jph48nLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdmFsOiAndXNlcicsCiAgICAgICAgICBuYW1lOiAn6K6/5a6i5pWwJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbDogJ2NhcnQnLAogICAgICAgICAgbmFtZTogJ+WKoOi0reS7tuaVsCcsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWw6ICdvcmRlcnMnLAogICAgICAgICAgbmFtZTogJ+S4i+WNleS7tuaVsCcsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWw6ICdwcmljZScsCiAgICAgICAgICBuYW1lOiAn5pSv5LuY6YeR6aKdJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbDogJ3Byb2ZpdCcsCiAgICAgICAgICBuYW1lOiAn5q+b5Yip546HJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbDogJ2NvbGxlY3QnLAogICAgICAgICAgbmFtZTogJ+aUtuiXj+aVsCcsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWw6ICdjaGFuZ2VzJywKICAgICAgICAgIG5hbWU6ICforr/lrqIt5pSv5LuY6L2s5YyW546HJywKICAgICAgICB9LAogICAgICBdLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZSgpOwogICAgY29uc3Qgc3RhcnQgPSBuZXcgRGF0ZSgpOwogICAgc3RhcnQuc2V0VGltZShzdGFydC5zZXRUaW1lKG5ldyBEYXRlKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgbmV3IERhdGUoKS5nZXRNb250aCgpLCBuZXcgRGF0ZSgpLmdldERhdGUoKSAtIDI5KSkpOwogICAgdGhpcy50aW1lVmFsID0gW3N0YXJ0LCBlbmRdOwogICAgdGhpcy5mb3JtVmFsaWRhdGUuZGF0YSA9IGZvcm1hdERhdGUoc3RhcnQsICd5eXl5L01NL2RkJykgKyAnLScgKyBmb3JtYXREYXRlKGVuZCwgJ3l5eXkvTU0vZGQnKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWFt+S9k+aXpeacnwogICAgb25jaGFuZ2VUaW1lKGUpIHsKICAgICAgdGhpcy50aW1lVmFsID0gZTsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUuZGF0YSA9IHRoaXMudGltZVZhbC5qb2luKCctJyk7CiAgICAgIHRoaXMubmFtZSA9IHRoaXMuZm9ybVZhbGlkYXRlLmRhdGE7CiAgICB9LAogICAgY2hhbmdlTWVudShuYW1lKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnNvcnQgPSBuYW1lOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDliJfooagKICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHN0YXRpc3RpY1Byb2R1Y3RMaXN0QXBpKHRoaXMuZm9ybVZhbGlkYXRlKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLnRhYkxpc3QgPSBkYXRhOwogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIGxvb2socm93KSB7CiAgICAgIHRoaXMuZ29vZHNJZCA9IHJvdy5wcm9kdWN0X2lkOwogICAgICB0aGlzLmlzUHJvZHVjdEJveCA9IHRydWU7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["productRanking.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"productRanking.vue","sourceRoot":"src/pages/statistic/product/components","sourcesContent":["<template>\n  <Card :bordered=\"false\" dis-hover class=\"ivu-mt-16\">\n    <div class=\"acea-row row-between-wrapper mb20\">\n      <div class=\"header-title\">商品排行</div>\n      <div class=\"acea-row\">\n        <Select v-model=\"formValidate.sort\" style=\"width: 200px\" class=\"mr20\" @on-change=\"changeMenu\">\n          <Option v-for=\"item in list\" :value=\"item.val\" :key=\"item.val\">{{ item.name }}</Option>\n        </Select>\n        <DatePicker\n          :editable=\"false\"\n          :clearable=\"false\"\n          @on-change=\"onchangeTime\"\n          :value=\"timeVal\"\n          format=\"yyyy/MM/dd\"\n          type=\"datetimerange\"\n          placement=\"bottom-start\"\n          placeholder=\"请选择时间\"\n          style=\"width: 200px\"\n          :options=\"options\"\n          class=\"mr20\"\n        ></DatePicker>\n        <Button type=\"primary\" class=\"mr20\" @click=\"getList\">查询</Button>\n      </div>\n    </div>\n    <Table\n      ref=\"selection\"\n      :columns=\"columns4\"\n      :data=\"tabList\"\n      :loading=\"loading\"\n      no-data-text=\"暂无数据\"\n      highlight-row\n      no-filtered-data-text=\"暂无筛选结果\"\n    >\n      <template slot-scope=\"{ row, index }\" slot=\"image\">\n        <div class=\"tabBox_img\" v-viewer>\n          <img v-lazy=\"row.image\" />\n        </div>\n      </template>\n      <template slot-scope=\"{ row, index }\" slot=\"profit\">\n        <span v-text=\"$tools.accMul(row.profit, 100).toFixed(2) + '%'\"></span>\n      </template>\n      <template slot-scope=\"{ row, index }\" slot=\"repeats\">\n        <span v-text=\"$tools.accMul(row.repeats, 100) + '%'\"></span>\n      </template>\n      <template slot-scope=\"{ row, index }\" slot=\"changes\">\n        <span>{{ $tools.accMul(row.changes, 100) + '%' }}</span>\n      </template>\n      <template slot-scope=\"{ row, index }\" slot=\"action\">\n        <a @click=\"look(row)\">查看</a>\n      </template>\n    </Table>\n    <!-- 商品弹窗 -->\n    <div v-if=\"isProductBox\">\n      <div class=\"bg\" @click=\"isProductBox = false\"></div>\n      <goodsDetail :goodsId=\"goodsId\"></goodsDetail>\n    </div>\n  </Card>\n</template>\n\n<script>\nimport { statisticProductListApi } from '@/api/statistic';\nimport goodsDetail from '../components/goodsDetail';\nimport { formatDate } from '@/utils/validate';\nexport default {\n  name: 'productRanking',\n  components: {\n    goodsDetail,\n  },\n  data() {\n    return {\n      validateFun: this.$validateFun,\n      options: this.$timeOptions,\n      name: '近30天',\n      timeVal: [],\n      dataTime: '',\n      formValidate: {\n        limit: 10,\n        page: 1,\n        sort: 'visit',\n        data: '',\n      },\n      loading: false,\n      tabList: [],\n      total: 0,\n      columns4: [\n        {\n          title: '商品图片',\n          slot: 'image',\n          minWidth: 80,\n        },\n        {\n          title: '商品名称',\n          width: 180,\n          key: 'store_name',\n        },\n        {\n          title: '浏览量',\n          key: 'visit',\n          minWidth: 100,\n        },\n        {\n          title: '访客数',\n          key: 'user',\n          minWidth: 100,\n        },\n        {\n          title: '加购件数',\n          key: 'cart',\n          minWidth: 100,\n        },\n        {\n          title: '下单件数',\n          key: 'orders',\n          minWidth: 100,\n        },\n        {\n          title: '支付件数',\n          key: 'pay',\n          minWidth: 100,\n        },\n        {\n          title: '支付金额',\n          key: 'price',\n          minWidth: 100,\n        },\n        {\n          title: '毛利率(%)',\n          slot: 'profit',\n          minWidth: 100,\n        },\n        {\n          title: '收藏数',\n          key: 'collect',\n          minWidth: 100,\n        },\n        {\n          title: '访客-支付转化率(%)',\n          slot: 'changes',\n          minWidth: 120,\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          fixed: 'right',\n          minWidth: 80,\n        },\n      ],\n      goodsId: '',\n      isProductBox: false,\n      list: [\n        {\n          val: 'visit',\n          name: '浏览量',\n        },\n        {\n          val: 'user',\n          name: '访客数',\n        },\n        {\n          val: 'cart',\n          name: '加购件数',\n        },\n        {\n          val: 'orders',\n          name: '下单件数',\n        },\n        {\n          val: 'price',\n          name: '支付金额',\n        },\n        {\n          val: 'profit',\n          name: '毛利率',\n        },\n        {\n          val: 'collect',\n          name: '收藏数',\n        },\n        {\n          val: 'changes',\n          name: '访客-支付转化率',\n        },\n      ],\n    };\n  },\n  created() {\n    const end = new Date();\n    const start = new Date();\n    start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 29)));\n    this.timeVal = [start, end];\n    this.formValidate.data = formatDate(start, 'yyyy/MM/dd') + '-' + formatDate(end, 'yyyy/MM/dd');\n  },\n  mounted() {\n    this.getList();\n  },\n  methods: {\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.formValidate.data = this.timeVal.join('-');\n      this.name = this.formValidate.data;\n    },\n    changeMenu(name) {\n      this.formValidate.sort = name;\n      this.getList();\n    },\n    // 列表\n    getList() {\n      this.loading = true;\n      statisticProductListApi(this.formValidate)\n        .then(async (res) => {\n          let data = res.data;\n          this.tabList = data;\n          this.loading = false;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    look(row) {\n      this.goodsId = row.product_id;\n      this.isProductBox = true;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"less\">\n.header {\n  &-title {\n    font-size: 16px;\n    color: rgba(0, 0, 0, 0.85);\n  }\n  &-time {\n    font-size: 12px;\n    color: #000000;\n    opacity: 0.45;\n  }\n}\n</style>\n<style scoped lang=\"stylus\">\n.bg\n    position fixed\n    left 0\n    top 0\n    width 100%\n    height 100%\n    background rgba(0,0,0,0.5)\n    z-index: 11;\n/deep/.happy-scroll-content\n    width 100%\n    .demo-spin-icon-load{\n        animation: ani-demo-spin 1s linear infinite;\n    }\n    @keyframes ani-demo-spin {\n        from { transform: rotate(0deg);}\n        50%  { transform: rotate(180deg);}\n        to   { transform: rotate(360deg);}\n    }\n    .demo-spin-col{\n        height: 100px;\n        position: relative;\n        border: 1px solid #eee;\n    }\n</style>\n"]}]}