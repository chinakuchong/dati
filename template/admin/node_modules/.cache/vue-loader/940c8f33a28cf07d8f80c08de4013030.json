{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/notify/smsPay/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/notify/smsPay/index.vue","mtime":1689324015240},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHNtc1ByaWNlQXBpLCBwYXlDb2RlQXBpLCBpc0xvZ2luQXBpLCBzZXJ2ZUluZm9BcGkgfSBmcm9tICdAL2FwaS9zZXR0aW5nJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzbXNQYXknLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhbGw6IHsgc21zOiAn55+t5L+hJywgY29weTogJ+WVhuWTgemHh+mbhicsIGV4cHJfcXVlcnk6ICfnianmtYHmn6Xor6InLCBleHByX2R1bXA6ICfnlLXlrZDpnaLljZXmiZPljbAnIH0sCiAgICAgIGlzQ2hlY2tlZDogJ3NtcycsCiAgICAgIG51bWJlcnM6ICcnLAogICAgICBhY2NvdW50OiAnJywKICAgICAgbGlzdDogW10sCiAgICAgIGN1cnJlbnQ6IDAsCiAgICAgIGNoZWNrTGlzdDoge30sCiAgICAgIHNwaW5TaG93OiBmYWxzZSwKICAgICAgY29kZToge30sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaXNDaGVja2VkID0gdGhpcy4kcm91dGUucXVlcnkudHlwZTsKICAgIHRoaXMub25Jc0xvZ2luKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmn6XnnIvmmK/lkKbnmbvlvZUKICAgIG9uSXNMb2dpbigpIHsKICAgICAgdGhpcy5zcGluU2hvdyA9IHRydWU7CiAgICAgIGlzTG9naW5BcGkoKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICBpZiAoIWRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35YWI55m75b2VJyk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICBwYXRoOiB0aGlzLiRyb3V0ZVByb1N0ciArICcvc2V0dGluZy9zbXMvc21zX2NvbmZpZy9pbmRleD91cmw9JyArIHRoaXMuJHJvdXRlLnBhdGgsCiAgICAgICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMuJHJvdXRlLnF1ZXJ5LnR5cGUsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmdldFNlcnZlSW5mbygpOwogICAgICAgICAgICB0aGlzLmdldFByaWNlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDlubPlj7DnlKjmiLfkv6Hmga8KICAgIGdldFNlcnZlSW5mbygpIHsKICAgICAgc2VydmVJbmZvQXBpKCkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgc3dpdGNoICh0aGlzLmlzQ2hlY2tlZCkgewogICAgICAgICAgICBjYXNlICdzbXMnOgogICAgICAgICAgICAgIHRoaXMubnVtYmVycyA9IGRhdGEuc21zLm51bTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnY29weSc6CiAgICAgICAgICAgICAgdGhpcy5udW1iZXJzID0gZGF0YS5jb3B5Lm51bTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnZXhwcl9kdW1wJzoKICAgICAgICAgICAgICB0aGlzLm51bWJlcnMgPSBkYXRhLmR1bXAubnVtOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgIHRoaXMubnVtYmVycyA9IGRhdGEucXVlcnkubnVtOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgb25DaGFuZ2VUeXBlKHZhbCkgewogICAgICB0aGlzLmN1cnJlbnQgPSAwOwogICAgICB0aGlzLmdldFByaWNlKCk7CiAgICAgIHRoaXMuZ2V0U2VydmVJbmZvKCk7CiAgICB9LAogICAgLy8g5pSv5LuY5aWX6aSQCiAgICBnZXRQcmljZSgpIHsKICAgICAgdGhpcy5zcGluU2hvdyA9IHRydWU7CiAgICAgIHNtc1ByaWNlQXBpKHsgdHlwZTogdGhpcy5pc0NoZWNrZWQgfSkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgICAgfSwgODAwKTsKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLmxpc3QgPSBkYXRhLmRhdGE7CiAgICAgICAgICB0aGlzLmNoZWNrTGlzdCA9IHRoaXMubGlzdFswXTsKICAgICAgICAgIHRoaXMuZ2V0Q29kZSh0aGlzLmNoZWNrTGlzdCk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy5zcGluU2hvdyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIHRoaXMubGlzdCA9IFtdOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOmAieS4rQogICAgY2hlY2soaXRlbSwgaW5kZXgpIHsKICAgICAgdGhpcy5zcGluU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuY3VycmVudCA9IGluZGV4OwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmdldENvZGUoaXRlbSk7CiAgICAgICAgdGhpcy5jaGVja0xpc3QgPSBpdGVtOwogICAgICAgIHRoaXMuc3BpblNob3cgPSBmYWxzZTsKICAgICAgfSwgODAwKTsKICAgIH0sCiAgICAvLyDmlK/ku5jnoIEKICAgIGdldENvZGUoaXRlbSkgewogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBwYXlfdHlwZTogJ3dlaXhpbicsCiAgICAgICAgbWVhbF9pZDogaXRlbS5pZCwKICAgICAgICBwcmljZTogaXRlbS5wcmljZSwKICAgICAgICBudW06IGl0ZW0ubnVtLAogICAgICAgIHR5cGU6IGl0ZW0udHlwZSwKICAgICAgfTsKICAgICAgcGF5Q29kZUFwaShkYXRhKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuY29kZSA9IHJlcy5kYXRhOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuY29kZSA9ICcnOwogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/notify/smsPay","sourcesContent":["<template>\n  <div>\n    <div class=\"i-layout-page-header header_top\">\n      <div class=\"i-layout-page-header fl_header\">\n        <router-link :to=\"{ path: $routeProStr + '/setting/sms/sms_config/index' }\"\n          ><Button icon=\"ios-arrow-back\" size=\"small\" type=\"text\">返回</Button></router-link\n        >\n        <Divider type=\"vertical\" />\n        <span class=\"ivu-page-header-title mr20\" style=\"padding: 0\">{{ $route.meta.title }}</span>\n      </div>\n    </div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <Tabs v-model=\"isChecked\" @on-click=\"onChangeType\">\n        <TabPane label=\"短信\" name=\"sms\"></TabPane>\n        <TabPane label=\"商品采集\" name=\"copy\"></TabPane>\n        <TabPane label=\"物流查询\" name=\"expr_query\"></TabPane>\n        <TabPane label=\"电子面单打印\" name=\"expr_dump\"></TabPane>\n      </Tabs>\n      <Row :gutter=\"16\" class=\"mt50\">\n        <Col span=\"24\" class=\"ivu-text-left mb20\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">当前剩余条数：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <span>{{ numbers }}</span>\n          </Col>\n        </Col>\n        <Col span=\"24\" class=\"ivu-text-left mb20\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">选择套餐：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <Row :gutter=\"20\">\n              <Col v-for=\"(item, index) in list\" :key=\"index\" :xxl=\"4\" :xl=\"8\" :lg=\"8\" :md=\"12\" :sm=\"24\" :xs=\"24\">\n                <div\n                  class=\"list-goods-list-item mb15\"\n                  :class=\"{ active: index === current }\"\n                  @click=\"check(item, index)\"\n                >\n                  <div class=\"list-goods-list-item-title\" :class=\"{ active: index === current }\">\n                    ¥ <i>{{ item.price }}</i>\n                  </div>\n                  <div class=\"list-goods-list-item-price\" :class=\"{ active: index === current }\">\n                    <span>{{ all[isChecked] }}条数: {{ item.num }}</span>\n                  </div>\n                </div>\n              </Col>\n            </Row>\n          </Col>\n        </Col>\n        <Col span=\"24\" class=\"ivu-text-left mb20\" v-if=\"checkList\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">充值条数：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <span>{{ checkList.num }}</span>\n          </Col>\n        </Col>\n        <Col span=\"24\" class=\"ivu-text-left mb20\" v-if=\"checkList\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">支付金额：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <span class=\"list-goods-list-item-number\">￥{{ checkList.price }}</span>\n          </Col>\n        </Col>\n        <Col span=\"24\" class=\"ivu-text-left mb20\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"2\" class=\"mr20\">\n            <span class=\"ivu-text-right ivu-block\">付款方式：</span>\n          </Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <span class=\"list-goods-list-item-pay\"\n              >微信支付<i v-if=\"code.invalid\">{{ '  （ 支付码过期时间：' + code.invalid + ' ）' }}</i></span\n            >\n          </Col>\n        </Col>\n        <Col span=\"24\">\n          <Col :xs=\"12\" :sm=\"6\" :md=\"4\" :lg=\"3\" class=\"mr20\">&nbsp;</Col>\n          <Col :xs=\"11\" :sm=\"13\" :md=\"19\" :lg=\"20\">\n            <div class=\"list-goods-list-item-code mr20\"><img v-lazy=\"code.code_url\" v-if=\"code.code_url\" /></div>\n          </Col>\n        </Col>\n        <Spin size=\"large\" fix v-if=\"spinShow\"></Spin>\n      </Row>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { smsPriceApi, payCodeApi, isLoginApi, serveInfoApi } from '@/api/setting';\nexport default {\n  name: 'smsPay',\n  data() {\n    return {\n      all: { sms: '短信', copy: '商品采集', expr_query: '物流查询', expr_dump: '电子面单打印' },\n      isChecked: 'sms',\n      numbers: '',\n      account: '',\n      list: [],\n      current: 0,\n      checkList: {},\n      spinShow: false,\n      code: {},\n    };\n  },\n  created() {\n    this.isChecked = this.$route.query.type;\n    this.onIsLogin();\n  },\n  methods: {\n    // 查看是否登录\n    onIsLogin() {\n      this.spinShow = true;\n      isLoginApi()\n        .then(async (res) => {\n          let data = res.data;\n          if (!data.status) {\n            this.$Message.warning('请先登录');\n            this.$router.push({\n              path: this.$routeProStr + '/setting/sms/sms_config/index?url=' + this.$route.path,\n              query: {\n                type: this.$route.query.type,\n              },\n            });\n          } else {\n            this.getServeInfo();\n            this.getPrice();\n          }\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 平台用户信息\n    getServeInfo() {\n      serveInfoApi()\n        .then(async (res) => {\n          let data = res.data;\n          switch (this.isChecked) {\n            case 'sms':\n              this.numbers = data.sms.num;\n              break;\n            case 'copy':\n              this.numbers = data.copy.num;\n              break;\n            case 'expr_dump':\n              this.numbers = data.dump.num;\n              break;\n            default:\n              this.numbers = data.query.num;\n              break;\n          }\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    onChangeType(val) {\n      this.current = 0;\n      this.getPrice();\n      this.getServeInfo();\n    },\n    // 支付套餐\n    getPrice() {\n      this.spinShow = true;\n      smsPriceApi({ type: this.isChecked })\n        .then(async (res) => {\n          setTimeout(() => {\n            this.spinShow = false;\n          }, 800);\n          let data = res.data;\n          this.list = data.data;\n          this.checkList = this.list[0];\n          this.getCode(this.checkList);\n        })\n        .catch((res) => {\n          this.spinShow = false;\n          this.$Message.error(res.msg);\n          this.list = [];\n        });\n    },\n    // 选中\n    check(item, index) {\n      this.spinShow = true;\n      this.current = index;\n      setTimeout(() => {\n        this.getCode(item);\n        this.checkList = item;\n        this.spinShow = false;\n      }, 800);\n    },\n    // 支付码\n    getCode(item) {\n      let data = {\n        pay_type: 'weixin',\n        meal_id: item.id,\n        price: item.price,\n        num: item.num,\n        type: item.type,\n      };\n      payCodeApi(data)\n        .then(async (res) => {\n          this.code = res.data;\n        })\n        .catch((res) => {\n          this.code = '';\n          this.$Message.error(res.msg);\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.active {\n  background: #0091ff;\n  box-shadow: 0px 6px 20px 0px rgba(0, 145, 255, 0.3);\n  color: #fff !important;\n}\n.list-goods-list-item {\n  border: 1px solid #dadfe6;\n  padding: 20px 10px;\n  box-sizing: border-box;\n  border-radius: 3px;\n}\n.list-goods-list {\n  &-item {\n    text-align: center;\n    position: relative;\n    cursor: pointer;\n    img {\n      width: 60%;\n    }\n    .ivu-tag {\n      position: absolute;\n      top: 10px;\n      right: 10px;\n    }\n    &-title {\n      font-size: 16px;\n      font-weight: bold;\n      color: #0091ff;\n      margin-bottom: 3px;\n      i {\n        font-size: 30px;\n        font-style: normal;\n      }\n    }\n    &-desc {\n      font-size: 14px;\n      color: #808695;\n    }\n    &-price {\n      font-size: 14px;\n      color: #000000;\n      s {\n        color: #c5c8ce;\n      }\n    }\n    &-number {\n      font-size: 14px;\n      color: #ed4014;\n    }\n    &-pay {\n      font-size: 14px;\n      color: #00c050;\n      i {\n        font-size: 12px;\n        font-style: normal;\n        color: #6d7278;\n      }\n    }\n    &-code {\n      width: 130px;\n      height: 130px;\n      img {\n        width: 100%;\n        height: 100%;\n      }\n    }\n  }\n}\n</style>\n"]}]}