{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/storeCouponIssue/create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/storeCouponIssue/create.vue","mtime":1689324015230},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCBnb29kc0xpc3QgZnJvbSAnQC9jb21wb25lbnRzL2dvb2RzTGlzdC9pbmRleCc7CmltcG9ydCB7IGNvdXBvbkNhdGVnb3J5QXBpLCBjb3Vwb25TYXZlQXBpLCBjb3Vwb25EZXRhaWxBcGkgfSBmcm9tICdAL2FwaS9tYXJrZXRpbmcnOwppbXBvcnQgeyBjYXNjYWRlckxpc3RBcGkgfSBmcm9tICdAL2FwaS9wcm9kdWN0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzdG9yZUNvdXBvbkNyZWF0ZScsCiAgY29tcG9uZW50czogewogICAgZ29vZHNMaXN0LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgZm9ybURhdGE6IHsKICAgICAgICBjb3Vwb25fdGl0bGU6ICcnLAogICAgICAgIGNvdXBvbl9wcmljZTogMCwKICAgICAgICB0eXBlOiAwLAogICAgICAgIHVzZV9taW5fcHJpY2U6IDAsCiAgICAgICAgY291cG9uX3RpbWU6IDEsCiAgICAgICAgc3RhcnRfdXNlX3RpbWU6IDAsCiAgICAgICAgZW5kX3VzZV90aW1lOiAwLAogICAgICAgIHN0YXJ0X3RpbWU6IDAsCiAgICAgICAgZW5kX3RpbWU6IDAsCiAgICAgICAgcmVjZWl2ZV90eXBlOiAxLAogICAgICAgIGlzX3Blcm1hbmVudDogMSwKICAgICAgICB0b3RhbF9jb3VudDogMSwKICAgICAgICBzb3J0OiAwLAogICAgICAgIHN0YXR1czogMSwKICAgICAgICBwcm9kdWN0X2lkOiAnJywKICAgICAgICBjYXRlZ29yeV9pZDogMCwKICAgICAgICByZWNlaXZlX2xpbWl0OiAxLAogICAgICB9LAogICAgICBjYXRlZ29yeUxpc3Q6IFtdLAogICAgICBwcm9kdWN0TGlzdDogW10sCiAgICAgIGlzTWluUHJpY2U6IDAsCiAgICAgIGlzQ291cG9uVGltZTogMSwKICAgICAgaXNSZWNlaXZlVGltZTogMCwKICAgICAgbW9kYWxzOiBmYWxzZSwKICAgICAgZGF0ZXRpbWUxOiBbXSwKICAgICAgZGF0ZXRpbWUyOiBbXSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoJ21lZGlhJywgWydpc01vYmlsZSddKSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpOwogICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICB0aGlzLmdldENvdXBvbkRldGFpbCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5ZOB57G7CiAgICBnZXRDYXRlZ29yeUxpc3QoKSB7CiAgICAgIGNhc2NhZGVyTGlzdEFwaSgxKS50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDkvJjmg6DliLgKICAgIGdldENvdXBvbkRldGFpbCgpIHsKICAgICAgY291cG9uRGV0YWlsQXBpKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy5mb3JtRGF0YS5jb3Vwb25fdGl0bGUgPSBkYXRhLmNvdXBvbl90aXRsZTsKICAgICAgICAgIHRoaXMuZm9ybURhdGEudHlwZSA9IGRhdGEudHlwZTsKICAgICAgICAgIHRoaXMuZm9ybURhdGEuY2F0ZWdvcnlfaWQgPSBkYXRhLmNhdGVnb3J5X2lkOwogICAgICAgICAgdGhpcy5mb3JtRGF0YS5jb3Vwb25fcHJpY2UgPSBwYXJzZUZsb2F0KGRhdGEuY291cG9uX3ByaWNlKTsKICAgICAgICAgIHRoaXMuZm9ybURhdGEudXNlX21pbl9wcmljZSA9IHBhcnNlRmxvYXQoZGF0YS51c2VfbWluX3ByaWNlKTsKICAgICAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnVzZV9taW5fcHJpY2UpIHsKICAgICAgICAgICAgdGhpcy5pc01pblByaWNlID0gMTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZm9ybURhdGEuY291cG9uX3RpbWUgPSBkYXRhLmNvdXBvbl90aW1lOwogICAgICAgICAgdGhpcy5mb3JtRGF0YS5yZWNlaXZlX3R5cGUgPSBkYXRhLnJlY2VpdmVfdHlwZTsKICAgICAgICAgIHRoaXMuZm9ybURhdGEuaXNfcGVybWFuZW50ID0gZGF0YS5pc19wZXJtYW5lbnQ7CiAgICAgICAgICB0aGlzLmZvcm1EYXRhLnN0YXR1cyA9IGRhdGEuc3RhdHVzOwogICAgICAgICAgdGhpcy5mb3JtRGF0YS5wcm9kdWN0X2lkID0gZGF0YS5wcm9kdWN0X2lkOwogICAgICAgICAgdGhpcy5mb3JtRGF0YS5zdGFydF90aW1lID0gZGF0YS5zdGFydF90aW1lOwogICAgICAgICAgdGhpcy5mb3JtRGF0YS5lbmRfdGltZSA9IGRhdGEuZW5kX3RpbWU7CiAgICAgICAgICB0aGlzLmZvcm1EYXRhLnRvdGFsX2NvdW50ID0gZGF0YS50b3RhbF9jb3VudDsKICAgICAgICAgIHRoaXMuZm9ybURhdGEuc29ydCA9IGRhdGEuc29ydDsKICAgICAgICAgIHRoaXMuZm9ybURhdGEucmVjZWl2ZV9saW1pdCA9IGRhdGEucmVjZWl2ZV9saW1pdDsKICAgICAgICAgIGlmICgncHJvZHVjdEluZm8nIGluIGRhdGEpIHsKICAgICAgICAgICAgdGhpcy5wcm9kdWN0TGlzdCA9IGRhdGEucHJvZHVjdEluZm87CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoIWRhdGEuY291cG9uX3RpbWUpIHsKICAgICAgICAgICAgdGhpcy5pc0NvdXBvblRpbWUgPSAwOwogICAgICAgICAgICB0aGlzLmRhdGV0aW1lMSA9IFtkYXRhLnN0YXJ0X3VzZV90aW1lICogMTAwMCwgZGF0YS5lbmRfdXNlX3RpbWUgKiAxMDAwXTsKICAgICAgICAgICAgdGhpcy5mb3JtRGF0YS5zdGFydF91c2VfdGltZSA9IHRoaXMubWFrZURhdGUoZGF0YS5zdGFydF91c2VfdGltZSAqIDEwMDApOwogICAgICAgICAgICB0aGlzLmZvcm1EYXRhLmVuZF91c2VfdGltZSA9IHRoaXMubWFrZURhdGUoZGF0YS5lbmRfdXNlX3RpbWUgKiAxMDAwKTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChkYXRhLnN0YXJ0X3RpbWUpIHsKICAgICAgICAgICAgdGhpcy5pc1JlY2VpdmVUaW1lID0gMTsKICAgICAgICAgICAgdGhpcy5kYXRldGltZTIgPSBbZGF0YS5zdGFydF90aW1lICogMTAwMCwgZGF0YS5lbmRfdGltZSAqIDEwMDBdOwogICAgICAgICAgICB0aGlzLmZvcm1EYXRhLnN0YXJ0X3RpbWUgPSB0aGlzLm1ha2VEYXRlKGRhdGEuc3RhcnRfdGltZSAqIDEwMDApOwogICAgICAgICAgICB0aGlzLmZvcm1EYXRhLmVuZF90aW1lID0gdGhpcy5tYWtlRGF0ZShkYXRhLmVuZF90aW1lICogMTAwMCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihlcnIubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBtYWtlRGF0ZShkYXRhKSB7CiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUoZGF0YSk7CiAgICAgIGxldCBZWSA9IGRhdGUuZ2V0RnVsbFllYXIoKSArICctJzsKICAgICAgbGV0IE1NID0gKGRhdGUuZ2V0TW9udGgoKSArIDEgPCAxMCA/ICcwJyArIChkYXRlLmdldE1vbnRoKCkgKyAxKSA6IGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy0nOwogICAgICBsZXQgREQgPSBkYXRlLmdldERhdGUoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXREYXRlKCkgOiBkYXRlLmdldERhdGUoKTsKICAgICAgbGV0IGhoID0gKGRhdGUuZ2V0SG91cnMoKSA8IDEwID8gJzAnICsgZGF0ZS5nZXRIb3VycygpIDogZGF0ZS5nZXRIb3VycygpKSArICc6JzsKICAgICAgbGV0IG1tID0gKGRhdGUuZ2V0TWludXRlcygpIDwgMTAgPyAnMCcgKyBkYXRlLmdldE1pbnV0ZXMoKSA6IGRhdGUuZ2V0TWludXRlcygpKSArICc6JzsKICAgICAgbGV0IHNzID0gZGF0ZS5nZXRTZWNvbmRzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0U2Vjb25kcygpIDogZGF0ZS5nZXRTZWNvbmRzKCk7CiAgICAgIHJldHVybiBZWSArIE1NICsgREQgKyAnICcgKyBoaCArIG1tICsgc3M7CiAgICB9LAogICAgLy8g5Yib5bu6CiAgICBzYXZlKCkgewogICAgICBpZiAoIXRoaXMuZm9ybURhdGEuY291cG9uX3RpdGxlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+ivt+i+k+WFpeS8mOaDoOWIuOWQjeensCcpOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnR5cGUgPT09IDIpIHsKICAgICAgICBpZiAoIXRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeWVhuWTgScpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5mb3JtRGF0YS50eXBlID09PSAxKSB7CiAgICAgICAgaWYgKCF0aGlzLmZvcm1EYXRhLmNhdGVnb3J5X2lkKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign6K+36YCJ5oup5ZOB57G7Jyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1EYXRhLmNvdXBvbl9wcmljZSA8PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+S8mOaDoOWIuOmdouWAvOS4jeiDveWwj+S6jjAnKTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuaXNNaW5QcmljZSkgewogICAgICAgIHRoaXMuZm9ybURhdGEudXNlX21pbl9wcmljZSA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuZm9ybURhdGEudXNlX21pbl9wcmljZSA8IDEpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfkvJjmg6DliLjmnIDkvY7mtojotLnkuI3og73lsI/kuo4wJyk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICh0aGlzLmlzQ291cG9uVGltZSkgewogICAgICAgIHRoaXMuZm9ybURhdGEuc3RhcnRfdXNlX3RpbWUgPSAwOwogICAgICAgIHRoaXMuZm9ybURhdGEuZW5kX3VzZV90aW1lID0gMDsKICAgICAgICBpZiAodGhpcy5mb3JtRGF0YS5jb3Vwb25fdGltZSA8IDEpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfkvb/nlKjmnInmlYjmnJ/pmZDkuI3og73lsI/kuo4x5aSpJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybURhdGEuY291cG9uX3RpbWUgPSAwOwogICAgICAgIGlmICghdGhpcy5mb3JtRGF0YS5zdGFydF91c2VfdGltZSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeS9v+eUqOacieaViOacn+mZkCcpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAodGhpcy5pc1JlY2VpdmVUaW1lKSB7CiAgICAgICAgaWYgKCF0aGlzLmZvcm1EYXRhLnN0YXJ0X3RpbWUpIHsKICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfor7fpgInmi6npooblj5bml7bpl7QnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5mb3JtRGF0YS5zdGFydF90aW1lID0gMDsKICAgICAgICB0aGlzLmZvcm1EYXRhLmVuZF90aW1lID0gMDsKICAgICAgfQogICAgICBpZiAodGhpcy5mb3JtRGF0YS5yZWNlaXZlX3R5cGUgPT0gMiB8fCB0aGlzLmZvcm1EYXRhLnJlY2VpdmVfdHlwZSA9PSAzKSB7CiAgICAgICAgdGhpcy5mb3JtRGF0YS5pc19wZXJtYW5lbnQgPSAxOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1EYXRhLmlzX3Blcm1hbmVudCkgewogICAgICAgIHRoaXMuZm9ybURhdGEudG90YWxfY291bnQgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnRvdGFsX2NvdW50IDwgMSkgewogICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+WPkeW4g+aVsOmHj+S4jeiDveWwj+S6jjEnKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZm9ybURhdGEucmVjZWl2ZV9saW1pdCA8IDEpIHsKICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS5lcnJvcign5q+P5Liq55So5oi35Y+v5Lul6aKG5Y+W5pWw6YeP5LiN6IO95bCP5LqOMScpOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1EYXRhLnR5cGUgPT0gMCkgewogICAgICAgIHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCA9ICcnOwogICAgICAgIHRoaXMuZm9ybURhdGEuY2F0ZWdvcnlfaWQgPSAnJzsKICAgICAgICB0aGlzLnByb2R1Y3RMaXN0ID0gW107CiAgICAgIH0gZWxzZSBpZiAodGhpcy5mb3JtRGF0YS50eXBlID09IDEpIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnByb2R1Y3RfaWQgPSAnJzsKICAgICAgICB0aGlzLnByb2R1Y3RMaXN0ID0gW107CiAgICAgIH0gZWxzZSBpZiAodGhpcy5mb3JtRGF0YS50eXBlID09IDIpIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLmNhdGVnb3J5X2lkID0gJyc7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHJldHVybjsKICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7CiAgICAgIGNvdXBvblNhdmVBcGkodGhpcy5mb3JtRGF0YSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogdGhpcy4kcm91dGVQcm9TdHIgKyAnL21hcmtldGluZy9zdG9yZV9jb3Vwb25faXNzdWUvaW5kZXgnLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g5L2/55So5pyJ5pWI5pyfLS3ml7bpl7TmrrUKICAgIGRhdGVDaGFuZ2UodGltZSkgewogICAgICB0aGlzLmZvcm1EYXRhLnN0YXJ0X3VzZV90aW1lID0gdGltZVswXTsKICAgICAgdGhpcy5mb3JtRGF0YS5lbmRfdXNlX3RpbWUgPSB0aW1lWzFdOwogICAgfSwKICAgIC8vIOmZkOaXtgogICAgdGltZUNoYW5nZSh0aW1lKSB7CiAgICAgIHRoaXMuZm9ybURhdGEuc3RhcnRfdGltZSA9IHRpbWVbMF07CiAgICAgIHRoaXMuZm9ybURhdGEuZW5kX3RpbWUgPSB0aW1lWzFdOwogICAgfSwKICAgIC8v5a+56LGh5pWw57uE5Y676YeN77ybCiAgICB1bmlxdWUoYXJyKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBNYXAoKTsKICAgICAgcmV0dXJuIGFyci5maWx0ZXIoKGFycikgPT4gIXJlcy5oYXMoYXJyLnByb2R1Y3RfaWQpICYmIHJlcy5zZXQoYXJyLnByb2R1Y3RfaWQsIDEpKTsKICAgIH0sCiAgICAvLyDpgInmi6nnmoTllYblk4EKICAgIGdldFByb2R1Y3RJZChwcm9kdWN0TGlzdCkgewogICAgICB0aGlzLm1vZGFscyA9IGZhbHNlOwogICAgICB0aGlzLnByb2R1Y3RMaXN0ID0gdGhpcy51bmlxdWUodGhpcy5wcm9kdWN0TGlzdC5jb25jYXQocHJvZHVjdExpc3QpKTsKICAgICAgdGhpcy5mb3JtRGF0YS5wcm9kdWN0X2lkID0gJyc7CiAgICAgIHRoaXMucHJvZHVjdExpc3QuZm9yRWFjaCgodmFsdWUpID0+IHsKICAgICAgICBpZiAodGhpcy5mb3JtRGF0YS5wcm9kdWN0X2lkKSB7CiAgICAgICAgICB0aGlzLmZvcm1EYXRhLnByb2R1Y3RfaWQgKz0gYCwke3ZhbHVlLnByb2R1Y3RfaWR9YDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5mb3JtRGF0YS5wcm9kdWN0X2lkICs9IGAke3ZhbHVlLnByb2R1Y3RfaWR9YDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNhbmNlbCgpIHsKICAgICAgdGhpcy5tb2RhbHMgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDliKDpmaTllYblk4EKICAgIHJlbW92ZShwcm9kdWN0SWQpIHsKICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucHJvZHVjdExpc3QubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgaWYgKHRoaXMucHJvZHVjdExpc3RbaW5kZXhdLnByb2R1Y3RfaWQgPT0gcHJvZHVjdElkKSB7CiAgICAgICAgICB0aGlzLnByb2R1Y3RMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCA9ICcnOwogICAgICB0aGlzLnByb2R1Y3RMaXN0LmZvckVhY2goKHZhbHVlKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCkgewogICAgICAgICAgdGhpcy5mb3JtRGF0YS5wcm9kdWN0X2lkICs9IGAsJHt2YWx1ZS5wcm9kdWN0X2lkfWA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZm9ybURhdGEucHJvZHVjdF9pZCArPSBgJHt2YWx1ZS5wcm9kdWN0X2lkfWA7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create.vue","sourceRoot":"src/pages/marketing/storeCouponIssue","sourcesContent":["<template>\n  <div>\n    <div class=\"i-layout-page-header header-title\">\n      <div class=\"fl_header\">\n        <router-link :to=\"{ path: $routeProStr + '/marketing/store_coupon_issue/index' }\"\n          ><Button icon=\"ios-arrow-back\" size=\"small\" type=\"text\">返回</Button></router-link\n        >\n        <Divider type=\"vertical\" />\n        <span\n          class=\"ivu-page-header-title mr20\"\n          style=\"padding: 0\"\n          v-text=\"$route.params.id ? '编辑优惠券' : '添加优惠券'\"\n        ></span>\n      </div>\n    </div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <Form :model=\"formData\" :label-width=\"150\">\n        <FormItem label=\"优惠券名称\">\n          <Input v-model=\"formData.coupon_title\" :maxlength=\"18\" placeholder=\"请输入优惠券名称\"></Input>\n        </FormItem>\n        <FormItem label=\"优惠券面值\">\n          <InputNumber :min=\"1\" :max=\"99999\" v-model=\"formData.coupon_price\"></InputNumber>\n        </FormItem>\n        <FormItem label=\"发送方式\">\n          <RadioGroup v-model=\"formData.receive_type\">\n            <Radio :label=\"1\">用户领取</Radio>\n            <Radio :label=\"2\">新用户自动发放</Radio>\n            <Radio :label=\"3\">系统赠送</Radio>\n            <Radio :label=\"4\">付费会员专享</Radio>\n          </RadioGroup>\n          <div class=\"tip\">\n            用户领取：用户需要手动领取优惠券；新用户自动发放：新注册的用户自动发放；系统赠送：后台发放指定用户或者添加到商品里面用户购买该商品获得；付费会员专享：仅付费会员可以领取和使用\n          </div>\n        </FormItem>\n        <FormItem label=\"优惠劵类型\">\n          <RadioGroup v-model=\"formData.type\">\n            <Radio :label=\"0\">通用券</Radio>\n            <Radio :label=\"1\">品类券</Radio>\n            <Radio :label=\"2\">商品券</Radio>\n            <!--                        <Radio :label=\"3\">会员券</Radio>-->\n          </RadioGroup>\n        </FormItem>\n        <FormItem v-show=\"formData.type === 2\">\n          <template>\n            <div class=\"upload-list\" v-for=\"item in productList\" :key=\"item.product_id\">\n              <img :src=\"item.image\" />\n              <Icon type=\"ios-close-circle\" size=\"16\" @click=\"remove(item.product_id)\" />\n            </div>\n          </template>\n          <Icon type=\"ios-camera-outline\" size=\"26\" @click=\"modals = true\" />\n          <div class=\"info\">选择商品</div>\n        </FormItem>\n        <FormItem v-show=\"formData.type === 1\">\n          <!-- <Select v-model=\"formData.category_id\" style=\"width: 320px\" multiple>\n            <Option v-for=\"item in categoryList\" :value=\"item.id\" :key=\"item.id\">{{ item.cate_name }}</Option>\n          </Select> -->\n          <el-cascader\n            v-model=\"formData.category_id\"\n            size=\"small\"\n            :options=\"categoryList\"\n            :props=\"{ multiple: true, emitPath: false }\"\n            clearable\n            style=\"width: 320px\"\n          ></el-cascader>\n          <div class=\"info\">选择商品的品类</div>\n        </FormItem>\n        <FormItem label=\"使用门槛\">\n          <RadioGroup v-model=\"isMinPrice\">\n            <Radio :label=\"0\">无门槛</Radio>\n            <Radio :label=\"1\">有门槛</Radio>\n          </RadioGroup>\n        </FormItem>\n        <FormItem v-if=\"isMinPrice\">\n          <InputNumber :min=\"1\" :max=\"99999\" v-model=\"formData.use_min_price\"></InputNumber>\n          <div class=\"info\">填写优惠券的最低消费金额</div>\n        </FormItem>\n        <FormItem label=\"使用时间\">\n          <RadioGroup v-model=\"isCouponTime\">\n            <Radio :label=\"1\">天数</Radio>\n            <Radio :label=\"0\">时间段</Radio>\n          </RadioGroup>\n        </FormItem>\n        <FormItem v-show=\"isCouponTime\" label=\"\">\n          <InputNumber :min=\"1\" v-model=\"formData.coupon_time\" :precision=\"0\"></InputNumber>\n          <div class=\"info\">领取后多少天内有效</div>\n        </FormItem>\n        <FormItem v-show=\"!isCouponTime\" label=\"\">\n          <DatePicker\n            :value=\"datetime1\"\n            :editable=\"false\"\n            type=\"datetimerange\"\n            placeholder=\"领取后在这个时间段内可以使用\"\n            @on-change=\"dateChange\"\n          ></DatePicker>\n        </FormItem>\n        <FormItem label=\"领取时间\" v-if=\"formData.receive_type != 2 && formData.receive_type != 3\">\n          <RadioGroup v-model=\"isReceiveTime\">\n            <Radio :label=\"1\">限时</Radio>\n            <Radio :label=\"0\">不限时</Radio>\n          </RadioGroup>\n        </FormItem>\n        <FormItem v-show=\"isReceiveTime\" label=\"\">\n          <DatePicker\n            :value=\"datetime2\"\n            type=\"datetimerange\"\n            placeholder=\"在这个时间段内可领取\"\n            @on-change=\"timeChange\"\n          ></DatePicker>\n        </FormItem>\n        <FormItem label=\"优惠券发布数量\" v-if=\"formData.receive_type != 2 && formData.receive_type != 3\">\n          <RadioGroup v-model=\"formData.is_permanent\">\n            <Radio :label=\"0\">限量</Radio>\n            <Radio :label=\"1\">不限量</Radio>\n          </RadioGroup>\n        </FormItem>\n        <FormItem\n          v-show=\"!formData.is_permanent\"\n          label=\"\"\n          v-if=\"formData.receive_type != 2 && formData.receive_type != 3\"\n        >\n          <InputNumber :min=\"1\" :max=\"99999\" v-model=\"formData.total_count\" :precision=\"0\"></InputNumber>\n          <div class=\"info\">填写优惠券的发布数量</div>\n        </FormItem>\n        <FormItem label=\"用户领取数量\" v-if=\"formData.receive_type != 2 && formData.receive_type != 3\">\n          <InputNumber :min=\"1\" :max=\"99999\" v-model=\"formData.receive_limit\" :precision=\"0\"></InputNumber>\n          <div class=\"info\">填写每个用户可以领取多少张</div>\n        </FormItem>\n        <!--                <FormItem label=\"排序\">-->\n        <!--                    <InputNumber-->\n        <!--                        :min=\"0\"-->\n        <!--                        :max=\"100000000\"-->\n        <!--                        v-model=\"formData.sort\"-->\n        <!--                        :precision=\"0\"-->\n        <!--                    ></InputNumber>-->\n        <!--                </FormItem>-->\n        <FormItem label=\"状态\">\n          <RadioGroup v-model=\"formData.status\">\n            <Radio :label=\"1\">开启</Radio>\n            <Radio :label=\"0\">关闭</Radio>\n          </RadioGroup>\n        </FormItem>\n        <FormItem>\n          <Button type=\"primary\" @click=\"save\" :disabled=\"disabled\">立即创建</Button>\n        </FormItem>\n      </Form>\n    </Card>\n    <Modal\n      v-model=\"modals\"\n      title=\"商品列表\"\n      footerHide\n      class=\"paymentFooter\"\n      scrollable\n      width=\"900\"\n      @on-cancel=\"cancel\"\n    >\n      <goods-list ref=\"goodslist\" v-if=\"modals\" :ischeckbox=\"true\" @getProductId=\"getProductId\"></goods-list>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport goodsList from '@/components/goodsList/index';\nimport { couponCategoryApi, couponSaveApi, couponDetailApi } from '@/api/marketing';\nimport { cascaderListApi } from '@/api/product';\nexport default {\n  name: 'storeCouponCreate',\n  components: {\n    goodsList,\n  },\n  data() {\n    return {\n      disabled: false,\n      formData: {\n        coupon_title: '',\n        coupon_price: 0,\n        type: 0,\n        use_min_price: 0,\n        coupon_time: 1,\n        start_use_time: 0,\n        end_use_time: 0,\n        start_time: 0,\n        end_time: 0,\n        receive_type: 1,\n        is_permanent: 1,\n        total_count: 1,\n        sort: 0,\n        status: 1,\n        product_id: '',\n        category_id: 0,\n        receive_limit: 1,\n      },\n      categoryList: [],\n      productList: [],\n      isMinPrice: 0,\n      isCouponTime: 1,\n      isReceiveTime: 0,\n      modals: false,\n      datetime1: [],\n      datetime2: [],\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n  },\n  created() {\n    this.getCategoryList();\n    if (this.$route.params.id) {\n      this.getCouponDetail();\n    }\n  },\n  methods: {\n    // 品类\n    getCategoryList() {\n      cascaderListApi(1).then(async (res) => {\n        this.categoryList = res.data;\n      });\n    },\n    // 优惠券\n    getCouponDetail() {\n      couponDetailApi(this.$route.params.id)\n        .then((res) => {\n          let data = res.data;\n          this.formData.coupon_title = data.coupon_title;\n          this.formData.type = data.type;\n          this.formData.category_id = data.category_id;\n          this.formData.coupon_price = parseFloat(data.coupon_price);\n          this.formData.use_min_price = parseFloat(data.use_min_price);\n          if (this.formData.use_min_price) {\n            this.isMinPrice = 1;\n          }\n          this.formData.coupon_time = data.coupon_time;\n          this.formData.receive_type = data.receive_type;\n          this.formData.is_permanent = data.is_permanent;\n          this.formData.status = data.status;\n          this.formData.product_id = data.product_id;\n          this.formData.start_time = data.start_time;\n          this.formData.end_time = data.end_time;\n          this.formData.total_count = data.total_count;\n          this.formData.sort = data.sort;\n          this.formData.receive_limit = data.receive_limit;\n          if ('productInfo' in data) {\n            this.productList = data.productInfo;\n          }\n          if (!data.coupon_time) {\n            this.isCouponTime = 0;\n            this.datetime1 = [data.start_use_time * 1000, data.end_use_time * 1000];\n            this.formData.start_use_time = this.makeDate(data.start_use_time * 1000);\n            this.formData.end_use_time = this.makeDate(data.end_use_time * 1000);\n          }\n          if (data.start_time) {\n            this.isReceiveTime = 1;\n            this.datetime2 = [data.start_time * 1000, data.end_time * 1000];\n            this.formData.start_time = this.makeDate(data.start_time * 1000);\n            this.formData.end_time = this.makeDate(data.end_time * 1000);\n          }\n        })\n        .catch((err) => {\n          this.$Message.error(err.msg);\n        });\n    },\n    makeDate(data) {\n      let date = new Date(data);\n      let YY = date.getFullYear() + '-';\n      let MM = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n      let DD = date.getDate() < 10 ? '0' + date.getDate() : date.getDate();\n      let hh = (date.getHours() < 10 ? '0' + date.getHours() : date.getHours()) + ':';\n      let mm = (date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()) + ':';\n      let ss = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds();\n      return YY + MM + DD + ' ' + hh + mm + ss;\n    },\n    // 创建\n    save() {\n      if (!this.formData.coupon_title) {\n        return this.$Message.error('请输入优惠券名称');\n      }\n      if (this.formData.type === 2) {\n        if (!this.formData.product_id) {\n          return this.$Message.error('请选择商品');\n        }\n      }\n      if (this.formData.type === 1) {\n        if (!this.formData.category_id) {\n          return this.$Message.error('请选择品类');\n        }\n      }\n      if (this.formData.coupon_price <= 0) {\n        return this.$Message.error('优惠券面值不能小于0');\n      }\n      if (!this.isMinPrice) {\n        this.formData.use_min_price = 0;\n      } else {\n        if (this.formData.use_min_price < 1) {\n          return this.$Message.error('优惠券最低消费不能小于0');\n        }\n      }\n      if (this.isCouponTime) {\n        this.formData.start_use_time = 0;\n        this.formData.end_use_time = 0;\n        if (this.formData.coupon_time < 1) {\n          return this.$Message.error('使用有效期限不能小于1天');\n        }\n      } else {\n        this.formData.coupon_time = 0;\n        if (!this.formData.start_use_time) {\n          return this.$Message.error('请选择使用有效期限');\n        }\n      }\n      if (this.isReceiveTime) {\n        if (!this.formData.start_time) {\n          return this.$Message.error('请选择领取时间');\n        }\n      } else {\n        this.formData.start_time = 0;\n        this.formData.end_time = 0;\n      }\n      if (this.formData.receive_type == 2 || this.formData.receive_type == 3) {\n        this.formData.is_permanent = 1;\n      }\n      if (this.formData.is_permanent) {\n        this.formData.total_count = 0;\n      } else {\n        if (this.formData.total_count < 1) {\n          return this.$Message.error('发布数量不能小于1');\n        }\n      }\n      if (this.formData.receive_limit < 1) {\n        return this.$Message.error('每个用户可以领取数量不能小于1');\n      }\n      if (this.formData.type == 0) {\n        this.formData.product_id = '';\n        this.formData.category_id = '';\n        this.productList = [];\n      } else if (this.formData.type == 1) {\n        this.formData.product_id = '';\n        this.productList = [];\n      } else if (this.formData.type == 2) {\n        this.formData.category_id = '';\n      }\n      if (this.disabled) return;\n      this.disabled = true;\n      couponSaveApi(this.formData)\n        .then((res) => {\n          this.$Message.success(res.msg);\n          setTimeout(() => {\n            this.disabled = false;\n            this.$router.push({\n              path: this.$routeProStr + '/marketing/store_coupon_issue/index',\n            });\n          }, 1000);\n        })\n        .catch((err) => {\n          this.disabled = false;\n          this.$Message.error(err.msg);\n        });\n    },\n    // 使用有效期--时间段\n    dateChange(time) {\n      this.formData.start_use_time = time[0];\n      this.formData.end_use_time = time[1];\n    },\n    // 限时\n    timeChange(time) {\n      this.formData.start_time = time[0];\n      this.formData.end_time = time[1];\n    },\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.product_id) && res.set(arr.product_id, 1));\n    },\n    // 选择的商品\n    getProductId(productList) {\n      this.modals = false;\n      this.productList = this.unique(this.productList.concat(productList));\n      this.formData.product_id = '';\n      this.productList.forEach((value) => {\n        if (this.formData.product_id) {\n          this.formData.product_id += `,${value.product_id}`;\n        } else {\n          this.formData.product_id += `${value.product_id}`;\n        }\n      });\n    },\n    cancel() {\n      this.modals = false;\n    },\n    // 删除商品\n    remove(productId) {\n      for (let index = 0; index < this.productList.length; index++) {\n        if (this.productList[index].product_id == productId) {\n          this.productList.splice(index, 1);\n        }\n      }\n      this.formData.product_id = '';\n      this.productList.forEach((value) => {\n        if (this.formData.product_id) {\n          this.formData.product_id += `,${value.product_id}`;\n        } else {\n          this.formData.product_id += `${value.product_id}`;\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.info {\n  color: #888;\n  font-size: 12px;\n}\n.ivu-form >>> .ivu-form-item-label {\n  font-weight: 700;\n  font-size: 14px !important;\n}\n\n.ivu-input-wrapper {\n  width: 320px;\n}\n\n.ivu-radio-wrapper {\n  margin-right: 30px;\n  font-size: 14px !important;\n}\n\n.ivu-radio-wrapper >>> .ivu-radio {\n  margin-right: 10px;\n}\n\n.ivu-input-number {\n  width: 160px;\n}\n\n.ivu-date-picker {\n  width: 320px;\n}\n\n.ivu-icon-ios-camera-outline {\n  width: 58px;\n  height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.02);\n  line-height: 58px;\n  cursor: pointer;\n  vertical-align: middle;\n}\n\n.upload-list {\n  width: 58px;\n  height: 58px;\n  border: 1px dotted rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  margin-right: 15px;\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n  vertical-align: middle;\n}\n\n.upload-list img {\n  display: block;\n  width: 100%;\n  height: 100%;\n}\n\n.ivu-icon-ios-close-circle {\n  position: absolute;\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n}\n.tip {\n  color: #888;\n}\n</style>\n"]}]}