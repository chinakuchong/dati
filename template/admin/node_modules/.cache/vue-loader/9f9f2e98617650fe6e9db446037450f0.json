{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/system/codeGeneration/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/system/codeGeneration/index.vue","mtime":1689324015273},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNvZGVDcnVkIH0gZnJvbSAnQC9hcGkvc2V0dGluZyc7CmltcG9ydCBGb3VuZGF0aW9uRm9ybSBmcm9tICcuL2NvbXBvbmVudHMvRm91bmRhdGlvbkZvci52dWUnOwppbXBvcnQgVGFibGVGb3JtIGZyb20gJy4vY29tcG9uZW50cy9UYWJsZUZvcm0udnVlJzsKaW1wb3J0IFN0b3JhZ2VMb2MgZnJvbSAnLi9jb21wb25lbnRzL1N0b3JhZ2VMb2MudnVlJzsKaW1wb3J0IHsgZ2V0TWVudXNVbmlxdWUgfSBmcm9tICdAL2FwaS9zeXN0ZW1NZW51cyc7CmltcG9ydCB7IGZvcm1hdEZsYXR0ZW5pbmdSb3V0ZXMgfSBmcm9tICdAL2xpYnMvc3lzdGVtJzsKaW1wb3J0IHsgY3J1ZEZpbGVQYXRoIH0gZnJvbSAnQC9hcGkvc3lzdGVtQ29kZUdlbmVyYXRpb24nOwppbXBvcnQgeyBjcnVkRGV0IH0gZnJvbSAnQC9hcGkvc3lzdGVtQ29kZUdlbmVyYXRpb24nOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdzeXN0ZW1fY29kZV9nZW5lcmF0aW9uJywKICBjb21wb25lbnRzOiB7IEZvdW5kYXRpb25Gb3JtLCBTdG9yYWdlTG9jLCBUYWJsZUZvcm0gfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3VycmVudFRhYjogMCwKICAgICAgaGVhZGVyTGlzdDogWwogICAgICAgIHsgbGFiZWw6ICfln7rnoYDkv6Hmga8nLCB2YWx1ZTogJ2ZvdW5kYXRpb24nIH0sCiAgICAgICAgeyBsYWJlbDogJ+Wtl+autemFjee9ricsIHZhbHVlOiAndGFibGUnIH0sCiAgICAgICAgeyBsYWJlbDogJ+WtmOaUvuS9jee9ricsIHZhbHVlOiAnc3RvcmFnZScgfSwKICAgICAgXSwKICAgICAgZm9ybUl0ZW06IHsKICAgICAgICBmb3VuZGF0aW9uOiB7CiAgICAgICAgICBwaWQ6ICcnLAogICAgICAgICAgdGFibGVOYW1lOiAnJywKICAgICAgICAgIG1vZGVsTmFtZTogJycsCiAgICAgICAgICBpc1RhYmxlOiAxLAogICAgICAgICAgbWVudU5hbWU6ICcnLAogICAgICAgIH0sCiAgICAgICAgdGFibGVGb3JtOiB7fSwKICAgICAgICBzdG9yYWdlOiB7fSwKICAgICAgICBmaWVsZDoge30sCiAgICAgICAgZm9ybUl0ZW06IHt9LAogICAgICB9LAogICAgICBydWxlVmFsaWRhdGU6IHsKICAgICAgICBmb3VuZGF0aW9uOiB7fSwKICAgICAgfSwKICAgICAgdGFibGVGaWVsZDogW10sCiAgICAgIHJvd0xpc3Q6IFtdLAogICAgICByZXFsb2FkaW5nOiBmYWxzZSwKICAgICAgaWQ6ICcnLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuaWQpIHsKICAgICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOwogICAgICB0aGlzLmdldERldGFpbCh0aGlzLiRyb3V0ZS5xdWVyeS5pZCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7fSwKICBtZXRob2RzOiB7CiAgICBnZXREZXRhaWwoaWQpIHsKICAgICAgY3J1ZERldChpZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YS5jcnVkSW5mby5maWVsZDsKICAgICAgICB0aGlzLmZvcm1JdGVtLmZvdW5kYXRpb24ucGlkID0gTnVtYmVyKGRhdGEucGlkKTsKICAgICAgICB0aGlzLmZvcm1JdGVtLmZvdW5kYXRpb24udGFibGVOYW1lID0gZGF0YS50YWJsZU5hbWU7CiAgICAgICAgdGhpcy5mb3JtSXRlbS5mb3VuZGF0aW9uLm1vZGVsTmFtZSA9IGRhdGEubW9kZWxOYW1lOwogICAgICAgIHRoaXMuZm9ybUl0ZW0uZm91bmRhdGlvbi5tZW51TmFtZSA9IGRhdGEubWVudU5hbWU7CiAgICAgICAgdGhpcy4kcmVmcy5UYWJsZUZvcm0udGFibGVGaWVsZCA9IGRhdGEudGFibGVGaWVsZDsKICAgICAgICB0aGlzLmZvcm1JdGVtLnN0b3JhZ2UgPSBkYXRhLmZpbGVQYXRoOwogICAgICAgIGxldCBpID0gMDsKICAgICAgICBkYXRhLnRhYmxlRmllbGQubWFwKChlKSA9PiB7CiAgICAgICAgICBpZiAoZS5maWVsZCA9PT0gJ2NyZWF0ZV90aW1lJyB8fCBlLmZpZWxkID09PSAndXBkYXRlX3RpbWUnKSB7CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgaWYgKGkgPT0gMikgdGhpcy4kcmVmcy5UYWJsZUZvcm0uaXNDcmVhdGUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGUuZmllbGQgPT09ICdkZWxldGVfdGltZScpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5UYWJsZUZvcm0uaXNEZWxldGUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzdG9yYWdlRGF0YShkYXRhKSB7CiAgICAgIHRoaXMuZm9ybUl0ZW0uc3RvcmFnZSA9IGRhdGE7CiAgICB9LAogICAgYmVmb3JlVGFiKCkgewogICAgICB0aGlzLmN1cnJlbnRUYWItLTsKICAgIH0sCiAgICBhZGRSb3coKSB7CiAgICAgIGxldCBmb3VuZGF0aW9uID0gdGhpcy5mb3JtSXRlbS5mb3VuZGF0aW9uOwogICAgICBpZiAoIWZvdW5kYXRpb24udGFibGVOYW1lKSByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfor7flhYjloavlhpnooajlkI0nKTsKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgbWVudU5hbWU6IGZvdW5kYXRpb24ubWVudU5hbWUsCiAgICAgICAgdGFibGVOYW1lOiBmb3VuZGF0aW9uLnRhYmxlTmFtZSwKICAgICAgICAvLyBpc1RhYmxlOiBmb3VuZGF0aW9uLmlzVGFibGUsCiAgICAgICAgZnJvbUZpZWxkOiBbXSwKICAgICAgICBjb2x1bW5GaWVsZDogW10sCiAgICAgIH07CiAgICAgIGNydWRGaWxlUGF0aChkYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMuVGFibGVGb3JtLnRhYmxlRmllbGQgPSByZXMuZGF0YS50YWJsZUZpZWxkLmxlbmd0aCA/IHJlcy5kYXRhLnRhYmxlRmllbGQgOiBbXTsKICAgICAgICAgIHRoaXMuZm9ybUl0ZW0uc3RvcmFnZSA9IHJlcy5kYXRhLm1ha2VQYXRoOwogICAgICAgICAgaWYgKCFyZXMuZGF0YS50YWJsZUZpZWxkLmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLlRhYmxlRm9ybS50YWJsZUZpZWxkLnB1c2goewogICAgICAgICAgICAgIGZpZWxkOiAnaWQnLAogICAgICAgICAgICAgIGZpZWxkX3R5cGU6ICdpbnQnLAogICAgICAgICAgICAgIGRlZmF1bHQ6ICcnLAogICAgICAgICAgICAgIGNvbW1lbnQ6ICfoh6rlop5JRCcsCiAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICAgICAgICAgIGlzX3RhYmxlOiB0cnVlLAogICAgICAgICAgICAgIHRhYmxlX25hbWU6ICcnLAogICAgICAgICAgICAgIGxpbWl0OiAnMTAnLAogICAgICAgICAgICAgIHByaW1hcnlLZXk6IDEsCiAgICAgICAgICAgICAgZnJvbV90eXBlOiAnMCcsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5jdXJyZW50VGFiKys7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycikgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKGVyci5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIG5leHRUYWIoKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRUYWIgPT0gMCkgewogICAgICAgIC8vIGlmICghdGhpcy5mb3JtSXRlbS5mb3VuZGF0aW9uLnBpZCkgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup6I+c5Y2VJyk7CiAgICAgICAgaWYgKCF0aGlzLmZvcm1JdGVtLmZvdW5kYXRpb24udGFibGVOYW1lKSByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXooajlkI0nKTsKICAgICAgICBpZiAoIXRoaXMuZm9ybUl0ZW0uZm91bmRhdGlvbi5tb2RlbE5hbWUpIHJldHVybiB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+i+k+WFpeaooeWdl+WQjScpOwogICAgICAgIGlmICghdGhpcy5mb3JtSXRlbS5mb3VuZGF0aW9uLmlzVGFibGUpIHsKICAgICAgICAgIGlmICghdGhpcy4kcmVmcy5UYWJsZUZvcm0udGFibGVGaWVsZC5sZW5ndGgpIHJldHVybiB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+WFiOa3u+WKoOihqOaVsOaNricpOwogICAgICAgICAgaWYgKHRoaXMuJHJlZnMuVGFibGVGb3JtLnRhYmxlRmllbGQubGVuZ3RoKQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuJHJlZnMuVGFibGVGb3JtLnRhYmxlRmllbGQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBjb25zdCBlbCA9IHRoaXMuJHJlZnMuVGFibGVGb3JtLnRhYmxlRmllbGRbaV07CiAgICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgWydhZGRTb2Z0RGVsZXRlJywgJ2FkZFRpbWVzdGFtcHMnXS5pbmRleE9mKGVsLmZpZWxkX3R5cGUpID09PSAtMSAmJgogICAgICAgICAgICAgICAgKCFlbC5maWVsZCB8fCAhZWwuZmllbGRfdHlwZSB8fCAhZWwuY29tbWVudCkKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+WujOWWhHNxbOihqOaVsOaNricpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy5pZCkgewogICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFRhYisrOwogICAgICAgIH0KICAgICAgICB0aGlzLmFkZFJvdygpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuY3VycmVudFRhYiA9PSAyKSB7CiAgICAgICAgaWYgKHRoaXMucmVxbG9hZGluZykgcmV0dXJuOwogICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgLi4udGhpcy5mb3JtSXRlbS5mb3VuZGF0aW9uLAogICAgICAgICAgZmlsZVBhdGg6IHRoaXMuZm9ybUl0ZW0uc3RvcmFnZSwKICAgICAgICAgIHRhYmxlRmllbGQ6IHRoaXMuJHJlZnMuVGFibGVGb3JtLnRhYmxlRmllbGQsCiAgICAgICAgICBkZWxldGVGaWVsZDogdGhpcy5pZCA/IHRoaXMuJHJlZnMuVGFibGVGb3JtLmRlbGV0ZUZpZWxkIDogW10sCiAgICAgICAgfTsKICAgICAgICBpZiAodGhpcy5pZCkgewogICAgICAgICAgZGF0YS5pZCA9IHRoaXMuaWQ7CiAgICAgICAgICB0aGlzLiRNb2RhbC5jb25maXJtKHsKICAgICAgICAgICAgdGl0bGU6ICfnlJ/miJDmj5DphpInLAogICAgICAgICAgICBjb250ZW50OgogICAgICAgICAgICAgICfph43mlrDmj5DkuqTkvJrph43mlrDnlJ/miJDmlofku7YsPHNwYW4gc3R5bGU9ImNvbG9yOiByZWQiPuWIoOmZpOOAgeaWsOWinuOAgeS/ruaUuTwvc3Bhbj7nmoTlrZfmrrXlsIbnm7TmjqXku47mlLnooajkuK3ov5vooYzkv67mlLks6K+35oWO6YeN5pON5L2c77yB77yBJywKICAgICAgICAgICAgbG9hZGluZzogdHJ1ZSwKICAgICAgICAgICAgb25PazogKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuc2F2ZUNvZGVDcnVkKGRhdGEsIHRydWUpOwogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJE1vZGFsLmNvbmZpcm0oewogICAgICAgICAgICB0aXRsZTogJ+eUn+aIkOaPkOmGkicsCiAgICAgICAgICAgIGNvbnRlbnQ6CiAgICAgICAgICAgICAgJ+eUn+aIkOWQjuacrOWcsOW8gOWPkeiwg+ivleS8muebtOaOpeWKoOi9veeUn+aIkOeahHZ1Zemhtemdou+8m+WmguaenOaYr+S4iue6v+WQjui/m+ihjOeUn+aIkCzlj6/ku6Xov5vooYzmtY/op4jvvIzku6PnoIHnlJ/miJDliJfooajkuK3nmoTkv67mlLnmlofku7blsIbkuI3nlJ/mlYjjgILpnIDopoHph43mlrDmiZPljIXkuIrnur/vvIEnLAogICAgICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgICAgICBvbk9rOiAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5zYXZlQ29kZUNydWQoZGF0YSwgdHJ1ZSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRoaXMuY3VycmVudFRhYiA8IDMpIHRoaXMuY3VycmVudFRhYisrOwogICAgICB9CiAgICB9LAogICAgc2F2ZUNvZGVDcnVkKGRhdGEsIGxvYWRpbmcpIHsKICAgICAgdGhpcy5yZXFsb2FkaW5nID0gdHJ1ZTsKICAgICAgY29kZUNydWQoZGF0YSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICB0aGlzLmdldE1lbnVzVW5pcXVlKCk7CiAgICAgICAgICB0aGlzLnJlcWxvYWRpbmcgPSBmYWxzZTsKCiAgICAgICAgICBpZiAobG9hZGluZykgewogICAgICAgICAgICB0aGlzLiRNb2RhbC5yZW1vdmUoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ3N5c3RlbV9jb2RlX2dlbmVyYXRpb25fbGlzdCcsCiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICB0aGlzLnJlcWxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0TWVudXNVbmlxdWUoKSB7CiAgICAgIGdldE1lbnVzVW5pcXVlKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VzZXJJbmZvL3VuaXF1ZUF1dGgnLCBkYXRhLnVuaXF1ZUF1dGgpOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnbWVudXMvZ2V0bWVudXNOYXYnLCBkYXRhLm1lbnVzKTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncm91dGVzTGlzdC9zZXRSb3V0ZXNMaXN0JywgZGF0YS5tZW51cyk7CiAgICAgICAgbGV0IGFyciA9IGZvcm1hdEZsYXR0ZW5pbmdSb3V0ZXModGhpcy4kcm91dGVyLm9wdGlvbnMucm91dGVzKTsKICAgICAgICB0aGlzLmZvcm1hdFR3b1N0YWdlUm91dGVzKGFycik7CiAgICAgICAgbGV0IHJvdXRlcyA9IGZvcm1hdEZsYXR0ZW5pbmdSb3V0ZXMoZGF0YS5tZW51cyk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdtZW51cy9zZXRPbmVMdlJvdXRlJywgcm91dGVzKTsKICAgICAgICB0aGlzLmJ1cy4kZW1pdCgncm91dGVzTGlzdENoYW5nZScpOwogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXRUd29TdGFnZVJvdXRlcyhhcnIpIHsKICAgICAgaWYgKGFyci5sZW5ndGggPD0gMCkgcmV0dXJuIGZhbHNlOwogICAgICBjb25zdCBuZXdBcnIgPSBbXTsKICAgICAgY29uc3QgY2FjaGVMaXN0ID0gW107CiAgICAgIGFyci5mb3JFYWNoKCh2KSA9PiB7CiAgICAgICAgaWYgKHYgJiYgdi5tZXRhICYmIHYubWV0YS5rZWVwQWxpdmUpIHsKICAgICAgICAgIG5ld0Fyci5wdXNoKHsgLi4udiB9KTsKICAgICAgICAgIGNhY2hlTGlzdC5wdXNoKHYubmFtZSk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgna2VlcEFsaXZlTmFtZXMvc2V0Q2FjaGVLZWVwQWxpdmUnLCBjYWNoZUxpc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBuZXdBcnI7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/system/codeGeneration","sourcesContent":["<template>\n  <div class=\"code-wapper\">\n    <div class=\"i-layout-page-header header-title\">\n      <div class=\"fl_header\">\n        <router-link :to=\"{ path: $routeProStr + '/system/code_generation_list' }\"\n          ><Button icon=\"ios-arrow-back\" size=\"small\" type=\"text\">返回</Button></router-link\n        >\n        <Divider type=\"vertical\" />\n        <span class=\"ivu-page-header-title mr20\" style=\"padding: 0\">添加功能</span>\n      </div>\n    </div>\n    <div class=\"message\">\n      <Card :bordered=\"false\" dis-hover class=\"\">\n        <Steps :current=\"currentTab\">\n          <Step :title=\"item.label\" v-for=\"(item, index) in headerList\" :key=\"index\"></Step>\n        </Steps>\n      </Card>\n    </div>\n    <div class=\"pt10 tab-1\" v-show=\"currentTab == '0'\">\n      <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n        <FoundationForm\n          ref=\"Foundation\"\n          :foundation=\"formItem.foundation\"\n          :tableField=\"tableField\"\n          @storageData=\"storageData\"\n        />\n      </Card>\n    </div>\n    <div class=\"pt10\" v-show=\"currentTab == '1'\">\n      <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n        <TableForm\n          ref=\"TableForm\"\n          :foundation=\"formItem.foundation\"\n          :tableField=\"tableField\"\n          :id=\"id\"\n          @storageData=\"storageData\"\n        />\n      </Card>\n    </div>\n    <div class=\"pt10\" v-show=\"currentTab == '2'\">\n      <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n        <StorageLoc :storage=\"formItem.storage\" />\n      </Card>\n    </div>\n    <Card :bordered=\"false\" class=\"btn\" dis-hover>\n      <Button class=\"mr20\" @click=\"beforeTab\">上一步</Button>\n      <Button type=\"primary\" @click=\"nextTab\">{{ currentTab == 2 ? '提交' : '下一步' }}</Button>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { codeCrud } from '@/api/setting';\nimport FoundationForm from './components/FoundationFor.vue';\nimport TableForm from './components/TableForm.vue';\nimport StorageLoc from './components/StorageLoc.vue';\nimport { getMenusUnique } from '@/api/systemMenus';\nimport { formatFlatteningRoutes } from '@/libs/system';\nimport { crudFilePath } from '@/api/systemCodeGeneration';\nimport { crudDet } from '@/api/systemCodeGeneration';\n\nexport default {\n  name: 'system_code_generation',\n  components: { FoundationForm, StorageLoc, TableForm },\n  data() {\n    return {\n      currentTab: 0,\n      headerList: [\n        { label: '基础信息', value: 'foundation' },\n        { label: '字段配置', value: 'table' },\n        { label: '存放位置', value: 'storage' },\n      ],\n      formItem: {\n        foundation: {\n          pid: '',\n          tableName: '',\n          modelName: '',\n          isTable: 1,\n          menuName: '',\n        },\n        tableForm: {},\n        storage: {},\n        field: {},\n        formItem: {},\n      },\n      ruleValidate: {\n        foundation: {},\n      },\n      tableField: [],\n      rowList: [],\n      reqloading: false,\n      id: '',\n    };\n  },\n  created() {\n    if (this.$route.query.id) {\n      this.id = this.$route.query.id;\n      this.getDetail(this.$route.query.id);\n    }\n  },\n  mounted: function () {},\n  methods: {\n    getDetail(id) {\n      crudDet(id).then((res) => {\n        let data = res.data.crudInfo.field;\n        this.formItem.foundation.pid = Number(data.pid);\n        this.formItem.foundation.tableName = data.tableName;\n        this.formItem.foundation.modelName = data.modelName;\n        this.formItem.foundation.menuName = data.menuName;\n        this.$refs.TableForm.tableField = data.tableField;\n        this.formItem.storage = data.filePath;\n        let i = 0;\n        data.tableField.map((e) => {\n          if (e.field === 'create_time' || e.field === 'update_time') {\n            i++;\n            if (i == 2) this.$refs.TableForm.isCreate = true;\n          }\n          if (e.field === 'delete_time') {\n            this.$refs.TableForm.isDelete = true;\n          }\n        });\n      });\n    },\n    storageData(data) {\n      this.formItem.storage = data;\n    },\n    beforeTab() {\n      this.currentTab--;\n    },\n    addRow() {\n      let foundation = this.formItem.foundation;\n      if (!foundation.tableName) return this.$Message.warning('请先填写表名');\n      let data = {\n        menuName: foundation.menuName,\n        tableName: foundation.tableName,\n        // isTable: foundation.isTable,\n        fromField: [],\n        columnField: [],\n      };\n      crudFilePath(data)\n        .then((res) => {\n          this.$refs.TableForm.tableField = res.data.tableField.length ? res.data.tableField : [];\n          this.formItem.storage = res.data.makePath;\n          if (!res.data.tableField.length) {\n            this.$refs.TableForm.tableField.push({\n              field: 'id',\n              field_type: 'int',\n              default: '',\n              comment: '自增ID',\n              required: false,\n              is_table: true,\n              table_name: '',\n              limit: '10',\n              primaryKey: 1,\n              from_type: '0',\n            });\n          }\n          this.currentTab++;\n        })\n        .catch((err) => {\n          this.$Message.warning(err.msg);\n        });\n    },\n    nextTab() {\n      if (this.currentTab == 0) {\n        // if (!this.formItem.foundation.pid) return this.$Message.warning('请选择菜单');\n        if (!this.formItem.foundation.tableName) return this.$Message.warning('请输入表名');\n        if (!this.formItem.foundation.modelName) return this.$Message.warning('请输入模块名');\n        if (!this.formItem.foundation.isTable) {\n          if (!this.$refs.TableForm.tableField.length) return this.$Message.warning('请先添加表数据');\n          if (this.$refs.TableForm.tableField.length)\n            for (let i = 0; i < this.$refs.TableForm.tableField.length; i++) {\n              const el = this.$refs.TableForm.tableField[i];\n              if (\n                ['addSoftDelete', 'addTimestamps'].indexOf(el.field_type) === -1 &&\n                (!el.field || !el.field_type || !el.comment)\n              ) {\n                return this.$Message.warning('请完善sql表数据');\n              }\n            }\n        }\n        if (this.id) {\n          return this.currentTab++;\n        }\n        this.addRow();\n      } else if (this.currentTab == 2) {\n        if (this.reqloading) return;\n        let data = {\n          ...this.formItem.foundation,\n          filePath: this.formItem.storage,\n          tableField: this.$refs.TableForm.tableField,\n          deleteField: this.id ? this.$refs.TableForm.deleteField : [],\n        };\n        if (this.id) {\n          data.id = this.id;\n          this.$Modal.confirm({\n            title: '生成提醒',\n            content:\n              '重新提交会重新生成文件,<span style=\"color: red\">删除、新增、修改</span>的字段将直接从改表中进行修改,请慎重操作！！',\n            loading: true,\n            onOk: () => {\n              this.saveCodeCrud(data, true);\n            },\n          });\n        } else {\n          this.$Modal.confirm({\n            title: '生成提醒',\n            content:\n              '生成后本地开发调试会直接加载生成的vue页面；如果是上线后进行生成,可以进行浏览，代码生成列表中的修改文件将不生效。需要重新打包上线！',\n            loading: true,\n            onOk: () => {\n              this.saveCodeCrud(data, true);\n            },\n          });\n        }\n      } else {\n        if (this.currentTab < 3) this.currentTab++;\n      }\n    },\n    saveCodeCrud(data, loading) {\n      this.reqloading = true;\n      codeCrud(data)\n        .then((res) => {\n          this.$Message.success(res.msg);\n          this.getMenusUnique();\n          this.reqloading = false;\n\n          if (loading) {\n            this.$Modal.remove();\n          }\n          this.$router.push({\n            name: 'system_code_generation_list',\n          });\n        })\n        .catch((err) => {\n          this.reqloading = false;\n          this.$Message.error(err.msg);\n        });\n    },\n    getMenusUnique() {\n      getMenusUnique().then((res) => {\n        let data = res.data;\n        this.$store.commit('userInfo/uniqueAuth', data.uniqueAuth);\n        this.$store.commit('menus/getmenusNav', data.menus);\n        this.$store.dispatch('routesList/setRoutesList', data.menus);\n        let arr = formatFlatteningRoutes(this.$router.options.routes);\n        this.formatTwoStageRoutes(arr);\n        let routes = formatFlatteningRoutes(data.menus);\n        this.$store.commit('menus/setOneLvRoute', routes);\n        this.bus.$emit('routesListChange');\n      });\n    },\n    formatTwoStageRoutes(arr) {\n      if (arr.length <= 0) return false;\n      const newArr = [];\n      const cacheList = [];\n      arr.forEach((v) => {\n        if (v && v.meta && v.meta.keepAlive) {\n          newArr.push({ ...v });\n          cacheList.push(v.name);\n          this.$store.dispatch('keepAliveNames/setCacheKeepAlive', cacheList);\n        }\n      });\n      return newArr;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.ivu-steps .ivu-steps-title {\n  line-height: 26px;\n}\n.code-wapper {\n  min-height: 800px;\n  padding-bottom: 90px;\n}\n.btn {\n  position: fixed;\n  bottom: 10px;\n  height: 80px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 88.7%;\n  background-color: rgba(255, 255, 255, 0.6);\n  backdrop-filter: blur(4px);\n}\n.tab-1 {\n  padding-bottom: 100px;\n}\n/deep/ .el-input__inner {\n  padding-left: 7px;\n}\n/deep/ .ivu-form-item {\n  margin-bottom: 17px;\n}\n/deep/ .ivu-form-item-error-tip {\n  padding-top: 2px;\n}\n/deep/ .tip {\n  color: #bbb;\n  line-height: 16px;\n  padding-top: 5px;\n}\n</style>\n"]}]}