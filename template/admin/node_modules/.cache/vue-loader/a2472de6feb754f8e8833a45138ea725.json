{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/kefu/pc/components/userLabel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/kefu/pc/components/userLabel.vue","mtime":1689324015217},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHVzZXJMYWJlbCwgdXNlckxhYmVsUHV0IH0gZnJvbSAnQC9hcGkva2VmdSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAndXNlckxhYmVsJywKICBwcm9wczogewogICAgdWlkOiB7CiAgICAgIHR5cGU6IFN0cmluZyB8IE51bWJlciwKICAgICAgZGVmYXVsdDogJycsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxhYmVsTGlzdDogW10sCiAgICAgIGFjdGl2ZUlkczogW10sCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0TGlzdCgpIHsKICAgICAgdXNlckxhYmVsKHRoaXMudWlkKS50aGVuKChyZXMpID0+IHsKICAgICAgICByZXMuZGF0YS5tYXAoKGVsKSA9PiB7CiAgICAgICAgICBlbC5sYWJlbC5tYXAoKGxhYmVsKSA9PiB7CiAgICAgICAgICAgIGlmIChsYWJlbC5kaXNhYmxlZCkgewogICAgICAgICAgICAgIHRoaXMuYWN0aXZlSWRzLnB1c2gobGFiZWwuaWQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmxhYmVsTGlzdCA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBzZWxlY3RMYWJlbChsYWJlbCkgewogICAgICBpZiAobGFiZWwuZGlzYWJsZWQpIHsKICAgICAgICBsZXQgaW5kZXggPSB0aGlzLmFjdGl2ZUlkcy5pbmRleE9mKGxhYmVsLmlkKTsKICAgICAgICB0aGlzLmFjdGl2ZUlkcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIGxhYmVsLmRpc2FibGVkID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hY3RpdmVJZHMucHVzaChsYWJlbC5pZCk7CiAgICAgICAgbGFiZWwuZGlzYWJsZWQgPSB0cnVlOwogICAgICB9CiAgICB9LAogICAgLy8g56Gu5a6aCiAgICBzdWJCdG4oKSB7CiAgICAgIGxldCB1bkxhYmVyaWRzID0gW107CiAgICAgIHRoaXMubGFiZWxMaXN0Lm1hcCgoaXRlbSkgPT4gewogICAgICAgIGl0ZW0ubGFiZWwubWFwKChpKSA9PiB7CiAgICAgICAgICBpZiAoaS5kaXNhYmxlZCA9PSBmYWxzZSkgewogICAgICAgICAgICB1bkxhYmVyaWRzLnB1c2goaS5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICB1c2VyTGFiZWxQdXQodGhpcy51aWQsIHsKICAgICAgICBsYWJlbF9pZHM6IHRoaXMuYWN0aXZlSWRzLAogICAgICAgIHVuX2xhYmVsX2lkczogdW5MYWJlcmlkcywKICAgICAgfSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICB0aGlzLiRlbWl0KCdlZGl0TGFiZWwnKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoZXJyb3IubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["userLabel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userLabel.vue","sourceRoot":"src/pages/kefu/pc/components","sourcesContent":["<template>\n  <div class=\"label-wrapper\">\n    <div class=\"label-box\" v-for=\"(item, index) in labelList\" :key=\"index\">\n      <div class=\"title\">{{ item.name }}</div>\n      <div class=\"list\">\n        <div\n          class=\"label-item\"\n          :class=\"{ on: label.disabled }\"\n          v-for=\"(label, j) in item.label\"\n          :key=\"j\"\n          @click=\"selectLabel(label)\"\n        >\n          {{ label.label_name }}\n        </div>\n      </div>\n    </div>\n    <div class=\"footer\">\n      <Button type=\"primary\" class=\"btns\" @click=\"subBtn\">确定</Button>\n      <Button type=\"primary\" class=\"btns\" ghost @click=\"cancel\">取消</Button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { userLabel, userLabelPut } from '@/api/kefu';\nexport default {\n  name: 'userLabel',\n  props: {\n    uid: {\n      type: String | Number,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      labelList: [],\n      activeIds: [],\n    };\n  },\n  mounted() {\n    this.getList();\n  },\n  methods: {\n    getList() {\n      userLabel(this.uid).then((res) => {\n        res.data.map((el) => {\n          el.label.map((label) => {\n            if (label.disabled) {\n              this.activeIds.push(label.id);\n            }\n          });\n        });\n        this.labelList = res.data;\n      });\n    },\n    selectLabel(label) {\n      if (label.disabled) {\n        let index = this.activeIds.indexOf(label.id);\n        this.activeIds.splice(index, 1);\n        label.disabled = false;\n      } else {\n        this.activeIds.push(label.id);\n        label.disabled = true;\n      }\n    },\n    // 确定\n    subBtn() {\n      let unLaberids = [];\n      this.labelList.map((item) => {\n        item.label.map((i) => {\n          if (i.disabled == false) {\n            unLaberids.push(i.id);\n          }\n        });\n      });\n      userLabelPut(this.uid, {\n        label_ids: this.activeIds,\n        un_label_ids: unLaberids,\n      })\n        .then((res) => {\n          this.$Message.success(res.msg);\n          this.$emit('editLabel');\n        })\n        .catch((error) => {\n          this.$Message.error(error.msg);\n        });\n    },\n    cancel() {\n      this.$emit('close');\n    },\n  },\n};\n</script>\n\n<style lang=\"stylus\" scoped>\n.label-wrapper\n    .list\n        display flex\n        flex-wrap wrap\n        .label-item\n            margin 10px 8px 10px 0\n            padding: 3px 8px;\n            background #EEEEEE\n            color #333333\n            border-radius 2px\n            cursor pointer\n            font-size 12px\n            &.on\n                color #fff\n                background #1890FF\n    .footer\n        display flex\n        justify-content flex-end\n        margin-top 40px\n        button\n            margin-left 10px\n.btn\n    width 60px\n    height 24px\n.title\n    font-size 13px\n</style>\n"]}]}