{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/components/sendCoupons/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/components/sendCoupons/index.vue","mtime":1689324015169},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNvdXBvbkFwaSB9IGZyb20gJ0AvYXBpL3VzZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3NlbmQnLAogIHByb3BzOiB7CiAgICB1c2VySWRzOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vZGFsczogZmFsc2UsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBjb3Vwb25MaXN0OiBbXSwKICAgICAgY29sdW1uczogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5LyY5oOg5Yi45ZCN56ewJywKICAgICAgICAgIGtleTogJ3RpdGxlJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxMDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+S8mOaDoOWIuOmdouWAvCcsCiAgICAgICAgICBrZXk6ICdjb3Vwb25fcHJpY2UnLAogICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgbWluV2lkdGg6IDgwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkvJjmg6DliLjmnIDkvY7mtojotLknLAogICAgICAgICAga2V5OiAndXNlX21pbl9wcmljZScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBtaW5XaWR0aDogMTUwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkvJjmg6DliLjmnInmlYjmnJ/pmZAnLAogICAgICAgICAgc2xvdDogJ2NvdXBvbl90aW1lJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIG1pbldpZHRoOiAxMjAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+aTjeS9nCcsCiAgICAgICAgICBzbG90OiAnYWN0aW9uJywKICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgIHdpZHRoOiAxMjAsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgcGFnZTogewogICAgICAgIHBhZ2U6IDEsIC8vIOW9k+WJjemhtQogICAgICAgIGxpbWl0OiAxNSwKICAgICAgICBjb3Vwb25fdGl0bGU6ICcnLAogICAgICAgIHJlY2VpdmVfdHlwZTogMywKICAgICAgfSwKICAgICAgdG90YWw6IDAsIC8vIOaAu+adoeaVsAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOS8mOaDoOWIuOWIl+ihqAogICAgZ2V0TGlzdChpZCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBjb3Vwb25BcGkodGhpcy5wYWdlKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgbGV0IGRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgICAgdGhpcy5jb3Vwb25MaXN0ID0gZGF0YS5saXN0OwogICAgICAgICAgICB0aGlzLnRvdGFsID0gZGF0YS5jb3VudDsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g6KGo5qC85pCc57SiCiAgICB1c2VyU2VhcmNocygpIHsKICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICB9LAogICAgcGFnZUNoYW5nZShpbmRleCkgewogICAgICB0aGlzLnBhZ2UucGFnZSA9IGluZGV4OwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgICAvLyDlj5HpgIEKICAgIHNlbmRHcmFudChyb3csIHRpdCwgbnVtKSB7CiAgICAgIGxldCBkZWxmcm9tRGF0YSA9IHsKICAgICAgICB0aXRsZTogdGl0LAogICAgICAgIG51bTogbnVtLAogICAgICAgIHVybDogYG1hcmtldGluZy9jb3Vwb24vdXNlci9ncmFudGAsCiAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgaWRzOiB7CiAgICAgICAgICBpZDogcm93LmlkLAogICAgICAgICAgdWlkOiB0aGlzLnVzZXJJZHMsCiAgICAgICAgfSwKICAgICAgfTsKICAgICAgdGhpcy4kbW9kYWxTdXJlKGRlbGZyb21EYXRhKQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/sendCoupons","sourcesContent":["<template>\n  <div>\n    <Modal\n      v-model=\"modals\"\n      :z-index=\"100\"\n      scrollable\n      footer-hide\n      closable\n      title=\"发送优惠券\"\n      :mask-closable=\"false\"\n      width=\"900\"\n    >\n      <div class=\"acea-row\">\n        <span class=\"sp\">优惠券名称：</span\n        ><Input\n          v-model=\"page.coupon_title\"\n          search\n          enter-button\n          placeholder=\"请输入优惠券名称\"\n          style=\"width: 60%\"\n          @on-search=\"userSearchs\"\n        />\n      </div>\n      <Table\n        :columns=\"columns\"\n        :data=\"couponList\"\n        ref=\"table\"\n        class=\"mt25\"\n        :loading=\"loading\"\n        highlight-row\n        no-userFrom-text=\"暂无数据\"\n        no-filtered-userFrom-text=\"暂无筛选结果\"\n      >\n        <template slot-scope=\"{ row, index }\" slot=\"coupon_time\">\n          <div v-if=\"row.coupon_time\">{{ row.coupon_time }}</div>\n          <div v-else>{{ row.use_time }}</div>\n        </template>\n        <template slot-scope=\"{ row, index }\" slot=\"action\">\n          <a @click=\"sendGrant(row, '发送优惠券', index)\">发送</a>\n        </template>\n      </Table>\n      <div class=\"acea-row row-right page\">\n        <Page :total=\"total\" show-elevator show-total @on-change=\"pageChange\" :page-size=\"page.limit\" />\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { couponApi } from '@/api/user';\nexport default {\n  name: 'send',\n  props: {\n    userIds: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      modals: false,\n      loading: false,\n      couponList: [],\n      columns: [\n        {\n          title: '优惠券名称',\n          key: 'title',\n          align: 'center',\n          minWidth: 100,\n        },\n        {\n          title: '优惠券面值',\n          key: 'coupon_price',\n          align: 'center',\n          minWidth: 80,\n        },\n        {\n          title: '优惠券最低消费',\n          key: 'use_min_price',\n          align: 'center',\n          minWidth: 150,\n        },\n        {\n          title: '优惠券有效期限',\n          slot: 'coupon_time',\n          align: 'center',\n          minWidth: 120,\n        },\n        {\n          title: '操作',\n          slot: 'action',\n          align: 'center',\n          width: 120,\n        },\n      ],\n      page: {\n        page: 1, // 当前页\n        limit: 15,\n        coupon_title: '',\n        receive_type: 3,\n      },\n      total: 0, // 总条数\n    };\n  },\n  methods: {\n    // 优惠券列表\n    getList(id) {\n      this.loading = true;\n      couponApi(this.page)\n        .then(async (res) => {\n          if (res.status === 200) {\n            let data = res.data;\n            this.couponList = data.list;\n            this.total = data.count;\n            this.loading = false;\n          } else {\n            this.loading = false;\n            this.$Message.error(res.msg);\n          }\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    // 表格搜索\n    userSearchs() {\n      this.getList();\n    },\n    pageChange(index) {\n      this.page.page = index;\n      this.getList();\n    },\n    // 发送\n    sendGrant(row, tit, num) {\n      let delfromData = {\n        title: tit,\n        num: num,\n        url: `marketing/coupon/user/grant`,\n        method: 'post',\n        ids: {\n          id: row.id,\n          uid: this.userIds,\n        },\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$Message.success(res.msg);\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.sp {\n  line-height: 32px;\n}\n</style>\n"]}]}