{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/storeCouponUser/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/marketing/storeCouponUser/index.vue","mtime":1689324015230},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZXJMaXN0QXBpIH0gZnJvbSAnQC9hcGkvbWFya2V0aW5nJzsKaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvdmFsaWRhdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3N0b3JlQ291cG9uVXNlcicsCiAgZmlsdGVyczogewogICAgZm9ybWF0RGF0ZSh0aW1lKSB7CiAgICAgIGlmICh0aW1lICE9PSAwKSB7CiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lICogMTAwMCk7CiAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW0nKTsKICAgICAgfQogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb2x1bW5zMTogWwogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAnSUQnLAogICAgICAgICAga2V5OiAnaWQnLAogICAgICAgICAgd2lkdGg6IDgwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfkvJjmg6DliLjlkI3np7AnLAogICAgICAgICAga2V5OiAnY291cG9uX3RpdGxlJywKICAgICAgICAgIG1pbldpZHRoOiAxNTAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+mihuWPluS6uicsCiAgICAgICAgICBrZXk6ICduaWNrbmFtZScsCiAgICAgICAgICBtaW5XaWR0aDogMTMwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfpnaLlgLwnLAogICAgICAgICAga2V5OiAnY291cG9uX3ByaWNlJywKICAgICAgICAgIG1pbldpZHRoOiAxMDAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+acgOS9jua2iOi0ueminScsCiAgICAgICAgICBrZXk6ICd1c2VfbWluX3ByaWNlJywKICAgICAgICAgIG1pbldpZHRoOiAxMjAsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJ+W8gOWni+S9v+eUqOaXtumXtCcsCiAgICAgICAgICBzbG90OiAnYWRkX3RpbWUnLAogICAgICAgICAgbWluV2lkdGg6IDE1MCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn57uT5p2f5L2/55So5pe26Ze0JywKICAgICAgICAgIHNsb3Q6ICdlbmRfdGltZScsCiAgICAgICAgICBtaW5XaWR0aDogMTUwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfojrflj5bmlrnlvI8nLAogICAgICAgICAga2V5OiAndHlwZScsCiAgICAgICAgICBtaW5XaWR0aDogMTUwLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmmK/lkKblj6/nlKgnLAogICAgICAgICAgc2xvdDogJ2lzX2ZhaWwnLAogICAgICAgICAgbWluV2lkdGg6IDEyMCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn54q25oCBJywKICAgICAgICAgIGtleTogJ3N0YXR1cycsCiAgICAgICAgICBtaW5XaWR0aDogMTcwLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHRhYmxlTGlzdDogW10sCiAgICAgIGdyaWQ6IHsKICAgICAgICB4bDogNywKICAgICAgICBsZzogNywKICAgICAgICBtZDogMTIsCiAgICAgICAgc206IDI0LAogICAgICAgIHhzOiAyNCwKICAgICAgfSwKICAgICAgdGFibGVGcm9tOiB7CiAgICAgICAgc3RhdHVzOiAnJywKICAgICAgICBjb3Vwb25fdGl0bGU6ICcnLAogICAgICAgIG5pY2tuYW1lOiAnJywKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiAxNSwKICAgICAgfSwKICAgICAgdG90YWw6IDAsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKCdtZWRpYScsIFsnaXNNb2JpbGUnXSksCiAgICBsYWJlbFdpZHRoKCkgewogICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHVuZGVmaW5lZCA6IDkwOwogICAgfSwKICAgIGxhYmVsUG9zaXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gJ3RvcCcgOiAncmlnaHQnOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIl+ihqAogICAgZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdGhpcy50YWJsZUZyb20uc3RhdHVzID0gdGhpcy50YWJsZUZyb20uc3RhdHVzIHx8ICcnOwogICAgICB1c2VyTGlzdEFwaSh0aGlzLnRhYmxlRnJvbSkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy50YWJsZUxpc3QgPSBkYXRhLmxpc3Q7CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEuY291bnQ7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgcGFnZUNoYW5nZShpbmRleCkgewogICAgICB0aGlzLnRhYmxlRnJvbS5wYWdlID0gaW5kZXg7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIC8vIOihqOagvOaQnOe0ogogICAgdXNlclNlYXJjaHMoKSB7CiAgICAgIHRoaXMudGFibGVGcm9tLnBhZ2UgPSAxOwogICAgICB0aGlzLmdldExpc3QoKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/marketing/storeCouponUser","sourcesContent":["<template>\n  <div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <Form\n        ref=\"tableFrom\"\n        :model=\"tableFrom\"\n        :label-width=\"labelWidth\"\n        :label-position=\"labelPosition\"\n        @submit.native.prevent\n      >\n        <Row type=\"flex\" :gutter=\"24\">\n          <Col v-bind=\"grid\">\n            <FormItem label=\"是否有效：\">\n              <Select placeholder=\"请选择\" clearable v-model=\"tableFrom.status\" @on-change=\"userSearchs\">\n                <Option value=\"1\">已使用</Option>\n                <Option value=\"0\">未使用</Option>\n                <Option value=\"2\">已过期</Option>\n              </Select>\n            </FormItem>\n          </Col>\n          <Col v-bind=\"grid\">\n            <FormItem label=\"领取人：\" label-for=\"nickname\">\n              <Input placeholder=\"请输入领取人\" v-model=\"tableFrom.nickname\" clearable />\n            </FormItem>\n          </Col>\n          <Col v-bind=\"grid\">\n            <FormItem label=\"优惠券搜索：\" label-for=\"coupon_title\">\n              <Input\n                search\n                enter-button\n                placeholder=\"请输入优惠券名称\"\n                v-model=\"tableFrom.coupon_title\"\n                @on-search=\"userSearchs\"\n              />\n            </FormItem>\n          </Col>\n        </Row>\n      </Form>\n      <Table :columns=\"columns1\" :data=\"tableList\">\n        <template slot-scope=\"{ row, index }\" slot=\"is_fail\">\n          <Icon type=\"md-checkmark\" v-if=\"row.is_fail === 0\" color=\"#0092DC\" size=\"14\" />\n          <Icon type=\"md-close\" v-else color=\"#ed5565\" size=\"14\" />\n        </template>\n        <template slot-scope=\"{ row, index }\" slot=\"add_time\">\n          <span> {{ row.start_time | formatDate }}</span>\n        </template>\n        <template slot-scope=\"{ row, index }\" slot=\"end_time\">\n          <span> {{ row.end_time | formatDate }}</span>\n        </template>\n      </Table>\n      <div class=\"acea-row row-right page\">\n        <Page\n          :total=\"total\"\n          :current=\"tableFrom.page\"\n          show-elevator\n          show-total\n          @on-change=\"pageChange\"\n          :page-size=\"tableFrom.limit\"\n        />\n      </div>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex';\nimport { userListApi } from '@/api/marketing';\nimport { formatDate } from '@/utils/validate';\nexport default {\n  name: 'storeCouponUser',\n  filters: {\n    formatDate(time) {\n      if (time !== 0) {\n        let date = new Date(time * 1000);\n        return formatDate(date, 'yyyy-MM-dd hh:mm');\n      }\n    },\n  },\n  data() {\n    return {\n      columns1: [\n        {\n          title: 'ID',\n          key: 'id',\n          width: 80,\n        },\n        {\n          title: '优惠券名称',\n          key: 'coupon_title',\n          minWidth: 150,\n        },\n        {\n          title: '领取人',\n          key: 'nickname',\n          minWidth: 130,\n        },\n        {\n          title: '面值',\n          key: 'coupon_price',\n          minWidth: 100,\n        },\n        {\n          title: '最低消费额',\n          key: 'use_min_price',\n          minWidth: 120,\n        },\n        {\n          title: '开始使用时间',\n          slot: 'add_time',\n          minWidth: 150,\n        },\n        {\n          title: '结束使用时间',\n          slot: 'end_time',\n          minWidth: 150,\n        },\n        {\n          title: '获取方式',\n          key: 'type',\n          minWidth: 150,\n        },\n        {\n          title: '是否可用',\n          slot: 'is_fail',\n          minWidth: 120,\n        },\n        {\n          title: '状态',\n          key: 'status',\n          minWidth: 170,\n        },\n      ],\n      tableList: [],\n      grid: {\n        xl: 7,\n        lg: 7,\n        md: 12,\n        sm: 24,\n        xs: 24,\n      },\n      tableFrom: {\n        status: '',\n        coupon_title: '',\n        nickname: '',\n        page: 1,\n        limit: 15,\n      },\n      total: 0,\n    };\n  },\n  computed: {\n    ...mapState('media', ['isMobile']),\n    labelWidth() {\n      return this.isMobile ? undefined : 90;\n    },\n    labelPosition() {\n      return this.isMobile ? 'top' : 'right';\n    },\n  },\n  created() {\n    this.getList();\n  },\n  methods: {\n    // 列表\n    getList() {\n      this.loading = true;\n      this.tableFrom.status = this.tableFrom.status || '';\n      userListApi(this.tableFrom)\n        .then(async (res) => {\n          let data = res.data;\n          this.tableList = data.list;\n          this.total = res.data.count;\n          this.loading = false;\n        })\n        .catch((res) => {\n          this.loading = false;\n          this.$Message.error(res.msg);\n        });\n    },\n    pageChange(index) {\n      this.tableFrom.page = index;\n      this.getList();\n    },\n    // 表格搜索\n    userSearchs() {\n      this.tableFrom.page = 1;\n      this.getList();\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}