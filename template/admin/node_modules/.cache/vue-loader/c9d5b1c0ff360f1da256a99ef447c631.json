{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/app/wechat/menus/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/app/wechat/menus/index.vue","mtime":1689324015196},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHdlY2hhdE1lbnVBcGksIE1lbnVBcGkgfSBmcm9tICdAL2FwaS9hcHAnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3dlY2hhdE1lbnVzJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kYWwyOiBmYWxzZSwKICAgICAgZm9ybVZhbGlkYXRlOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdHlwZTogJ2NsaWNrJywKICAgICAgICBhcHBpZDogJycsCiAgICAgICAgdXJsOiAnJywKICAgICAgICBrZXk6ICcnLAogICAgICAgIHBhZ2VwYXRoOiAnJywKICAgICAgICBpZDogMCwKICAgICAgfSwKICAgICAgcnVsZVZhbGlkYXRlOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+Whq+WGmeiPnOWNleWQjeensCcsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgeyBtaW46IDEsIG1heDogMTQsIG1lc3NhZ2U6ICfplb/luqblnKggMSDliLAgMTQg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgXSwKICAgICAgICBrZXk6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35aGr5YaZ5YWz6ZSu5a2XJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIGFwcGlkOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+Whq+WGmWFwcGlkJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIHBhZ2VwYXRoOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+Whq+WGmeWkh+eUqOe9kemhtScsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICB1cmw6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+35aGr5YaZ6Lez6L2s5Zyw5Z2AJywgdHJpZ2dlcjogJ2JsdXInIH1dLAogICAgICAgIHR5cGU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup6KeE5YiZ54q25oCBJywgdHJpZ2dlcjogJ2NoYW5nZScgfV0sCiAgICAgIH0sCiAgICAgIHBhcmVudE1lbnVJZDogbnVsbCwKICAgICAgbGlzdDogW10sCiAgICAgIGNoZWNrZWRNZW51SWQ6IG51bGwsCiAgICAgIGlzVHJ1ZTogZmFsc2UsCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0TWVudXMoKTsKICAgIGlmICh0aGlzLmxpc3QubGVuZ3RoKSB7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gdGhpcy5saXN0W3RoaXMuYWN0aXZlQ2xhc3NdOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHRoaXMuZm9ybVZhbGlkYXRlOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5re75Yqg5LiA57qn5a2X5q615Ye95pWwCiAgICBkZWZhdWx0TWVudXNEYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHR5cGU6ICdjbGljaycsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgc3ViX2J1dHRvbjogW10sCiAgICAgIH07CiAgICB9LAogICAgLy8g5re75Yqg5LqM57qn5a2X5q615Ye95pWwCiAgICBkZWZhdWx0Q2hpbGREYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHR5cGU6ICdjbGljaycsCiAgICAgICAgbmFtZTogJycsCiAgICAgIH07CiAgICB9LAogICAgLy8g6I635Y+WIOiPnOWNlQogICAgZ2V0TWVudXMoKSB7CiAgICAgIHdlY2hhdE1lbnVBcGkoKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIGxldCBkYXRhID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLmxpc3QgPSBkYXRhLm1lbnVzOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g54K55Ye75L+d5a2Y5o+Q5LqkCiAgICBzdWJtZW51cyhuYW1lKSB7CiAgICAgIGlmICh0aGlzLmlzVHJ1ZSAmJiAhdGhpcy5jaGVja2VkTWVudUlkICYmIHRoaXMuY2hlY2tlZE1lbnVJZCAhPT0gMCkgewogICAgICAgIHRoaXMucHV0RGF0YSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnNbbmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICAgdGhpcy5wdXREYXRhKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIXRoaXMuY2hlY2soKSkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgLy8g5paw5aKeZGF0YQogICAgcHV0RGF0YSgpIHsKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgYnV0dG9uOiB0aGlzLmxpc3QsCiAgICAgIH07CiAgICAgIE1lbnVBcGkoZGF0YSkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICB0aGlzLmNoZWNrZWRNZW51SWQgPSBudWxsOwogICAgICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSB7fTsKICAgICAgICAgIHRoaXMuaXNUcnVlID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyDngrnlh7vlhYPntKAKICAgIGdldHRlbShpdGVtLCBpbmRleCwgcGlkKSB7CiAgICAgIHRoaXMuY2hlY2tlZE1lbnVJZCA9IGluZGV4OwogICAgICB0aGlzLmZvcm1WYWxpZGF0ZSA9IGl0ZW07CiAgICAgIHRoaXMucGFyZW50TWVudUlkID0gcGlkOwogICAgICB0aGlzLmlzVHJ1ZSA9IHRydWU7CiAgICB9LAogICAgLy8g5aKe5Yqg5LqM57qnCiAgICBhZGQoaXRlbSwgaW5kZXgpIHsKICAgICAgaWYgKCF0aGlzLmNoZWNrKCkpIHJldHVybiBmYWxzZTsKICAgICAgaWYgKGl0ZW0uc3ViX2J1dHRvbi5sZW5ndGggPCA1KSB7CiAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmRlZmF1bHRDaGlsZERhdGEoKTsKICAgICAgICBsZXQgaWQgPSBpdGVtLnN1Yl9idXR0b24ubGVuZ3RoOwogICAgICAgIGl0ZW0uc3ViX2J1dHRvbi5wdXNoKGRhdGEpOwogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gZGF0YTsKICAgICAgICB0aGlzLmNoZWNrZWRNZW51SWQgPSBpZDsKICAgICAgICB0aGlzLnBhcmVudE1lbnVJZCA9IGluZGV4OwogICAgICAgIHRoaXMuaXNUcnVlID0gdHJ1ZTsKICAgICAgfQogICAgfSwKICAgIC8vIOWinuWKoOS4gOe6pwogICAgYWRkdGV4dCgpIHsKICAgICAgaWYgKCF0aGlzLmNoZWNrKCkpIHJldHVybiBmYWxzZTsKICAgICAgbGV0IGRhdGEgPSB0aGlzLmRlZmF1bHRNZW51c0RhdGEoKTsKICAgICAgbGV0IGlkID0gdGhpcy5saXN0Lmxlbmd0aDsKICAgICAgdGhpcy5saXN0LnB1c2goZGF0YSk7CiAgICAgIHRoaXMuZm9ybVZhbGlkYXRlID0gZGF0YTsKICAgICAgdGhpcy5jaGVja2VkTWVudUlkID0gaWQ7CiAgICAgIHRoaXMucGFyZW50TWVudUlkID0gbnVsbDsKICAgICAgdGhpcy5pc1RydWUgPSB0cnVlOwogICAgfSwKICAgIC8vIOWIpOaWreWHveaVsAogICAgY2hlY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IHJlZyA9IC9bYS16QS1aMC05XVstYS16QS1aMC05XXswLDYyfShcLlthLXpBLVowLTldWy1hLXpBLVowLTldezAsNjJ9KStcLj8vOwogICAgICBpZiAodGhpcy5jaGVja2VkTWVudUlkID09PSBudWxsKSByZXR1cm4gdHJ1ZTsKICAgICAgaWYgKCF0aGlzLmlzVHJ1ZSkgcmV0dXJuIHRydWU7CiAgICAgIGlmICghdGhpcy5mb3JtVmFsaWRhdGUubmFtZSkgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWl5oyJ6ZKu5ZCN56ewIScpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5mb3JtVmFsaWRhdGUudHlwZSA9PT0gJ2NsaWNrJyAmJiAhdGhpcy5mb3JtVmFsaWRhdGUua2V5KSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfor7fovpPlhaXlhbPplK7lrZchJyk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmZvcm1WYWxpZGF0ZS50eXBlID09PSAndmlldycgJiYgIXJlZy50ZXN0KHRoaXMuZm9ybVZhbGlkYXRlLnVybCkpIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+i+k+WFpeato+ehrueahOi3s+i9rOWcsOWdgCEnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKAogICAgICAgIHRoaXMuZm9ybVZhbGlkYXRlLnR5cGUgPT09ICdtaW5pcHJvZ3JhbScgJiYKICAgICAgICAoIXRoaXMuZm9ybVZhbGlkYXRlLmFwcGlkIHx8ICF0aGlzLmZvcm1WYWxpZGF0ZS5wYWdlcGF0aCB8fCAhdGhpcy5mb3JtVmFsaWRhdGUudXJsKQogICAgICApIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+Whq+WGmeWujOaVtOWwj+eoi+W6j+mFjee9riEnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAogICAgLy8g5Yig6ZmkCiAgICBkZWx0TWVudXMoKSB7CiAgICAgIGlmICh0aGlzLmlzVHJ1ZSkgewogICAgICAgIHRoaXMubW9kYWwyID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeiPnOWNlSEnKTsKICAgICAgfQogICAgfSwKICAgIC8vIOehruiupOWIoOmZpAogICAgZGVsKCkgewogICAgICB0aGlzLnBhcmVudE1lbnVJZCA9PT0gbnVsbAogICAgICAgID8gdGhpcy5saXN0LnNwbGljZSh0aGlzLmNoZWNrZWRNZW51SWQsIDEpCiAgICAgICAgOiB0aGlzLmxpc3RbdGhpcy5wYXJlbnRNZW51SWRdLnN1Yl9idXR0b24uc3BsaWNlKHRoaXMuY2hlY2tlZE1lbnVJZCwgMSk7CiAgICAgIHRoaXMucGFyZW50TWVudUlkID0gbnVsbDsKICAgICAgdGhpcy5mb3JtVmFsaWRhdGUgPSB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdHlwZTogJ2NsaWNrJywKICAgICAgICBhcHBpZDogJycsCiAgICAgICAgdXJsOiAnJywKICAgICAgICBrZXk6ICcnLAogICAgICAgIHBhZ2VwYXRoOiAnJywKICAgICAgICBpZDogMCwKICAgICAgfTsKICAgICAgdGhpcy5pc1RydWUgPSB0cnVlOwogICAgICB0aGlzLm1vZGFsMiA9IGZhbHNlOwogICAgICB0aGlzLmNoZWNrZWRNZW51SWQgPSBudWxsOwogICAgICB0aGlzLiRyZWZzWydmb3JtVmFsaWRhdGUnXS5yZXNldEZpZWxkcygpOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/app/wechat/menus","sourcesContent":["<template>\n  <div class=\"article-manager\">\n    <div class=\"i-layout-page-header header-title\">\n      <span class=\"ivu-page-header-title\">{{ $route.meta.title }}</span>\n    </div>\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <!-- 公众号设置 -->\n      <Row :gutter=\"24\" type=\"flex\">\n        <Col span=\"24\" class=\"ml40\">\n          <!-- 预览功能 -->\n          <Col :span=\"24\">\n            <Col :xl=\"7\" :lg=\"7\" :md=\"22\" :sm=\"22\" :xs=\"22\" class=\"left mb15\">\n              <img class=\"top\" src=\"../../../../assets/images/mobilehead.png\" />\n              <img class=\"bottom\" src=\"@/assets/images/mobilefoot.png\" />\n              <div style=\"background: #f4f5f9; min-height: 438px; position: absolute; top: 63px; width: 320px\"></div>\n              <div class=\"textbot\">\n                <div class=\"li\" v-for=\"(item, indx) in list\" :key=\"indx\" :class=\"{ active: item === formValidate }\">\n                  <div>\n                    <div class=\"add\" @click=\"add(item, indx)\">\n                      <Icon type=\"ios-add\" />\n                      <div class=\"arrow\"></div>\n                    </div>\n                    <div class=\"tianjia\">\n                      <div\n                        class=\"addadd\"\n                        v-for=\"(j, index) in item.sub_button\"\n                        :key=\"index\"\n                        :class=\"{ active: j === formValidate }\"\n                        @click=\"gettem(j, index, indx)\"\n                      >\n                        {{ j.name || '二级菜单' }}\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"text\" @click=\"gettem(item, indx, null)\">{{ item.name || '一级菜单' }}</div>\n                </div>\n                <div class=\"li\" v-show=\"list.length < 3\">\n                  <div class=\"text\" @click=\"addtext\"><Icon type=\"ios-add\" /></div>\n                </div>\n              </div>\n            </Col>\n            <Col :xl=\"11\" :lg=\"12\" :md=\"22\" :sm=\"22\" :xs=\"22\">\n              <Tabs value=\"name1\" v-if=\"checkedMenuId !== null\">\n                <TabPane label=\"菜单信息\" name=\"name1\">\n                  <Col span=\"24\" class=\"userAlert\">\n                    <div class=\"box-card right\">\n                      <Alert show-icon closable class=\"spwidth\"> 已添加子菜单，仅可设置菜单名称</Alert>\n                      <Form\n                        ref=\"formValidate\"\n                        :model=\"formValidate\"\n                        :rules=\"ruleValidate\"\n                        :label-width=\"100\"\n                        class=\"mt20\"\n                      >\n                        <FormItem label=\"菜单名称\" prop=\"name\">\n                          <Input v-model=\"formValidate.name\" placeholder=\"请填写菜单名称\" class=\"spwidth\"></Input>\n                        </FormItem>\n                        <FormItem label=\"规则状态\" prop=\"type\">\n                          <Select v-model=\"formValidate.type\" placeholder=\"请选择规则状态\" class=\"spwidth\">\n                            <Option value=\"click\">关键字</Option>\n                            <Option value=\"view\">跳转网页</Option>\n                            <Option value=\"miniprogram\">小程序</Option>\n                          </Select>\n                        </FormItem>\n                        <div v-if=\"formValidate.type === 'click'\">\n                          <FormItem label=\"关键字\" prop=\"key\">\n                            <Input v-model=\"formValidate.key\" placeholder=\"请填写关键字\" class=\"spwidth\"></Input>\n                          </FormItem>\n                        </div>\n                        <div v-if=\"formValidate.type === 'miniprogram'\">\n                          <FormItem label=\"appid\" prop=\"appid\">\n                            <Input v-model=\"formValidate.appid\" placeholder=\"请填写appid\" class=\"spwidth\"></Input>\n                          </FormItem>\n                          <FormItem label=\"小程序路径\" prop=\"pagepath\">\n                            <Input\n                              v-model=\"formValidate.pagepath\"\n                              placeholder=\"请填写小程序路径\"\n                              class=\"spwidth\"\n                            ></Input>\n                          </FormItem>\n                          <FormItem label=\"备用网页\" prop=\"url\">\n                            <Input v-model=\"formValidate.url\" placeholder=\"请填写备用网页\" class=\"spwidth\"></Input>\n                          </FormItem>\n                        </div>\n                        <div v-if=\"formValidate.type === 'view'\">\n                          <FormItem label=\"跳转地址\" prop=\"url\">\n                            <Input v-model=\"formValidate.url\" placeholder=\"请填写跳转地址\" class=\"spwidth\"></Input>\n                          </FormItem>\n                        </div>\n                      </Form>\n                    </div>\n                  </Col>\n                </TabPane>\n                <Button size=\"small\" type=\"error\" slot=\"extra\" @click=\"deltMenus\">删除</Button>\n              </Tabs>\n              <Col :span=\"24\" v-if=\"isTrue\">\n                <Button type=\"primary\" style=\"display: block; margin: 10px auto\" @click=\"submenus('formValidate')\"\n                  >保存并发布</Button\n                >\n              </Col>\n            </Col>\n          </Col>\n        </Col>\n      </Row>\n    </Card>\n\n    <Modal v-model=\"modal2\" width=\"360\">\n      <p slot=\"header\" style=\"color: #f60; text-align: center\">\n        <Icon type=\"ios-information-circle\"></Icon>\n        <span>删除</span>\n      </p>\n      <div style=\"text-align: center\">\n        <p>确定删除吗？</p>\n      </div>\n      <div slot=\"footer\">\n        <Button type=\"error\" size=\"large\" long @click=\"del\">确定</Button>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { wechatMenuApi, MenuApi } from '@/api/app';\nexport default {\n  name: 'wechatMenus',\n  data() {\n    return {\n      modal2: false,\n      formValidate: {\n        name: '',\n        type: 'click',\n        appid: '',\n        url: '',\n        key: '',\n        pagepath: '',\n        id: 0,\n      },\n      ruleValidate: {\n        name: [\n          { required: true, message: '请填写菜单名称', trigger: 'blur' },\n          { min: 1, max: 14, message: '长度在 1 到 14 个字符', trigger: 'blur' },\n        ],\n        key: [{ required: true, message: '请填写关键字', trigger: 'blur' }],\n        appid: [{ required: true, message: '请填写appid', trigger: 'blur' }],\n        pagepath: [{ required: true, message: '请填写备用网页', trigger: 'blur' }],\n        url: [{ required: true, message: '请填写跳转地址', trigger: 'blur' }],\n        type: [{ required: true, message: '请选择规则状态', trigger: 'change' }],\n      },\n      parentMenuId: null,\n      list: [],\n      checkedMenuId: null,\n      isTrue: false,\n    };\n  },\n  mounted() {\n    this.getMenus();\n    if (this.list.length) {\n      this.formValidate = this.list[this.activeClass];\n    } else {\n      return this.formValidate;\n    }\n  },\n  methods: {\n    // 添加一级字段函数\n    defaultMenusData() {\n      return {\n        type: 'click',\n        name: '',\n        sub_button: [],\n      };\n    },\n    // 添加二级字段函数\n    defaultChildData() {\n      return {\n        type: 'click',\n        name: '',\n      };\n    },\n    // 获取 菜单\n    getMenus() {\n      wechatMenuApi()\n        .then(async (res) => {\n          let data = res.data;\n          this.list = data.menus;\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 点击保存提交\n    submenus(name) {\n      if (this.isTrue && !this.checkedMenuId && this.checkedMenuId !== 0) {\n        this.putData();\n      } else {\n        this.$refs[name].validate((valid) => {\n          if (valid) {\n            this.putData();\n          } else {\n            if (!this.check()) return false;\n          }\n        });\n      }\n    },\n    // 新增data\n    putData() {\n      let data = {\n        button: this.list,\n      };\n      MenuApi(data)\n        .then(async (res) => {\n          this.$Message.success(res.msg);\n          this.checkedMenuId = null;\n          this.formValidate = {};\n          this.isTrue = false;\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 点击元素\n    gettem(item, index, pid) {\n      this.checkedMenuId = index;\n      this.formValidate = item;\n      this.parentMenuId = pid;\n      this.isTrue = true;\n    },\n    // 增加二级\n    add(item, index) {\n      if (!this.check()) return false;\n      if (item.sub_button.length < 5) {\n        let data = this.defaultChildData();\n        let id = item.sub_button.length;\n        item.sub_button.push(data);\n        this.formValidate = data;\n        this.checkedMenuId = id;\n        this.parentMenuId = index;\n        this.isTrue = true;\n      }\n    },\n    // 增加一级\n    addtext() {\n      if (!this.check()) return false;\n      let data = this.defaultMenusData();\n      let id = this.list.length;\n      this.list.push(data);\n      this.formValidate = data;\n      this.checkedMenuId = id;\n      this.parentMenuId = null;\n      this.isTrue = true;\n    },\n    // 判断函数\n    check: function () {\n      let reg = /[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\\.?/;\n      if (this.checkedMenuId === null) return true;\n      if (!this.isTrue) return true;\n      if (!this.formValidate.name) {\n        this.$Message.warning('请输入按钮名称!');\n        return false;\n      }\n      if (this.formValidate.type === 'click' && !this.formValidate.key) {\n        this.$Message.warning('请输入关键字!');\n        return false;\n      }\n      if (this.formValidate.type === 'view' && !reg.test(this.formValidate.url)) {\n        this.$Message.warning('请输入正确的跳转地址!');\n        return false;\n      }\n      if (\n        this.formValidate.type === 'miniprogram' &&\n        (!this.formValidate.appid || !this.formValidate.pagepath || !this.formValidate.url)\n      ) {\n        this.$Message.warning('请填写完整小程序配置!');\n        return false;\n      }\n      return true;\n    },\n    // 删除\n    deltMenus() {\n      if (this.isTrue) {\n        this.modal2 = true;\n      } else {\n        this.$Message.warning('请选择菜单!');\n      }\n    },\n    // 确认删除\n    del() {\n      this.parentMenuId === null\n        ? this.list.splice(this.checkedMenuId, 1)\n        : this.list[this.parentMenuId].sub_button.splice(this.checkedMenuId, 1);\n      this.parentMenuId = null;\n      this.formValidate = {\n        name: '',\n        type: 'click',\n        appid: '',\n        url: '',\n        key: '',\n        pagepath: '',\n        id: 0,\n      };\n      this.isTrue = true;\n      this.modal2 = false;\n      this.checkedMenuId = null;\n      this.$refs['formValidate'].resetFields();\n    },\n  },\n};\n</script>\n<style scoped lang=\"less\">\n* {\n  -moz-user-select: none; /*火狐*/\n  -webkit-user-select: none; /*webkit浏览器*/\n  -ms-user-select: none; /*IE10*/\n  -khtml-user-select: none; /*早期浏览器*/\n  user-select: none;\n}\n.left {\n  min-width: 390px;\n  min-height: 550px;\n  position: relative;\n  padding-left: 40px;\n}\n\n.top {\n  position: absolute;\n  top: 0px;\n}\n\n.bottom {\n  position: absolute;\n  bottom: 0px;\n}\n\n.textbot {\n  position: absolute;\n  bottom: 0px;\n  left: 82px;\n  width: 100%;\n}\n.active {\n  border: 1px solid #44b549 !important;\n  color: #44b549 !important;\n}\n.li {\n  float: left;\n  width: 93px;\n  line-height: 48px;\n  border: 1px solid #e7e7eb;\n  background: #fafafa;\n  text-align: center;\n  cursor: pointer;\n  color: #999;\n  position: relative;\n}\n.text {\n  height: 50px;\n  white-space: nowrap;\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 0 5px;\n}\n.text:hover {\n  color: #000;\n}\n\n.add {\n  position: absolute;\n  bottom: 65px;\n  width: 100%;\n  line-height: 48px;\n  border: 1px solid #e7e7eb;\n  background: #fafafa;\n}\n.arrow {\n  position: absolute;\n  bottom: -16px;\n  left: 36px;\n  /* 圆角的位置需要细心调试哦 */\n  width: 0;\n  height: 0;\n  font-size: 0;\n  border: solid 8px;\n  border-color: #fff #f4f5f9 #f4f5f9 #f4f5f9;\n}\n.tianjia {\n  position: absolute;\n  bottom: 115px;\n  width: 100%;\n  line-height: 48px;\n  background: #fafafa;\n}\n.addadd {\n  width: 100%;\n  line-height: 48px;\n  border: 1px solid #e7e7eb;\n  background: #fafafa;\n  height: 48px;\n}\n.right {\n  background: #fff;\n  min-height: 400px;\n}\n.spwidth {\n  width: 100%;\n}\n.userAlert {\n  margin-top: 16px !important;\n}\n</style>\n"]}]}