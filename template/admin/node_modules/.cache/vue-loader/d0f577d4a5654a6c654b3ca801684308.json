{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/components/rightConfig/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/components/rightConfig/index.vue","mtime":1689324015168},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldENhdGVnb3J5LCBnZXRCeUNhdGVnb3J5LCBnZXRQcm9kdWN0LCBkaXlTYXZlLCBzdG9yZVN0YXR1cyB9IGZyb20gJ0AvYXBpL2RpeSc7CmltcG9ydCB0b29sQ29tIGZyb20gJ0AvY29tcG9uZW50cy9kaXlDb21wb25lbnRzL2luZGV4LmpzJzsKaW1wb3J0IHsgbWFwTXV0YXRpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncmlnaHRDb25maWcnLAogIGNvbXBvbmVudHM6IHsKICAgIC4uLnRvb2xDb20sCiAgfSwKICBwcm9wczogewogICAgbmFtZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IHt9LAogICAgfSwKICAgIHBhZ2VJZDogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDAsCiAgICB9LAogICAgY29uZmlnTnVtOiB7CiAgICAgIHR5cGU6IE51bWJlciB8IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2RlZmF1bHQnLAogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyAuLi5tYXBTdGF0ZSh7CiAgICAvLyAgICAgZGVmdWx0QXJyOihzdGF0ZSk9PnN0YXRlLmdvb2RTZWxlY3QuY29tcG9uZW50LAogICAgLy8gfSkKICAgIGRlZnVsdEFycigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLm1vcmVuLmNvbXBvbmVudDsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgbmFtZTogewogICAgICBoYW5kbGVyKG5WYWwsIG9WYWwpIHsKICAgICAgICB0aGlzLnJDb20gPSBbXTsKICAgICAgICB0aGlzLmNvbmZpZ0RhdGEgPSB0aGlzLiRzdG9yZS5zdGF0ZS5tb3Jlbi5kZWZhdWx0Q29uZmlnW25WYWwubmFtZV07CiAgICAgICAgaWYgKCF0aGlzLmNvbmZpZ0RhdGEuaGFzT3duUHJvcGVydHkodGhpcy5jb25maWdOdW0pKSB7CiAgICAgICAgICBsZXQgZGVmYXVsdE9iaiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb25maWdEYXRhLmRlZmF1bHRWYWwpKTsKICAgICAgICAgIHRoaXMuY29uZmlnRGF0YVtuVmFsLm51bV0gPSBkZWZhdWx0T2JqOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdtb3Jlbi91cERhdGFOYW1lJywgdGhpcy5jb25maWdEYXRhKTsKICAgICAgICB9CiAgICAgICAgbGV0IHRoYXQgPSB0aGlzOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhhdC5yQ29tID0gdGhhdC4kc3RvcmUuc3RhdGUubW9yZW4uY29tcG9uZW50W25WYWwubmFtZV0ubGlzdDsKICAgICAgICB9LCAzMCk7CiAgICAgICAgaWYgKHRoaXMuY29uZmlnRGF0YVtuVmFsLm51bV0uc2VsZWN0Q29uZmlnKSB7CiAgICAgICAgICBsZXQgdHlwZSA9IHRoaXMuY29uZmlnRGF0YVtuVmFsLm51bV0uc2VsZWN0Q29uZmlnLnR5cGUgPyB0aGlzLmNvbmZpZ0RhdGFbblZhbC5udW1dLnNlbGVjdENvbmZpZy50eXBlIDogMDsKICAgICAgICAgIGlmICh0eXBlKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0QnlDYXRlZ29yeSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5nZXRDYXRlZ29yeSgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgICBkZWZ1bHRBcnI6IHsKICAgICAgaGFuZGxlcihuVmFsLCBvVmFsKSB7CiAgICAgICAgdGhpcy5yQ29tID0gW107CiAgICAgICAgbGV0IHRlbXBBcnIgPSB0aGlzLm9ialRvQXJyYXkoblZhbCk7CiAgICAgICAgdGhpcy5yQ29tID0gblZhbFt0aGlzLm5hbWUubmFtZV0ubGlzdDsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgckNvbTogW10sCiAgICAgIGNvbmZpZ0RhdGE6IHt9LAogICAgICBpc1Nob3c6IHRydWUsCiAgICAgIGNhdGVnb3J5TGlzdDogW10sCiAgICAgIHN0YXR1czogMCwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zdG9yZVN0YXR1cygpOwogIH0sCiAgbWV0aG9kczogewogICAgc3RvcmVTdGF0dXMoKSB7CiAgICAgIHN0b3JlU3RhdHVzKCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5zdGF0dXMgPSBwYXJzZUludChyZXMuZGF0YS5zdG9yZV9zdGF0dXMpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRDYXRlZ29yeSgpIHsKICAgICAgZ2V0Q2F0ZWdvcnkoKS50aGVuKChyZXMpID0+IHsKICAgICAgICBsZXQgZGF0YSA9IFtdOwogICAgICAgIHJlcy5kYXRhLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgZGF0YS5wdXNoKHsKICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsCiAgICAgICAgICAgIHBpZDogaXRlbS5waWQsCiAgICAgICAgICAgIGFjdGl2ZVZhbHVlOiBpdGVtLmlkLnRvU3RyaW5nKCksCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNvbmZpZ0RhdGFbdGhpcy5uYW1lLm51bV0uc2VsZWN0Q29uZmlnLmxpc3QgPSBkYXRhOwogICAgICAgIHRoaXMuYnVzLiRlbWl0KCd1cERhdGEnLCBkYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgLy/ojrflj5bkuoznuqfliIbnsbsKICAgIGdldEJ5Q2F0ZWdvcnkoKSB7CiAgICAgIGdldEJ5Q2F0ZWdvcnkoKS50aGVuKChyZXMpID0+IHsKICAgICAgICBsZXQgZGF0YSA9IFtdOwogICAgICAgIHJlcy5kYXRhLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgZGF0YS5wdXNoKHsKICAgICAgICAgICAgdGl0bGU6IGl0ZW0uY2F0ZV9uYW1lLAogICAgICAgICAgICBwaWQ6IGl0ZW0ucGlkLAogICAgICAgICAgICBhY3RpdmVWYWx1ZTogaXRlbS5pZC50b1N0cmluZygpLAogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jb25maWdEYXRhW3RoaXMubmFtZS5udW1dLnNlbGVjdENvbmZpZy5saXN0ID0gZGF0YTsKICAgICAgICB0aGlzLmJ1cy4kZW1pdCgndXBEYXRhJywgZGF0YSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS/neWtmOaVsOaNrgogICAgc2F2ZUNvbmZpZygpIHsKICAgICAgbGV0IGRhdGEgPSB0aGlzLiRzdG9yZS5zdGF0ZS5tb3Jlbi5kZWZhdWx0Q29uZmlnOwogICAgICBpZiAodGhpcy5uYW1lLm5hbWUgPT0gJ3RhYkJhcicpIHsKICAgICAgICBpZiAoIXRoaXMuc3RhdHVzKSB7CiAgICAgICAgICBsZXQgbGlzdCA9IGRhdGEudGFiQmFyLmRlZmF1bHQudGFiQmFyTGlzdC5saXN0OwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChsaXN0W2ldLmxpbmsgPT0gJy9wYWdlcy9zdG9yZUxpc3QvaW5kZXgnIHx8IGxpc3RbaV0ubGluayA9PSAncGFnZXMvc3RvcmVMaXN0L2luZGV4JykgewogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRNZXNzYWdlLmVycm9yKCfor7flhYjlvIDlkK/mgqjnmoTlkajovrnlip/og70oL3BhZ2VzL3N0b3JlTGlzdC9pbmRleCknKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoZGF0YS50YWJCYXIuZGVmYXVsdC50YWJCYXJMaXN0Lmxpc3QubGVuZ3RoIDwgMikgewogICAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+aCqOacgOWwkeW6lOa3u+WKoDLkuKrlr7zoiKonKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGRpeVNhdmUodGhpcy5wYWdlSWQsIHsKICAgICAgICB2YWx1ZTogZGF0YSwKICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKCfkv53lrZjmiJDlip8nKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5a+56LGh6L2s5pWw57uECiAgICBvYmpUb0FycmF5KGFycmF5KSB7CiAgICAgIHZhciBhcnIgPSBbXTsKICAgICAgZm9yICh2YXIgaSBpbiBhcnJheSkgewogICAgICAgIGFyci5wdXNoKGFycmF5W2ldKTsKICAgICAgfQogICAgICByZXR1cm4gYXJyOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/rightConfig","sourcesContent":["<template>\n  <div class=\"right-box\" v-if=\"rCom.length\">\n    <div class=\"title-bar\">模块配置</div>\n    <div class=\"mobile-config\" v-if=\"rCom.length\">\n      <div v-for=\"(item, key) in rCom\" :key=\"key\">\n        <component\n          :is=\"item.components.name\"\n          :moduleName=\"name.name\"\n          :name=\"item.configNme\"\n          :configData=\"configData\"\n          :configNum=\"configNum\"\n        ></component>\n      </div>\n      <div style=\"text-align: center\" v-if=\"rCom.length\">\n        <Button type=\"primary\" style=\"width: 100%; margin: 0 auto; height: 40px\" @click=\"saveConfig\">保存</Button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getCategory, getByCategory, getProduct, diySave, storeStatus } from '@/api/diy';\nimport toolCom from '@/components/diyComponents/index.js';\nimport { mapMutations } from 'vuex';\nimport { mapState } from 'vuex';\nexport default {\n  name: 'rightConfig',\n  components: {\n    ...toolCom,\n  },\n  props: {\n    name: {\n      type: Object,\n      default: {},\n    },\n    pageId: {\n      type: Number,\n      default: 0,\n    },\n    configNum: {\n      type: Number | String,\n      default: 'default',\n    },\n  },\n  computed: {\n    // ...mapState({\n    //     defultArr:(state)=>state.goodSelect.component,\n    // })\n    defultArr() {\n      return this.$store.state.moren.component;\n    },\n  },\n  watch: {\n    name: {\n      handler(nVal, oVal) {\n        this.rCom = [];\n        this.configData = this.$store.state.moren.defaultConfig[nVal.name];\n        if (!this.configData.hasOwnProperty(this.configNum)) {\n          let defaultObj = JSON.parse(JSON.stringify(this.configData.defaultVal));\n          this.configData[nVal.num] = defaultObj;\n          this.$store.commit('moren/upDataName', this.configData);\n        }\n        let that = this;\n        setTimeout(function () {\n          that.rCom = that.$store.state.moren.component[nVal.name].list;\n        }, 30);\n        if (this.configData[nVal.num].selectConfig) {\n          let type = this.configData[nVal.num].selectConfig.type ? this.configData[nVal.num].selectConfig.type : 0;\n          if (type) {\n            this.getByCategory();\n          } else {\n            this.getCategory();\n          }\n        }\n      },\n      deep: true,\n    },\n    defultArr: {\n      handler(nVal, oVal) {\n        this.rCom = [];\n        let tempArr = this.objToArray(nVal);\n        this.rCom = nVal[this.name.name].list;\n      },\n      deep: true,\n    },\n  },\n  data() {\n    return {\n      rCom: [],\n      configData: {},\n      isShow: true,\n      categoryList: [],\n      status: 0,\n    };\n  },\n  mounted() {\n    this.storeStatus();\n  },\n  methods: {\n    storeStatus() {\n      storeStatus().then((res) => {\n        this.status = parseInt(res.data.store_status);\n      });\n    },\n    getCategory() {\n      getCategory().then((res) => {\n        let data = [];\n        res.data.map((item) => {\n          data.push({\n            title: item.title,\n            pid: item.pid,\n            activeValue: item.id.toString(),\n          });\n        });\n        this.configData[this.name.num].selectConfig.list = data;\n        this.bus.$emit('upData', data);\n      });\n    },\n    //获取二级分类\n    getByCategory() {\n      getByCategory().then((res) => {\n        let data = [];\n        res.data.map((item) => {\n          data.push({\n            title: item.cate_name,\n            pid: item.pid,\n            activeValue: item.id.toString(),\n          });\n        });\n        this.configData[this.name.num].selectConfig.list = data;\n        this.bus.$emit('upData', data);\n      });\n    },\n    // 保存数据\n    saveConfig() {\n      let data = this.$store.state.moren.defaultConfig;\n      if (this.name.name == 'tabBar') {\n        if (!this.status) {\n          let list = data.tabBar.default.tabBarList.list;\n          for (let i = 0; i < list.length; i++) {\n            if (list[i].link == '/pages/storeList/index' || list[i].link == 'pages/storeList/index') {\n              return this.$Message.error('请先开启您的周边功能(/pages/storeList/index)');\n            }\n          }\n        }\n        if (data.tabBar.default.tabBarList.list.length < 2) {\n          return this.$Message.error('您最少应添加2个导航');\n        }\n      }\n\n      diySave(this.pageId, {\n        value: data,\n      }).then((res) => {\n        this.$Message.success('保存成功');\n      });\n    },\n    // 对象转数组\n    objToArray(array) {\n      var arr = [];\n      for (var i in array) {\n        arr.push(array[i]);\n      }\n      return arr;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.right-box {\n  width: 700px;\n  margin-left: 50px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  height: 700px;\n  overflow-y: scroll;\n\n  &::-webkit-scrollbar {\n    /* 滚动条整体样式 */\n    width: 4px; /* 高宽分别对应横竖滚动条的尺寸 */\n    height: 1px;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    /* 滚动条里面小方块 */\n    border-radius: 4px;\n    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n    background: #535353;\n  }\n\n  &::-webkit-scrollbar-track {\n    /* 滚动条里面轨道 */\n    box-shadow: inset 0 0 5px #fff;\n    border-radius: 4px;\n    background: #fff;\n  }\n}\n\n.title-bar {\n  width: 100%;\n  height: 38px;\n  line-height: 38px;\n  padding-left: 24px;\n  color: #333;\n  border-radius: 4px;\n  border-bottom: 1px solid #eee;\n}\n</style>\n"]}]}