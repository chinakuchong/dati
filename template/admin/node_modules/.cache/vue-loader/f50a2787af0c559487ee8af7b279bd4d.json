{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/components/newsCategory/index.vue?vue&type=style&index=0&id=5e8ffa44&scoped=true&lang=stylus&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/components/newsCategory/index.vue","mtime":1689324015166},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/@vue/cli-service/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/stylus-loader/index.js","mtime":1519606876000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb250ZW50Qm94IHsKICBoZWlnaHQ6IDEwMCU7CiAgd2lkdGg6IDEwMCU7CiAgcG9zaXRpb246IHN0YXRpYzsKCiAgI2NvbnRlbnQgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgLyogdG9wOiAyODBweDsgKi8KICAgIGJvdHRvbTogMDsKICAgIHdpZHRoOiA4NiU7CiAgICAvKiBoZWlnaHQgMTAwMHB4OyAqLwogIH0KfQoKLmNvbnRlbnRCb3ggPj4+IC52dWUtd2F0ZXJmYWxsLWVhc3kgewogIHdpZHRoOiAxMDAlICFpbXBvcnRhbnQ7CiAgbGVmdDogMCAhaW1wb3J0YW50OwogIG1hcmdpbi1sZWZ0OiAwICFpbXBvcnRhbnQ7Cn0KCi5jb250ZW50Qm94ID4+PiAudnVlLXdhdGVyZmFsbC1lYXN5LXNjcm9sbDo6LXdlYmtpdC1zY3JvbGxiYXIgewogIGRpc3BsYXk6IG5vbmU7Cn0KCi5jb250ZW50Qm94ID4+PiAudnVlLXdhdGVyZmFsbC1lYXN5LXNjcm9sbCB7CiAgc2Nyb2xsYmFyLXdpZHRoOiBub25lOyAvKiBmaXJlZm94ICovCiAgLW1zLW92ZXJmbG93LXN0eWxlOiBub25lOyAvKiBJRSAxMCsgKi8KICBvdmVyZmxvdy14OiBoaWRkZW47CiAgb3ZlcmZsb3cteTogYXV0bzsKfQoKLnNvbWUtaW5mbyB7CiAgcGFkZGluZzogN3B4OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKfQoKLlJlZnJlc2ggewogIGZvbnQtc2l6ZTogMTJweDsKICBjb2xvcjogIzE4OTBGRjsKICBjdXJzb3I6IHBvaW50ZXI7CiAgbGluZS1oZWlnaHQ6IDM1cHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwp9CgoubmV3c19waWMgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogMTUwcHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgYmFja2dyb3VuZC1zaXplOiAxMDAlOwogIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7CiAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwIDA7CiAgcGFkZGluZzogMTBweDsKICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBhbGlnbi1pdGVtczogZmxleC1lbmQ7Cn0KCi5uZXdzX3NwIHsKICBmb250LXNpemU6IDEycHg7CiAgY29sb3I6ICMwMDAwMDA7CiAgYmFja2dyb3VuZDogI2ZmZjsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDM4cHg7CiAgbGluZS1oZWlnaHQ6IDM4cHg7CiAgcGFkZGluZzogMCAxMnB4OwogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CiAgZGlzcGxheTogYmxvY2s7Cn0KCi5uZXdzX2NlbnQgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogYXV0bzsKICBiYWNrZ3JvdW5kOiAjZmZmOwogIGJvcmRlci10b3A6IDFweCBkYXNoZWQgI2VlZTsKICBkaXNwbGF5OiBmbGV4OwogIHBhZGRpbmc6IDEwcHg7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CgogIC5uZXdzX3NwMSB7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBjb2xvcjogIzAwMDAwMDsKICAgIHdpZHRoOiA3MSU7CiAgfQoKICAubmV3c19jZW50X2ltZyB7CiAgICB3aWR0aDogODFweDsKICAgIGhlaWdodDogNDZweDsKICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgIG92ZXJmbG93OiBoaWRkZW47CgogICAgaW1nIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgIH0KICB9Cn0KCi5uZXdzX3BpYyA+Pj4gLml2dS1idG4tZXJyb3IgewogIHdpZHRoOiAyNHB4ICFpbXBvcnRhbnQ7CiAgaGVpZ2h0OiAyNHB4ICFpbXBvcnRhbnQ7CiAgYmFja2dyb3VuZDogI0ZGNUQ1RiAhaW1wb3J0YW50OwogIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7CiAgYm9yZGVyOiAxcHggc29saWQgI2VlZSAhaW1wb3J0YW50Owp9CgoubmV3c19waWMgPj4+Lml2dS1idG4tZXJyb3I6aG92ZXIgewogIGJhY2tncm91bmQ6ICNGRjVENUYgIWltcG9ydGFudDsKICBib3JkZXI6IDFweCBzb2xpZCAjZmZmICFpbXBvcnRhbnQ7CiAgY29sb3I6ICNmZmYgIWltcG9ydGFudDsKfQoKLm5ld3NfcGljID4+PiAuaXZ1LWJ0bi1zdWNjZXNzIHsKICB3aWR0aDogMjRweCAhaW1wb3J0YW50OwogIGhlaWdodDogMjRweCAhaW1wb3J0YW50OwogIGJvcmRlcjogMXB4IHNvbGlkICNlZWUgIWltcG9ydGFudDsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoSA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/newsCategory","sourcesContent":["<template>\n  <div :style=\"{ height: scrollerHeight + 'px' || '' }\">\n    <Card :bordered=\"false\" dis-hover class=\"ivu-mt\">\n      <Form ref=\"formValidate\" :model=\"formValidate\" :label-width=\"80\" label-position=\"left\" class=\"tabform\">\n        <Row :gutter=\"24\" type=\"flex\" justify=\"end\">\n          <Col span=\"24\">\n            <Col v-bind=\"grid\" class=\"mr\">\n              <FormItem label=\"图文搜索：\" prop=\"cate_name\" label-for=\"cate_name\">\n                <Input\n                  search\n                  enter-button\n                  placeholder=\"请输入\"\n                  element-id=\"cate_name\"\n                  v-model=\"formValidate.cate_name\"\n                  @on-search=\"userSearchs\"\n                />\n              </FormItem>\n            </Col>\n          </Col>\n        </Row>\n        <Row type=\"flex\" v-show=\"$route.path === routePre + '/app/wechat/news_category/index'\">\n          <router-link :to=\"routePre + '/app/wechat/news_category/save/0'\">\n            <Button type=\"primary\" class=\"bnt\" icon=\"md-add\">添加图文消息</Button>\n          </router-link>\n        </Row>\n      </Form>\n    </Card>\n    <div class=\"contentBox\">\n      <div id=\"content\" :style=\"{ top: contentTop + 'px' || '', width: contentWidth }\" ref=\"content\">\n        <vue-waterfall-easy\n          :imgsArr=\"imgsArr\"\n          :maxCols=\"maxCol\"\n          :width=\"screenWidth\"\n          @click=\"clickFn\"\n          @scrollReachBottom=\"getData\"\n          ref=\"waterfall\"\n          :reachBottomDistance=\"30\"\n        >\n          <div class=\"img-info\" slot-scope=\"props\" v-if=\"props.value.new.length !== 0\">\n            <div v-for=\"(j, i) in props.value.new\" :key=\"i\">\n              <div v-if=\"i === 0\">\n                <div\n                  class=\"news_pic\"\n                  :style=\"{\n                    backgroundImage: 'url(' + j.image_input[0] + ')',\n                    backgroundSize: '100% 100%',\n                  }\"\n                  @mouseenter=\"mouseenterOut(j)\"\n                  @mouseleave=\"mouseenterOver(j)\"\n                >\n                  <Button\n                    type=\"success\"\n                    shape=\"circle\"\n                    icon=\"md-create\"\n                    v-show=\"props.value.new[i].isDel && isShow\"\n                    @click=\"clkk(props.value)\"\n                  ></Button>\n                  <Button\n                    type=\"error\"\n                    shape=\"circle\"\n                    icon=\"md-trash\"\n                    v-show=\"props.value.new[i].isDel && isShow\"\n                    @click=\"del(props.value, '删除图文', i)\"\n                    style=\"margin-top: 5px\"\n                  ></Button>\n                  <Button\n                    type=\"primary\"\n                    icon=\"md-paper-plane\"\n                    v-show=\"props.value.new[i].isDel && isShowSend\"\n                    shape=\"circle\"\n                    @click=\"send(props.value, '发送', i)\"\n                    >推送</Button\n                  >\n                </div>\n                <span class=\"news_sp\">{{ j.title }}</span>\n              </div>\n              <div v-else class=\"news_cent\">\n                <span class=\"news_sp1\" v-if=\"j.synopsis\">{{ j.title }}</span>\n                <div class=\"news_cent_img\" v-if=\"j.image_input.length !== 0\">\n                  <img :src=\"j.image_input[0]\" />\n                </div>\n              </div>\n            </div>\n            <p class=\"some-info\">{{ props.value.id }}</p>\n          </div>\n          <div slot=\"waterfall-over\"></div>\n        </vue-waterfall-easy>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport vueWaterfallEasy from 'vue-waterfall-easy';\nimport { wechatNewsListApi } from '@/api/app';\nimport { mapState } from 'vuex';\nimport settings from '@/setting';\nexport default {\n  name: 'newsCategory',\n  props: {\n    scrollerHeight: {\n      type: String,\n      default: '100%',\n    },\n    contentTop: {\n      type: String,\n      default: '230',\n    },\n    contentWidth: {\n      type: String,\n      default: '100%',\n    },\n    maxCols: {\n      type: Number,\n      default: 5,\n    },\n    isShow: {\n      type: Boolean,\n      default: false,\n    },\n    isShowSend: {\n      type: Boolean,\n      default: false,\n    },\n    userIds: {\n      type: Array,\n      default: () => {\n        [];\n      },\n    },\n  },\n  components: {\n    vueWaterfallEasy,\n  },\n  data() {\n    return {\n      routePre: settings.routePre,\n      isDel: false,\n      imgsArr: [],\n      group: 0, // 当前加载的加载图片的次数\n      fetchImgsArr: [], // 存放每次滚动时下一批要加载的图片的数组\n      orderData: {},\n      cols: NaN, // 需要根据窗口宽度初始化\n      gridPic: {\n        xl: 6,\n        lg: 8,\n        md: 8,\n        sm: 24,\n        xs: 24,\n      },\n      grid: {\n        xl: 8,\n        lg: 8,\n        md: 8,\n        sm: 24,\n        xs: 24,\n      },\n      formValidate: {\n        cate_name: '',\n        page: 1,\n        limit: 10,\n      },\n      screenWidth: document.body.clientWidth - 200,\n      maxCol: 1,\n    };\n  },\n  created() {\n    if (this.maxCols === 5) {\n      this.$set(this, 'maxCol', this.screenWidth / 240);\n    } else {\n      this.maxCol = this.maxCols;\n    }\n    this.getData();\n  },\n  mounted() {},\n  computed: {},\n  methods: {\n    // 发送图文消息\n    send(row, tit, num) {\n      let delfromData = {\n        title: tit,\n        num: num,\n        url: `app/wechat/push`,\n        method: 'post',\n        ids: {\n          id: row.id,\n          user_ids: this.userIds,\n        },\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$Message.success(res.msg);\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    clickFn(event, { index, value }) {\n      event.preventDefault();\n      if (event.target.tagName.toLowerCase() === 'div') {\n        this.$emit('getCentList', value);\n      }\n    },\n    // 删除\n    del(row, tit, num) {\n      let delfromData = {\n        title: tit,\n        num: num,\n        url: `app/wechat/news/${row.id}`,\n        method: 'DELETE',\n        ids: '',\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$Message.success(res.msg);\n          this.$nextTick(() => {\n            this.imgsArr = [];\n          });\n          this.formValidate.page = 1;\n          this.getData();\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 删除成功\n    // submitModel () {\n    //     if (this.delfromData.title === '删除图文') {\n    //         // this.imgsArr.splice(this.delfromData.num, 1)\n    //         this.$nextTick(() => {\n    //             this.imgsArr = [];\n    //         })\n    //         this.formValidate.page = 1;\n    //         this.getData();\n    //     }\n    // },\n    // 编辑\n    clkk(item) {\n      this.$router.push({\n        path: this.routePre + '/app/wechat/news_category/save/' + item.id,\n      });\n    },\n    // 鼠标移进\n    mouseenterOut(item) {\n      this.$set(item, 'isDel', true);\n    },\n    // 鼠标移出\n    mouseenterOver(item) {\n      this.$set(item, 'isDel', false);\n    },\n    // 搜索\n    userSearchs() {\n      this.$nextTick(() => {\n        this.imgsArr = [];\n      });\n      this.formValidate.page = 1;\n      this.getData();\n    },\n    // 瀑布流数据\n    getData() {\n      wechatNewsListApi(this.formValidate)\n        .then(async (res) => {\n          if (res.data.list.length === 0) {\n            // 模拟已经无新数据，显示 slot=\"waterfall-over\"\n            this.imgsArr = [];\n            this.$nextTick(() => {\n              this.$refs.waterfall.waterfallOver();\n            });\n          } else {\n            let num = Math.ceil(res.data.count / this.formValidate.limit) + 1;\n            res.data.list.map((item) => {\n              item.isDel = false;\n            });\n            this.imgsArr = this.imgsArr.concat(res.data.list) || [];\n            this.formValidate.page++;\n            if (this.formValidate.page === num) {\n              // 模拟已经无新数据，显示 slot=\"waterfall-over\"\n              this.$refs.waterfall.waterfallOver();\n              return;\n            }\n          }\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n  },\n  computed: {},\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.contentBox {\n  height: 100%;\n  width: 100%;\n  position: static;\n\n  #content {\n    position: absolute;\n    /* top: 280px; */\n    bottom: 0;\n    width: 86%;\n    /* height 1000px; */\n  }\n}\n\n.contentBox >>> .vue-waterfall-easy {\n  width: 100% !important;\n  left: 0 !important;\n  margin-left: 0 !important;\n}\n\n.contentBox >>> .vue-waterfall-easy-scroll::-webkit-scrollbar {\n  display: none;\n}\n\n.contentBox >>> .vue-waterfall-easy-scroll {\n  scrollbar-width: none; /* firefox */\n  -ms-overflow-style: none; /* IE 10+ */\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n\n.some-info {\n  padding: 7px;\n  box-sizing: border-box;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.Refresh {\n  font-size: 12px;\n  color: #1890FF;\n  cursor: pointer;\n  line-height: 35px;\n  display: inline-block;\n}\n\n.news_pic {\n  width: 100%;\n  height: 150px;\n  overflow: hidden;\n  position: relative;\n  background-size: 100%;\n  background-position: center center;\n  border-radius: 5px 5px 0 0;\n  padding: 10px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n}\n\n.news_sp {\n  font-size: 12px;\n  color: #000000;\n  background: #fff;\n  width: 100%;\n  height: 38px;\n  line-height: 38px;\n  padding: 0 12px;\n  box-sizing: border-box;\n  display: block;\n}\n\n.news_cent {\n  width: 100%;\n  height: auto;\n  background: #fff;\n  border-top: 1px dashed #eee;\n  display: flex;\n  padding: 10px;\n  box-sizing: border-box;\n  justify-content: space-between;\n\n  .news_sp1 {\n    font-size: 12px;\n    color: #000000;\n    width: 71%;\n  }\n\n  .news_cent_img {\n    width: 81px;\n    height: 46px;\n    border-radius: 6px;\n    overflow: hidden;\n\n    img {\n      width: 100%;\n      height: 100%;\n    }\n  }\n}\n\n.news_pic >>> .ivu-btn-error {\n  width: 24px !important;\n  height: 24px !important;\n  background: #FF5D5F !important;\n  color: #fff !important;\n  border: 1px solid #eee !important;\n}\n\n.news_pic >>>.ivu-btn-error:hover {\n  background: #FF5D5F !important;\n  border: 1px solid #fff !important;\n  color: #fff !important;\n}\n\n.news_pic >>> .ivu-btn-success {\n  width: 24px !important;\n  height: 24px !important;\n  border: 1px solid #eee !important;\n}\n</style>\n"]}]}