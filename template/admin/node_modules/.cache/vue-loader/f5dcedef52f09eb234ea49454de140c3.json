{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/layout/navBars/breadcrumb/userNews.vue?vue&type=style&index=0&id=6817c01c&scoped=true&lang=scss&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/layout/navBars/breadcrumb/userNews.vue","mtime":1689324015185},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/@vue/cli-service/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubGF5b3V0LW5hdmJhcnMtYnJlYWRjcnVtYi11c2VyLW5ld3MgewogIC5oZWFkLWJveCB7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXByZXYtYm9yZGVyLWNvbG9yLWxpZ2h0ZXIpOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIGNvbG9yOiB2YXIoLS1wcmV2LWNvbG9yLXRleHQtcHJpbWFyeSk7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgICBoZWlnaHQ6IDM1cHg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgLmhlYWQtYm94LWJ0biB7CiAgICAgIGNvbG9yOiB2YXIoLS1wcmV2LWNvbG9yLXByaW1hcnkpOwogICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgb3BhY2l0eTogMC44OwogICAgICAmOmhvdmVyIHsKICAgICAgICBvcGFjaXR5OiAxOwogICAgICB9CiAgICB9CiAgfQogIC5jb250ZW50LWJveCB7CiAgICBmb250LXNpemU6IDEzcHg7CiAgICAuY29udGVudC1ib3gtaXRlbSB7CiAgICAgIHBhZGRpbmctdG9wOiAxMnB4OwogICAgICAmOmxhc3Qtb2YtdHlwZSB7CiAgICAgICAgcGFkZGluZy1ib3R0b206IDEycHg7CiAgICAgIH0KICAgICAgLmNvbnRlbnQtYm94LW1zZyB7CiAgICAgICAgY29sb3I6IHZhcigtLXByZXYtY29sb3ItdGV4dC1zZWNvbmRhcnkpOwogICAgICAgIG1hcmdpbi10b3A6IDVweDsKICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7CiAgICAgIH0KICAgICAgLmNvbnRlbnQtYm94LXRpbWUgewogICAgICAgIGNvbG9yOiB2YXIoLS1wcmV2LWNvbG9yLXRleHQtc2Vjb25kYXJ5KTsKICAgICAgfQogICAgfQogICAgLmNvbnRlbnQtYm94LWVtcHR5IHsKICAgICAgaGVpZ2h0OiAyNjBweDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgLmNvbnRlbnQtYm94LWVtcHR5LW1hcmdpbiB7CiAgICAgICAgbWFyZ2luOiBhdXRvOwogICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgICBpIHsKICAgICAgICAgIGZvbnQtc2l6ZTogNjBweDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgLmZvb3QtYm94IHsKICAgIGhlaWdodDogMzVweDsKICAgIGNvbG9yOiB2YXIoLS1wcmV2LWNvbG9yLXByaW1hcnkpOwogICAgZm9udC1zaXplOiAxM3B4OwogICAgY3Vyc29yOiBwb2ludGVyOwogICAgb3BhY2l0eTogMC44OwogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1wcmV2LWJvcmRlci1jb2xvci1saWdodGVyKTsKICAgICY6aG92ZXIgewogICAgICBvcGFjaXR5OiAxOwogICAgfQogIH0KICA6OnYtZGVlcCguZWwtZW1wdHlfX2Rlc2NyaXB0aW9uIHApIHsKICAgIGZvbnQtc2l6ZTogMTNweDsKICB9Cn0K"},{"version":3,"sources":["userNews.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"userNews.vue","sourceRoot":"src/layout/navBars/breadcrumb","sourcesContent":["<template>\n  <div class=\"layout-navbars-breadcrumb-user-news\">\n    <div class=\"head-box\">\n      <div class=\"head-box-title\">{{ $t('message.user.newTitle') }}</div>\n      <div class=\"head-box-btn\" v-if=\"newsList.length > 0\" @click=\"onAllReadClick\">{{ $t('message.user.newBtn') }}</div>\n    </div>\n    <div class=\"content-box\">\n      <template v-if=\"newsList.length > 0\">\n        <div class=\"content-box-item\" v-for=\"(v, k) in newsList\" :key=\"k\">\n          <div>{{ v.type | msgType }}</div>\n          <div class=\"content-box-msg\">\n            {{ v.title }}\n          </div>\n          <!-- <div class=\"content-box-time\">{{ v.time }}</div> -->\n        </div>\n      </template>\n      <div class=\"content-box-empty\" v-else>\n        <div class=\"content-box-empty-margin\">\n          <i class=\"el-icon-s-promotion\"></i>\n          <div class=\"mt15\">{{ $t('message.user.newDesc') }}</div>\n        </div>\n      </div>\n    </div>\n    <!-- <div class=\"foot-box\" @click=\"onGoToGiteeClick\" v-if=\"newsList.length > 0\">{{ $t('message.user.newGo') }}</div> -->\n  </div>\n</template>\n\n<script>\nlet newOrderAudioLink = new Audio(require('@/assets/video/newOrderAudioLink.mp3'));\nimport { jnoticeRequest } from '@/api/common';\nimport { adminSocket } from '@/libs/socket';\nimport { getCookies, removeCookies, setCookies } from '@/libs/util';\nexport default {\n  name: 'layoutBreadcrumbUserNews',\n  data() {\n    return {\n      newsList: [],\n      newOrderAudioLink: null,\n    };\n  },\n  mounted() {\n    this.getNotict();\n    this.newOrderAudioLink = newOrderAudioLink;\n    adminSocket.then((ws) => {\n      ws.send({\n        type: 'login',\n        data: getCookies('token'),\n      });\n      let that = this;\n      ws.$on('ADMIN_NEW_PUSH', function (data) {\n        that.getNotict();\n      });\n\n      ws.$on('NEW_ORDER', function (data) {\n        that.$Notice.info({\n          title: '新订单',\n          duration: 8,\n          desc: '您有一个新的订单,ID为(' + data.order_id + '),请注意查看',\n        });\n        if (this.newOrderAudioLink) this.newOrderAudioLink.play();\n        that.messageList.push({\n          title: '新订单提醒',\n          icon: 'md-bulb',\n          iconColor: '#87d068',\n          time: 0,\n          read: 0,\n        });\n      });\n      ws.$on('NEW_REFUND_ORDER', function (data) {\n        that.$Notice.warning({\n          title: '退款订单提醒',\n          duration: 8,\n          desc: '您有一个订单申请退款,ID为(' + data.order_id + '),请注意查看',\n        });\n        if (window.newOrderAudioLink) this.newOrderAudioLink.play();\n        that.messageList.push({\n          title: '退款订单提醒',\n          icon: 'md-information',\n          iconColor: '#fe5c57',\n          time: 0,\n          read: 0,\n        });\n      });\n      ws.$on('WITHDRAW', function (data) {\n        that.$Notice.warning({\n          title: '提现提醒',\n          duration: 8,\n          desc: '有用户申请提现,编号为(' + data.id + '),请注意查看',\n        });\n        that.messageList.push({\n          title: '退款订单提醒',\n          icon: 'md-people',\n          iconColor: '#f06292',\n          time: 0,\n          read: 0,\n        });\n      });\n      ws.$on('STORE_STOCK', function (data) {\n        that.$Notice.warning({\n          title: '库存预警',\n          duration: 8,\n          desc: '商品ID为(' + data.id + ')的库存不足啦,请注意查看~',\n        });\n        that.messageList.push({\n          title: '库存预警',\n          icon: 'md-information',\n          iconColor: '#fe5c57',\n          time: 0,\n          read: 0,\n        });\n      });\n      ws.$on('PAY_SMS_SUCCESS', function (data) {\n        that.$Notice.info({\n          title: '短信充值成功',\n          duration: 8,\n          desc: '恭喜您充值' + data.price + '元，获得' + data.number + '条短信',\n        });\n        that.messageList.push({\n          title: '短信充值成功',\n          icon: 'md-bulb',\n          iconColor: '#87d068',\n          time: 0,\n          read: 0,\n        });\n      });\n    });\n  },\n  filters: {\n    // 1 待发货 2 库存报警  3评论回复  4提现申请\n    msgType(type) {\n      let typeName;\n      switch (type) {\n        case 1:\n          typeName = '待发货订单提醒';\n          break;\n        case 2:\n          typeName = '库存报警';\n          break;\n        case 3:\n          typeName = '库存报警';\n          break;\n        case 4:\n          typeName = '库存报警';\n          break;\n        default:\n          typeName = '其它';\n      }\n      return typeName;\n    },\n  },\n  methods: {\n    // 全部已读点击\n    onAllReadClick() {\n      this.newsList = [];\n    },\n    // 前往通知中心点击\n    onGoToGiteeClick() {},\n    getNotict() {\n      jnoticeRequest()\n        .then((res) => {\n          this.newsList = res.data || [];\n          this.$emit('haveNews', !!this.newsList.length);\n        })\n        .catch(() => {});\n    },\n    jumpUrl(url) {\n      this.$router.push({ path: url });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.layout-navbars-breadcrumb-user-news {\n  .head-box {\n    display: flex;\n    border-bottom: 1px solid var(--prev-border-color-lighter);\n    box-sizing: border-box;\n    color: var(--prev-color-text-primary);\n    justify-content: space-between;\n    height: 35px;\n    align-items: center;\n    .head-box-btn {\n      color: var(--prev-color-primary);\n      font-size: 13px;\n      cursor: pointer;\n      opacity: 0.8;\n      &:hover {\n        opacity: 1;\n      }\n    }\n  }\n  .content-box {\n    font-size: 13px;\n    .content-box-item {\n      padding-top: 12px;\n      &:last-of-type {\n        padding-bottom: 12px;\n      }\n      .content-box-msg {\n        color: var(--prev-color-text-secondary);\n        margin-top: 5px;\n        margin-bottom: 5px;\n      }\n      .content-box-time {\n        color: var(--prev-color-text-secondary);\n      }\n    }\n    .content-box-empty {\n      height: 260px;\n      display: flex;\n      .content-box-empty-margin {\n        margin: auto;\n        text-align: center;\n        i {\n          font-size: 60px;\n        }\n      }\n    }\n  }\n  .foot-box {\n    height: 35px;\n    color: var(--prev-color-primary);\n    font-size: 13px;\n    cursor: pointer;\n    opacity: 0.8;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-top: 1px solid var(--prev-border-color-lighter);\n    &:hover {\n      opacity: 1;\n    }\n  }\n  ::v-deep(.el-empty__description p) {\n    font-size: 13px;\n  }\n}\n</style>\n"]}]}