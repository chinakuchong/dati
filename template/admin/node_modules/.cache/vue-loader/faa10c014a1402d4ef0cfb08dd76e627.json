{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/components/diyComponents/c_goods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/components/diyComponents/c_goods.vue","mtime":1689324015142},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2dWVkcmFnZ2FibGUgZnJvbSAndnVlZHJhZ2dhYmxlJzsKaW1wb3J0IGdvb2RzTGlzdCBmcm9tICdAL2NvbXBvbmVudHMvZ29vZHNMaXN0JzsKaW1wb3J0IHNvcnRMaXN0IGZyb20gJ0AvY29tcG9uZW50cy9zb3J0TGlzdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY19nb29kcycsCiAgcHJvcHM6IHsKICAgIG5hbWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgfSwKICAgIGNvbmZpZ0RhdGE6IHsKICAgICAgdHlwZTogbnVsbCwKICAgIH0sCiAgICBjb25maWdOdW06IHsKICAgICAgdHlwZTogTnVtYmVyIHwgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZGVmYXVsdCcsCiAgICB9LAogIH0sCiAgY29tcG9uZW50czogewogICAgZ29vZHNMaXN0LAogICAgc29ydExpc3QsCiAgICBkcmFnZ2FibGU6IHZ1ZWRyYWdnYWJsZSwKICB9LAogIHdhdGNoOiB7CiAgICBjb25maWdEYXRhOiB7CiAgICAgIGhhbmRsZXIoblZhbCwgb1ZhbCkgewogICAgICAgIHRoaXMuZGVmYXVsdHMgPSBuVmFsW3RoaXMuY29uZmlnTnVtXTsKICAgICAgICBsZXQgZ29vZFR5cGUgPSBuVmFsW3RoaXMuY29uZmlnTnVtXS50aXRsZUluZm8gPyBuVmFsW3RoaXMuY29uZmlnTnVtXS50aXRsZUluZm8udHlwZSA6IDA7CiAgICAgICAgdGhpcy50eXBlID0gblZhbFt0aGlzLmNvbmZpZ051bV0uc2VsZWN0Q29uZmlnLnR5cGUKICAgICAgICAgID8gblZhbFt0aGlzLmNvbmZpZ051bV0uc2VsZWN0Q29uZmlnLnR5cGUKICAgICAgICAgIDogZ29vZFR5cGUKICAgICAgICAgID8gZ29vZFR5cGUKICAgICAgICAgIDogMDsKICAgICAgICBzd2l0Y2ggKHRoaXMudHlwZSkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB0aGlzLnRpdGxlcyA9ICfllYblk4HliJfooagnOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgdGhpcy50aXRsZXMgPSAn5YiG57G75YiX6KGoJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIHRoaXMudGl0bGVzID0gJ+egjeS7t+WIl+ihqCc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICB0aGlzLnRpdGxlcyA9ICfnp5LmnYDliJfooagnOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgdGhpcy50aXRsZXMgPSAn5ou85Zui5YiX6KGoJzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBkZWVwOiB0cnVlLAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtb2RhbHM6IGZhbHNlLAogICAgICBnb29kc0xpc3Q6IFtdLAogICAgICB0ZW1wR29vZHM6IFtdLAogICAgICBkZWZhdWx0czoge30sCiAgICAgIHR5cGU6ICcnLAogICAgICBpc19uZXc6ICcnLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICB0aXRsZXM6ICcnLAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmRlZmF1bHRzID0gdGhpcy5jb25maWdEYXRhW3RoaXMuY29uZmlnTnVtXTsKICAgIHRoaXMuaXNfbmV3ID0gdGhpcy5jb25maWdEYXRhW3RoaXMuY29uZmlnTnVtXS5pc19uZXc7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRQcm9kdWN0RGl5KGRhdGEpIHsKICAgICAgdGhpcy50ZW1wR29vZHMgPSBkYXRhOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMudGVtcEdvb2RzID0gW107CiAgICB9LAogICAgLy/lr7nosaHmlbDnu4Tljrvph43vvJsKICAgIHVuaXF1ZShhcnIpIHsKICAgICAgY29uc3QgcmVzID0gbmV3IE1hcCgpOwogICAgICByZXR1cm4gYXJyLmZpbHRlcigoYXJyKSA9PiAhcmVzLmhhcyhhcnIuaWQpICYmIHJlcy5zZXQoYXJyLmlkLCAxKSk7CiAgICB9LAogICAgb2soKSB7CiAgICAgIGlmICghdGhpcy50ZW1wR29vZHMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn6K+35YWI6YCJ5oup5ZWG5ZOBJyk7CiAgICAgIH0KICAgICAgbGV0IGxpc3QgPSB0aGlzLmRlZmF1bHRzLmdvb2RzTGlzdC5saXN0OwogICAgICBsaXN0LnB1c2guYXBwbHkobGlzdCwgdGhpcy50ZW1wR29vZHMpOwogICAgICAvLyBsaXN0LnB1c2godGhpcy50ZW1wR29vZHMpOwogICAgICBsZXQgcGljTGlzdCA9IHRoaXMudW5pcXVlKGxpc3QpOwogICAgICB0aGlzLmRlZmF1bHRzLmdvb2RzTGlzdC5saXN0ID0gcGljTGlzdDsKICAgICAgLy8gdGhpcy5kZWZhdWx0cy5nb29kc0xpc3QubGlzdC5wdXNoKHRoaXMudGVtcEdvb2RzKTsKICAgIH0sCiAgICBiaW5kRGVsZXRlKGluZGV4KSB7CiAgICAgIHRoaXMuZGVmYXVsdHMuZ29vZHNMaXN0Lmxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["c_goods.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"c_goods.vue","sourceRoot":"src/components/diyComponents","sourcesContent":["<template>\n  <div class=\"goods-box\" v-if=\"defaults.goodsList\">\n    <div class=\"wrapper\">\n      <draggable class=\"dragArea list-group\" :list=\"defaults.goodsList.list\" group=\"peoples\">\n        <div\n          class=\"item\"\n          v-for=\"(goods, index) in defaults.goodsList.list\"\n          :key=\"index\"\n          v-if=\"defaults.goodsList.list.length\"\n        >\n          <img :src=\"type == 1 ? goods.pic : goods.image\" alt=\"\" />\n          <span class=\"iconfont icondel_1\" @click.stop=\"bindDelete(index)\"></span>\n        </div>\n        <div class=\"add-item item\" @click=\"modals = true\"><span class=\"iconfont iconaddto\"></span></div>\n      </draggable>\n    </div>\n\n    <Modal\n      v-model=\"modals\"\n      :loading=\"loading\"\n      :title=\"titles\"\n      class=\"paymentFooter\"\n      :class=\"type ? '' : 'middleTop'\"\n      scrollable\n      width=\"900\"\n      @on-cancel=\"cancel\"\n      @on-ok=\"ok\"\n    >\n      <sort-list ref=\"goodslist\" @getProductDiy=\"getProductDiy\" v-if=\"modals && type == 1\"></sort-list>\n      <goods-list\n        ref=\"goodslist\"\n        @getProductDiy=\"getProductDiy\"\n        :ischeckbox=\"true\"\n        :type=\"type\"\n        :is_new=\"is_new\"\n        :diy=\"true\"\n        v-if=\"modals && type != 1\"\n      ></goods-list>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport vuedraggable from 'vuedraggable';\nimport goodsList from '@/components/goodsList';\nimport sortList from '@/components/sortList';\nexport default {\n  name: 'c_goods',\n  props: {\n    name: {\n      type: String,\n    },\n    configData: {\n      type: null,\n    },\n    configNum: {\n      type: Number | String,\n      default: 'default',\n    },\n  },\n  components: {\n    goodsList,\n    sortList,\n    draggable: vuedraggable,\n  },\n  watch: {\n    configData: {\n      handler(nVal, oVal) {\n        this.defaults = nVal[this.configNum];\n        let goodType = nVal[this.configNum].titleInfo ? nVal[this.configNum].titleInfo.type : 0;\n        this.type = nVal[this.configNum].selectConfig.type\n          ? nVal[this.configNum].selectConfig.type\n          : goodType\n          ? goodType\n          : 0;\n        switch (this.type) {\n          case 0:\n            this.titles = '商品列表';\n            break;\n          case 1:\n            this.titles = '分类列表';\n            break;\n          case 8:\n            this.titles = '砍价列表';\n            break;\n          case 2:\n            this.titles = '秒杀列表';\n            break;\n          case 3:\n            this.titles = '拼团列表';\n            break;\n          default:\n        }\n      },\n      immediate: true,\n      deep: true,\n    },\n  },\n  data() {\n    return {\n      modals: false,\n      goodsList: [],\n      tempGoods: [],\n      defaults: {},\n      type: '',\n      is_new: '',\n      loading: true,\n      titles: '',\n    };\n  },\n  created() {\n    this.defaults = this.configData[this.configNum];\n    this.is_new = this.configData[this.configNum].is_new;\n  },\n  methods: {\n    getProductDiy(data) {\n      this.tempGoods = data;\n      this.loading = false;\n    },\n    cancel() {\n      this.tempGoods = [];\n    },\n    //对象数组去重；\n    unique(arr) {\n      const res = new Map();\n      return arr.filter((arr) => !res.has(arr.id) && res.set(arr.id, 1));\n    },\n    ok() {\n      if (!this.tempGoods.length) {\n        return this.$Message.warning('请先选择商品');\n      }\n      let list = this.defaults.goodsList.list;\n      list.push.apply(list, this.tempGoods);\n      // list.push(this.tempGoods);\n      let picList = this.unique(list);\n      this.defaults.goodsList.list = picList;\n      // this.defaults.goodsList.list.push(this.tempGoods);\n    },\n    bindDelete(index) {\n      this.defaults.goodsList.list.splice(index, 1);\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.middleTop /deep/.ivu-modal-wrap .ivu-modal{\n    top:50%!important;\n    margin-top:-350px;\n}\n.goods-box\n    padding 16px 0\n    margin-bottom 16px\n    border-top 1px solid rgba(0,0,0,0.05)\n    border-bottom 1px solid rgba(0,0,0,0.05)\n    .wrapper,.list-group\n        display flex\n        flex-wrap wrap\n    .add-item\n        display flex\n        align-items center\n        justify-content center\n        width 80px\n        height 80px\n        margin-bottom 10px\n        background #F7F7F7\n        .iconfont\n            font-size 18px\n            color #D8D8D8\n    .item\n        position relative\n        width 80px\n        height 80px\n        margin-bottom 20px\n        margin-right 12px\n        &:nth-child(4n)\n           margin-right 0\n        img\n            width 100%\n            height 100%\n        .icondel_1\n            position absolute\n            right -10px\n            top -16px\n            color #999999\n            font-size 28px\n            cursor pointer\n</style>\n"]}]}