{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/pages/statistic/user/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/pages/statistic/user/index.vue","mtime":1689324015269},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB1c2VySW5mbyBmcm9tICcuL2NvbXBvbmVudHMvdXNlckluZm8nOwppbXBvcnQgd2VjaGV0SW5mbyBmcm9tICcuL2NvbXBvbmVudHMvd2VjaGV0SW5mbyc7CmltcG9ydCB1c2VyUmVnaW9uIGZyb20gJy4vY29tcG9uZW50cy91c2VyUmVnaW9uJzsKaW1wb3J0IHsgc3RhdGlzdGljVXNlckV4Y2VsIH0gZnJvbSAnQC9hcGkvc3RhdGlzdGljJzsKaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvdmFsaWRhdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2luZGV4JywKICBjb21wb25lbnRzOiB7CiAgICB1c2VySW5mbywKICAgIHdlY2hldEluZm8sCiAgICB1c2VyUmVnaW9uLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9wdGlvbnM6IHRoaXMuJHRpbWVPcHRpb25zLAogICAgICBmb3JtSW5saW5lOiB7CiAgICAgICAgY2hhbm5lbF90eXBlOiAnJywKICAgICAgICBkYXRhOiAnJywKICAgICAgfSwKICAgICAgY2hhbm5lbF90eXBlOiAnYWxsJywKICAgICAgdGltZVZhbDogW10sCiAgICAgIGlzU2hvdzogZmFsc2UsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGNvbnN0IGVuZCA9IG5ldyBEYXRlKCk7CiAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCk7CiAgICBzdGFydC5zZXRUaW1lKHN0YXJ0LnNldFRpbWUobmV3IERhdGUobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpLCBuZXcgRGF0ZSgpLmdldE1vbnRoKCksIG5ldyBEYXRlKCkuZ2V0RGF0ZSgpIC0gMjkpKSk7CiAgICB0aGlzLnRpbWVWYWwgPSBbc3RhcnQsIGVuZF07CiAgICB0aGlzLmZvcm1JbmxpbmUuZGF0YSA9IGZvcm1hdERhdGUoc3RhcnQsICd5eXl5L01NL2RkJykgKyAnLScgKyBmb3JtYXREYXRlKGVuZCwgJ3l5eXkvTU0vZGQnKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYW5nZVR4dCgpIHsKICAgICAgdGhpcy5mb3JtSW5saW5lLmNoYW5uZWxfdHlwZSA9IHRoaXMuY2hhbm5lbF90eXBlID09PSAnYWxsJyA/ICcnIDogdGhpcy5jaGFubmVsX3R5cGU7CiAgICB9LAogICAgLy8g5a+85Ye6CiAgICBleGNlbCgpIHsKICAgICAgc3RhdGlzdGljVXNlckV4Y2VsKHRoaXMuZm9ybUlubGluZSkudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgcmVzLmRhdGEudXJsLm1hcCgoaXRlbSkgPT4gewogICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBpdGVtOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDlhbfkvZPml6XmnJ8KICAgIG9uY2hhbmdlVGltZShlKSB7CiAgICAgIHRoaXMudGltZVZhbCA9IGU7CiAgICAgIHRoaXMuZm9ybUlubGluZS5kYXRhID0gdGhpcy50aW1lVmFsLmpvaW4oJy0nKTsKICAgIH0sCiAgICBoYW5kbGVTdWJtaXQoKSB7CiAgICAgIHRoaXMuJHJlZnMudXNlckluZm9zLmdldFN0YXRpc3RpY3MoKTsKICAgICAgdGhpcy4kcmVmcy51c2VySW5mb3MuZ2V0VHJlbmQoKTsKICAgICAgdGhpcy4kcmVmcy51c2VyUmVnaW9ucy5nZXRUcmVuZCgpOwogICAgICB0aGlzLiRyZWZzLnVzZXJSZWdpb25zLmdldFNleCgpOwogICAgICBpZiAodGhpcy5mb3JtSW5saW5lLmNoYW5uZWxfdHlwZSA9PT0gJ3dlY2hhdCcpIHsKICAgICAgICB0aGlzLmlzU2hvdyA9IHRydWU7CiAgICAgICAgdGhpcy4kcmVmcy53ZWNoZXRJbmZvcy5nZXRTdGF0aXN0aWNzKCk7CiAgICAgICAgdGhpcy4kcmVmcy53ZWNoZXRJbmZvcy5nZXRUcmVuZCgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNTaG93ID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/pages/statistic/user","sourcesContent":["<template>\n  <div class=\"article-manager\">\n    <div class=\"i-layout-page-header\">\n      <Form ref=\"formInline\" :model=\"formInline\" inline>\n        <FormItem class=\"mr20\">\n          用户渠道:\n          <Select v-model=\"channel_type\" style=\"width: 300px\" placeholder=\"用户渠道\" @on-change=\"changeTxt\">\n            <Option value=\"all\">全部</Option>\n            <Option value=\"wechat\">公众号</Option>\n            <Option value=\"routine\">小程序</Option>\n            <Option value=\"h5\">H5</Option>\n            <Option value=\"pc\">PC</Option>\n          </Select>\n        </FormItem>\n        <FormItem>\n          选择时间:\n          <DatePicker\n            :editable=\"false\"\n            :clearable=\"false\"\n            @on-change=\"onchangeTime\"\n            :value=\"timeVal\"\n            format=\"yyyy/MM/dd\"\n            type=\"daterange\"\n            placement=\"bottom-start\"\n            placeholder=\"请选择时间\"\n            style=\"width: 300px\"\n            class=\"mr20\"\n            :options=\"options\"\n          ></DatePicker>\n        </FormItem>\n        <FormItem>\n          <Button type=\"primary\" @click=\"handleSubmit('formInline')\">查询</Button>\n        </FormItem>\n        <FormItem>\n          <Button type=\"primary\" @click=\"excel\">导出</Button>\n        </FormItem>\n      </Form>\n    </div>\n    <user-info :formInline=\"formInline\" ref=\"userInfos\" key=\"1\"></user-info>\n    <wechet-info :formInline=\"formInline\" ref=\"wechetInfos\" v-if=\"isShow\" key=\"2\"></wechet-info>\n    <user-region :formInline=\"formInline\" ref=\"userRegions\" key=\"3\"></user-region>\n  </div>\n</template>\n\n<script>\nimport userInfo from './components/userInfo';\nimport wechetInfo from './components/wechetInfo';\nimport userRegion from './components/userRegion';\nimport { statisticUserExcel } from '@/api/statistic';\nimport { formatDate } from '@/utils/validate';\nexport default {\n  name: 'index',\n  components: {\n    userInfo,\n    wechetInfo,\n    userRegion,\n  },\n  data() {\n    return {\n      options: this.$timeOptions,\n      formInline: {\n        channel_type: '',\n        data: '',\n      },\n      channel_type: 'all',\n      timeVal: [],\n      isShow: false,\n    };\n  },\n  created() {\n    const end = new Date();\n    const start = new Date();\n    start.setTime(start.setTime(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() - 29)));\n    this.timeVal = [start, end];\n    this.formInline.data = formatDate(start, 'yyyy/MM/dd') + '-' + formatDate(end, 'yyyy/MM/dd');\n  },\n  methods: {\n    changeTxt() {\n      this.formInline.channel_type = this.channel_type === 'all' ? '' : this.channel_type;\n    },\n    // 导出\n    excel() {\n      statisticUserExcel(this.formInline).then(async (res) => {\n        res.data.url.map((item) => {\n          window.location.href = item;\n        });\n      });\n    },\n    // 具体日期\n    onchangeTime(e) {\n      this.timeVal = e;\n      this.formInline.data = this.timeVal.join('-');\n    },\n    handleSubmit() {\n      this.$refs.userInfos.getStatistics();\n      this.$refs.userInfos.getTrend();\n      this.$refs.userRegions.getTrend();\n      this.$refs.userRegions.getSex();\n      if (this.formInline.channel_type === 'wechat') {\n        this.isShow = true;\n        this.$refs.wechetInfos.getStatistics();\n        this.$refs.wechetInfos.getTrend();\n      } else {\n        this.isShow = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.ivu-form-item {\n  padding-bottom: 10px;\n  margin-bottom: 0;\n}\n</style>\n"]}]}