{"remainingRequest":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js??ref--0-2!/Volumes/mac/webwork/2023/dati/template/admin/src/components/uploadPictures/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/mac/webwork/2023/dati/template/admin/src/components/uploadPictures/index.vue","mtime":1689324015171},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/mac/webwork/2023/dati/template/admin/node_modules/iview-loader/index.js","mtime":1570440814000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgZ2V0Q2F0ZWdvcnlMaXN0QXBpLAogIGNyZWF0ZUFwaSwKICBmaWxlTGlzdEFwaSwKICBjYXRlZ29yeUVkaXRBcGksCiAgbW92ZUFwaSwKICBmaWxlVXBkYXRlQXBpLAp9IGZyb20gJ0AvYXBpL3VwbG9hZFBpY3R1cmVzJzsKaW1wb3J0IFNldHRpbmcgZnJvbSAnQC9zZXR0aW5nJzsKaW1wb3J0IHsgZ2V0Q29va2llcyB9IGZyb20gJ0AvbGlicy91dGlsJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICd1cGxvYWRQaWN0dXJlcycsCiAgLy8gY29tcG9uZW50czogeyBlZGl0RnJvbSB9LAogIHByb3BzOiB7CiAgICBpc0Nob2ljZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnLAogICAgfSwKICAgIGdyaWRCdG46IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIGdyaWRQaWM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIGlzU2hvdzogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEsCiAgICB9LAogICAgcGFnZUxpbWl0OiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMCwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3BpblNob3c6IGZhbHNlLAogICAgICBmaWxlVXJsOiBTZXR0aW5nLmFwaUJhc2VVUkwgKyAnL2ZpbGUvdXBsb2FkJywKICAgICAgbW9kYWxQaWM6IGZhbHNlLAogICAgICB0cmVlRGF0YTogW10sCiAgICAgIHRyZWVEYXRhMjogW10sCiAgICAgIHBpY3RydWVMaXN0OiBbXSwKICAgICAgdXBsb2FkRGF0YToge30sIC8vIOS4iuS8oOWPguaVsAogICAgICBjaGVja1BpY0xpc3Q6IFtdLAogICAgICB1cGxvYWROYW1lOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgIH0sCiAgICAgIEZyb21EYXRhOiBudWxsLAogICAgICB0cmVlSWQ6IDAsCiAgICAgIGlzSnVkZ2U6IGZhbHNlLAogICAgICBidXR0b25Qcm9wczogewogICAgICAgIHR5cGU6ICdkZWZhdWx0JywKICAgICAgICBzaXplOiAnc21hbGwnLAogICAgICB9LAogICAgICBmaWxlRGF0YTogewogICAgICAgIHBpZDogMCwKICAgICAgICBwYWdlOiAxLAogICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VMaW1pdCB8fCAxOCwKICAgICAgfSwKICAgICAgdG90YWw6IDAsCiAgICAgIHBpZHM6IDAsCiAgICAgIGxpc3Q6IFtdLAogICAgICBtb2RhbFRpdGxlU3M6ICcnLAogICAgICBpc1Nob3dQaWM6IGZhbHNlLAogICAgICBoZWFkZXI6IHt9LAogICAgICBpZHM6IFtdLCAvLyDpgInkuK3pmYTku7bnmoRpZOmbhuWQiAogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFRva2VuKCk7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMuZ2V0RmlsZUxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGVudGVyTW91c2UoaXRlbSkgewogICAgICBpdGVtLnJlYWxOYW1lID0gIWl0ZW0ucmVhbE5hbWU7CiAgICB9LAogICAgZW50ZXJMZWF2ZShpdGVtKSB7CiAgICAgIGl0ZW0uaXNTaG93RWRpdCA9ICFpdGVtLmlzU2hvd0VkaXQ7CiAgICB9LAogICAgLy8g5LiK5Lyg5aS06YOodG9rZW4KICAgIGdldFRva2VuKCkgewogICAgICB0aGlzLmhlYWRlclsnQXV0aG9yaS16YXRpb24nXSA9ICdCZWFyZXIgJyArIGdldENvb2tpZXMoJ3Rva2VuJyk7CiAgICB9LAogICAgLy8g5qCR54q25Zu+CiAgICByZW5kZXJDb250ZW50KGgsIHsgcm9vdCwgbm9kZSwgZGF0YSB9KSB7CiAgICAgIGxldCBvcGVyYXRlID0gW107CiAgICAgIGlmIChkYXRhLnBpZCA9PSAwKSB7CiAgICAgICAgb3BlcmF0ZS5wdXNoKAogICAgICAgICAgaCgKICAgICAgICAgICAgJ2RpdicsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjbGFzczogWydpdnUtZHJvcGRvd24taXRlbSddLAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZChyb290LCBub2RlLCBkYXRhKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ+a3u+WKoOWIhuexuycsCiAgICAgICAgICApLAogICAgICAgICk7CiAgICAgIH0KICAgICAgaWYgKGRhdGEuaWQgIT09ICcnKSB7CiAgICAgICAgb3BlcmF0ZS5wdXNoKAogICAgICAgICAgaCgKICAgICAgICAgICAgJ2RpdicsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBjbGFzczogWydpdnUtZHJvcGRvd24taXRlbSddLAogICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICBjbGljazogKCkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLmVkaXRQaWMocm9vdCwgbm9kZSwgZGF0YSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICfnvJbovpHliIbnsbsnLAogICAgICAgICAgKSwKICAgICAgICAgIGgoCiAgICAgICAgICAgICdkaXYnLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgY2xhc3M6IFsnaXZ1LWRyb3Bkb3duLWl0ZW0nXSwKICAgICAgICAgICAgICBvbjogewogICAgICAgICAgICAgICAgY2xpY2s6ICgpID0+IHsKICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUocm9vdCwgbm9kZSwgZGF0YSwgJ+WIhuexuycpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICAn5Yig6Zmk5YiG57G7JywKICAgICAgICAgICksCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gaCgKICAgICAgICAnc3BhbicsCiAgICAgICAgewogICAgICAgICAgY2xhc3M6IFsnaXZ1LXNwYW4nXSwKICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLAogICAgICAgICAgICB3aWR0aDogJzg4JScsCiAgICAgICAgICAgIGhlaWdodDogJzMycHgnLAogICAgICAgICAgICBsaW5lSGVpZ2h0OiAnMzJweCcsCiAgICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLAogICAgICAgICAgICBjb2xvcjogJ3JnYmEoMCwwLDAsMC42KScsCiAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLAogICAgICAgICAgfSwKICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgIG1vdXNlZW50ZXI6ICgpID0+IHsKICAgICAgICAgICAgICB0aGlzLm9uTW91c2VPdmVyKHJvb3QsIG5vZGUsIGRhdGEpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBtb3VzZWxlYXZlOiAoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5vbk1vdXNlT3Zlcihyb290LCBub2RlLCBkYXRhKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gY2xpY2s6IChlKSA9PiB7CiAgICAgICAgICAgIC8vICAgdGhpcy5hcHBlbmRCdG4ocm9vdCwgbm9kZSwgZGF0YSwgZSk7CiAgICAgICAgICAgIC8vIH0sCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgWwogICAgICAgICAgaCgKICAgICAgICAgICAgJ3NwYW4nLAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgIGNsaWNrOiAoZSkgPT4gewogICAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEJ0bihyb290LCBub2RlLCBkYXRhLCBlKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YS50aXRsZSwKICAgICAgICAgICksCiAgICAgICAgICBoKAogICAgICAgICAgICAnZGl2JywKICAgICAgICAgICAgewogICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJywKICAgICAgICAgICAgICAgIGZsb2F0OiAncmlnaHQnLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIFsKICAgICAgICAgICAgICBoKCdJY29uJywgewogICAgICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2lvcy1tb3JlJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogJzhweCcsCiAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMjBweCcsCiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdpbmxpbmUnLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uOiB7CiAgICAgICAgICAgICAgICAgIGNsaWNrOiAoZSkgPT4gewogICAgICAgICAgICAgICAgICAgIHRoaXMub25DbGljayhyb290LCBub2RlLCBkYXRhLCBlKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgaCgKICAgICAgICAgICAgICAgICdkaXYnLAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICBjbGFzczogWydyaWdodC1tZW51IGl2dS1wb3B0aXAtaW5uZXInXSwKICAgICAgICAgICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzgwcHgnLAogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLAogICAgICAgICAgICAgICAgICAgIHpJbmRleDogJzknLAogICAgICAgICAgICAgICAgICAgIHRvcDogJzAnLAogICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnMCcsCiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZGF0YS5mbGFnMiA/ICdibG9jaycgOiAnbm9uZScsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb3BlcmF0ZSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICBdLAogICAgICAgICAgKSwKICAgICAgICBdLAogICAgICApOwogICAgfSwKICAgIC8vIHJlbmRlckNvbnRlbnQgKGgsIHsgcm9vdCwgbm9kZSwgZGF0YSB9KSB7CiAgICAvLyAgICAgbGV0IGFjdGlvbkRhdGEgPSBbXTsKICAgIC8vICAgICBpZiAoZGF0YS5pZCAhPT0gJycgJiYgZGF0YS5waWQgPT0gMCkgewogICAgLy8gICAgICAgICBhY3Rpb25EYXRhLnB1c2goaCgnQnV0dG9uJywgewogICAgLy8gICAgICAgICAgICAgcHJvcHM6IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYnV0dG9uUHJvcHMsIHsKICAgIC8vICAgICAgICAgICAgICAgICBpY29uOiAnaW9zLWFkZCcKICAgIC8vICAgICAgICAgICAgIH0pLAogICAgLy8gICAgICAgICAgICAgc3R5bGU6IHsKICAgIC8vICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodDogJzhweCcsCiAgICAvLyAgICAgICAgICAgICAgICAgZGlzcGxheTogZGF0YS5mbGFnID8gJ2lubGluZScgOiAnbm9uZScKICAgIC8vICAgICAgICAgICAgIH0sCiAgICAvLyAgICAgICAgICAgICBvbjogewogICAgLy8gICAgICAgICAgICAgICAgIGNsaWNrOiAoKSA9PiB7IHRoaXMuYXBwZW5kKHJvb3QsIG5vZGUsIGRhdGEpIH0KICAgIC8vCiAgICAvLyAgICAgICAgICAgICB9CiAgICAvLyAgICAgICAgIH0pKTsKICAgIC8vICAgICB9CiAgICAvLyAgICAgaWYgKGRhdGEuaWQgIT09ICcnKSB7CiAgICAvLyAgICAgICAgIGFjdGlvbkRhdGEucHVzaChoKCdCdXR0b24nLCB7CiAgICAvLyAgICAgICAgICAgICBwcm9wczogT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5idXR0b25Qcm9wcywgewogICAgLy8gICAgICAgICAgICAgICAgIGljb246ICdtZC1jcmVhdGUnCiAgICAvLyAgICAgICAgICAgICB9KSwKICAgIC8vICAgICAgICAgICAgIHN0eWxlOiB7CiAgICAvLyAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQ6ICc4cHgnLAogICAgLy8gICAgICAgICAgICAgICAgIGRpc3BsYXk6IGRhdGEuZmxhZyA/ICdpbmxpbmUnIDogJ25vbmUnCiAgICAvLyAgICAgICAgICAgICB9LAogICAgLy8gICAgICAgICAgICAgb246IHsKICAgIC8vICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4geyB0aGlzLmVkaXRQaWMocm9vdCwgbm9kZSwgZGF0YSkgfQogICAgLy8gICAgICAgICAgICAgfQogICAgLy8gICAgICAgICB9KSk7CiAgICAvLyAgICAgICAgIGFjdGlvbkRhdGEucHVzaChoKCdCdXR0b24nLCB7CiAgICAvLyAgICAgICAgICAgICBwcm9wczogT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5idXR0b25Qcm9wcywgewogICAgLy8gICAgICAgICAgICAgICAgIGljb246ICdpb3MtcmVtb3ZlJwogICAgLy8gICAgICAgICAgICAgfSksCiAgICAvLyAgICAgICAgICAgICBzdHlsZTogewogICAgLy8gICAgICAgICAgICAgICAgIGRpc3BsYXk6IGRhdGEuZmxhZyA/ICdpbmxpbmUnIDogJ25vbmUnCiAgICAvLyAgICAgICAgICAgICB9LAogICAgLy8gICAgICAgICAgICAgb246IHsKICAgIC8vICAgICAgICAgICAgICAgICBjbGljazogKCkgPT4geyB0aGlzLnJlbW92ZShyb290LCBub2RlLCBkYXRhLCAn5YiG57G7JykgfQogICAgLy8gICAgICAgICAgICAgfQogICAgLy8gICAgICAgICB9KSk7CiAgICAvLyAgICAgfQogICAgLy8gICAgIHJldHVybiBoKCdkaXYnLCB7CiAgICAvLyAgICAgICAgIHN0eWxlOiB7CiAgICAvLyAgICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJywKICAgIC8vICAgICAgICAgICAgIHdpZHRoOiAnOTAlJwogICAgLy8gICAgICAgICB9LAogICAgLy8gICAgICAgICBvbjogewogICAgLy8gICAgICAgICAgICAgbW91c2VlbnRlcjogKCkgPT4geyB0aGlzLm9uTW91c2VPdmVyKHJvb3QsIG5vZGUsIGRhdGEpIH0sCiAgICAvLyAgICAgICAgICAgICBtb3VzZWxlYXZlOiAoKSA9PiB7IHRoaXMub25Nb3VzZU92ZXIocm9vdCwgbm9kZSwgZGF0YSkgfQogICAgLy8gICAgICAgICB9CiAgICAvLyAgICAgfSwgWwogICAgLy8gICAgICAgICBoKCdzcGFuJywgWwogICAgLy8gICAgICAgICAgICAgaCgnc3BhbicsIHsKICAgIC8vICAgICAgICAgICAgICAgICBzdHlsZTogewogICAgLy8gICAgICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJwogICAgLy8gICAgICAgICAgICAgICAgIH0sCiAgICAvLyAgICAgICAgICAgICAgICAgY2xhc3M6IFsnaXZ1LXRyZWUtdGl0bGUnXSwKICAgIC8vICAgICAgICAgICAgICAgICBvbjogewogICAgLy8gICAgICAgICAgICAgICAgICAgICBjbGljazogKGUpID0+IHsgdGhpcy5hcHBlbmRCdG4ocm9vdCwgbm9kZSwgZGF0YSwgZSkgfQogICAgLy8gICAgICAgICAgICAgICAgIH0KICAgIC8vICAgICAgICAgICAgIH0sIGRhdGEudGl0bGUpCiAgICAvLyAgICAgICAgIF0pLAogICAgLy8gICAgICAgICBoKCdzcGFuJywgewogICAgLy8gICAgICAgICAgICAgc3R5bGU6IHsKICAgIC8vICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJywKICAgIC8vICAgICAgICAgICAgICAgICBmbG9hdDogJ3JpZ2h0JwogICAgLy8gICAgICAgICAgICAgfQogICAgLy8gICAgICAgICB9LCBhY3Rpb25EYXRhKQogICAgLy8gICAgIF0pOwogICAgLy8gfSwKICAgIHJlbmRlckNvbnRlbnRTZWwoaCwgeyByb290LCBub2RlLCBkYXRhIH0pIHsKICAgICAgcmV0dXJuIGgoCiAgICAgICAgJ2RpdicsCiAgICAgICAgewogICAgICAgICAgc3R5bGU6IHsKICAgICAgICAgICAgZGlzcGxheTogJ2lubGluZS1ibG9jaycsCiAgICAgICAgICAgIHdpZHRoOiAnOTAlJywKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBbCiAgICAgICAgICBoKCdzcGFuJywgWwogICAgICAgICAgICBoKAogICAgICAgICAgICAgICdzcGFuJywKICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBzdHlsZTogewogICAgICAgICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjbGFzczogWydpdnUtdHJlZS10aXRsZSddLAogICAgICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICAgICAgY2xpY2s6IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVDaGVja0NoYW5nZShyb290LCBub2RlLCBkYXRhLCBlKTsKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBkYXRhLnRpdGxlLAogICAgICAgICAgICApLAogICAgICAgICAgXSksCiAgICAgICAgXSwKICAgICAgKTsKICAgIH0sCiAgICAvLyDkuIvmi4nmoJEKICAgIGhhbmRsZUNoZWNrQ2hhbmdlKHJvb3QsIG5vZGUsIGRhdGEsIGUpIHsKICAgICAgdGhpcy5saXN0ID0gW107CiAgICAgIC8vIHRoaXMucGlkcyA9IDA7CiAgICAgIGxldCB2YWx1ZSA9IGRhdGEuaWQ7CiAgICAgIGxldCB0aXRsZSA9IGRhdGEudGl0bGU7CiAgICAgIHRoaXMubGlzdC5wdXNoKHsKICAgICAgICB2YWx1ZSwKICAgICAgICB0aXRsZSwKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLmlkcy5sZW5ndGgpIHsKICAgICAgICB0aGlzLnBpZHMgPSB2YWx1ZTsKICAgICAgICB0aGlzLmdldE1vdmUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLndhcm5pbmcoJ+ivt+WFiOmAieaLqeWbvueJhycpOwogICAgICB9CiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuJHJlZnMucmVmZXJlbmNlLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCcuaXZ1LXRyZWUtdGl0bGUtc2VsZWN0ZWQnKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgIHNlbGVjdGVkW2ldLmNsYXNzTmFtZSA9ICdpdnUtdHJlZS10aXRsZSc7CiAgICAgIH0KICAgICAgZS5wYXRoWzBdLmNsYXNzTmFtZSA9ICdpdnUtdHJlZS10aXRsZSAgaXZ1LXRyZWUtdGl0bGUtc2VsZWN0ZWQnOyAvLyDlvZPliY3ngrnlh7vnmoTlhYPntKAKICAgIH0sCiAgICAvLyDnp7vliqjliIbnsbsKICAgIGdldE1vdmUoKSB7CiAgICAgIGxldCBkYXRhID0gewogICAgICAgIHBpZDogdGhpcy5waWRzLAogICAgICAgIGltYWdlczogdGhpcy5pZHMudG9TdHJpbmcoKSwKICAgICAgfTsKICAgICAgbW92ZUFwaShkYXRhKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgIHRoaXMuZ2V0RmlsZUxpc3QoKTsKICAgICAgICAgIHRoaXMucGlkcyA9IDA7CiAgICAgICAgICB0aGlzLmNoZWNrUGljTGlzdCA9IFtdOwogICAgICAgICAgdGhpcy5pZHMgPSBbXTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOWbvueJhwogICAgZWRpdFBpY0xpc3QodGl0KSB7CiAgICAgIHRoaXMudGl0cyA9IHRpdDsKICAgICAgbGV0IGlkcyA9IHsKICAgICAgICBpZHM6IHRoaXMuaWRzLnRvU3RyaW5nKCksCiAgICAgIH07CiAgICAgIGxldCBkZWxmcm9tRGF0YSA9IHsKICAgICAgICB0aXRsZTogJ+WIoOmZpOmAieS4reWbvueJhycsCiAgICAgICAgdXJsOiBgZmlsZS9maWxlL2RlbGV0ZWAsCiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgaWRzOiBpZHMsCiAgICAgIH07CiAgICAgIHRoaXMuJG1vZGFsU3VyZShkZWxmcm9tRGF0YSkKICAgICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICB0aGlzLmdldEZpbGVMaXN0KCk7CiAgICAgICAgICB0aGlzLmNoZWNrUGljTGlzdCA9IFtdOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g6byg5qCH56e75YWlIOenu+WHugogICAgb25Nb3VzZU92ZXIocm9vdCwgbm9kZSwgZGF0YSkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBkYXRhLmZsYWcgPSAhZGF0YS5mbGFnOwogICAgICBpZiAoZGF0YS5mbGFnMikgewogICAgICAgIGRhdGEuZmxhZzIgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIG9uQ2xpY2socm9vdCwgbm9kZSwgZGF0YSwgZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICBkYXRhLmZsYWcyID0gIWRhdGEuZmxhZzI7CiAgICB9LAogICAgLy8g54K55Ye75qCRCiAgICBhcHBlbmRCdG4ocm9vdCwgbm9kZSwgZGF0YSwgZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CgogICAgICB0aGlzLnRyZWVJZCA9IGRhdGEuaWQ7CiAgICAgIHRoaXMuZmlsZURhdGEucGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0RmlsZUxpc3QoKTsKICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy4kcmVmcy50cmVlLiRlbC5xdWVyeVNlbGVjdG9yQWxsKCcuaXZ1LXRyZWUtdGl0bGUtc2VsZWN0ZWQnKTsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKykgewogICAgICAgIHNlbGVjdGVkW2ldLmNsYXNzTmFtZSA9ICdpdnUtdHJlZS10aXRsZSc7CiAgICAgIH0KICAgICAgZS5wYXRoWzBdLmNsYXNzTmFtZSA9ICdpdnUtdHJlZS10aXRsZSAgaXZ1LXRyZWUtdGl0bGUtc2VsZWN0ZWQnOyAvLyDlvZPliY3ngrnlh7vnmoTlhYPntKAKICAgIH0sCiAgICAvLyDngrnlh7vmt7vliqAKICAgIGFwcGVuZChyb290LCBub2RlLCBkYXRhKSB7CiAgICAgIHRoaXMudHJlZUlkID0gZGF0YS5pZDsKICAgICAgdGhpcy5nZXRGcm9tKCk7CiAgICB9LAogICAgLy8g5Yig6Zmk5YiG57G7CiAgICByZW1vdmUocm9vdCwgbm9kZSwgZGF0YSwgdGl0KSB7CiAgICAgIHRoaXMudGl0cyA9IHRpdDsKICAgICAgbGV0IGRlbGZyb21EYXRhID0gewogICAgICAgIHRpdGxlOiAn5Yig6ZmkIFsgJyArIGRhdGEudGl0bGUgKyAnIF0gJyArICfliIbnsbsnLAogICAgICAgIHVybDogYGZpbGUvY2F0ZWdvcnkvJHtkYXRhLmlkfWAsCiAgICAgICAgbWV0aG9kOiAnREVMRVRFJywKICAgICAgICBpZHM6ICcnLAogICAgICB9OwogICAgICB0aGlzLiRtb2RhbFN1cmUoZGVsZnJvbURhdGEpCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgICB0aGlzLmNoZWNrUGljTGlzdCA9IFtdOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgLy8g56Gu6K6k5Yig6Zmk5qCRCiAgICAvLyBzdWJtaXRNb2RlbCAoKSB7CiAgICAvLyAgICAgaWYgKHRoaXMudGl0cyA9PT0gJ+WbvueJhycpIHsKICAgIC8vICAgICAgICAgdGhpcy5nZXRGaWxlTGlzdCgpOwogICAgLy8gICAgICAgICB0aGlzLmNoZWNrUGljTGlzdCA9IFtdOwogICAgLy8gICAgIH0gZWxzZSB7CiAgICAvLyAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgLy8gICAgICAgICB0aGlzLmNoZWNrUGljTGlzdCA9IFtdOwogICAgLy8gICAgIH0KICAgIC8vIH0sCiAgICAvLyDnvJbovpHmoJHooajljZUKICAgIGVkaXRQaWMocm9vdCwgbm9kZSwgZGF0YSkgewogICAgICB0aGlzLiRtb2RhbEZvcm0oY2F0ZWdvcnlFZGl0QXBpKGRhdGEuaWQpKS50aGVuKCgpID0+IHRoaXMuZ2V0TGlzdCgpKTsKICAgIH0sCiAgICAvLyDmkJzntKLliIbnsbsKICAgIGNoYW5nZVBhZ2UoKSB7CiAgICAgIHRoaXMuZ2V0TGlzdCgnc2VhcmNoJyk7CiAgICB9LAogICAgLy8g5YiG57G75YiX6KGo5qCRCiAgICBnZXRMaXN0KHR5cGUpIHsKICAgICAgbGV0IGRhdGEgPSB7CiAgICAgICAgdGl0bGU6ICflhajpg6jlm77niYcnLAogICAgICAgIGlkOiAnJywKICAgICAgICBwaWQ6IDAsCiAgICAgIH07CiAgICAgIGdldENhdGVnb3J5TGlzdEFwaSh0aGlzLnVwbG9hZE5hbWUpCiAgICAgICAgLnRoZW4oYXN5bmMgKHJlcykgPT4gewogICAgICAgICAgdGhpcy50cmVlRGF0YSA9IHJlcy5kYXRhLmxpc3Q7CiAgICAgICAgICB0aGlzLnRyZWVEYXRhLnVuc2hpZnQoZGF0YSk7CiAgICAgICAgICBpZiAodHlwZSAhPT0gJ3NlYXJjaCcpIHsKICAgICAgICAgICAgdGhpcy50cmVlRGF0YTIgPSBbLi4udGhpcy50cmVlRGF0YV07CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmFkZEZsYWcodGhpcy50cmVlRGF0YSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKHJlcykgPT4gewogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcihyZXMubXNnKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBsb2FkRGF0YShpdGVtLCBjYWxsYmFjaykgewogICAgICBnZXRDYXRlZ29yeUxpc3RBcGkoewogICAgICAgIHBpZDogaXRlbS5pZCwKICAgICAgfSkKICAgICAgICAudGhlbihhc3luYyAocmVzKSA9PiB7CiAgICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGEubGlzdDsKICAgICAgICAgIGNhbGxiYWNrKGRhdGEpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHt9KTsKICAgIH0sCiAgICBhZGRGbGFnKHRyZWVkYXRhKSB7CiAgICAgIHRyZWVkYXRhLm1hcCgoaXRlbSkgPT4gewogICAgICAgIHRoaXMuJHNldChpdGVtLCAnZmxhZycsIGZhbHNlKTsKICAgICAgICB0aGlzLiRzZXQoaXRlbSwgJ2ZsYWcyJywgZmFsc2UpOwogICAgICAgIGl0ZW0uY2hpbGRyZW4gJiYgdGhpcy5hZGRGbGFnKGl0ZW0uY2hpbGRyZW4pOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmlrDlu7rliIbnsbsKICAgIGFkZCgpIHsKICAgICAgdGhpcy50cmVlSWQgPSAwOwogICAgICB0aGlzLmdldEZyb20oKTsKICAgIH0sCiAgICAvLyDmlofku7bliJfooagKICAgIGdldEZpbGVMaXN0KCkgewogICAgICB0aGlzLmZpbGVEYXRhLnBpZCA9IHRoaXMudHJlZUlkOwogICAgICBmaWxlTGlzdEFwaSh0aGlzLmZpbGVEYXRhKQogICAgICAgIC50aGVuKGFzeW5jIChyZXMpID0+IHsKICAgICAgICAgIHJlcy5kYXRhLmxpc3QuZm9yRWFjaCgoZWwpID0+IHsKICAgICAgICAgICAgZWwuaXNTZWxlY3QgPSBmYWxzZTsKICAgICAgICAgICAgZWwuaXNFZGl0ID0gZmFsc2U7CiAgICAgICAgICAgIGVsLmlzU2hvd0VkaXQgPSBmYWxzZTsKICAgICAgICAgICAgZWwucmVhbE5hbWUgPSBmYWxzZTsKICAgICAgICAgICAgZWwubnVtID0gMDsKICAgICAgICAgICAgdGhpcy5lZGl0TmFtZShlbCk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMucGljdHJ1ZUxpc3QgPSByZXMuZGF0YS5saXN0OwoKICAgICAgICAgIGlmICh0aGlzLnBpY3RydWVMaXN0Lmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLmlzU2hvd1BpYyA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5pc1Nob3dQaWMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLmNvdW50OwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogICAgcGFnZUNoYW5nZShpbmRleCkgewogICAgICB0aGlzLmZpbGVEYXRhLnBhZ2UgPSBpbmRleDsKICAgICAgdGhpcy5nZXRGaWxlTGlzdCgpOwogICAgICB0aGlzLmNoZWNrUGljTGlzdCA9IFtdOwogICAgfSwKICAgIC8vIOaWsOW7uuWIhuexu+ihqOWNlQogICAgZ2V0RnJvbSgpIHsKICAgICAgdGhpcy4kbW9kYWxGb3JtKGNyZWF0ZUFwaSh7IGlkOiB0aGlzLnRyZWVJZCB9KSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOS4iuS8oOS5i+WJjQogICAgYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgLy8gaWYgKGZpbGUuc2l6ZSA+IDIwOTcxNTIpIHsKICAgICAgLy8gICB0aGlzLiRNZXNzYWdlLmVycm9yKGZpbGUubmFtZSArICLlpKflsI/otoXov4cyTSEiKTsKICAgICAgLy8gfSBlbHNlCiAgICAgIGlmICghL2ltYWdlXC9cdysvLnRlc3QoZmlsZS50eXBlKSkgewogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoJ+ivt+S4iuS8oOS7pWpwZ+OAgWpwZWfjgIFwbmfnrYnnu5PlsL7nmoTlm77niYfmlofku7YnKTsgLy9GaWxlRXh0LnRvTG93ZXJDYXNlKCkKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy51cGxvYWREYXRhID0gewogICAgICAgIHBpZDogdGhpcy50cmVlSWQsCiAgICAgIH07CiAgICAgIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXNvbHZlKHRydWUpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHByb21pc2U7CiAgICB9LAogICAgLy8g5LiK5Lyg5oiQ5YqfCiAgICBoYW5kbGVTdWNjZXNzKHJlcywgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2VzcyhyZXMubXNnKTsKICAgICAgICB0aGlzLmZpbGVEYXRhLnBhZ2UgPSAxOwogICAgICAgIHRoaXMuZ2V0RmlsZUxpc3QoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICB9CiAgICB9LAogICAgLy8g5YWz6ZetCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZUNhbmNlbCcpOwogICAgfSwKICAgIC8vIOmAieS4reWbvueJhwogICAgY2hhbmdJbWFnZShpdGVtLCBpbmRleCwgcm93KSB7CiAgICAgIGxldCBhY3RpdmVJbmRleCA9IDA7CiAgICAgIGlmICghaXRlbS5pc1NlbGVjdCkgewogICAgICAgIGl0ZW0uaXNTZWxlY3QgPSB0cnVlOwogICAgICAgIHRoaXMuY2hlY2tQaWNMaXN0LnB1c2goaXRlbSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaXRlbS5pc1NlbGVjdCA9IGZhbHNlOwogICAgICAgIHRoaXMuY2hlY2tQaWNMaXN0Lm1hcCgoZWwsIGluZGV4KSA9PiB7CiAgICAgICAgICBpZiAoZWwuYXR0X2lkID09IGl0ZW0uYXR0X2lkKSB7CiAgICAgICAgICAgIGFjdGl2ZUluZGV4ID0gaW5kZXg7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jaGVja1BpY0xpc3Quc3BsaWNlKGFjdGl2ZUluZGV4LCAxKTsKICAgICAgfQoKICAgICAgdGhpcy5pZHMgPSBbXTsKICAgICAgdGhpcy5jaGVja1BpY0xpc3QubWFwKChpdGVtLCBpKSA9PiB7CiAgICAgICAgdGhpcy5pZHMucHVzaChpdGVtLmF0dF9pZCk7CiAgICAgIH0pOwogICAgICB0aGlzLnBpY3RydWVMaXN0Lm1hcCgoZWwsIGkpID0+IHsKICAgICAgICBpZiAoZWwuaXNTZWxlY3QpIHsKICAgICAgICAgIHRoaXMuY2hlY2tQaWNMaXN0LmZpbHRlcigoZWwyLCBqKSA9PiB7CiAgICAgICAgICAgIGlmIChlbC5hdHRfaWQgPT0gZWwyLmF0dF9pZCkgewogICAgICAgICAgICAgIGVsLm51bSA9IGogKyAxOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZWwubnVtID0gMDsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOeCueWHu+S9v+eUqOmAieS4reWbvueJhwogICAgY2hlY2tQaWNzKCkgewogICAgICBpZiAodGhpcy5pc0Nob2ljZSA9PT0gJ+WNlemAiScpIHsKICAgICAgICBpZiAodGhpcy5jaGVja1BpY0xpc3QubGVuZ3RoID4gMSkgcmV0dXJuIHRoaXMuJE1lc3NhZ2Uud2FybmluZygn5pyA5aSa5Y+q6IO96YCJ5LiA5byg5Zu+54mHJyk7CiAgICAgICAgdGhpcy4kZW1pdCgnZ2V0UGljJywgdGhpcy5jaGVja1BpY0xpc3RbMF0pOwogICAgICB9IGVsc2UgewogICAgICAgIGxldCBtYXhMZW5ndGggPSB0aGlzLiRyb3V0ZS5xdWVyeS5tYXhMZW5ndGg7CiAgICAgICAgaWYgKG1heExlbmd0aCAhPSB1bmRlZmluZWQgJiYgdGhpcy5jaGVja1BpY0xpc3QubGVuZ3RoID4gTnVtYmVyKG1heExlbmd0aCkpCiAgICAgICAgICByZXR1cm4gdGhpcy4kTWVzc2FnZS53YXJuaW5nKCfmnIDlpJrlj6rog73pgIknICsgbWF4TGVuZ3RoICsgJ+W8oOWbvueJhycpOwogICAgICAgIHRoaXMuJGVtaXQoJ2dldFBpY0QnLCB0aGlzLmNoZWNrUGljTGlzdCk7CiAgICAgIH0KICAgIH0sCiAgICBlZGl0TmFtZShpdGVtKSB7CiAgICAgIGxldCBpdCA9IGl0ZW0ucmVhbF9uYW1lLnNwbGl0KCcuJyk7CiAgICAgIGxldCBpdDEgPSBpdFsxXSA9PSB1bmRlZmluZWQgPyBbXSA6IGl0WzFdOwogICAgICBsZXQgbGVuID0gaXRbMF0ubGVuZ3RoICsgaXQxLmxlbmd0aDsKICAgICAgaXRlbS5lZGl0TmFtZSA9IGxlbiA8IDEwID8gaXRlbS5yZWFsX25hbWUgOiBpdGVtLnJlYWxfbmFtZS5zdWJzdHIoMCwgMikgKyAnLi4uJyArIGl0ZW0ucmVhbF9uYW1lLnN1YnN0cigtNSwgNSk7CiAgICB9LAogICAgLy8g5L+u5pS55Zu+54mH5paH5a2X5LiK5LygCiAgICBiaW5kVHh0KGl0ZW0pIHsKICAgICAgaWYgKGl0ZW0ucmVhbF9uYW1lID09ICcnKSB7CiAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcign6K+35aGr5YaZ5YaF5a65Jyk7CiAgICAgIH0KICAgICAgZmlsZVVwZGF0ZUFwaShpdGVtLmF0dF9pZCwgewogICAgICAgIHJlYWxfbmFtZTogaXRlbS5yZWFsX25hbWUsCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgdGhpcy5lZGl0TmFtZShpdGVtKTsKICAgICAgICAgIGl0ZW0uaXNFZGl0ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKGVycm9yLm1zZyk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/uploadPictures","sourcesContent":["<template>\n  <div class=\"Modal\">\n    <Row class=\"colLeft\">\n      <Col :xl=\"6\" :lg=\"6\" :md=\"6\" :sm=\"6\" :xs=\"24\" class=\"colLeft\">\n        <div class=\"Nav\">\n          <div class=\"input\">\n            <Input\n              search\n              enter-button\n              placeholder=\"请输入分类名称\"\n              v-model=\"uploadName.name\"\n              style=\"width: 90%\"\n              @on-search=\"changePage\"\n            />\n          </div>\n          <div class=\"trees-coadd\">\n            <div class=\"scollhide\">\n              <div class=\"trees\">\n                <Tree :data=\"treeData\" :render=\"renderContent\" :load-data=\"loadData\" class=\"treeBox\" ref=\"tree\"></Tree>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Col>\n      <Col :xl=\"18\" :lg=\"18\" :md=\"18\" :sm=\"18\" :xs=\"24\" class=\"colLeft\">\n        <div class=\"conter\">\n          <div class=\"bnt acea-row row-middle\">\n            <Col span=\"24\">\n              <Button\n                type=\"primary\"\n                :disabled=\"checkPicList.length === 0\"\n                @click=\"checkPics\"\n                class=\"mr10\"\n                v-if=\"isShow !== 0\"\n                >使用选中图片</Button\n              >\n              <Upload\n                :show-upload-list=\"false\"\n                :action=\"fileUrl\"\n                class=\"mr10 mb10\"\n                :before-upload=\"beforeUpload\"\n                :data=\"uploadData\"\n                :headers=\"header\"\n                :multiple=\"true\"\n                :format=\"['jpg', 'jpeg', 'png', 'gif']\"\n                :on-success=\"handleSuccess\"\n                style=\"margin-top: 1px; display: inline-block\"\n              >\n                <Button type=\"primary\">上传图片</Button>\n              </Upload>\n              <!--<Button type=\"success\" @click.stop=\"add\" class=\"mr10\">添加分类</Button>-->\n              <Button type=\"error\" class=\"mr10\" :disabled=\"checkPicList.length === 0\" @click.stop=\"editPicList('图片')\"\n                >删除图片</Button\n              >\n              <i-select :value=\"pids\" placeholder=\"图片移动至\" style=\"width: 250px\" class=\"treeSel\">\n                <i-option v-for=\"(item, index) of list\" :value=\"item.value\" :key=\"index\" style=\"display: none\">\n                  {{ item.title }}\n                </i-option>\n                <Tree\n                  :data=\"treeData2\"\n                  :render=\"renderContentSel\"\n                  ref=\"reference\"\n                  :load-data=\"loadData\"\n                  class=\"treeBox\"\n                ></Tree>\n              </i-select>\n            </Col>\n          </div>\n          <div class=\"pictrueList acea-row\">\n            <Row :gutter=\"24\" class=\"conter\">\n              <div v-show=\"isShowPic\" class=\"imagesNo\">\n                <Icon type=\"ios-images\" size=\"60\" color=\"#dbdbdb\" />\n                <span class=\"imagesNo_sp\">图片库为空</span>\n              </div>\n              <div class=\"acea-row mb10\">\n                <div\n                  class=\"pictrueList_pic mr10 mb10\"\n                  v-for=\"(item, index) in pictrueList\"\n                  :key=\"index\"\n                  @mouseenter=\"enterMouse(item)\"\n                  @mouseleave=\"enterMouse(item)\"\n                >\n                  <p class=\"number\" v-if=\"item.num > 0\">\n                    <Badge :count=\"item.num\" type=\"error\" :offset=\"[11, 12]\">\n                      <a href=\"#\" class=\"demo-badge\"></a>\n                    </Badge>\n                  </p>\n                  <img\n                    :class=\"item.isSelect ? 'on' : ''\"\n                    v-lazy=\"item.satt_dir\"\n                    @click.stop=\"changImage(item, index, pictrueList)\"\n                  />\n                  <div\n                    style=\"display: flex; align-items: center; justify-content: space-between\"\n                    @mouseenter=\"enterLeave(item)\"\n                    @mouseleave=\"enterLeave(item)\"\n                  >\n                    <p style=\"width: 80%\" v-if=\"!item.isEdit\">\n                      {{ item.editName }}\n                    </p>\n                    <Input\n                      size=\"small\"\n                      style=\"width: 80%\"\n                      type=\"text\"\n                      v-model=\"item.real_name\"\n                      v-else\n                      @on-blur=\"bindTxt(item)\"\n                    />\n                    <span\n                      class=\"iconfont iconbianji1\"\n                      @click=\"item.isEdit = !item.isEdit\"\n                      v-if=\"item.isShowEdit\"\n                    ></span>\n                  </div>\n                  <div class=\"nameStyle\" v-show=\"item.realName && item.real_name\">\n                    {{ item.real_name }}\n                  </div>\n                </div>\n              </div>\n              <!--<Col class=\"mb20\" v-bind=\"gridPic\"-->\n              <!--v-for=\"(item, index) in pictrueList\" :key=\"index\" >-->\n              <!--<div class=\"pictrueList_pic\">-->\n              <!--<img :class=\"item.isSelect ? 'on': '' \" v-lazy=\"item.satt_dir\"-->\n              <!--@click.stop=\"changImage(item, index, pictrueList)\"/>-->\n              <!--</div>-->\n              <!--</Col>-->\n            </Row>\n          </div>\n          <div class=\"footer acea-row row-right\">\n            <Page :total=\"total\" show-elevator show-total @on-change=\"pageChange\" :page-size=\"fileData.limit\" />\n          </div>\n        </div>\n      </Col>\n    </Row>\n  </div>\n</template>\n\n<script>\nimport {\n  getCategoryListApi,\n  createApi,\n  fileListApi,\n  categoryEditApi,\n  moveApi,\n  fileUpdateApi,\n} from '@/api/uploadPictures';\nimport Setting from '@/setting';\nimport { getCookies } from '@/libs/util';\nexport default {\n  name: 'uploadPictures',\n  // components: { editFrom },\n  props: {\n    isChoice: {\n      type: String,\n      default: '',\n    },\n    gridBtn: {\n      type: Object,\n      default: null,\n    },\n    gridPic: {\n      type: Object,\n      default: null,\n    },\n    isShow: {\n      type: Number,\n      default: 1,\n    },\n    pageLimit: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      spinShow: false,\n      fileUrl: Setting.apiBaseURL + '/file/upload',\n      modalPic: false,\n      treeData: [],\n      treeData2: [],\n      pictrueList: [],\n      uploadData: {}, // 上传参数\n      checkPicList: [],\n      uploadName: {\n        name: '',\n      },\n      FromData: null,\n      treeId: 0,\n      isJudge: false,\n      buttonProps: {\n        type: 'default',\n        size: 'small',\n      },\n      fileData: {\n        pid: 0,\n        page: 1,\n        limit: this.pageLimit || 18,\n      },\n      total: 0,\n      pids: 0,\n      list: [],\n      modalTitleSs: '',\n      isShowPic: false,\n      header: {},\n      ids: [], // 选中附件的id集合\n    };\n  },\n  mounted() {\n    this.getToken();\n    this.getList();\n    this.getFileList();\n  },\n  methods: {\n    enterMouse(item) {\n      item.realName = !item.realName;\n    },\n    enterLeave(item) {\n      item.isShowEdit = !item.isShowEdit;\n    },\n    // 上传头部token\n    getToken() {\n      this.header['Authori-zation'] = 'Bearer ' + getCookies('token');\n    },\n    // 树状图\n    renderContent(h, { root, node, data }) {\n      let operate = [];\n      if (data.pid == 0) {\n        operate.push(\n          h(\n            'div',\n            {\n              class: ['ivu-dropdown-item'],\n              on: {\n                click: () => {\n                  this.append(root, node, data);\n                },\n              },\n            },\n            '添加分类',\n          ),\n        );\n      }\n      if (data.id !== '') {\n        operate.push(\n          h(\n            'div',\n            {\n              class: ['ivu-dropdown-item'],\n              on: {\n                click: () => {\n                  this.editPic(root, node, data);\n                },\n              },\n            },\n            '编辑分类',\n          ),\n          h(\n            'div',\n            {\n              class: ['ivu-dropdown-item'],\n              on: {\n                click: () => {\n                  this.remove(root, node, data, '分类');\n                },\n              },\n            },\n            '删除分类',\n          ),\n        );\n      }\n      return h(\n        'span',\n        {\n          class: ['ivu-span'],\n          style: {\n            display: 'inline-block',\n            width: '88%',\n            height: '32px',\n            lineHeight: '32px',\n            position: 'relative',\n            color: 'rgba(0,0,0,0.6)',\n            cursor: 'pointer',\n          },\n          on: {\n            mouseenter: () => {\n              this.onMouseOver(root, node, data);\n            },\n            mouseleave: () => {\n              this.onMouseOver(root, node, data);\n            },\n            // click: (e) => {\n            //   this.appendBtn(root, node, data, e);\n            // },\n          },\n        },\n        [\n          h(\n            'span',\n            {\n              on: {\n                click: (e) => {\n                  this.appendBtn(root, node, data, e);\n                },\n              },\n            },\n            data.title,\n          ),\n          h(\n            'div',\n            {\n              style: {\n                display: 'inline-block',\n                float: 'right',\n              },\n            },\n            [\n              h('Icon', {\n                props: {\n                  type: 'ios-more',\n                },\n                style: {\n                  marginRight: '8px',\n                  fontSize: '20px',\n                  display: 'inline',\n                },\n                on: {\n                  click: (e) => {\n                    this.onClick(root, node, data, e);\n                  },\n                },\n              }),\n              h(\n                'div',\n                {\n                  class: ['right-menu ivu-poptip-inner'],\n                  style: {\n                    width: '80px',\n                    position: 'absolute',\n                    zIndex: '9',\n                    top: '0',\n                    right: '0',\n                    display: data.flag2 ? 'block' : 'none',\n                  },\n                },\n                operate,\n              ),\n            ],\n          ),\n        ],\n      );\n    },\n    // renderContent (h, { root, node, data }) {\n    //     let actionData = [];\n    //     if (data.id !== '' && data.pid == 0) {\n    //         actionData.push(h('Button', {\n    //             props: Object.assign({}, this.buttonProps, {\n    //                 icon: 'ios-add'\n    //             }),\n    //             style: {\n    //                 marginRight: '8px',\n    //                 display: data.flag ? 'inline' : 'none'\n    //             },\n    //             on: {\n    //                 click: () => { this.append(root, node, data) }\n    //\n    //             }\n    //         }));\n    //     }\n    //     if (data.id !== '') {\n    //         actionData.push(h('Button', {\n    //             props: Object.assign({}, this.buttonProps, {\n    //                 icon: 'md-create'\n    //             }),\n    //             style: {\n    //                 marginRight: '8px',\n    //                 display: data.flag ? 'inline' : 'none'\n    //             },\n    //             on: {\n    //                 click: () => { this.editPic(root, node, data) }\n    //             }\n    //         }));\n    //         actionData.push(h('Button', {\n    //             props: Object.assign({}, this.buttonProps, {\n    //                 icon: 'ios-remove'\n    //             }),\n    //             style: {\n    //                 display: data.flag ? 'inline' : 'none'\n    //             },\n    //             on: {\n    //                 click: () => { this.remove(root, node, data, '分类') }\n    //             }\n    //         }));\n    //     }\n    //     return h('div', {\n    //         style: {\n    //             display: 'inline-block',\n    //             width: '90%'\n    //         },\n    //         on: {\n    //             mouseenter: () => { this.onMouseOver(root, node, data) },\n    //             mouseleave: () => { this.onMouseOver(root, node, data) }\n    //         }\n    //     }, [\n    //         h('span', [\n    //             h('span', {\n    //                 style: {\n    //                     cursor: 'pointer'\n    //                 },\n    //                 class: ['ivu-tree-title'],\n    //                 on: {\n    //                     click: (e) => { this.appendBtn(root, node, data, e) }\n    //                 }\n    //             }, data.title)\n    //         ]),\n    //         h('span', {\n    //             style: {\n    //                 display: 'inline-block',\n    //                 float: 'right'\n    //             }\n    //         }, actionData)\n    //     ]);\n    // },\n    renderContentSel(h, { root, node, data }) {\n      return h(\n        'div',\n        {\n          style: {\n            display: 'inline-block',\n            width: '90%',\n          },\n        },\n        [\n          h('span', [\n            h(\n              'span',\n              {\n                style: {\n                  cursor: 'pointer',\n                },\n                class: ['ivu-tree-title'],\n                on: {\n                  click: (e) => {\n                    this.handleCheckChange(root, node, data, e);\n                  },\n                },\n              },\n              data.title,\n            ),\n          ]),\n        ],\n      );\n    },\n    // 下拉树\n    handleCheckChange(root, node, data, e) {\n      this.list = [];\n      // this.pids = 0;\n      let value = data.id;\n      let title = data.title;\n      this.list.push({\n        value,\n        title,\n      });\n      if (this.ids.length) {\n        this.pids = value;\n        this.getMove();\n      } else {\n        this.$Message.warning('请先选择图片');\n      }\n      let selected = this.$refs.reference.$el.querySelectorAll('.ivu-tree-title-selected');\n      for (let i = 0; i < selected.length; i++) {\n        selected[i].className = 'ivu-tree-title';\n      }\n      e.path[0].className = 'ivu-tree-title  ivu-tree-title-selected'; // 当前点击的元素\n    },\n    // 移动分类\n    getMove() {\n      let data = {\n        pid: this.pids,\n        images: this.ids.toString(),\n      };\n      moveApi(data)\n        .then(async (res) => {\n          this.$Message.success(res.msg);\n          this.getFileList();\n          this.pids = 0;\n          this.checkPicList = [];\n          this.ids = [];\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 删除图片\n    editPicList(tit) {\n      this.tits = tit;\n      let ids = {\n        ids: this.ids.toString(),\n      };\n      let delfromData = {\n        title: '删除选中图片',\n        url: `file/file/delete`,\n        method: 'POST',\n        ids: ids,\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$Message.success(res.msg);\n          this.getFileList();\n          this.checkPicList = [];\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 鼠标移入 移出\n    onMouseOver(root, node, data) {\n      event.preventDefault();\n      data.flag = !data.flag;\n      if (data.flag2) {\n        data.flag2 = false;\n      }\n    },\n    onClick(root, node, data, e) {\n      e.preventDefault();\n\n      data.flag2 = !data.flag2;\n    },\n    // 点击树\n    appendBtn(root, node, data, e) {\n      e.preventDefault();\n\n      this.treeId = data.id;\n      this.fileData.page = 1;\n      this.getFileList();\n      let selected = this.$refs.tree.$el.querySelectorAll('.ivu-tree-title-selected');\n      for (let i = 0; i < selected.length; i++) {\n        selected[i].className = 'ivu-tree-title';\n      }\n      e.path[0].className = 'ivu-tree-title  ivu-tree-title-selected'; // 当前点击的元素\n    },\n    // 点击添加\n    append(root, node, data) {\n      this.treeId = data.id;\n      this.getFrom();\n    },\n    // 删除分类\n    remove(root, node, data, tit) {\n      this.tits = tit;\n      let delfromData = {\n        title: '删除 [ ' + data.title + ' ] ' + '分类',\n        url: `file/category/${data.id}`,\n        method: 'DELETE',\n        ids: '',\n      };\n      this.$modalSure(delfromData)\n        .then((res) => {\n          this.$Message.success(res.msg);\n          this.getList();\n          this.checkPicList = [];\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    // 确认删除树\n    // submitModel () {\n    //     if (this.tits === '图片') {\n    //         this.getFileList();\n    //         this.checkPicList = [];\n    //     } else {\n    //         this.getList();\n    //         this.checkPicList = [];\n    //     }\n    // },\n    // 编辑树表单\n    editPic(root, node, data) {\n      this.$modalForm(categoryEditApi(data.id)).then(() => this.getList());\n    },\n    // 搜索分类\n    changePage() {\n      this.getList('search');\n    },\n    // 分类列表树\n    getList(type) {\n      let data = {\n        title: '全部图片',\n        id: '',\n        pid: 0,\n      };\n      getCategoryListApi(this.uploadName)\n        .then(async (res) => {\n          this.treeData = res.data.list;\n          this.treeData.unshift(data);\n          if (type !== 'search') {\n            this.treeData2 = [...this.treeData];\n          }\n          this.addFlag(this.treeData);\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    loadData(item, callback) {\n      getCategoryListApi({\n        pid: item.id,\n      })\n        .then(async (res) => {\n          const data = res.data.list;\n          callback(data);\n        })\n        .catch((res) => {});\n    },\n    addFlag(treedata) {\n      treedata.map((item) => {\n        this.$set(item, 'flag', false);\n        this.$set(item, 'flag2', false);\n        item.children && this.addFlag(item.children);\n      });\n    },\n    // 新建分类\n    add() {\n      this.treeId = 0;\n      this.getFrom();\n    },\n    // 文件列表\n    getFileList() {\n      this.fileData.pid = this.treeId;\n      fileListApi(this.fileData)\n        .then(async (res) => {\n          res.data.list.forEach((el) => {\n            el.isSelect = false;\n            el.isEdit = false;\n            el.isShowEdit = false;\n            el.realName = false;\n            el.num = 0;\n            this.editName(el);\n          });\n          this.pictrueList = res.data.list;\n\n          if (this.pictrueList.length) {\n            this.isShowPic = false;\n          } else {\n            this.isShowPic = true;\n          }\n          this.total = res.data.count;\n        })\n        .catch((res) => {\n          this.$Message.error(res.msg);\n        });\n    },\n    pageChange(index) {\n      this.fileData.page = index;\n      this.getFileList();\n      this.checkPicList = [];\n    },\n    // 新建分类表单\n    getFrom() {\n      this.$modalForm(createApi({ id: this.treeId })).then((res) => {\n        this.getList();\n      });\n    },\n    // 上传之前\n    beforeUpload(file) {\n      // if (file.size > 2097152) {\n      //   this.$Message.error(file.name + \"大小超过2M!\");\n      // } else\n      if (!/image\\/\\w+/.test(file.type)) {\n        this.$Message.error('请上传以jpg、jpeg、png等结尾的图片文件'); //FileExt.toLowerCase()\n        return false;\n      }\n      this.uploadData = {\n        pid: this.treeId,\n      };\n      let promise = new Promise((resolve) => {\n        this.$nextTick(function () {\n          resolve(true);\n        });\n      });\n      return promise;\n    },\n    // 上传成功\n    handleSuccess(res, file, fileList) {\n      if (res.status === 200) {\n        this.$Message.success(res.msg);\n        this.fileData.page = 1;\n        this.getFileList();\n      } else {\n        this.$Message.error(res.msg);\n      }\n    },\n    // 关闭\n    cancel() {\n      this.$emit('changeCancel');\n    },\n    // 选中图片\n    changImage(item, index, row) {\n      let activeIndex = 0;\n      if (!item.isSelect) {\n        item.isSelect = true;\n        this.checkPicList.push(item);\n      } else {\n        item.isSelect = false;\n        this.checkPicList.map((el, index) => {\n          if (el.att_id == item.att_id) {\n            activeIndex = index;\n          }\n        });\n        this.checkPicList.splice(activeIndex, 1);\n      }\n\n      this.ids = [];\n      this.checkPicList.map((item, i) => {\n        this.ids.push(item.att_id);\n      });\n      this.pictrueList.map((el, i) => {\n        if (el.isSelect) {\n          this.checkPicList.filter((el2, j) => {\n            if (el.att_id == el2.att_id) {\n              el.num = j + 1;\n            }\n          });\n        } else {\n          el.num = 0;\n        }\n      });\n    },\n    // 点击使用选中图片\n    checkPics() {\n      if (this.isChoice === '单选') {\n        if (this.checkPicList.length > 1) return this.$Message.warning('最多只能选一张图片');\n        this.$emit('getPic', this.checkPicList[0]);\n      } else {\n        let maxLength = this.$route.query.maxLength;\n        if (maxLength != undefined && this.checkPicList.length > Number(maxLength))\n          return this.$Message.warning('最多只能选' + maxLength + '张图片');\n        this.$emit('getPicD', this.checkPicList);\n      }\n    },\n    editName(item) {\n      let it = item.real_name.split('.');\n      let it1 = it[1] == undefined ? [] : it[1];\n      let len = it[0].length + it1.length;\n      item.editName = len < 10 ? item.real_name : item.real_name.substr(0, 2) + '...' + item.real_name.substr(-5, 5);\n    },\n    // 修改图片文字上传\n    bindTxt(item) {\n      if (item.real_name == '') {\n        this.$Message.error('请填写内容');\n      }\n      fileUpdateApi(item.att_id, {\n        real_name: item.real_name,\n      })\n        .then((res) => {\n          this.editName(item);\n          item.isEdit = false;\n          this.$Message.success(res.msg);\n        })\n        .catch((error) => {\n          this.$Message.error(error.msg);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"stylus\">\n.nameStyle {\n  position: absolute;\n  white-space: nowrap;\n  z-index: 9;\n  background: #eee;\n  height: 20px;\n  line-height: 20px;\n  color: #555;\n  border: 1px solid #ebebeb;\n  padding: 0 5px;\n  left: 56px;\n  bottom: -18px;\n}\n\n.iconbianji1 {\n  font-size: 13px;\n}\n\n/deep/.ivu-badge-count {\n  margin-top: 18px !important;\n  margin-right: 19px !important;\n}\n\n/deep/ivu-tree-title-selected:hover {\n  color: unset;\n  background-color: unset;\n}\n\n/deep/.ivu-tree-title {\n  padding: 0;\n  // width: 200px;\n  width: 100%;\n}\n\n/deep/.ivu-span {\n  padding: 0;\n  display: flex !important;\n  justify-content: space-between;\n}\n\n/deep/.ivu-tree ul li {\n  margin: 0;\n}\n\n/deep/.ivu-tree-arrow {\n  width: 17px;\n  color: #626262;\n}\n\n/deep/.ivu-span:hover {\n  background: #F5F5F5;\n  color: rgba(0, 0, 0, 0.4) !important;\n}\n\n/deep/.ivu-tree-arrow i {\n  vertical-align: bottom;\n}\n\n.Nav /deep/.ivu-icon-ios-arrow-forward:before {\n  content: '\\F341' !important;\n  font-size: 20px;\n}\n\n/deep/.ivu-btn-icon-only.ivu-btn-small {\n  padding: unset !important;\n}\n\n.selectTreeClass {\n  background: #d5e8fc;\n}\n\n.treeBox {\n  width: 100%;\n  height: 100%;\n\n  >>> .ivu-tree-title-selected, .ivu-tree-title-selected:hover {\n    color: #2D8cF0 !important;\n    background-color: #fff !important;\n  }\n\n  >>> .ivu-btn-icon-only {\n    width: 20px !important;\n    height: 20px !important;\n  }\n\n  >>> .ivu-tree-title:hover {\n    color: #2D8cF0 !important;\n    background-color: #fff !important;\n  }\n}\n\n.pictrueList_pic {\n  position: relative;\n  width: 100px;\n  cursor: pointer;\n\n  img {\n    width: 100%;\n    height: 100px;\n  }\n\n  p {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    height: 20px;\n    text-align: center;\n  }\n\n  .number {\n    height: 33px;\n  }\n\n  .number {\n    position: absolute;\n    right: 0;\n    top: 0;\n  }\n}\n\n.trees-coadd {\n  width: 100%;\n  border-radius: 4px;\n  overflow: hidden;\n  position: relative;\n\n  .scollhide {\n    overflow-x: hidden;\n    overflow-y: scroll;\n    padding: 10px 0 10px 0;\n    box-sizing: border-box;\n\n    .trees {\n      width: 100%;\n      height: 374px;\n    }\n  }\n\n  .scollhide::-webkit-scrollbar {\n    display: none;\n  }\n}\n\n.treeSel >>>.ivu-select-dropdown-list {\n  padding: 0 5px !important;\n  box-sizing: border-box;\n  width: 200px;\n}\n\n.imagesNo {\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n  align-items: center;\n  margin: 65px 0;\n\n  .imagesNo_sp {\n    font-size: 13px;\n    color: #dbdbdb;\n    line-height: 3;\n  }\n}\n\n.Modal {\n  width: 100%;\n  height: 100%;\n  background: #fff !important;\n}\n\n.Nav {\n  width: 100%;\n  border-right: 1px solid #eee;\n}\n\n.colLeft {\n  padding-right: 0 !important;\n  height: 100%;\n}\n\n.conter {\n  width: 100%;\n  height: 100%;\n  margin-left: 0 !important;\n}\n\n.conter .bnt {\n  width: 100%;\n  padding: 0 13px 10px 8px;\n  box-sizing: border-box;\n}\n\n.conter .pictrueList {\n  padding-left: 6px;\n  width: 100%;\n  max-width: 1200px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  // height: 300px;\n}\n\n.conter .pictrueList img {\n  width: 100%;\n  border: 2px solid #fff;\n}\n\n.conter .pictrueList img.on {\n  border: 2px solid #5FB878;\n}\n\n.conter .footer {\n  padding: 0 20px 10px 20px;\n}\n\n.demo-badge {\n  width: 42px;\n  height: 42px;\n  background: transparent;\n  border-radius: 6px;\n  display: inline-block;\n}\n\n.bnt /deep/ .ivu-tree-children {\n  padding: 5px 0;\n}\n\n.trees-coadd /deep/ .ivu-tree-children .ivu-tree-arrow {\n  line-height: 25px;\n}\n</style>\n"]}]}