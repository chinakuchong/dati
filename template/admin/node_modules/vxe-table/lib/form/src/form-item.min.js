"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=_interopRequireDefault(require("../../v-x-e-table")),_utils=require("../../tools/utils"),_util=require("./util"),_render=require("./render"),_vn=require("../../tools/vn");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var props={title:String,field:String,size:String,span:[String,Number],align:String,titleAlign:{type:String,default:null},titleWidth:{type:[String,Number],default:null},titleColon:{type:Boolean,default:null},titleAsterisk:{type:Boolean,default:null},className:[String,Function],titleOverflow:{type:[Boolean,String],default:null},titlePrefix:Object,titleSuffix:Object,resetValue:{default:null},visible:{type:Boolean,default:null},visibleMethod:Function,folding:Boolean,collapseNode:Boolean,itemRender:Object},watch={};Object.keys(props).forEach(function(t){watch[t]=function(e){this.itemConfig.update(t,e)}});var renderItem=function(e,t,l,i){var n,r=t._e,o=t.rules,s=t.data,a=t.collapseAll,u=t.validOpts,d=t.titleAlign,f=t.titleWidth,c=t.titleColon,m=t.titleAsterisk,v=t.titleOverflow,g=l.title,p=l.folding,_=l.visible,x=l.field,h=l.collapseNode,N=l.itemRender,q=l.showError,b=l.errRule,y=l.className,S=l.titleOverflow,C=(0,_utils.isEnableConf)(N)?_vXETable.default.renderer.get(N.name):null,O=C?C.itemClassName:"",I=l.span||t.span,U=l.align||t.align,w=_xeUtils.default.eqNull(l.titleAlign)?d:l.titleAlign,d=_xeUtils.default.eqNull(l.titleWidth)?f:l.titleWidth,f=_xeUtils.default.eqNull(l.titleColon)?c:l.titleColon,c=_xeUtils.default.eqNull(l.titleAsterisk)?m:l.titleAsterisk,m=_xeUtils.default.isUndefined(S)||_xeUtils.default.isNull(S)?v:S,v="title"===m,S=!0===m||"tooltip"===m,m=v||S||"ellipsis"===m,A={data:s,field:x,property:x,item:l,$form:t};if(!1===_)return r();!o||(F=o[x])&&(n=F.some(function(e){return e.required}));var F=[];i&&i.default?F=t.callSlot(i.default,A,e):C&&C.renderItemContent?F=(0,_vn.getSlotVNs)(C.renderItemContent.call(t,e,N,A)):C&&C.renderItem?F=(0,_vn.getSlotVNs)(C.renderItem.call(t,e,N,A)):x&&(F=["".concat(_xeUtils.default.get(s,x))]);S=S?{mouseenter:function(e){t.triggerTitleTipEvent(e,A)},mouseleave:t.handleTitleTipLeaveEvent}:{};return e("div",{class:["vxe-form--item",l.id,I?"vxe-col--".concat(I," is--span"):"",y?_xeUtils.default.isFunction(y)?y(A):y:"",O?_xeUtils.default.isFunction(O)?O(A):O:"",{"is--title":g,"is--colon":f,"is--asterisk":c,"is--required":n,"is--hidden":p&&a,"is--active":(0,_util.isActivetem)(t,l),"is--error":q}]},[e("div",{class:"vxe-form--item-inner"},[g||i&&i.title?e("div",{class:["vxe-form--item-title",w?"align--".concat(w):null,{"is--ellipsis":m}],style:d?{width:isNaN(d)?d:"".concat(d,"px")}:null,attrs:{title:v?(0,_utils.getFuncText)(g):null},on:S},(0,_render.renderTitle)(e,t,l)):null,e("div",{class:["vxe-form--item-content",U?"align--".concat(U):null]},F.concat([h?e("div",{class:"vxe-form--item-trigger-node",on:{click:t.toggleCollapseEvent}},[e("span",{class:"vxe-form--item-trigger-text"},a?_conf.default.i18n("vxe.form.unfolding"):_conf.default.i18n("vxe.form.folding")),e("i",{class:["vxe-form--item-trigger-icon",a?_conf.default.icon.FORM_FOLDING:_conf.default.icon.FORM_UNFOLDING]})]):null,b&&u.showMessage?e("div",{class:"vxe-form--item-valid",style:b.maxWidth?{width:"".concat(b.maxWidth,"px")}:null},b.message):null]))])])},_default={name:"VxeFormItem",props:props,inject:{$xeform:{default:null},$xeformgather:{default:null}},provide:function(){return{$xeformitem:this,$xeformiteminfo:this}},data:function(){return{itemConfig:null}},watch:watch,mounted:function(){(0,_util.assemItem)(this)},created:function(){this.itemConfig=(0,_util.createItem)(this.$xeform,this)},destroyed:function(){(0,_util.destroyItem)(this)},render:function(e){var t=this.$xeform;return t&&t.customLayout?renderItem(e,t,this.itemConfig,this.$scopedSlots):e("div")}};exports.default=_default;